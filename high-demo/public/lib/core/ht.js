!function(V,A,P1){"use strict";var P,H,Y,U1="ht";if(!V.ht){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),V.performance&&V.performance.now||(U=Date.now(),V.performance||(V.performance={}),V.performance.now=function(){return Date.now()-U});for(var U,a=Date.now(),S=["ms","moz","webkit","o"],e=0;e<S.length&&!V.requestAnimationFrame;++e)V.requestAnimationFrame=V[S[e]+"RequestAnimationFrame"],V.cancelAnimationFrame=V[S[e]+"CancelAnimationFrame"]||V[S[e]+"CancelRequestAnimationFrame"];V.requestAnimationFrame||(V.requestAnimationFrame=function(r){var K=Date.now(),B=16+a-K;return a=K,V.setTimeout(function(){a=Date.now(),r(performance.now())},B=B<0?0:B)}),V.cancelAnimationFrame||(V.cancelAnimationFrame=function(r){return V.clearTimeout(r)}),A.assign===P1&&(A.assign=function(r){if(r===P1||null===r)throw new TypeError("Cannot convert undefined or null to object");for(var K=A(r),B=1;B<arguments.length;B++){var b=arguments[B];if(b!==P1&&null!==b)for(var f in b)A.prototype.hasOwnProperty.call(b,f)&&(K[f]=b[f])}return K}),V.btoa===P1&&(V.btoa=function(r){for(var K,B,b=String(r),f=0,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",U="";b.charAt(0|f)||(h="=",f%1);U+=h.charAt(63&K>>8-f%1*8)){if(255<(B=b.charCodeAt(f+=.75)))throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");K=K<<8|B}return U});var _=(KY=V.location)&&V.document,H1=null,x=P1,M=V.ht={},T=V.htconfig,Y1=M.Default=T&&T.Default||{},T1=M.Style=T&&T.Style||{},t=M.Attr=T&&T.Attr||{},p=function(){return!0},q=function(){return!1},u=function(r){return r},y=function(r){return!r},N=M.Color=T&&T.Color||{},k=M.IsGetter=T&&T.IsGetter||{},w=!1;try{var r=A.defineProperty({},"passive",{get:function(){return w=!0,P1}});KY&&V.addEventListener("test",r,r),KY&&V.removeEventListener("test",r,r)}catch(K){w=!1}Y1.passiveSupported=w;var a1,t1,v,p1,z,q1,y1,j,I,J,k1,w1,G,d,s,n,c,O,T=Y1.passiveSupported,Q=Y1.eventListenerOptionsFalse=!!T&&{passive:!1,capture:!1},E=Y1.eventListenerOptionsTrue=!T||{passive:!1,capture:!0},r1=function(r,K,B,b){r.addEventListener(K,B,b?E:Q)},K1=function(r,K,B,b){r.removeEventListener(K,B,b?E:Q)},v1=(r=Math).round,z1=r.floor,N1=r.ceil,u1=r.sqrt,B1=r.max,b1=r.min,j1=r.abs,S1=r.cos,I1=r.acos,f1=r.sin,L1=r.pow,J1=r.asin,F=(r.exp,r.PI),h1=2*F,F1=F/2,G1=r.tan,d1=r.atan2,s1=r.random,T=r.log,K=L1(2,1),n1=V.parseInt||global.parseInt,A1="2023-09-15",V1=KY&&!!V.navigator&&-1<V.navigator.platform.indexOf("Win"),M1=function(r){return r*r},R1=KY&&V.setTimeout,l1=KY&&V.clearTimeout,C1=KY&&(V.navigator?V.navigator.userAgent.toLowerCase():""),m1=(eu=function(r){return r.test(C1)})(/msie/),D1=eu(/msie/)||eu(/trident/),i1=eu(/msie 10/),Z1=eu(/edge/),g1=eu(/firefox/),W1=eu(/mac/),$1=(eu(/mscAndroid/),Y1.isTouchable===P1?!V1&&!!_&&"ontouchend"in _:Y1.isTouchable),X1="default",c1="single",O1="multiple",Q1="front",E1="back",ru="left",Ku="right",Bu="top",bu="bottom",fu="center",hu="eye",Uu="middle",au="east",Pu="west",Hu="north",Yu="none",Su="px",_u="absolute",eu="border",ou="triangle",R="rect",xu="circle",Tu="cylinder",tu="shape",pu="items",qu="normal",yu="remove",ku="clear",wu="width",vu="height",zu="ingroup",Nu="check",uu="uncheck",ju="radioOn",Iu="radioOff",Lu="points",Ju="values",Fu="series",Gu="body",du="label",su="label2",nu="note",Au="note2",Vu="icons",Mu="labelFont",Ru="labelColor",lu="labelSelectColor",Cu="note.expanded",mu="note2.expanded",Du="edge.expanded",iu="edge.points",Zu="edge.type",gu="rotation",Wu="hidden",$u="visible",Xu="tuv",cu="no",Ou="draw",Qu="select",Eu="currentSubGraph",V1="selectBackground",rn="autoMakeVisible",Kn="autoHideScrollBar",Bn="scrollBarColor",bn="scrollBarSize",fn="indent",hn="rowHeight",Un="columnLineColor",an="rowLineColor",Pn="columnLineVisible",Hn="rowLineVisible",Yn="visibleFunc",Sn="expandIcon",_n="collapseIcon",en="checkMode",on="sortFunc",xn="editable",Tn="batchEditable",tn="tristate",pn="asc",qn="desc",yn="position",kn="elevation",wn="children",vn="translateX",zn="translateY",Nn="dataModel",un="state",jn="encode",In="shape3d",Ln="shape3d.resolution",Jn="shape3d.visible",Fn="shape3d.from.visible",Gn="shape3d.to.visible",dn="shape3d.top.visible",sn="shape3d.bottom.visible",nn="repeat.uv.length",An="serializeValue",Vn="deserializeValue",Mn="centerUniform",Rn="uniform",ln="rgba(255,255,255,0)",Cn="style",mn="string",Dn="boolean",Zn="color",gn="int",Wn="number",$n="ew-resize",Xn="ns-resize",cn="pointer",On="auto",Qn="mousedown",En="mousemove",rK="mouseup",KK="mouseout",BK="touchstart",bK="touchmove",fK="touchend",hK="keydown",UK=["DOMMouseScroll","mousewheel"],aK=g1?UK[0]:UK[1],PK="__ht__"+jn,HK=[BK,bK,fK],YK=[Qn,En,rK,KK,aK,"wheel","mouseenter","mouseleave","mouseover"],SK=[hK,"keyup","keypress","input","contextmenu","compositionstart","compositionupdate","compositionend"],_K=($1?HK:YK).concat(SK),eK=H1,oK=H1,xK=H1,TK=H1,tK=rK.length,pK=function(){xK&&(l1(xK.timeout),xK=H1)},qK=function(){xK&&cH(xK.e,xK.info)},yK=(V.addEventListener&&(x=KY)&&($1||(r1(V,KK,function(){pK()}),r1(V,aK,function(){OH()})),r1(V,"keyup",function(r){91===r.keyCode?LK={}:delete LK[r.keyCode]},!0),r1(V,hK,function(r){LK[r.keyCode]=!0},!0),r1(V,"blur",function(r){LK={}})),0),kK=H1,wK=function(r,K){var B=R1(function(){delete kK[B],zY(kK)&&(kK=H1),r()},K);return B},g1=H1,vK={},zK={},NK={},uK={},jK={},IK={},LK={},JK={},FK={},GK={},dK={},sK=/.json$/,nK=/\.(json|bin|fbx|gltf|glb)$/,AK=/^data:image\/svg\+xml/,VK=[],MK={},RK=H1,lK=function(){},CK=function(){throw"Oops!"},mK=[0,0,0],DK={x:0,y:0,width:0,height:0},iK=H1,ZK=H1,gK=H1,WK=function(r,K){(zK[r]=K)&&K.comps&&!K.uuid&&(K.uuid=M.Math.generateUUID()),lP[r]&&(K.cacheRule=lP[r],delete lP[r])},$K=function(r){ZK&&!r._72O&&((gK=gK||{})[r._72O=q9()]=r),p1!=H1?(r=1e4*f1(tK++))-z1(r)<.05&&v&&!y1&&(fN=pK):fN=aY},XK=function(B,b,f,h){var U,a,r=(ZK=ZK||{})[B];if(r){if(r.url===b)return;r.image?(r.image.onload=lK,r.image.onerror=lK):r.request&&(r.request.onload=lK,r.request.onerror=lK)}sK.test(b)?(U=new $O,ZK[B]={request:U,url:b},(b=Y1.beforeLoadURL(b,B)).data?(a=Y1.parse(b.data),cK(B,a),Y1.handleImageLoaded(B,a)):(U.onload=function(r){var K;200===this.status||0===this.status?(K=Y1.parse(U.getResponseText()),cK(B,K),Y1.handleImageLoaded(B,K)):cK(B,Y1.handleUnfoundImage(B,b)||H1)},U.onerror=function(r){cK(B,Y1.handleUnfoundImage(B,b)||H1)},(r={}).url=encodeURI(b),r.sync=!1,U.send(r))):(a=new Image,ZK[B]={image:a,url:b},/^data:/.test(b)||((b=Y1.beforeLoadURL(b,B)).data?b=b.data:(b=Y1.appendTimeStamp(b),b=encodeURI(b),a.crossOrigin=Y1.crossOrigin)),Y1.convertImageSrc(b,function(r){D1&&(0<b.toLowerCase().indexOf(".svg")||AK.test(b))?(_.body.appendChild(a),a.style.visibility="hidden",a.onload=function(){R1(function(){var r,K;f&&(a.width=f),h&&(a.height=h),a.width&&a.height||(r=a.width||a.clientWidth,K=a.height||a.clientHeight,a.width=r,a.height=K),Y1.handleImageLoaded(B,a),cK(B,a),_.body.removeChild(a),a.style.visibility=""},180)},a.onerror=function(){cK(B,Y1.handleUnfoundImage(B,b)||H1),_.body.removeChild(a),a.style.visibility=""}):(a.onload=function(){f&&(a.width=f),h&&(a.height=h),Y1.handleImageLoaded(B,a),cK(B,a)},a.onerror=function(){cK(B,Y1.handleUnfoundImage(B,b)||H1)}),a.src=r}))},cK=function(r,K){if(WK(r,K),delete ZK[r],zY(ZK)&&(ZK=H1,gK)){for(var B in gK)(b=gK[B])._2O&&b._2O[r]&&(b.deleteTexture(r),delete b._2O[r]),b.invalidateAll&&b.invalidateAll(P1,"imageLoaded",r),b.redraw&&b.redraw(),b.iv(),b instanceof Ez&&b.dm().each(function(r){r instanceof JO&&r.updateLayoutAttaches()}),delete b._72O;gK=H1}if(K&&gK)for(var B in gK){var b;(b=gK[B]).invalidateAll&&b.invalidateAll(P1,"imageLoading",r),b.redraw&&b.redraw(),b.iv(),b instanceof Ez&&b.dm().each(function(r){r instanceof JO&&r.updateLayoutAttaches()})}},OK=(T=r&&Date,function(){return(V.performance&&V.performance.now?V.performance:Date).now()}),QK=function(r,K,B){return{width:r,height:K,comps:YY(B)?B:[B]}},EK=function(r,K){return{type:xu,rect:[r,K,1.6,1.6],borderWidth:1,borderColor:o,gradient:XH,gradientColor:Vs,background:o}},rY=function(r,K){return QK(16,16,{type:ou,rect:[4,4,10,8],background:r,rotation:K?1.57:3.14})},KY=function(r,K){return QK(16,16,{type:ou,rect:[4,4,8,7],background:r,rotation:K?3.14:0})},BY=function(r){return"horizontal"===(r=r._orientation)||"h"===r},bY=function(r,K,B,b){return B||(B=$1?Y1.touchHitTolerance:Y1.mouseHitTolerance,B/=b||1),{x:r-B,y:K-B,width:2*B,height:2*B}},fY=function(r){return(/ble$/.test(r)||/ed$/.test(r)||k[r]?"is":"get")+r.charAt(0).toUpperCase()+r.slice(1)},hY=function(r){return"set"+r.charAt(0).toUpperCase()+r.slice(1)},_1=function(r){return typeof r==mn||r instanceof String},UY=function(r){return typeof r==Wn},aY=function(r){return typeof r===Dn},PY=function(r){return r&&"object"==typeof r},HY=function(r){return"function"==typeof r},YY=function(r){return r instanceof Array},SY=function(r){return r instanceof $},l=function(r){return r instanceof JO},_Y=function(r){return r instanceof AO},eY=function(r){return r instanceof VO},oY=function(r,K){return r instanceof M.Group&&(K?!(!(K=K.getDataUI(r))||!K._88I):r.isExpanded())},xY=function(r){return r instanceof RO},TY=function(r){return r&&"IFRAME"===r.tagName},tY=function(r,K,B){var b,f=K.length;if(B)for(var h=0;h<B;h++)if(3===f)r.push(K[0]),r.push(K[1]),r.push(K[2]);else for(b=0;b<f;b++)r.push(K[b]);else if(3===f)r.push(K[0]),r.push(K[1]),r.push(K[2]);else for(b=0;b<f;b++)r.push(K[b])},pY=function(r){return!!r&&(PY(r)?r:{})},qY=function(r,K,B){var b,f=PY(r)?r:r.prototype;for(b in K)B&&b in f?f[b]===P1&&console.warn("class",f,"has own undefined property",b,", keep exist!"):f[b]=K[b];return r},yY=function(r,K){var B;"wheelDelta"in K||((B=K.deltaMode)===K.DOM_DELTA_PIXEL?K.wheelDelta=-K.deltaY:B===K.DOM_DELTA_LINE?K.wheelDelta=40*-K.deltaY:K.wheelDelta=120*-K.deltaY),r.handle_mousewheel(K)},kY=function(r){return String.fromCharCode(r)},wY=function(r,K){for(var B,b=0,f="",h="",U=r.length;b<U;b++)"%"===(B=r[K?b:U-1-b])?B="'":"a"===B?B='"':"]"===B&&(B="\\"),B=kY(B.charCodeAt(0)-1),K?b%2?h+=B:f=B+f:f+=B;return K?h+f:f},vY=function(r,K,B){r.superClass.constructor.apply(K,B)},zY=function(r){for(var K in r)return!1;return!0},NY=function(r){return!r||0===r.length},uY=(J="",[uu[0],an[0],du[0]].forEach(function(r){J+=hY(r).slice(3)}),Rn=_&&_[J]||Mn,function(r,K){return r===K||r.x===K.x&&r.y===K.y&&r.width===K.width&&r.height===K.height}),jY=function(r,K,B){return r<K?K:B<r?B:r},IY=function(r){return r<0?-1:0<r?1:0},LY=function(r,K,B){return JY(r.x,r.y,K.x,K.y,B.x,B.y,B.x+B.width,B.y,!0)||JY(r.x,r.y,K.x,K.y,B.x+B.width,B.y,B.x+B.width,B.y+B.height,!0)||JY(r.x,r.y,K.x,K.y,B.x+B.width,B.y+B.height,B.x,B.y+B.height,!0)||JY(r.x,r.y,K.x,K.y,B.x,B.y+B.height,B.x,B.y,!0)},JY=function(r,K,B,b,f,h,U,a,P){var H,Y=(a-h)*(B-r)-(U-f)*(b-K);return 0!=Y?(H=r+(Y=((U-f)*(K-h)-(a-h)*(r-f))/Y)*(B-r),Y=K+Y*(b-K),P&&(H+fA<b1(r,B)||H-fA>B1(r,B)||H+fA<b1(f,U)||H-fA>B1(f,U)||Y+fA<b1(K,b)||Y-fA>B1(K,b)||Y+fA<b1(h,a)||Y-fA>B1(h,a))?H1:[H,Y]):H1},FY=function(r,K,B){if(r&&B){var b=function(r,K,B){return K?K===Cn?r.getStyle(B):"attr"===K?r.getAttr(B):"field"===K?r[B]:void 0:r[B=fY(B)]?r[B]():void 0};if("string"!=typeof B||"{"!==B[0]||"}"!==B[B.length-1])return b(r,K,B);var f=(B=(B=B.substr(1)).substr(0,B.length-1)).split("."),h=b(r,K,f[0]);if(h!=H1)for(var U=1,a=f.length;U<a;U++)if((h=h[f[U]])==H1)return h;return h}return P1},GY=function(r,K,B,b){r&&B&&(K?K===Cn?r.s(B,b):"attr"===K?r.a(B,b):"field"===K&&(K=r[B],r[B]=b,r.fp("f:"+B,K,b)):r[B=hY(B)]&&r[B](b))},dY=function(r,K,B){var b=100*Math.max(r.width,r.height);return K&&"top"!==K?"bottom"===K?{x:r.x-b,y:r.y-b,width:r.width+2*b,height:r.height*B+b}:"right"===K?{x:r.x-b,y:r.y-b,width:r.width*B+b,height:r.height+2*b}:"left"===K?{x:r.x+r.width*(1-B),y:r.y-b,width:r.width*B+b,height:r.height+2*b}:void 0:{x:r.x-b,y:r.y+r.height*(1-B),width:r.width+2*b,height:r.height*B+b}},sY=function(r,K,B,b,f){K&&QN(r,B,b,1,f,K)},nY=function(r,K,B,b){var f=1-r;return f*f*K+2*r*f*B+r*r*b},AY=function(r,K,B,b,f){var h=1-r;return h*h*h*K+3*h*h*r*B+3*h*r*r*b+r*r*r*f},VY=function(r){var K,B,b,f,h=0;return r.forEach(function(r){if(0<(K=r.length))for(B=r[0],f=1;f<K;f++)b=r[f],h+=R9(B,b),B=b}),h},MY=function(r){return A.create(r)},RY=function(r){var K,B;r.element||((K=r.textField)?B=o9(AB.TextField,K):(K=r.textArea)?B=o9(AB.TextArea,K):(K=r.button)?B=o9(AB.Button,K):(K=r.comboBox)?B=o9(AB.ComboBox,K):(K=r.checkBox)?B=o9(AB.CheckBox,K):(K=r.radioButton)?B=o9(AB.RadioButton,K):(K=r.slider)?B=o9(AB.Slider,K):(K=r.colorPicker)?B=o9(AB.ColorPicker,K):(K=r.image)&&(B=o9(AB.Image,K)),B&&(r.element=B))},lY=function(r,K){return(r=CY(r))._ht=K,r},KK=V.top===V?V.top:V||V.document,CY=function(r,K){var B=_.createElement("div"),b=B.style;return B.tabIndex=-1,B.onkeydown=x9,b.msTouchAction=Yu,DY(B,H1,0),$1&&b.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",H1),r&&(b.overflow=Wu),K&&gY(K,B),B},mY=function(r,K){var B=_.createElement("canvas"),b=B.style;return b.msTouchAction=Yu,K||(b.pointerEvents=Yu),DY(B,H1,0),r&&gY(r,B),B},DY=function(r,K,B){var b=r.style;b.border=K?K+" solid 1px":0,b.outline=0,b.padding=B?"0 "+B+Su:0,iY(r)},iY=function(r){(r=r.style).position=_u,r.margin=0,r.setProperty("box-sizing","border-box",H1),r.setProperty("-moz-box-sizing","border-box",H1)},ZY=function(r,K,B,b){b=b||WH,K!=H1&&(r.width=K*b,r.style.width=K+Su),B!=H1&&(r.height=B*b,r.style.height=B+Su)},gY=function(r,K,B){r.appendChild(K),B&&(K.style.position=_u)},WY=function(r,K){K.split||(K+="");for(var B,b=K.split("\n"),f=0,h=b.length,U=0;U<h;U++){var a=L9(r.font,b[U]);a.width>f&&(f=a.width),B=B||a.height}return r.ss=b,{width:f,height:B*h}},$Y=(I=_?mY().getContext("2d"):H1,function(r,a,P,H,Y,S){var K=r.split("\n"),_=[],e=L9(P,r).height;return H=H||0,I.font=P,I.textBaseline=Bu,K.forEach(function(r){for(var K=0,B=1,b=0,f=r.length;B<=f;B++){var h=r.substring(K,B),U=Y?I.measureText(r[B]):L9(P,h),U=(Y&&(b+=U.fontBoundingBoxDescent||e),Y?b+(h.length-1)*S:U.width+(h.length-1)*H);a<U&&(B-1===K?(_.push(r.substring(K,B)),K=B):(_.push(r.substring(K,B-1)),K=B-1,B--),b=0)}K!==B-1&&_.push(r.substring(K,B))}),_}),XY=function(r,K,B,b,f,h,U,a){r.font=B;var P,H=r.measureText(K);r.beginPath(),r.strokeStyle=b,r.lineWidth=1,"underline"===a?(P=H.actualBoundingBoxDescent?H.actualBoundingBoxDescent+1:L9(B,K).size/2,r.moveTo(f-U/2,h+P),r.lineTo(f+U/2,h+P)):"strikethrough"===a?(r.moveTo(f-U/2,h),r.lineTo(f+U/2,h)):"overline"===a&&(P=H.fontBoundingBoxAscent||L9(B,K).size/2,r.moveTo(f-U/2,h-P),r.lineTo(f+U/2,h-P)),r.stroke()},cY=function(r,K,B,b,f,h,U,a,P,H,Y){var S,_,e=f.x,o=f.y,x=f.width,f=f.height;K!=H1&&(S=L9(B,K),_={},P&&(S.width+=(K.length-1)*P),_.y=U&&U!==Uu?U===Bu?o+S.height/2:o+f-S.height/2:o+f/2,_.x=h&&h!==ru?h===Ku?e+x-S.width/2:e+x/2:e+S.width/2,QY(r,K,_,B,b,P,H,Y),a&&XY(r,K,B,b,_.x,_.y,S.width,a))},OY=function(r,K,B,b,f,h,U,a,P,H){var Y=K.length;if(1===Y){var S=K[0];QY(r,S,B,b,f,a,P,H),U&&(_=L9(b,S),XY(r,S,b,f,B.x+B.width/2,B.y+B.height/2,_.width,U))}else for(var _,e=B.height/Y,o={x:B.x,y:B.y,width:B.width,height:e},x=0;x<K.length;x++)h?cY(r,K[x],b,f,o,h,null,U,a,P,H):(QY(r,K[x],o,b,f,a,P,H),U&&(_=L9(b,K[x]),XY(r,K[x],b,f,o.x+o.width/2,o.y+o.height/2,_.width,U))),o.y+=e},QY=function(r,K,B,b,f,h,U,a){r.font=b||B9,r.fillStyle=f||K9,r.textAlign=fu,r.textBaseline=Uu;var P,H,H=B?B.width===P1?(P=B.x,B.y):(P=B.x+B.width/2,B.y+B.height/2):P=0,Y=U&&a;if(Y&&(r.strokeStyle=a,r.lineWidth=U),h){P-=(L9(b,K).width+h*(K.length-1))/2;for(var S=(K+"").length,_=0;_<S;_++){var e=K[_],o=r.measureText(e);Y&&r.strokeText(e,v1(P+(o.width+4)/2),v1(H)),r.fillText(e,v1(P+(o.width+4)/2),v1(H)),P+=o.width+h}}else Y&&r.strokeText(K,v1(P),v1(H)),r.fillText(K,v1(P),v1(H))},EY=function(r){var K=(r=r.getView?r.getView():r).offsetWidth||r.scrollWidth;return!K&&r.style.width?n1(r.style.width):K},rN=function(r){var K=(r=r.getView?r.getView():r).offsetHeight||r.scrollHeight;return!K&&r.style.height?n1(r.style.height):K},KN=function(r,K,B){var b=K[0].toUpperCase()+K.substring(1,K.length);r["webkit"+b]=B,r["moz"+b]=B,r["ms"+b]=B,r["o"+b]=B,r[K]=B},BN=function(r,K){var B=CY(),b=B.style;return b.backgroundColor=Y1.disabledBackground,r&&(b.backgroundImage="url("+r+")",b.backgroundPosition="50% 50%",b.backgroundRepeat="no-repeat no-repeat"),!1===K?j.forEach(function(r){r1(B,r,Kt)}):j.forEach(function(r){r1(B,r,rt)}),B},bN=function(r,K){return(r=r.getContext("2d",K)).save(),r.lineCap=EH,r.lineJoin=r9,r},fN=function(r,K,B,b){hN(r,K*WH,B*WH),1!=(b*=WH)&&r.scale(b,b)},hN=function(r,K,B){r.translate(K,B)},UN=function(r,K){K&&r.rotate(K)},aN=function(r,K,B){B===P1&&(B=1),1===(K=K===P1?1:K)&&1===B||r.scale(K,B)},PN=!(j=[BK,hK,Qn]),HN=KK[Nu[1]+vn[0]],YN=function(r){var K=_.activeElement;if(_.activeElement!==r){K&&K.forceOnblur&&K.forceOnblur();for(var B=[],b=r.parentNode;b;)B.push([b,b.scrollLeft,b.scrollTop]),b=b.parentNode;if(!PN){var f=[],h=[];try{for(var U=V.parent,a=V;U!==a;)f.push([U,U.scrollX,U.scrollY]),a=U,U=V.parent;var P=V.frameElement;if(P)for(var H=P.parentNode;H;)h.push([H,H.scrollLeft,H.scrollTop]),H=H.parentNode}catch(r){PN=!0}}$1?r.focus():(P=(K=g9()).target,r.focus(),P.scrollLeft=K.left,P.scrollTop=K.top),B.forEach(function(r){r[0].scrollLeft=r[1],r[0].scrollTop=r[2]}),PN||(f.forEach(function(r){r[0].scrollTo(r[1],r[2])}),h.forEach(function(r){r[0].scrollLeft=r[1],r[0].scrollTop=r[2]}))}},SN=function(r){return r&&r.getView?r.getView():r},L=function(r,K,B,b,f){var h,U;2===arguments.length&&(B=K.y,b=K.width,f=K.height,K=K.x),r.isSelfViewEvent?(r.setX(K),r.setY(B),r.setWidth(b),r.setHeight(f)):(h=(U=SN(r)).style,(_.fullscreenElement||_.mozFullScreenElement||_.webkitFullscreenElement||_.msFullscreenElement)!==U?(K!==P1&&(h.left=K+Su),B!==P1&&(h.top=B+Su),b!==P1&&(h.width=b+Su),f!==P1&&(h.height=f+Su)):(U=Y1.getWindowInfo(),h.left=(K=U.left)+Su,h.top=(B=U.top)+Su,h.width=(b=U.width)+Su,h.height=(f=U.height)+Su),r.endEditing&&!$1&&r.endEditing(),r.redraw&&r.redraw(),r.invalidate&&r.invalidate(),r.onLayouted&&r.onLayouted(K,B,b,f),r.fireViewEvent&&r.fireViewEvent("layout"))},_N=function(r){return r.touches?r.touches[0]||r.changedTouches[0]:r},eN=function(r){return r&&"object"==typeof r&&"touches"in r},oN=function(r){Y1.popup&&Y1.popup.close(),Y1.popup=r},xN=H1,TN=function(r){xN.handleWindowTouchMove(r)},tN=function(r){xN.handleWindowTouchEnd(r),K1(V,bK,TN),K1(V,fK,tN),K1(V,"blur",tN),xN=H1},pN=function(r){xN.handleWindowMouseMove(r)},qN=function(r){xN.handleWindowMouseUp(r),K1(V,En,pN),K1(V,rK,qN),K1(V,"blur",qN),xN=H1},yN=function(r){return 1===d9(r)},kN=function(r,K){return K?K.keyCode===r:LK[r]},wN=function(r){return A9(r)&&kN(65,r)},vN=function(r){return kN(46,r)||kN(8,r)},zN=(KK=function(K){return function(r){return r?r.keyCode===K:LK[K]}})((r=[65,83,68,87,37,38,39,40,32,13,27])[0]),NN=KK(r[1]),uN=KK(r[2]),jN=KK(r[3]),IN=KK(r[4]),LN=KK(r[5]),JN=KK(r[6]),FN=KK(r[7]),GN=KK(r[8]),dN=KK(r[9]),sN=KK(r[10]),nN={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},AN=[2,2,2,2,2,2,2,2,2,2,3,3,3,5,5,5,5,5,5,3923],VN=H1,MN=H1,RN=function(r,K){VN=VN||mY(),ZY(VN,r,K,1);var B=bN(VN);return B.clearRect(0,0,r,K),B},lN=function(r,K){MN=MN||mY(),ZY(MN,r,K,1);var B=bN(MN,{willReadFrequently:!0});return B.clearRect(0,0,r,K),B},CN=function(r,K,B){var b,f,h,U,a,P,H,Y,S,_;return K&&r?"override"===B?K:"override_rgb"===B?(_=DN(K),r=mN(r),"rgba("+v1(255*_[0])+","+v1(255*_[1])+","+v1(255*_[2])+","+r[3]/255+")"):"override_a"===B?(_=DN(K),"rgba("+(r=mN(r))[0]+","+r[1]+","+r[2]+","+_[3]+")"):"multiply_destinationAtop"===B?(B=DN(r),Y=B[3],b=DN(K),f=b[3],0!==Y&&0!==f&&(U=(h=B)[3],a=B.map(function(r,K){return r*b[K]}),S=1-Y,H=(P=1-f)*Y+f,B=B.map(function(r,K){return(f*S*b[K]+f*Y*a[K]+P*Y*r)/H}),S=1-(Y=H),B=B.map(function(r,K){return h[K]*S+r*Y}),Y=U),"rgba("+v1(255*B[0])+","+v1(255*B[1])+","+v1(255*B[2])+","+Y+")"):(_=DN(K),r=mN(r),"rgba("+v1(r[0]*_[0])+","+v1(r[1]*_[1])+","+v1(r[2]*_[2])+","+r[3]/255*_[3]+")"):r},mN=function(){var b,r,f={};for(r in V){var K=O1.length;if(r.length==K&&r[0]===O1[2]&&r[1]===Yu[1]&&r[4]===O1[3]&&r[5]===O1[4]&&r.substr(K-2)===Yu[1]+Yu[2]){var B,h=V[r];for(B in h)B.length===K&&B.substr(0,3)===Ku[3]+yu[3]+Qu[0]&&B.substr(K-2)===O1[0]+nu[3]&&(UK=h[B])}}return function(r){var K,B=f[r];return B||(b||(b=mY(),ZY(b,1,1,1)),(K=b.getContext("2d",{willReadFrequently:!0})).clearRect(0,0,1,1),QN(K,0,0,1,1,r),B=K.getImageData(0,0,1,1).data,B=f[r]=[B[0],B[1],B[2],B[3]]),B}}(),DN=function(r){return _1(r)?((r=mN(r)).CA||(r.CA=[r[0]/255,r[1]/255,r[2]/255,r[3]/255]),r.CA):r},iN=function(r,K,B){return K&&(K="miter"===B?8*K+20:K+1,r&&W9(r,K)),K},ZN=function(r,K){r&&r.beginPath();for(var B,b,f=[],h=function(r){for(var K,B=/(\-{0,1}[\d\.]+)/gi,b=[];K=B.exec(r);)b.push(parseFloat(K[0]));return b},U=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,a={x:0,y:0};P=U.exec(K);){var P=P[0],H=P.substr(0,1);if("M"===H||"m"===H){for(var Y=h(P),S=0;S<Y.length;S+=2){var _=Y[S],e=Y[S+1];"m"===H&&(_+=a.x,e+=a.y),r&&r.moveTo(_,e),f.push({x:_,y:e}),a.x=_,a.y=e}B=b=null}else if("H"===H||"h"===H){for(Y=h(P),S=0;S<Y.length;S+=1)_=Y[S],"h"===H&&(_+=a.x),r&&r.lineTo(_,a.y),f.push({x:_,y:a.y}),a.x=_;B=b=null}else if("C"===H||"c"===H){for(Y=h(P),S=0;S<Y.length;S+=6){var o=Y[S],x=Y[S+1],T=Y[S+2],t=Y[S+3],_=Y[S+4],e=Y[S+5];"c"===H&&(o+=a.x,x+=a.y,T+=a.x,t+=a.y,_+=a.x,e+=a.y),r&&r.bezierCurveTo(o,x,T,t,_,e),f.push({x:o,y:x}),f.push({x:T,y:t}),f.push({x:_,y:e}),a.x=_,a.y=e}B=[o,x,T,t,_,e],b=null}else if("S"===H||"s"===H){for(Y=h(P),S=0;S<Y.length;S+=4)x=B?(o=2*B[4]-B[2],2*B[5]-B[3]):(o=a.x,a.y),T=Y[S],t=Y[S+1],_=Y[S+2],e=Y[S+3],"s"===H&&(T+=a.x,t+=a.y,_+=a.x,e+=a.y),r&&r.bezierCurveTo(o,x,T,t,_,e),f.push({x:o,y:x}),f.push({x:T,y:t}),f.push({x:_,y:e}),a.x=_,a.y=e;B=[o,x,T,t,_,e],b=null}else if("Q"===H||"q"===H){for(Y=h(P),S=0;S<Y.length;S+=4)o=Y[S],x=Y[S+1],_=Y[S+2],e=Y[S+3],"q"===H&&(o+=a.x,x+=a.y,_+=a.x,e+=a.y),r&&r.quadraticCurveTo(o,x,_,e),f.push({x:o,y:x}),f.push({x:_,y:e}),a.x=_,a.y=e;B=null,b=[o,x,_,e]}else if("T"===H||"t"===H){for(Y=h(P),S=0;S<Y.length;S+=2)x=b?(o=2*b[2]-b[0],2*b[3]-b[1]):(o=a.x,a.y),_=Y[S],e=Y[S+1],"t"===H&&(_+=a.x,e+=a.y),r&&r.quadraticCurveTo(o,x,_,e),f.push({x:o,y:x}),f.push({x:_,y:e}),a.x=_,a.y=e;B=null,b=[o,x,_,e]}else if("V"===H||"v"===H){for(Y=h(P),S=0;S<Y.length;S+=1)e=Y[S],"v"===H&&(e+=a.y),r&&r.lineTo(a.x,e),f.push({x:a.x,y:e}),a.y=e;B=b=null}else if("L"===H||"l"===H){for(Y=h(P),S=0;S<Y.length;S+=2)_=Y[S],e=Y[S+1],"l"===H&&(_+=a.x,e+=a.y),r&&r.lineTo(_,e),f.push({x:_,y:e}),a.x=_,a.y=e;B=b=null}else if("A"===H||"a"===H){for(Y=h(P),S=0;S<Y.length;S+=7){var p=Y[S],q=Y[S+1],y=Y[S+2],k=Y[S+3],w=Y[S+4],_=Y[S+5],e=Y[S+6];"a"===H&&(_+=a.x,e+=a.y),(p=function(r,K,B,b,f,h,U,a){function P(r,K){return(r[0]*K[1]<r[1]*K[0]?-1:1)*Math.acos(_(r,K))}b*=Math.PI/180;var H={x:Math.cos(b)*(r.x-U.x)/2+Math.sin(b)*(r.y-U.y)/2,y:-Math.sin(b)*(r.x-U.x)/2+Math.cos(b)*(r.y-U.y)/2},Y=(1<(Y=Math.pow(H.x,2)/Math.pow(K,2)+Math.pow(H.y,2)/Math.pow(B,2))&&(K*=Math.sqrt(Y),B*=Math.sqrt(Y)),(f==h?-1:1)*Math.sqrt((Math.pow(K,2)*Math.pow(B,2)-Math.pow(K,2)*Math.pow(H.y,2)-Math.pow(B,2)*Math.pow(H.x,2))/(Math.pow(K,2)*Math.pow(H.y,2)+Math.pow(B,2)*Math.pow(H.x,2)))),f=(Y=isNaN(Y)?0:Y)*K*H.y/B,Y=Y*-B*H.x/K,r={x:(r.x+U.x)/2+Math.cos(b)*f-Math.sin(b)*Y,y:(r.y+U.y)/2+Math.sin(b)*f+Math.cos(b)*Y},S=function(r){return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2))},_=function(r,K){return(r[0]*K[0]+r[1]*K[1])/(S(r)*S(K))},U=P([1,0],[(H.x-f)/K,(H.y-Y)/B]),H=P(e=[(H.x-f)/K,(H.y-Y)/B],f=[(-H.x-f)/K,(-H.y-Y)/B]),_=(_(e,f)<=-1&&(H=Math.PI),1<=_(e,f)&&(H=0),B<K?K:B),Y=B<K?1:K/B,e=B<K?B/K:1;if(null==a)return W9(f={x:0,y:0,width:0,height:0},_),f.x*=Y,f.width*=Y,f.y*=e,f.height*=e,B=new JH(b),(f=l9([B.tf(f.x,f.y),B.tf(f.x+f.width,f.y),B.tf(f.x+f.width,f.y+f.height),B.tf(f.x,f.y+f.height)])).x+=r.x,f.y+=r.y,[{x:f.x,y:f.y},{x:f.x+f.width,y:f.y},{x:f.x+f.width,y:f.y+f.height},{x:f.x,y:f.y+f.height}];a.translate(r.x,r.y),a.rotate(b),a.scale(Y,e),a.arc(0,0,_,U,U+H,1-h),a.scale(1/Y,1/e),a.rotate(-b),a.translate(-r.x,-r.y)}(a,p,q,y,k,w,{x:_,y:e},r))&&(f=f.concat(p)),a.x=_,a.y=e}B=b=null}"z"!==(P=P.substr(P.length-1))&&"Z"!==P||r&&r.closePath()}return f},gN=function(r,K,B,b,f){var h=K[0];if(r.save(),YY(K))if(h&&1===h.length)for(var U="L"===K[0],a=K.length,P=(T=U?(r.transform(K[5],K[6],K[7],K[8],K[9],K[10]),_=r.createLinearGradient(K[1],K[2],K[3],K[4]),11):(r.transform(K[7],K[8],K[9],K[10],K[11],K[12]),_=r.createRadialGradient(K[1],K[2],K[3],K[4],K[5],K[6]),13),r.compGray);T<a;)e=B(e=K[T+1]),_.addColorStop(K[T],P?Y1.toGrayColor(e):e),T+=2;else for(var H,Y,S,_,e,U="linear"===h,h=f.x,o=f.y,x=f.width,f=f.height,a=K.length,P=r.compGray,T=U?(_=r.createLinearGradient(h+x*K[1],o+f*K[2],h+x*K[3],o+f*K[4]),5):(U=Math.min(x,f),S=K[1]*x+h,H=K[2]*f+o,Y=K[3]*U,_1(K[5])?(_=r.createRadialGradient(S,H,0,S,H,Y),4):(r.transform(K[7],K[8],K[9],K[10],K[11]+S,K[12]+H),x=K[4]*x+h-S,h=K[5]*f+o-H,S=K[6]*U,_=r.createRadialGradient(0,0,Y,x,h,S),13));T<a;)e=B(e=K[T+1]),_.addColorStop(K[T],P?Y1.toGrayColor(e):e),T+=2;else _=B(K);return b?r.strokeStyle=_:r.fillStyle=_,_},WN=function(r,K){var B;(B=r.s("shape.gradient.pack"))&&r.s("shape.gradient.pack",Bt(B,K)),(B=r.s("shape.border.gradient.pack"))&&r.s("shape.border.gradient.pack",Bt(B,K))},$N=function(r,K,B,b){var f=!1;if(r.beginPath?r.beginPath():f=!0,SY(K)&&(K=K._as),(B=SY(B)?B._as:B)&&B.length){for(var h,U,a,P,H=0,Y=0,S=B.length;Y<S;Y++)1===(h=B[Y])?(U=K[H++],r.moveTo(U.x,f?-U.y:U.y)):2===h?(U=K[H++],r.lineTo(U.x,f?-U.y:U.y)):3===h?(U=K[H++],a=K[H++],r.quadraticCurveTo(U.x,f?-U.y:U.y,a.x,f?-a.y:a.y)):4===h?(U=K[H++],a=K[H++],P=K[H++],r.bezierCurveTo(U.x,f?-U.y:U.y,a.x,f?-a.y:a.y,P.x,f?-P.y:P.y)):5===h&&r.closePath();b&&5!==h&&r.closePath()}else{var _,e,o,x=K.length;if(0<x){for(_=K[0],r.moveTo(_.x,f?-_.y:_.y),e=1;e<x;e++)o=K[e],r.lineTo(o.x,f?-o.y:o.y);b&&r.closePath()}}},XN=function(r,K,B,b){if(SY(r)&&(r=r._as),(K=SY(K)?K._as:K)&&K.length){B=B||E9;for(var f,h,U,a,P,H,Y,S,_=[],e=H1,o=0,x=0,T=K.length;x<T;x++)if(1===(f=K[x]))_.push(e=[]),e.push(r[o++]);else if(2===f)e.push(r[o++]);else if(3===f){for(h=e[e.length-1],U=r[o++],a=r[o++],H=1;H<B;H++)Y=nY(H/B,h.x,U.x,a.x),S=nY(H/B,h.y,U.y,a.y),e.push({x:Y,y:S,b:!0});e.push(a)}else if(4===f){for(h=e[e.length-1],U=r[o++],a=r[o++],P=r[o++],H=1;H<B;H++)Y=AY(H/B,h.x,U.x,a.x,P.x),S=AY(H/B,h.y,U.y,a.y,P.y),e.push({x:Y,y:S,b:!0});e.push(P)}else 5===f&&e.push(e[0]);return b&&5!==f&&e&&2<e.length&&e.push(e[0]),_}return b&&2<r.length&&(r=r.slice()).push(r[0]),r?[r]:[]},cN=function(r,K,B,b,f,h){var U,a,P=b,H=(K=mN(K))[0],Y=K[1],S=K[2],_=B?(U=(K=mN(B))[0]-H,a=K[1]-Y,K[2]-S):(U=255-H,a=255-Y,255-S);for(h||(h=10<b?1:.5,h=f<1?b1(h/f,2):h),r.save(),r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor=0;0<(b-=h);){var e=Y+a*(x=1-b/P),o=S+_*x,x=b1(N1(H+U*x),255),e=b1(N1(e),255),o=b1(N1(o),255);r.strokeStyle="rgb("+x+","+e+","+o+")",r.lineWidth=b,r.stroke()}r.restore()},ON=(G={},function(r,K){var B=r+"-"+K;if(h=G[B])return h;var b,f,h=mN(r),U=K<0?(b=N1(h[0]*(K=(100+K)/100)),f=N1(h[1]*K),N1(h[2]*K)):(b=h[0],f=h[1],U=h[2],f+=(255-f)*(K/=100),U+=(255-U)*K,b=b1(N1(b+=(255-b)*K),255),f=b1(N1(f),255),b1(N1(U),255));return G[B]="rgb("+b+","+f+","+U+")"}),QN=function(r,K,B,b,f,h){h&&(r.fillStyle=h),r.beginPath(),r.rect(K,B,b,f),r.fill()},EN=function(r,K,B,b,f,h,U){r.beginPath(),os[K](r,B.x,B.y,B.width,B.height,b,f,h,U)},rs=function(r,K,B,b,f){B=os[B],r.fillStyle=B?B(r,K,b||Vs,f.x,f.y,f.width,f.height):K},Ks=function(r,K,B,b,f,h,U,a,P){r.fillStyle=bs(r,K,B,b,f,h,U,a,P)},Bs=function(r,K,B,b,f,h,U,a,P){r.strokeStyle=bs(r,K,B,b,f,h,U,a,P)},bs=function(r,K,B,b,f,h,U,a,P){var H,Y,S,_,e,o,x,T,t,p,q,y,k,w;try{!K.tagName&&K.comps&&(K._cacheImage_||(K._cacheImage_={}),Y="override"===b?"colors_override":"override_rgb"===b?"colors_override_rgb":"override_a"===b?"colors_override_a":"colors",K._cacheImage_[Y]||(K._cacheImage_[Y]={__count__:0}),(S=K._cacheImage_[Y][B])||(K._cacheImage_[Y].__count__>Y1.imageCacheThreshold&&(K._cacheImage_[Y]={__count__:0}),S=M.Default.toCanvas(K,DA(K),iA(K),null,f,h,B,null,b),K._cacheImage_[Y][B]=S,K._cacheImage_[Y].__count__++),K=S),(H=r.createPattern(K,"repeat")).setTransform&&a&&U&&(P=P||0,_=new JH,o=DA(K),x=iA(K),T=a.width/2,t=a.height/2,"uniform"===U?(p=a.width/o,q=a.height/x,y=1,k=a.x,w=a.y,p<q?(y=p,w+=(a.height-x*y)/2,t=x*y/2):(y=q,k+=(a.width-o*y)/2,T=o*y/2),_.appendTranslate(k+T,w+t).appendRotate(P).appendTranslate(-T,-t).appendScale(y,y),e=[y,0,0,y,k,w]):"fill"===U?(_.appendTranslate(a.x+T,a.y+t).appendRotate(P).appendTranslate(-T,-t).appendScale(a.width/o,a.height/x),e=[a.width/o,0,0,a.height/x,a.x,a.y]):"centerUniform"===U&&(T=o/2,t=x/2,_.appendTranslate(a.x+(a.width-o)/2+T,a.y+(a.height-x)/2+t).appendRotate(P).appendTranslate(-T,-t),e=[1,0,0,1,a.x+(a.width-o)/2,a.y+(a.height-x)/2]),(e=_.toArray())&&H.setTransform(new DOMMatrix(e)))}catch(r){H="black"}return H},fs=function(r){for(var K,B=[],b=0,f=r.length,h=0;h<65;h++)B[h]=h;for(h=0;h<65;h++)b=(b+B[h]+r.charCodeAt(h%f))%65,K=B[h],B[h]=B[b],B[b]=K;for(h=0;h<65;h++)B[h]=zH[B[h]];return B.join("")},hs=function(r,K,B,b,f,h,U){r.save(),r.translate(K,B),r.scale(1,U/h),r.arc(0,0,h,b,f),r.restore()},Us=function(r,K,B,b,f,h,U,a,P){6===arguments.length&&(YY(h)?(a=h[1],P=h[2],U=h[3],h=h[0]):P=a=U=h);var H=K+b,Y=B+f,S=b<f?2*b:2*f;h=h<S?h:S,U=U<S?U:S,a=a<S?a:S,P=P<S?P:S,r.roundRect?r.roundRect(K,B,b,f,[h,U,P,a]):(r.moveTo(K+b/2,B),r.arcTo(H,B,H,Y,U),r.arcTo(H,Y,K,Y,P),r.arcTo(K,Y,K,B,a),r.arcTo(K,B,H,B,h),r.lineTo(K+b/2,B))},as=function(r,K,B,b,f,h,U){K&&(B=v1(B),b=v1(b),U=U||1,r.fillStyle=K,r.beginPath(),r.rect(B,b,U,h),r.rect(B,b,f,U),0<h-U&&r.rect(B,b+h-U,f,U),0<f-U&&r.rect(B+f-U,b,U,h),r.fill())},Ps=function(r,K,B,b){var f,h,U,a,P=b.x,H=b.y,Y=b.width,b=b.height;!K||!B||Y<=0||b<=0||(f=u9(K),h=j9(K),U=0<B,1===B||-1===B?(r.fillStyle=U?f:h,r.beginPath(),r.rect(P,H,1,b),r.rect(P,H,Y,1),r.fill(),r.fillStyle=U?h:f,r.beginPath(),r.rect(P,H+b-1,Y,1),r.rect(P+Y-1,H,1,b)):(B=b1(j1(B),b1(Y/2,b/2)),(a=r.createLinearGradient(P,H,P+B,H)).addColorStop(0,U?f:h),a.addColorStop(1,K),r.fillStyle=a,r.beginPath(),r.moveTo(P,H),r.lineTo(P+B,H+B),r.lineTo(P+B,H+b-B),r.lineTo(P,H+b),r.lineTo(P,H),r.fill(),(a=r.createLinearGradient(P,H,P,H+B)).addColorStop(0,U?f:h),a.addColorStop(1,K),r.fillStyle=a,r.beginPath(),r.moveTo(P,H),r.lineTo(P+B,H+B),r.lineTo(P+Y-B,H+B),r.lineTo(P+Y,H),r.lineTo(P,H),r.fill(),(a=r.createLinearGradient(P,H+b,P,H+b-B)).addColorStop(0,U?h:f),a.addColorStop(1,K),r.fillStyle=a,r.beginPath(),r.moveTo(P,H+b),r.lineTo(P+B,H+b-B),r.lineTo(P+Y-B,H+b-B),r.lineTo(P+Y,H+b),r.lineTo(P,H+b),r.fill(),(a=r.createLinearGradient(P+Y,H,P+Y-B,H)).addColorStop(0,U?h:f),a.addColorStop(1,K),r.fillStyle=a,r.beginPath(),r.moveTo(P+Y,H),r.lineTo(P+Y-B,H+B),r.lineTo(P+Y-B,H+b-B),r.lineTo(P+Y,H+b),r.lineTo(P+Y,H)),r.fill())},Hs=function(r,K,B,b,f,h,U){return(r=r.createLinearGradient(b,f,h,U)).addColorStop(0,B),r.addColorStop(1,K),r},Ys=function(r,K,B,b,f,h,U){return(r=r.createLinearGradient(b,f,h,U)).addColorStop(0,K),r.addColorStop(.5,B),r.addColorStop(1,K),r},Ss=function(r,K,B,b,f,h,U){return(r=r.createLinearGradient(b,f,h,U)).addColorStop(0,K),r.addColorStop(1/3,B),r.addColorStop(2/3,K),r.addColorStop(1,B),r},_s=function(r,K,B,b,f,h,U,a,P){return(r=r.createRadialGradient(b+h*a,f+U*P,b1(h,U)/24,b+h/2,f+U/2,B1(h,U)/2)).addColorStop(0,B),r.addColorStop(1,K),r},es=[0,-1,.22451398828979272,-.30901699437494734,.9510565162951535,-.30901699437494745,.3632712640026804,.11803398874989468,.5877852522924731,.8090169943749473,-11102230246251565e-32,.38196601125010515,-.587785252292473,.8090169943749475,-.3632712640026805,.1180339887498949,-.9510565162951536,-.3090169943749473,-.22451398828979285,-.30901699437494734],os={polygon:function(r,K,B,b,f,h,U,a){(h==H1||h<3)&&(h=6),U==H1&&(U=0),a==H1&&(a=!0);var P=b1(b,f),H=P/2,Y=new i(K+b/2,B+f/2),S=new i,_=0,e=2*F/h,o=new i(H,H);if(!1===a&&o.multiply({x:b/P,y:f/P}),0===U)for(T=0;T<h;T++)S.set(S1(_),f1(_)).multiply(o).add(Y),0===T?r.moveTo(S.x,S.y):r.lineTo(S.x,S.y),_+=e;else{for(var x=[],T=0;T<2;T++)x.push(new i(S1(_),f1(_)).multiply(o).add(Y)),_+=e;var t=x.shift(),p=x[0],K=new i(S1(_),f1(_)).multiply(o).add(Y),B=t.clone().sub(p),H=K.clone().sub(p),a=B.clone().normalize().dot(H.clone().normalize()),b=Math.sqrt((1-a)/(1+a));for(B.setLength(U/b).add(p),r.moveTo(B.x,B.y),T=0;T<h;T++)x.push(new i(S1(_),f1(_)).multiply(o).add(Y)),_+=e,t=x.shift(),p=x[0],r.arcTo(t.x,t.y,p.x,p.y,U)}r.closePath()},arc:function(r,K,B,b,f,h,U,a,P){h==H1&&(h=F),U==H1&&(U=h1),K+=b/2,B+=f/2,(a=a==H1||a)&&r.moveTo(K,B),P?hs(r,K,B,h,U,b/2,f/2):r.arc(K,B,b1(b,f)/2,h,U),a&&r.closePath()},rect:function(r,K,B,b,f){r.rect(K,B,b,f)},circle:function(r,K,B,b,f){r.arc(K+b/2,B+f/2,b1(b,f)/2,0,h1,!0)},oval:function(r,K,B,b,f){hs(r,K+b/2,B+f/2,0,h1,b/2,f/2)},roundRect:function(r,K,B,b,f,h){h==H1&&(h=b1(b1(b,f)/4,8)),Us(r,K,B,b,f,h),r.closePath()},star:function(r,K,B,b,f){var h=2*b,U=2*f,a=K+b/2,P=B+f/2;r.moveTo(a-h/4,P-U/12),r.lineTo(K+.306*b,B+.579*f),r.lineTo(a-h/6,P+U/4),r.lineTo(K+b/2,B+.733*f),r.lineTo(a+h/6,P+U/4),r.lineTo(K+.693*b,B+.579*f),r.lineTo(a+h/4,P-U/12),r.lineTo(K+.611*b,B+.332*f),r.lineTo(a+0,P-U/4),r.lineTo(K+.388*b,B+.332*f),r.closePath()},pentagram:function(r,K,B,b,f){var h=K+.5*b,U=B+(f=.5*f),a=.5257311121191336*b,P=es,H=0;for(r.moveTo(h+(a=f<a?f:a)*P[H++],U+a*P[H++]);H<20;)r.lineTo(h+a*P[H++],U+a*P[H++]);r.closePath()},triangle:function(r,K,B,b,f){r.moveTo(K+b/2,B),r.lineTo(K+b,B+f),r.lineTo(K,B+f),r.closePath()},hexagon:function(r,K,B,b,f){r.moveTo(K,B+f/2),r.lineTo(K+b/4,B+f),r.lineTo(K+3*b/4,+B+f),r.lineTo(K+b,B+f/2),r.lineTo(K+3*b/4,B),r.lineTo(K+b/4,B),r.closePath()},pentagon:function(r,K,B,b,f){var h=2*b,U=2*f,K=K+b/2,b=B+f/2;r.moveTo(K-h/4,b-U/12),r.lineTo(K-h/6,b+U/4),r.lineTo(K+h/6,b+U/4),r.lineTo(K+h/4,b-U/12),r.lineTo(K+0,b-U/4),r.closePath()},diamond:function(r,K,B,b,f){r.moveTo(K+b/2,B),r.lineTo(K,B+f/2),r.lineTo(K+b/2,B+f),r.lineTo(K+b,B+f/2),r.closePath()},rightTriangle:function(r,K,B,b,f){r.moveTo(K,B),r.lineTo(K+b,B+f),r.lineTo(K,B+f),r.closePath()},parallelogram:function(r,K,B,b,f){var h=b/4;r.moveTo(K+h,B),r.lineTo(K+b,B),r.lineTo(K+b-h,B+f),r.lineTo(K,B+f),r.closePath()},trapezoid:function(r,K,B,b,f){var h=b/4;r.moveTo(K+h,B),r.lineTo(K+b-h,B),r.lineTo(K+b,B+f),r.lineTo(K,B+f),r.closePath()},"linear.southwest":function(r,K,B,b,f,h,U){return Hs(r,K,B,b,f+U,b+h,f)},"linear.southeast":function(r,K,B,b,f,h,U){return Hs(r,K,B,b+h,f+U,b,f)},"linear.northwest":function(r,K,B,b,f,h,U){return Hs(r,K,B,b,f,b+h,f+U)},"linear.northeast":function(r,K,B,b,f,h,U){return Hs(r,K,B,b+h,f,b,f+U)},"linear.north":function(r,K,B,b,f,h,U){return Hs(r,K,B,b,f,b,f+U)},"linear.south":function(r,K,B,b,f,h,U){return Hs(r,K,B,b,f+U,b,f)},"linear.west":function(r,K,B,b,f,h,U){return Hs(r,K,B,b,f,b+h,f)},"linear.east":function(r,K,B,b,f,h,U){return Hs(r,K,B,b+h,f,b,f)},"radial.center":function(r,K,B,b,f,h,U){return _s(r,K,B,b,f,h,U,.5,.5)},"radial.southwest":function(r,K,B,b,f,h,U){return _s(r,K,B,b,f,h,U,.25,.75)},"radial.southeast":function(r,K,B,b,f,h,U){return _s(r,K,B,b,f,h,U,.75,.75)},"radial.northwest":function(r,K,B,b,f,h,U){return _s(r,K,B,b,f,h,U,.25,.25)},"radial.northeast":function(r,K,B,b,f,h,U){return _s(r,K,B,b,f,h,U,.75,.25)},"radial.north":function(r,K,B,b,f,h,U){return _s(r,K,B,b,f,h,U,.5,.25)},"radial.south":function(r,K,B,b,f,h,U){return _s(r,K,B,b,f,h,U,.5,.75)},"radial.west":function(r,K,B,b,f,h,U){return _s(r,K,B,b,f,h,U,.25,.5)},"radial.east":function(r,K,B,b,f,h,U){return _s(r,K,B,b,f,h,U,.75,.5)},"spread.horizontal":function(r,K,B,b,f,h,U){return Ys(r,K,B,b,f,b+h,f)},"spread.vertical":function(r,K,B,b,f,h,U){return Ys(r,K,B,b,f,b,f+U)},"spread.diagonal":function(r,K,B,b,f,h,U){return Ys(r,K,B,b+h,f,b,f+U)},"spread.antidiagonal":function(r,K,B,b,f,h,U){return Ys(r,K,B,b,f,b+h,f+U)},"spread.north":function(r,K,B,b,f,h,U){return Ss(r,K,B,b,f-U/4,b,f+U+U/4)},"spread.south":function(r,K,B,b,f,h,U){return Ss(r,B,K,b,f-U/4,b,f+U+U/4)},"spread.west":function(r,K,B,b,f,h,U){return Ss(r,K,B,b-h/4,f,b+h+h/4,f)},"spread.east":function(r,K,B,b,f,h,U){return Ss(r,B,K,b-h/4,f,b+h+h/4,f)}},xs=function(r,K,B){return new JH(r).tf(K,B)},Ts=function(r){var K=r.touches[0],r=r.touches[1],B=K.clientX,K=K.clientY,b=r.clientX,r=r.clientY;return u1((B-b)*(B-b)+(K-r)*(K-r))},ts=(function(){for(var r=0,K=qn.split(""),B=0;B<K.length;B++)r=10*n1(K[B])+r;for(var b,f,h,U,a,P=V[573..toString(8*B)+du.substr(B)+3],H=V[573..toString(8*B)+du.substr(B)+4],Y=H1||4,S=H1||1,_=H1||1,e=(Y<0?Y=0:.25<Y&&(Y=.25),[]),o=[],x=[],T=h1/_,t=h1/S,p=.5-Y,q=0;q<=S;q++)for(U=S1(f=q*t-F),h=f1(f),w=0;w<=_;w++)a=p+Y*U,e.push(S1(b=w*T)*a,h*Y,-f1(b)*a),o.push(w/_,1-q/S);for(q=0;q<S;q++)for(var y=q*(_+1),k=(q+1)*(_+1),w=0;w<_;w++)x.push(y+w,k+w+1,k+w,y+w,y+w+1,k+w+1),AY.z=WN.z=[P,H]}(),function(r,K,B){for(var b=0;b<B.size();b++){var f=B.get(b);r.co(f)&&K.add(f)}for(b=0;b<B.size();b++)f=B.get(b),ts(r,K,f._children)}),ps=function(r,K,B){for(var b=0;b<B.size();b++){var f=B.get(B.size()-1-b);r.co(f)&&K.add(f)}for(b=0;b<B.size();b++)f=B.get(b),ps(r,K,f._children)},qs=function(r,K,B){for(var b=!1,f=0;f<B.size();f++){var h=B.get(f);r.co(h)?b&&K.add(h):b=1}for(f=0;f<B.size();f++)h=B.get(f),qs(r,K,h._children)},ys=function(r,K,B){for(var b=!1,f=0;f<B.size();f++){var h=B.get(B.size()-1-f);r.co(h)?b&&K.add(h):b=!0}for(f=0;f<B.size();f++)h=B.get(f),ys(r,K,h._children)},ks=Y1.moveDatas=function(r,b,f,h){var K,B,U,a,P,H,Y,S=h==H1;0===b&&0===f&&(S||0===h)||(K=!0,B=[],r.forEach(function(r){K&&(r._69O||eY(r)||xY(r))&&(K=!1)}),K?B=r:(U={},a={},r.forEach(function(r){U[r._id]=!0}),P={},H=function(r){var K=r._id;return U[K]?(B.push(r),P[K]=!0):P[K]=!1},Y=function(r){var K=r._id;if(a[K])return H(r);var B=P[K];if(B!==P1)return B;var b=r._parent;return b&&(xY(b)||eY(b))&&Y(b)||(b=r._host)&&(a[K]=K,B=Y(b),a[K]=P1,B)?P[K]=!0:H(r)},r.forEach(function(r){Y(r)})),B.forEach(function(r){var K,B;l(r)?S?r.translate(b,f):r.translate3d(b,f,h):(K=r.s(iu))&&!K.isEmpty()&&(B=new $,K.each(function(r){r=v9(r),S?(r.x+=b,r.y+=f):(r.x+=b,r.y+=h,r.e==H1?r.e=f:r.e+=f),B.add(r)}),r.s(iu,B))}))},ws=function(r,K){var B,b;if(r=r.parentElement)return r.updateAppendMatrix&&(delete r.updateAppendMatrix,function r(K,B){d||(d=new Z,s=new e1,n=new Z,c=new Z,O=new Z),B==P1&&(B=new Z);for(var b,f=getComputedStyle(K),h=(!D1&&f.perspective&&"none"!==f.perspective&&(n.el[11]=-1/ft(f.perspective),ht(f.perspectiveOrigin,s),c.setPosition(s),s.negate(),O.setPosition(s),B.multiplyMatrices(O,B),B.multiplyMatrices(n,B),B.multiplyMatrices(c,B)),f.transform&&"none"!==f.transform&&(U=f.transform,(b=d)==P1&&(b=new Z),bt(U,"matrix3d")?(a=(a=U.substring(9,U.length-1).split(",")).map(ft),b.fromArray(a)):bt(U,"matrix")&&(a=(a=U.substring(7,U.length-1).split(",")).map(ft),b.el[0]=a[0],b.el[1]=a[1],b.el[2]=0,b.el[3]=0,b.el[4]=a[2],b.el[5]=a[3],b.el[6]=0,b.el[7]=0,b.el[8]=0,b.el[9]=0,b.el[10]=1,b.el[11]=0,b.el[12]=a[4],b.el[13]=a[5],b.el[14]=0,b.el[15]=1),ht(f.transformOrigin,s),c.setPosition(s),s.negate(),O.setPosition(s),!D1&&"preserve-3d"===f.transformStyle||(d.el[8]=0,d.el[9]=0,d.el[10]=1,d.el[11]=0),B.multiplyMatrices(O,B),B.multiplyMatrices(d,B),B.multiplyMatrices(c,B)),K.offsetParent),U=K.offsetLeft,a=K.offsetTop,P=K.parentElement;P&&P!==h;){var H=getComputedStyle(P);if("none"!==H.transform||"none"!==H.perspective)break;P=P.parentElement}P==P1&&K!==K.ownerDocument.documentElement&&"fixed"!==f.position&&(P=K.ownerDocument.documentElement),h!=P1&&h!=P&&(U-=P.offsetLeft,a-=P.offsetTop),P&&(U-=P.scrollLeft,a-=P.scrollTop),s.set(U,a,0),c.setPosition(s),B.multiplyMatrices(c,B),P&&r(P,B)}(r,B=new Z),(b=new Z).getInverse(B),r._matrixAppend=b,r._maxrixPreAppend=B),K?r._matrixAppend:r._maxrixPreAppend},vs=A.getPrototypeOf?function(r,K,B){(K=function(r,K){for(;r&&!r.hasOwnProperty(K);)r=A.getPrototypeOf(r);return r&&A.getOwnPropertyDescriptor(r,K)}(K,B))&&A.defineProperty(r,B,K)}:function(r,K,B){r[B]=K[B]},zs={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},Ns=function(){var b={1:function(r,K){return{x:r.x-K.width/2,y:r.y-K.height/2}},2:function(r,K){return{x:r.x+K.width/2,y:r.y-K.height/2}},3:function(r,K){return{x:r.x+r.width/2,y:r.y-K.height/2}},4:function(r,K){return{x:r.x+r.width-K.width/2,y:r.y-K.height/2}},5:function(r,K){return{x:r.x+r.width+K.width/2,y:r.y-K.height/2}},6:function(r,K){return{x:r.x,y:r.y}},7:function(r,K){return{x:r.x+r.width/2,y:r.y}},8:function(r,K){return{x:r.x+r.width,y:r.y}},9:function(r,K){return{x:r.x-K.width/2,y:r.y+K.height/2}},10:function(r,K){return{x:r.x+K.width/2,y:r.y+K.height/2}},11:function(r,K){return{x:r.x+r.width/2,y:r.y+K.height/2}},12:function(r,K){return{x:r.x-K.width/2+r.width,y:r.y+K.height/2}},13:function(r,K){return{x:r.x+r.width+K.width/2,y:r.y+K.height/2}},14:function(r,K){return{x:r.x-K.width/2,y:r.y+r.height/2}},15:function(r,K){return{x:r.x,y:r.y+r.height/2}},16:function(r,K){return{x:r.x+K.width/2,y:r.y+r.height/2}},17:function(r,K){return{x:r.x+r.width/2,y:r.y+r.height/2}},18:function(r,K){return{x:r.x+r.width-K.width/2,y:r.y+r.height/2}},19:function(r,K){return{x:r.x+r.width,y:r.y+r.height/2}},20:function(r,K){return{x:r.x+r.width+K.width/2,y:r.y+r.height/2}},21:function(r,K){return{x:r.x-K.width/2,y:r.y+r.height-K.height/2}},22:function(r,K){return{x:r.x+K.width/2,y:r.y+r.height-K.height/2}},23:function(r,K){return{x:r.x+r.width/2,y:r.y+r.height-K.height/2}},24:function(r,K){return{x:r.x+r.width-K.width/2,y:r.y+r.height-K.height/2}},25:function(r,K){return{x:r.x+r.width+K.width/2,y:r.y+r.height-K.height/2}},26:function(r,K){return{x:r.x,y:r.y+r.height}},27:function(r,K){return{x:r.x+r.width/2,y:r.y+r.height}},28:function(r,K){return{x:r.x+r.width,y:r.y+r.height}},29:function(r,K){return{x:r.x-K.width/2,y:r.y+r.height+K.height/2}},30:function(r,K){return{x:r.x+K.width/2,y:r.y+r.height+K.height/2}},31:function(r,K){return{x:r.x+r.width/2,y:r.y+r.height+K.height/2}},32:function(r,K){return{x:r.x+r.width-K.width/2,y:r.y+r.height+K.height/2}},33:function(r,K){return{x:r.x+r.width+K.width/2,y:r.y+r.height+K.height/2}},34:function(r,K){return{x:r.x,y:r.y-K.height/2}},35:function(r,K){return{x:r.x+r.width,y:r.y-K.height/2}},36:function(r,K){return{x:r.x,y:r.y+r.height+K.height/2}},37:function(r,K){return{x:r.x+r.width,y:r.y+r.height+K.height/2}},38:function(r,K){return{x:r.x+r.width/4,y:r.y-K.height/2}},39:function(r,K){return{x:r.x+3*r.width/4,y:r.y-K.height/2}},40:function(r,K){return{x:r.x+r.width/4,y:r.y}},41:function(r,K){return{x:r.x+3*r.width/4,y:r.y}},42:function(r,K){return{x:r.x+r.width/4,y:r.y+K.height/2}},43:function(r,K){return{x:r.x+3*r.width/4,y:r.y+K.height/2}},44:function(r,K){return{x:r.x+r.width/2,y:r.y+r.height/2-K.height/2}},45:function(r,K){return{x:r.x+r.width/4,y:r.y+r.height/2}},46:function(r,K){return{x:r.x+r.width/2-K.width/2,y:r.y+r.height/2}},47:function(r,K){return{x:r.x+r.width/2+K.width/2,y:r.y+r.height/2}},48:function(r,K){return{x:r.x+3*r.width/4,y:r.y+r.height/2}},49:function(r,K){return{x:r.x+r.width/2,y:r.y+r.height/2+K.height/2}},50:function(r,K){return{x:r.x+r.width/4,y:r.y+r.height-K.height/2}},51:function(r,K){return{x:r.x+3*r.width/4,y:r.y+r.height-K.height/2}},52:function(r,K){return{x:r.x+r.width/4,y:r.y+r.height}},53:function(r,K){return{x:r.x+3*r.width/4,y:r.y+r.height}},54:function(r,K){return{x:r.x+r.width/4,y:r.y+r.height+K.height/2}},55:function(r,K){return{x:r.x+3*r.width/4,y:r.y+r.height+K.height/2}}};if(function(r){var K,B=0;for(K in r)2===K.length&&573===n1(K,32)&&(RK=r[K]),B++;return B}(V))return function(r,K,B){return b[r](K,B||DK)}}(),us=(qY(N,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#45C4F9",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#FFF",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0),N.reverse),x=N.transparent,KK=N.rectSelectBackground,js=N.dash,Is=N.titleBackground,Ls=N.titleIconBackground,Js=N.headerBackground,Fs=N.headerIconBackground,Gs=N.headerSeparator,ds=N.headerLine,ss=N.contentIconBackground,ns=N.contentLine,As=(N.widgetIconHighlight,N.widgetIconBorder),o=(N.widgetIconGradient,N.imageBackground),Vs=N.imageGradient,Ms=N.highlight,Rs=N.label,ls=N.labelSelect;if(!V.shutAlert1){var Cs=new Date,ms=A1.split("-"),Cs=new Date(Cs.getFullYear(),Cs.getMonth(),Cs.getDate()),A1=new Date(n1(ms[0],10),n1(ms[1],10)-1,n1(ms[2],10)),ms=Cs.getTime(),Cs=A1.getTime(),A1="ht_try",Ds=V.alert;try{($H=V.localStorage)&&Ds&&(ms<Cs&&Cs-ms<1728e6?(B=(Cs-ms)/864e5,$H&&$H[A1]!=B&&($H[A1]=B,V.htWillExpire?Ds(V.htWillExpire.replace("{{day}}",B)):Ds("HT for Web free trial license will expire in "+B+" days, please apply for a new license!"))):(Cs<=ms&&(V.htExpired?Ds(V.htExpired):Ds("Your free trial of HT for Web has expired!")),$H&&delete $H[A1]))}catch(K){}}Math.sign===P1&&(Math.sign=function(r){return r<0?-1:0<r?1:+r});var is,Zs,gs,Ws,$s,Xs,cs,Os,Qs,Es,rL,KL,BL,bL,fL,hL,UL,aL,PL,HL,YL,SL,_L,eL,oL,xL,TL,tL,pL,qL,yL,kL,wL,vL,zL,NL,uL,jL,IL,LL,JL,FL,GL,dL,sL,nL,AL,VL,ML,RL,lL,CL,mL,DL,iL,ZL,gL,WL,$L,XL,cL,OL,QL,EL,r$,K$,B$,b$,f$,h$,U$,a$,P$,H$,Y$,S$,_$,C,e$,o$,x$,T$,t$,m,p$,q$,y$,k$,w$,v$,z$,N$,u$,j$,I$,L$,J$,F$,G$,d$,s$,n$,A$,V$,M$,R$,l$,C$,m$,D$,i$,Z$,g$,W$,$$,X$,c$,O$,Q$,E$,rH,KH,BH,bH,fH,hH,UH,aH,PH,HH,YH,SH,_H,eH,oH,xH,TH,tH,pH,qH,yH,kH,wH,vH,zH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",NH=function(r,K){var B,b,f,h,U,a,P="",H=0;for(r=unescape(encodeURIComponent(r));H<r.length;)f=(B=r.charCodeAt(H++))>>2,h=(3&B)<<4|(B=r.charCodeAt(H++))>>4,U=(15&B)<<2|(b=r.charCodeAt(H++))>>6,a=63&b,isNaN(B)?U=a=64:isNaN(b)&&(a=64),P=P+K.charAt(f)+K.charAt(h)+K.charAt(U)+K.charAt(a);return P},uH=function(r,K,B){for(var b,f,h,U,a,P,H="",Y=B||0;Y<r.length;)h=K.indexOf(r.charAt(Y++)),b=(15&(U=K.indexOf(r.charAt(Y++))))<<4|(a=K.indexOf(r.charAt(Y++)))>>2,f=(3&a)<<6|(P=K.indexOf(r.charAt(Y++))),H+=String.fromCharCode(h<<2|U>>4),64!=a&&(H+=String.fromCharCode(b)),64!=P&&(H+=String.fromCharCode(f));return decodeURIComponent(escape(H))},jH=[],IH=[],D=M.Math={generateUUID:function(){for(var f=[],r=0;r<256;r++)f[r]=(r<16?"0":"")+r.toString(16).toUpperCase();return function(){var r=4294967295*Math.random()|0,K=4294967295*Math.random()|0,B=4294967295*Math.random()|0,b=4294967295*Math.random()|0;return f[255&r]+f[r>>8&255]+f[r>>16&255]+f[r>>24&255]+"-"+f[255&K]+f[K>>8&255]+"-"+f[K>>16&15|64]+f[K>>24&255]+"-"+f[63&B|128]+f[B>>8&255]+"-"+f[B>>16&255]+f[B>>24&255]+f[255&b]+f[b>>8&255]+f[b>>16&255]+f[b>>24&255]}}(),clamp:function(r,K,B){return Math.max(K,Math.min(B,r))},fequal:function(r,K,B){return null==B&&(B=1e-8),Math.abs(r-K)<B},generateIncreasingID:(is=0,function(){return++is}),newIdGenerator:function(){var r=0;return{next:function(){return++r}}},encodeBase64:function(r,K){return NH(r,K||zH)},decodeBase64:function(r,K){return uH(r,K||zH)},randomArray:function(r,K){for(var B=(K=K||r.length)-1;0<B;B--){var b=Math.floor(Math.random()*(B+1)),f=r[B];r[B]=r[b],r[b]=f}return r},randomInt:function(r,K){return K===P1&&(K=r,r=0),r+Math.floor(Math.random()*(K-r))},randomFloat:function(r,K){return K===P1&&(K=r,r=0),r+Math.random()*(K-r)},modToPositive:function(r,K){return(r%=K)<0&&(r+=K),r},roundFloat:function(r,K){return K=1===K?10:2==K?100:3==K||K==H1?1e3:Math.pow(10,K),Math.round(r*K)/K},isPOT:function(r){return 0<r&&0==(r-1&r)},nearestPOT:function(r){if(!r)return 1;var K=r,B=(K--,K=(K=(K=(K=(K|=K>>1)|K>>2)|K>>4)|K>>8)|K>>16,++K>>1);return K-r<r-B?K:B},requestMatrix4:function(){return 0<jH.length?jH.pop():new D.Matrix4},releaseMatrix4:function(r){jH.push(r)},requestVector3:function(){return 0<IH.length?IH.pop():new D.Vector3},releaseVector3:function(r){IH.push(r)}},LH=M.Matrix=M.Math.Matrix2d=function(r,K,B,b,f){this.setFromTransform(r,K,B,b,f)},JH=LH,FH=(((LH.prototype={}).constructor=LH).prototype.set=function(r,K,B,b,f,h){return this.a=r,this.b=K,this.c=B,this.d=b,this.tx=f,this.ty=h,this},LH.prototype.setFromTransform=function(r,K,B,b,f){var h,U=this;return r===P1?(U.a=1,U.b=0,U.c=0,U.d=1,U.tx=0,void(U.ty=0)):(r=r?(h=f1(r),S1(r)):(h=0,1),f=f||1,U.a=r*(b=b||1),U.b=h*b,U.c=-h*f,U.d=r*f,U.tx=K||0,U.ty=B||0,U)},LH.prototype.apply=function(r,K){K=K||new i;var B=r.x,r=r.y;return K.x=this.a*B+this.c*r+this.tx,K.y=this.b*B+this.d*r+this.ty,K},LH.prototype.applyInverse=function(r,K){K=K||new i;var B=1/(this.a*this.d+this.c*-this.b),b=r.x,r=r.y;return K.x=this.d*B*b+-this.c*B*r+(this.ty*this.c-this.tx*this.d)*B,K.y=this.a*B*r+-this.b*B*b+(-this.ty*this.a+this.tx*this.b)*B,K},LH.prototype.translate=function(r,K){return this.tx+=r,this.ty+=K,this},LH.prototype.scale=function(r,K){return this.a*=r,this.d*=K,this.c*=r,this.b*=K,this.tx*=r,this.ty*=K,this},LH.prototype.rotate=function(r){var K=Math.cos(r),r=Math.sin(r),B=this.a,b=this.c,f=this.tx;return this.a=B*K-this.b*r,this.b=B*r+this.b*K,this.c=b*K-this.d*r,this.d=b*r+this.d*K,this.tx=f*K-this.ty*r,this.ty=f*r+this.ty*K,this},LH.prototype.appendTranslate=function(r,K){return this.tx+=this.a*r+this.c*K,this.ty+=this.b*r+this.d*K,this},LH.prototype.appendScale=function(r,K){return this.a*=r,this.d*=K,this.c*=K,this.b*=r,this},LH.prototype.appendRotate=function(r){if(!r)return this;var K=Math.cos(r),r=Math.sin(r),B=this.a,b=this.b;return this.a=B*K+this.c*r,this.b=b*K+this.d*r,this.c=-B*r+this.c*K,this.d=-b*r+this.d*K,this},LH.prototype.append=function(r){var K=this.a,B=this.b,b=this.c,f=this.d;return this.a=r.a*K+r.b*b,this.b=r.a*B+r.b*f,this.c=r.c*K+r.d*b,this.d=r.c*B+r.d*f,this.tx=r.tx*K+r.ty*b+this.tx,this.ty=r.tx*B+r.ty*f+this.ty,this},LH.prototype.setTransform=function(r,K,B,b,f,h,U,a,P){var H=Math.sin(U),U=Math.cos(U),Y=Math.cos(P),P=Math.sin(P),S=-Math.sin(a),a=Math.cos(a),_=U*f,f=H*f,U=U*h;return this.a=Y*_+P*(H=-H*h),this.b=Y*f+P*U,this.c=S*_+a*H,this.d=S*f+a*U,this.tx=r+(B*_+b*H),this.ty=K+(B*f+b*U),this},LH.prototype.prepend=function(r){var K,B,b=this.tx;return 1===r.a&&0===r.b&&0===r.c&&1===r.d||(K=this.a,B=this.c,this.a=K*r.a+this.b*r.c,this.b=K*r.b+this.b*r.d,this.c=B*r.a+this.d*r.c,this.d=B*r.b+this.d*r.d),this.tx=b*r.a+this.ty*r.c+r.tx,this.ty=b*r.b+this.ty*r.d+r.ty,this},LH.prototype.transform=LH.prototype.prepend,LH.prototype.invert=function(){var r=this.a,K=this.b,B=this.c,b=this.d,f=this.tx,h=r*b-K*B;return this.a=b/h,this.b=-K/h,this.c=-B/h,this.d=r/h,this.tx=(B*this.ty-b*f)/h,this.ty=-(r*this.ty-K*f)/h,this},LH.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},LH.prototype.clone=function(){var r=new LH;return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},LH.prototype.copy=function(r){return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},LH.prototype.tf=function(r,K){1===arguments.length&&(K=r.y,r=r.x);var B=this;return{x:B.a*r+B.c*K+B.tx,y:B.b*r+B.d*K+B.ty}},LH.prototype.toArray=function(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]},LH.prototype.fromArray=function(r){return this.a=r[0],this.b=r[1],this.c=r[2],this.d=r[3],this.tx=r[4],this.ty=r[5],this},LH.prototype.toArray9=function(){return[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1]},LH.prototype.tfi=function(r,K){1===arguments.length&&(K=r.y,r=r.x);var B=this,b=1/(B.a*B.d+B.c*-B.b);return{x:B.d*b*r+-B.c*b*K+(B.ty*B.c-B.tx*B.d)*b,y:B.a*b*K+-B.b*b*r+(-B.ty*B.a+B.tx*B.b)*b}},LH.prototype.decompose=function(){var r=this,K=r.a,B=r.b,b=r.c,f=r.d,h=Math.sqrt(K*K+B*B),U=Math.sqrt(b*b+f*f);return K*f-B*b<0&&(K<f?h=-h:U=-U),h&&(K*=1/h,B*=1/h),U&&(f*=1/U),{translateX:r.tx,translateY:r.ty,rotation:Math.atan2(B,K),scaleX:h,scaleY:U}},LH.IDENTITY=new LH,LH.TEMP_MATRIX=new LH,M.Math.Quaternion=function(r,K,B,b){this.set(r,K,B,b)}),GH=(A.assign(FH.prototype,{set:function(r,K,B,b){var f=this;return f._x=r||0,f._y=K||0,f._z=B||0,f._w=b!==P1?b:1,f},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(r){var K=this;return K._x=r._x,K._y=r._y,K._z=r._z,K._w=r._w,K},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this},dot:function(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var r=this.length();return 0===r?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(r=1/r),this._y=this._y*r,this._z=this._z*r,this._w=this._w*r),this},fromArray:function(r,K){return this._x=r[K=K===P1?0:K],this._y=r[K+1],this._z=r[K+2],this._w=r[K+3],this},slerp:function(r,K){if(0===K)return this;if(1===K)return this.copy(r);var B=this._x,b=this._y,f=this._z,h=this._w;if((U=h*r._w+B*r._x+b*r._y+f*r._z)<0?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,U=-U):this.copy(r),1<=U)return this._w=h,this._x=B,this._y=b,this._z=f,this;if(r=Math.sqrt(1-U*U),Math.abs(r)<.001)return this._w=.5*(h+this._w),this._x=.5*(B+this._x),this._y=.5*(b+this._y),this._z=.5*(f+this._z),this;var U=Math.atan2(r,U),a=Math.sin((1-K)*U)/r,K=Math.sin(K*U)/r;return this._w=h*a+this._w*K,this._x=B*a+this._x*K,this._y=b*a+this._y*K,this._z=f*a+this._z*K,this},equals:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w},setFromAxisAngle:function(r,K){var K=K/2,B=Math.sin(K);return this._x=r.x*B,this._y=r.y*B,this._z=r.z*B,this._w=Math.cos(K),this},setFromEuler:function(r){var K=r._x,B=r._y,b=r._z,r=r._order,f=Math.cos,h=Math.sin,U=f(K/2),a=f(B/2),f=f(b/2),K=h(K/2),B=h(B/2),h=h(b/2);return"XYZ"===r?(this._x=K*a*f+U*B*h,this._y=U*B*f-K*a*h,this._z=U*a*h+K*B*f,this._w=U*a*f-K*B*h):"YXZ"===r?(this._x=K*a*f+U*B*h,this._y=U*B*f-K*a*h,this._z=U*a*h-K*B*f,this._w=U*a*f+K*B*h):"ZXY"===r?(this._x=K*a*f-U*B*h,this._y=U*B*f+K*a*h,this._z=U*a*h+K*B*f,this._w=U*a*f-K*B*h):"ZYX"===r?(this._x=K*a*f-U*B*h,this._y=U*B*f+K*a*h,this._z=U*a*h-K*B*f,this._w=U*a*f+K*B*h):"YZX"===r?(this._x=K*a*f+U*B*h,this._y=U*B*f+K*a*h,this._z=U*a*h-K*B*f,this._w=U*a*f-K*B*h):"XZY"===r&&(this._x=K*a*f-U*B*h,this._y=U*B*f-K*a*h,this._z=U*a*h+K*B*f,this._w=U*a*f+K*B*h),this},setFromRotationMatrix:function(r){var K,B=(r=r.el)[0],b=r[4],f=r[8],h=r[1],U=r[5],a=r[9],P=r[2],H=r[6],Y=B+U+(r=r[10]);return 0<Y?(K=.5/Math.sqrt(Y+1),this._w=.25/K,this._x=(H-a)*K,this._y=(f-P)*K,this._z=(h-b)*K):U<B&&r<B?(K=2*Math.sqrt(1+B-U-r),this._w=(H-a)/K,this._x=.25*K,this._y=(b+h)/K,this._z=(f+P)/K):r<U?(K=2*Math.sqrt(1+U-B-r),this._w=(f-P)/K,this._x=(b+h)/K,this._y=.25*K,this._z=(a+H)/K):(K=2*Math.sqrt(1+r-B-U),this._w=(h-b)/K,this._x=(f+P)/K,this._y=(a+H)/K,this._z=.25*K),this},setFromToVectors:function(r,K){return Ws===P1&&(Ws=new e1),($s=r.dot(K)+1)<1e-7?($s=0,Math.abs(r.x)>Math.abs(r.z)?Ws.set(-r.y,r.x,0):Ws.set(0,-r.z,r.y)):Ws.crossVectors(r,K),this._x=Ws.x,this._y=Ws.y,this._z=Ws.z,this._w=$s,this.normalize()},setFromUnitVectors:function(r,K){return Zs===P1&&(Zs=new e1),(gs=r.dot(K)+1)<1e-6?(gs=0,Math.abs(r.x)>Math.abs(r.z)?Zs.set(-r.y,r.x,0):Zs.set(0,-r.z,r.y)):Zs.crossVectors(r,K),this._x=Zs.x,this._y=Zs.y,this._z=Zs.z,this._w=gs,this.normalize()},multiply:function(r){return this.multiplyQuaternions(this,r)},premultiply:function(r){return this.multiplyQuaternions(r,this)},multiplyQuaternions:function(r,K){var B=r._x,b=r._y,f=r._z,r=r._w,h=K._x,U=K._y,a=K._z,K=K._w;return this._x=B*K+r*h+b*a-f*U,this._y=b*K+r*U+f*h-B*a,this._z=f*K+r*a+B*U-b*h,this._w=r*K-B*h-b*U-f*a,this},toArray:function(r,K){return(r=r||[])[K=K||0]=this._x,r[K+1]=this._y,r[K+2]=this._z,r[K+3]=this._w,r}}),FH.slerpFlat=function(r,K,B,b,f,h,U){var a,P,H,Y=B[b+0],S=B[b+1],_=B[b+2],B=B[b+3],b=f[h+0],e=f[h+1],o=f[h+2],f=f[h+3];return 0===U?(r[K+0]=Y,r[K+1]=S,r[K+2]=_,void(r[K+3]=B)):1===U?(r[K+0]=b,r[K+1]=e,r[K+2]=o,void(r[K+3]=f)):(B===f&&Y===b&&S===e&&_===o||(h=1-U,a=0<=(P=Y*b+S*e+_*o+B*f)?1:-1,(H=1-P*P)>Number.EPSILON&&(H=Math.sqrt(H),P=Math.atan2(H,P*a),h=Math.sin(h*P)/H,U=Math.sin(U*P)/H),Y=Y*h+b*(P=U*a),S=S*h+e*P,_=_*h+o*P,B=B*h+f*P,h===1-U&&(Y*=H=1/Math.sqrt(Y*Y+S*S+_*_+B*B),S*=H,_*=H,B*=H)),r[K]=Y,r[K+1]=S,r[K+2]=_,void(r[K+3]=B))},M.Math.Vector4=function(r,K,B,b){this.x=r||0,this.y=K||0,this.z=B||0,this.w=b!==P1?b:1}),e1=(A.assign(GH.prototype,{isVector4:!0,set:function(r,K,B,b){return this.x=r,this.y=K,this.z=B,this.w=b,this},setScalar:function(r){return this.x=r,this.y=r,this.z=r,this.w=r,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setZ:function(r){return this.z=r,this},setW:function(r){return this.w=r,this},setComponent:function(r,K){switch(r){case 0:this.x=K;break;case 1:this.y=K;break;case 2:this.z=K;break;case 3:this.w=K;break;default:throw new Error("index is out of range: "+r)}return this},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=r.w!==P1?r.w:1,this},add:function(r,K){return K!==P1?this.addVectors(r,K):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this)},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this},addVectors:function(r,K){return this.x=r.x+K.x,this.y=r.y+K.y,this.z=r.z+K.z,this.w=r.w+K.w,this},addScaledVector:function(r,K){return this.x+=r.x*K,this.y+=r.y*K,this.z+=r.z*K,this.w+=r.w*K,this},sub:function(r,K){return K!==P1?this.subVectors(r,K):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this)},subScalar:function(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this},subVectors:function(r,K){return this.x=r.x-K.x,this.y=r.y-K.y,this.z=r.z-K.z,this.w=r.w-K.w,this},multiplyScalar:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},applyMatrix4:function(r){var K=this.x,B=this.y,b=this.z,f=this.w,r=r.el;return this.x=r[0]*K+r[4]*B+r[8]*b+r[12]*f,this.y=r[1]*K+r[5]*B+r[9]*b+r[13]*f,this.z=r[2]*K+r[6]*B+r[10]*b+r[14]*f,this.w=r[3]*K+r[7]*B+r[11]*b+r[15]*f,this},divideScalar:function(r){return this.multiplyScalar(1/r)},setAxisAngleFromQuaternion:function(r){this.w=2*Math.acos(r.w);var K=Math.sqrt(1-r.w*r.w);return K<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/K,this.y=r.y/K,this.z=r.z/K),this},setAxisAngleFromRotationMatrix:function(r){var K,B,b,f=(r=r.el)[0],h=r[4],U=r[8],a=r[1],P=r[5],H=r[9],Y=r[2],S=r[6],r=r[10];if(Math.abs(h-a)<.01&&Math.abs(U-Y)<.01&&Math.abs(H-S)<.01){if(Math.abs(h+a)<.1&&Math.abs(U+Y)<.1&&Math.abs(H+S)<.1&&Math.abs(f+P+r-3)<.1)return this.set(1,0,0,0),this;var _=Math.PI,e=(f+1)/2,o=(P+1)/2,x=(r+1)/2,T=(h+a)/4,t=(U+Y)/4,p=(H+S)/4;return o<e&&x<e?b=e<.01?(K=0,B=.707106781):(B=T/(K=Math.sqrt(e)),t/K):x<o?b=o<.01?(B=0,K=.707106781):(K=T/(B=Math.sqrt(o)),p/B):x<.01?(B=K=.707106781,b=0):(K=t/(b=Math.sqrt(x)),B=p/b),this.set(K,B,b,_),this}return e=Math.sqrt((S-H)*(S-H)+(U-Y)*(U-Y)+(a-h)*(a-h)),Math.abs(e)<.001&&(e=1),this.x=(S-H)/e,this.y=(U-Y)/e,this.z=(a-h)/e,this.w=Math.acos((f+P+r-1)/2),this},min:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this},max:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this},clamp:function(r,K){return this.x=Math.max(r.x,Math.min(K.x,this.x)),this.y=Math.max(r.y,Math.min(K.y,this.y)),this.z=Math.max(r.z,Math.min(K.z,this.z)),this.w=Math.max(r.w,Math.min(K.w,this.w)),this},clampScalar:function(r,K){return Xs===P1&&(Xs=new GH,cs=new GH),Xs.set(r,r,r,r),cs.set(K,K,K,K),this.clamp(Xs,cs)},clampLength:function(r,K){var B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(r,Math.min(K,B)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(r){return this.normalize().multiplyScalar(r)},lerp:function(r,K){return this.x+=(r.x-this.x)*K,this.y+=(r.y-this.y)*K,this.z+=(r.z-this.z)*K,this.w+=(r.w-this.w)*K,this},lerpVectors:function(r,K,B){return this.subVectors(K,r).multiplyScalar(B).add(r)},equals:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w},fromArray:function(r,K){return this.x=r[K=K===P1?0:K],this.y=r[K+1],this.z=r[K+2],this.w=r[K+3],this},toArray:function(r,K){return(r=r===P1?[]:r)[K=K===P1?0:K]=this.x,r[K+1]=this.y,r[K+2]=this.z,r[K+3]=this.w,r},fromBufferAttribute:function(r,K,B){return this.x=r.getX(K),this.y=r.getY(K),this.z=r.getZ(K),this.w=r.getW(K),this}}),M.Math.Vector3=function(r,K,B){r===P1?(this.x=0,this.y=0,this.z=0):"object"==typeof r?this.copy(r):this.set(r,K==P1?r:K,B==P1?r:B)}),dH=(A.assign(e1.prototype,{isVector3:!0,isNaN:function(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.z)},set:function(r,K,B){return this.x=r,this.y=K,this.z=B,this},equals:function(r){return r&&this.x===r.x&&this.y===r.y&&this.z===r.z},setScalar:function(r){return this.x=r,this.y=r,this.z=r,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setZ:function(r){return this.z=r,this},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(r){return r.x===P1?(this.x=r[0],this.y=r[1],this.z=r[2]):(this.x=r.x,this.y=r.y,this.z=r.z||0),this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this},addVectors:function(r,K){return this.x=r.x+K.x,this.y=r.y+K.y,this.z=r.z+K.z,this},addScaledVector:function(r,K){return this.x+=r.x*K,this.y+=r.y*K,this.z+=r.z*K,this},sub:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this},subScalar:function(r){return this.x-=r,this.y-=r,this.z-=r,this},subVectors:function(r,K){return this.x=r.x-K.x,this.y=r.y-K.y,this.z=r.z-K.z,this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this},multiplyScalar:function(r){return this.x*=r,this.y*=r,this.z*=r,this},divideScalar:function(r){return 0!==r?(this.x*=r=1/r,this.y*=r,this.z*=r):(this.x=0,this.y=0,this.z=0),this},distanceTo:function(r){return Math.sqrt(this.distanceToSquared(r))},distanceToSquared:function(r){var K=this.x-r.x,B=this.y-r.y;return K*K+B*B+(r=this.z-r.z)*r},distanceToSquared2:function(r){var K=this.x-r[0],B=this.y-r[1];return K*K+B*B+(r=this.z-r[2])*r},divideVectors:function(r,K){return this.x=r.x/K.x,this.y=r.y/K.y,this.z=r.z/K.z,this},multiplyVectors:function(r,K){return this.x=r.x*K.x,this.y=r.y*K.y,this.z=r.z*K.z,this},transformDirection:function(r){var K=this.x,B=this.y,b=this.z,r=r.el;return this.x=r[0]*K+r[4]*B+r[8]*b,this.y=r[1]*K+r[5]*B+r[9]*b,this.z=r[2]*K+r[6]*B+r[10]*b,this.normalize()},applyAxisAngle:(Es=new FH,function(r,K){return this.applyQuaternion(Es.setFromAxisAngle(r,K))}),applyEuler:(Qs=new FH,function(r){return this.applyQuaternion(Qs.setFromEuler(r))}),applyQuaternion:function(r){var K=this.x,B=this.y,b=this.z,f=r._x,h=r._y,U=r._z,a=(r=r._w)*K+h*b-U*B,P=r*B+U*K-f*b,H=r*b+f*B-h*K;return this.x=a*r+(K=-f*K-h*B-U*b)*-f+P*-U-H*-h,this.y=P*r+K*-h+H*-f-a*-U,this.z=H*r+K*-U+a*-h-P*-f,this},applyMatrix4:function(r){var K=this.x,B=this.y,b=this.z,f=1/((r=r.el)[3]*K+r[7]*B+r[11]*b+r[15]);return this.x=(r[0]*K+r[4]*B+r[8]*b+r[12])*f,this.y=(r[1]*K+r[5]*B+r[9]*b+r[13])*f,this.z=(r[2]*K+r[6]*B+r[10]*b+r[14])*f,this},applyMatrix3:function(r){var K=this.x,B=this.y,b=this.z,r=r.el;return this.x=r[0]*K+r[3]*B+r[6]*b,this.y=r[1]*K+r[4]*B+r[7]*b,this.z=r[2]*K+r[5]*B+r[8]*b,this},applyNormalMatrix:function(r){return this.applyMatrix3(r).normalize()},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},reflect:(Os=new e1,function(r){return this.sub(Os.copy(r).multiplyScalar(2*this.dot(r)))}),dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){var r=this.length();return r?this.multiplyScalar(1/r):this},setLength:function(r){return this.normalize().multiplyScalar(r)},fromArray:function(r,K){return this.x=r[K=K===P1?0:K],this.y=r[K+1],this.z=r[K+2],this},toArray:function(r,K){return(r=r===P1?[0,0,0]:r)[K=K===P1?0:K]=this.x,r[K+1]=this.y,r[K+2]=this.z,r},cross:function(r){return this.crossVectors(this,r)},angleTo:function(r){return 1+1e-6<(r=this.dot(r)/Math.sqrt(this.lengthSq()*r.lengthSq()))||r<-1-1e-6?0:Math.acos(D.clamp(r,-1,1))},lerp:function(r,K){return this.x+=(r.x-this.x)*K,this.y+=(r.y-this.y)*K,this.z+=(r.z-this.z)*K,this},lerpVectors:function(r,K,B){return this.subVectors(K,r).multiplyScalar(B).add(r)},crossVectors:function(r,K){var B=r.x,b=r.y,r=r.z,f=K.x,h=K.y,K=K.z;return this.x=b*K-r*h,this.y=r*f-B*K,this.z=B*h-b*f,this},min:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this},max:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this},setFromMatrixPosition:function(r){return this.setFromMatrixColumn(r,3)},setFromMatrixScale:function(r){var K=this.setFromMatrixColumn(r,0).length(),B=this.setFromMatrixColumn(r,1).length(),r=this.setFromMatrixColumn(r,2).length();return this.x=K,this.y=B,this.z=r,this},setFromMatrixColumn:function(r,K){return this.fromArray(r.el,4*K)}}),e1.UP=new e1(0,1,0),e1.AxisX=new e1(1,0,0),e1.AxisY=new e1(0,1,0),e1.AxisZ=new e1(0,0,1),e1.normalizeArray=(rL=new e1,function(r){return rL.copy(r).normalize().toArray()}),KL=new e1,function(r,K){return(K=K||KL).x=r[0],K.y=r[1],K.z=r[2],K}),i=M.Math.Vector2=function(r,K,B){"object"==typeof r&&(r=r.x!=P1?(K=r.y,B=r.e,r.x):(B=r[2],K=r[1],r[0])),this.set(r||0,K||0,B)},B=(i.prototype={},(i.prototype.constructor=i).prototype.isVector2=!0,A.defineProperties(i.prototype,{width:{get:function(){return this.x},set:function(r){this.x=r}},height:{get:function(){return this.y},set:function(r){this.y=r}}}),i.prototype.clone=function(){return new i(this.x,this.y,this.e)},i.prototype.copy=function(r){return this.set(r.x,r.y,r.e),this},i.prototype.equals=function(r){return r.x===this.x&&r.y===this.y&&r.e===this.e},i.prototype.set=function(r,K,B){return this.x=r||0,this.y=K||(0!==K?this.x:0),B!=P1&&(this.e=B),this},i.prototype.setScalar=function(r){return this.x=r,this.y=r,this.e=r,this},i.prototype.setX=function(r){return this.x=r||0,this},i.prototype.setY=function(r){return this.y=r||0,this},i.prototype.setE=function(r){return this.e=r||0,this},i.prototype.add=function(r){return this.x+=r.x,this.y+=r.y,this},i.prototype.addVectors=function(r,K){return this.x=r.x+K.x,this.y=r.y+K.y,this},i.prototype.addScalar=function(r){return this.x+=r,this.y+=r,this},i.prototype.addScaledVector=function(r,K){return this.x+=r.x*K,this.y+=r.y*K,this},i.prototype.sub=function(r){return this.x-=r.x,this.y-=r.y,this},i.prototype.subScalar=function(r){return this.x-=r,this.y-=r,this},i.prototype.subVectors=function(r,K){return this.x=r.x-K.x,this.y=r.y-K.y,this},i.prototype.multiply=function(r){return this.x*=r.x,this.y*=r.y,this},i.prototype.multiplyScalar=function(r){return this.x*=r,this.y*=r,this},i.prototype.divide=function(r){return this.x/=r.x,this.y/=r.y,this},i.prototype.divideScalar=function(r){return this.multiplyScalar(1/r)},i.prototype.min=function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this},i.prototype.max=function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this},i.prototype.fromArray=function(r,K){return this.x=r[K=K===P1?0:K],this.y=r[K+1],this},i.prototype.clamp=function(r,K){return this.x=Math.max(r.x,Math.min(K.x,this.x)),this.y=Math.max(r.y,Math.min(K.y,this.y)),this},i.prototype.clampScalar=function(r,K){return BL===P1&&(BL=new i,bL=new i),BL.set(r,r),bL.set(K,K),this.clamp(BL,bL)},i.prototype.clampLength=function(r,K){var B=this.length();return this.multiplyScalar(Math.max(r,Math.min(K,B))/B)},i.prototype.dot=function(r){return this.x*r.x+this.y*r.y},i.prototype.cross=function(r){return this.x*r.y-this.y*r.x},i.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},i.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.prototype.normalize=function(){return this.divideScalar(this.length())},i.prototype.angle=function(){var r=Math.atan2(this.y,this.x);return r<0&&(r+=2*Math.PI),r},i.prototype.distanceTo=function(r){return Math.sqrt(this.distanceToSquared(r))},i.prototype.distanceToSquared=function(r){var K=this.x-r.x;return K*K+(r=this.y-r.y)*r},i.prototype.isNearEnough=function(r){return this.distanceToSquared(r)<1e-8},i.prototype.setLength=function(r){var K=this.length();return K?this.multiplyScalar(r/K):this},i.prototype.lerp=function(r,K){return this.x+=(r.x-this.x)*K,this.y+=(r.y-this.y)*K,"number"==typeof r.e&&"number"==typeof this.e&&(this.e+=(r.e-this.e)*K),this},i.prototype.lerpVectors=function(r,K,B){return this.subVectors(K,r).multiplyScalar(B).add(r)},i.prototype.rotateAround=function(r,K){var B=r?r.x:0,r=r?r.y:0,b=Math.cos(K),K=Math.sin(K),f=this.x-B,h=this.y-r;return this.x=f*b-h*K+B,this.y=f*K+h*b+r,this},M.Math.Matrix3=function(){this.el=[1,0,0,0,1,0,0,0,1]}),sH=(A.assign(B.prototype,{isMatrix3:!0,set:function(r,K,B,b,f,h,U,a,P){var H=this.el;return H[0]=r,H[1]=b,H[2]=U,H[3]=K,H[4]=f,H[5]=a,H[6]=B,H[7]=h,H[8]=P,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.el)},copy:function(r){var K=this.el,r=r.el;return K[0]=r[0],K[1]=r[1],K[2]=r[2],K[3]=r[3],K[4]=r[4],K[5]=r[5],K[6]=r[6],K[7]=r[7],K[8]=r[8],this},setFromMatrix4:function(r){return r=r.el,this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this},applyToBufferAttribute:(fL=new e1,function(r){for(var K=0,B=r.count;K<B;K++)fL.x=r.getX(K),fL.y=r.getY(K),fL.z=r.getZ(K),fL.applyMatrix3(this),r.setXYZ(K,fL.x,fL.y,fL.z);return r}),multiply:function(r){return this.multiplyMatrices(this,r)},premultiply:function(r){return this.multiplyMatrices(r,this)},multiplyMatrices:function(r,K){var r=r.el,K=K.el,B=this.el,b=r[0],f=r[3],h=r[6],U=r[1],a=r[4],P=r[7],H=r[2],Y=r[5],r=r[8],S=K[0],_=K[3],e=K[6],o=K[1],x=K[4],T=K[7],t=K[2],p=K[5],K=K[8];return B[0]=b*S+f*o+h*t,B[3]=b*_+f*x+h*p,B[6]=b*e+f*T+h*K,B[1]=U*S+a*o+P*t,B[4]=U*_+a*x+P*p,B[7]=U*e+a*T+P*K,B[2]=H*S+Y*o+r*t,B[5]=H*_+Y*x+r*p,B[8]=H*e+Y*T+r*K,this},multiplyScalar:function(r){var K=this.el;return K[0]*=r,K[3]*=r,K[6]*=r,K[1]*=r,K[4]*=r,K[7]*=r,K[2]*=r,K[5]*=r,K[8]*=r,this},determinant:function(){var r=this.el,K=r[0],B=r[1],b=r[2],f=r[3],h=r[4],U=r[5],a=r[6],P=r[7];return K*h*(r=r[8])-K*U*P-B*f*r+B*U*a+b*f*P-b*h*a},getInverse:function(r,K){var r=r.el,B=this.el,b=r[0],f=r[1],h=r[2],U=r[3],a=r[4],P=r[5],H=r[6],Y=r[7],S=(r=r[8])*a-P*Y,_=P*H-r*U,e=Y*U-a*H,o=b*S+f*_+h*e;return 0==o?this.identity():(B[0]=S*(o=1/o),B[1]=(h*Y-r*f)*o,B[2]=(P*f-h*a)*o,B[3]=_*o,B[4]=(r*b-h*H)*o,B[5]=(h*U-P*b)*o,B[6]=e*o,B[7]=(f*H-Y*b)*o,B[8]=(a*b-f*U)*o,this)},transpose:function(){var r=this.el,K=r[1];return r[1]=r[3],r[3]=K,K=r[2],r[2]=r[6],r[6]=K,K=r[5],r[5]=r[7],r[7]=K,this},getNormalMatrix:function(r){return this.setFromMatrix4(r).getInverse(this).transpose()},transposeIntoArray:function(r){var K=this.el;return r[0]=K[0],r[1]=K[3],r[2]=K[6],r[3]=K[1],r[4]=K[4],r[5]=K[7],r[6]=K[2],r[7]=K[5],r[8]=K[8],this},setUvTransform:function(r,K,B,b,f,h,U){var a=Math.cos(f),f=Math.sin(f);this.set(B*a,B*f,-B*(a*h+f*U)+h+r,-b*f,b*a,-b*(-f*h+a*U)+U+K,0,0,1)},scale:function(r,K){var B=this.el;return B[0]*=r,B[3]*=r,B[6]*=r,B[1]*=K,B[4]*=K,B[7]*=K,this},rotate:function(r){var K=Math.cos(r),r=Math.sin(r),B=this.el,b=B[0],f=B[3],h=B[6],U=B[1],a=B[4],P=B[7];return B[0]=K*b+r*U,B[3]=K*f+r*a,B[6]=K*h+r*P,B[1]=-r*b+K*U,B[4]=-r*f+K*a,B[7]=-r*h+K*P,this},translate:function(r,K){var B=this.el;return B[0]+=r*B[2],B[3]+=r*B[5],B[6]+=r*B[8],B[1]+=K*B[2],B[4]+=K*B[5],B[7]+=K*B[8],this},equals:function(r){for(var K=this.el,B=r.el,b=0;b<9;b++)if(K[b]!==B[b])return!1;return!0},fromArray:function(r,K){K===P1&&(K=0);for(var B=0;B<9;B++)this.el[B]=r[B+K];return this},getElements:function(){return this.el},toArray:function(r,K){var B=this.el;return(r=r===P1?[]:r)[K=K===P1?0:K]=B[0],r[K+1]=B[1],r[K+2]=B[2],r[K+3]=B[3],r[K+4]=B[4],r[K+5]=B[5],r[K+6]=B[6],r[K+7]=B[7],r[K+8]=B[8],r}}),M.Math.Plane=function(r,K){this.normal=r!==P1?r:new e1(1,0,0),this.constant=K!==P1?K:0}),nH=(A.assign(sH.prototype,{set:function(r,K){return this.normal.copy(r),this.constant=K,this},setComponents:function(r,K,B,b){return this.normal.set(r,K,B),this.constant=b,this},setFromNormalAndCoplanarPoint:function(r,K){return this.normal.copy(r),this.constant=-K.dot(this.normal),this},setFromCoplanarPoints:(PL=new e1,HL=new e1,function(r,K,B){return B=PL.subVectors(B,K).cross(HL.subVectors(r,K)).normalize(),this.setFromNormalAndCoplanarPoint(B,r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(r){return this.normal.copy(r.normal),this.constant=r.constant,this},normalize:function(){var r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(r){return this.normal.dot(r)+this.constant},distanceToSphere:function(r){return this.distanceToPoint(r.center)-r.radius},projectPoint:function(r,K){return(K=K===P1?new e1:K).copy(this.normal).multiplyScalar(-this.distanceToPoint(r)).add(r)},intersectLine:(aL=new e1,function(r,K){K===P1&&(K=new e1);var B=r.delta(aL),b=this.normal.dot(B);return 0===b?0===this.distanceToPoint(r.start)?K.copy(r.start):P1:(b=-(r.start.dot(this.normal)+this.constant)/b)<0||1<b?P1:K.copy(B).multiplyScalar(b).add(r.start)}),intersectsLine:function(r){var K=this.distanceToPoint(r.start),r=this.distanceToPoint(r.end);return K<0&&0<r||r<0&&0<K},intersectsBox:function(r){return r.intersectsPlane(this)},intersectsSphere:function(r){return r.intersectsPlane(this)},coplanarPoint:function(r){return(r=r===P1?new e1:r).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(hL=new e1,UL=new B,function(r,K){return K=K||UL.getNormalMatrix(r),r=this.coplanarPoint(hL).applyMatrix4(r),K=this.normal.applyMatrix3(K).normalize(),this.constant=-r.dot(K),this}),translate:function(r){return this.constant-=r.dot(this.normal),this},equals:function(r){return r.normal.equals(this.normal)&&r.constant===this.constant}}),M.Math.Ray=function(r,K){this.origin=r!==P1?r.clone():new e1,this.direction=K!==P1?K.clone():new e1}),AH=(A.assign(nH.prototype,{set:function(r,K){return this.origin.copy(r),this.direction.copy(K),this},clone:function(){return(new this.constructor).copy(this)},copy:function(r){return this.origin.copy(r.origin),this.direction.copy(r.direction),this.maxHitLen=r.maxHitLen,this},at:function(r,K){return(K||new e1).copy(this.direction).multiplyScalar(r).add(this.origin)},setMaxHitLength:function(r){this.maxHitLen=r},lookAt:function(r){return this.direction.copy(r).sub(this.origin).normalize(),this},applyMatrix4:function(r){var K,B=this.maxHitLen;return B&&(K=this.direction.clone().multiplyScalar(B).add(this.origin)).applyMatrix4(r),this.origin.applyMatrix4(r),this.direction.transformDirection(r),B&&(this.maxHitLen=this.origin.distanceTo(K)),this},distanceToPlane:function(r){var K=r.normal.dot(this.direction);return 0===K?0===r.distanceToPoint(this.origin)?0:null:0<=(r=-(this.origin.dot(r.normal)+r.constant)/K)?r:null},intersectPlane:function(r,K){return null===(r=this.distanceToPlane(r))?null:this.at(r,K)},intersectSphere:(TL=new e1,function(r,K){TL.subVectors(r.center,this.origin);var B=TL.dot(this.direction),b=TL.dot(TL)-B*B;return(r=r.radius*r.radius)<b?null:(b=B-(r=Math.sqrt(r-b)),B+=r,b<0&&B<0?null:b<0?this.at(B,K):this.at(b,K))}),intersectEllipsoid:(oL=new e1,xL=new e1,function(r,K){oL.subVectors(r.center,this.origin),oL.divide(r.radius),xL.divideVectors(this.direction,r.radius);var r=xL.lengthSq(),B=oL.dot(xL),b=oL.dot(oL)*r-B*B;if(r<b)return null;var f=(B-(b=Math.sqrt(r-b)))/r,B=(B+b)/r;return f<0&&B<0?null:f<0?this.at(B,K):this.at(f,K)}),intersectBox:function(r,K){var B,b,f,h=1/this.direction.x,U=1/this.direction.y,a=1/this.direction.z,P=this.origin,h=0<=h?(B=(r.min.x-P.x)*h,(r.max.x-P.x)*h):(B=(r.max.x-P.x)*h,(r.min.x-P.x)*h);return(U=0<=U?(f=(r.min.y-P.y)*U,(r.max.y-P.y)*U):(f=(r.max.y-P.y)*U,(r.min.y-P.y)*U))<B||h<f?null:((B<f||B!=B)&&(B=f),(U<h||h!=h)&&(h=U),(f=0<=a?(b=(r.min.z-P.z)*a,(r.max.z-P.z)*a):(b=(r.max.z-P.z)*a,(r.min.z-P.z)*a))<B||h<b||(h=f<h||h!=h?f:h)<0?null:(U=0<=(B=B<b||B!=B?b:B)?B:h,(r=this.maxHitLen)&&r<U?null:this.at(U,K)))},intersectTriangle:(YL=new e1,SL=new e1,_L=new e1,eL=new e1,function(r,K,B,b,f,h){if(SL.subVectors(K,r),_L.subVectors(B,r),eL.crossVectors(SL,_L),(K=f||0)<(B=this.direction.dot(eL))){if(b)return null}else if(-K<=B)return null;return f=1/B,YL.subVectors(this.origin,r),(b=f*this.direction.dot(_L.crossVectors(YL,_L)))<-K||(B=f*this.direction.dot(SL.cross(YL)))<-K||1+K<b+B||(r=-f*YL.dot(eL))<0||(K=this.maxHitLen)&&K<r?null:this.at(r,h)})}),M.Math.Box3=function(r,K){this.min=r!==P1?r:new e1(1/0,1/0,1/0),this.max=K!==P1?K:new e1(-1/0,-1/0,-1/0)}),Cs=(A.assign(AH.prototype,{set:function(r,K){return this.min.copy(r),this.max.copy(K),this},setFromArray:function(r){for(var K=1/0,B=1/0,b=1/0,f=-1/0,h=-1/0,U=-1/0,a=0,P=r.length;a<P;a+=3){var H=r[a],Y=r[a+1],S=r[a+2];H<K&&(K=H),Y<B&&(B=Y),S<b&&(b=S),f<H&&(f=H),h<Y&&(h=Y),U<S&&(U=S)}return this.min.set(K,B,b),this.max.set(f,h,U),this},setFromPoints:function(r){this.makeEmpty();for(var K=0,B=r.length;K<B;K++)this.expandByPoint(r[K]);return this},clone:function(){return(new this.constructor).copy(this)},intersectsBox:function(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y||r.max.z<this.min.z||r.min.z>this.max.z)},copy:function(r){return this.min.copy(r.min),this.max.copy(r.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(r){return this.isEmpty()?r.set(0,0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)},expandByPoint:function(r){return this.min.min(r),this.max.max(r),this},expandByBox:function(r){return this.min.min(r.min),this.max.max(r.max),this},applyMatrix4:(tL=[new e1,new e1,new e1,new e1,new e1,new e1,new e1,new e1],function(r){return this.isEmpty()||(tL[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r),tL[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r),tL[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r),tL[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r),tL[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r),tL[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r),tL[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r),tL[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r),this.setFromPoints(tL)),this})}),M.Math.Sphere=function(r,K){this.center=r!==P1?r:new e1,this.radius=K!==P1?K:0}),ms=(A.assign(Cs.prototype,{set:function(r,K){return this.center.copy(r),this.radius=K,this},setFromPoints:(pL=new AH,function(r,K){for(var B=this.center,b=(K!==P1?B.copy(K):pL.setFromPoints(r).getCenter(B),0),f=0,h=r.length;f<h;f++)b=Math.max(b,B.distanceToSquared(r[f]));return this.radius=Math.sqrt(b),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(r){return this.center.copy(r.center),this.radius=r.radius,this},empty:function(){return this.radius<=0},containsPoint:function(r){return r.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(r){return r.distanceTo(this.center)-this.radius},intersectsSphere:function(r){var K=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=K*K},intersectsBox:function(r){return r.intersectsSphere(this)},intersectsPlane:function(r){return Math.abs(r.distanceToPoint(this.center))<=this.radius},clampPoint:function(r,K){var B=this.center.distanceToSquared(r);return(K=K===P1?new e1:K).copy(r),B>this.radius*this.radius&&(K.sub(this.center).normalize(),K.multiplyScalar(this.radius).add(this.center)),K},getBoundingBox:function(r){return(r=r===P1?new AH:r).set(this.center,this.center),r.expandByScalar(this.radius),r},applyMatrix4:function(r){return this.center.applyMatrix4(r),this.radius=this.radius*r.getMaxScaleOnAxis(),this},translate:function(r){return this.center.add(r),this},equals:function(r){return r.center.equals(this.center)&&r.radius===this.radius}}),M.Math.Frustum=function(r,K,B,b,f,h){this.planes=[r!==P1?r:new sH,K!==P1?K:new sH,B!==P1?B:new sH,b!==P1?b:new sH,f!==P1?f:new sH,h!==P1?h:new sH]}),Z=(A.assign(ms.prototype,{set:function(r,K,B,b,f,h){var U=this.planes;return U[0].copy(r),U[1].copy(K),U[2].copy(B),U[3].copy(b),U[4].copy(f),U[5].copy(h),this},clone:function(){return(new this.constructor).copy(this)},copy:function(r){for(var K=this.planes,B=0;B<6;B++)K[B].copy(r.planes[B]);return this},setFromMatrix:function(r){var K=this.planes,B=(r=r.el)[0],b=r[1],f=r[2],h=r[3],U=r[4],a=r[5],P=r[6],H=r[7],Y=r[8],S=r[9],_=r[10],e=r[11],o=r[12],x=r[13],T=r[14],r=r[15];return K[0].setComponents(h-B,H-U,e-Y,r-o).normalize(),K[1].setComponents(h+B,H+U,e+Y,r+o).normalize(),K[2].setComponents(h+b,H+a,e+S,r+x).normalize(),K[3].setComponents(h-b,H-a,e-S,r-x).normalize(),K[4].setComponents(h-f,H-P,e-_,r-T).normalize(),K[5].setComponents(h+f,H+P,e+_,r+T).normalize(),this},intersectsObject:(kL=new Cs,function(r){var K=r.geometry;return null===K.boundingSphere&&K.computeBoundingSphere(),kL.copy(K.boundingSphere).applyMatrix4(r.matrixWorld),this.intersectsSphere(kL)}),intersectsSprite:(yL=new Cs,function(r){return yL.center.set(0,0,0),yL.radius=.7071067811865476,yL.applyMatrix4(r.matrixWorld),this.intersectsSphere(yL)}),intersectsSphere:function(r){for(var K=this.planes,B=r.center,b=-r.radius,f=0;f<6;f++)if(K[f].distanceToPoint(B)<b)return!1;return!0},intersectsBox:(qL=new e1,function(r){for(var K=this.planes,B=0;B<6;B++){var b=K[B];if(qL.x=(0<b.normal.x?r.max:r.min).x,qL.y=(0<b.normal.y?r.max:r.min).y,qL.z=(0<b.normal.z?r.max:r.min).z,b.distanceToPoint(qL)<0)return!1}return!0}),containsPoint:function(r){for(var K=this.planes,B=0;B<6;B++)if(K[B].distanceToPoint(r)<0)return!1;return!0}}),M.Math.Matrix4=function(){this.el=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}),VH=(A.assign(Z.prototype,{isMatrix4:!0,set:function(r,K,B,b,f,h,U,a,P,H,Y,S,_,e,o,x){var T=this.el;return T[0]=r,T[4]=K,T[8]=B,T[12]=b,T[1]=f,T[5]=h,T[9]=U,T[13]=a,T[2]=P,T[6]=H,T[10]=Y,T[14]=S,T[3]=_,T[7]=e,T[11]=o,T[15]=x,this},clone:function(){return(new Z).fromArray(this.el)},fromArray:function(r,K){K===P1&&(K=0);for(var B=this.el,b=0;b<16;b++)B[b]=r[b+K];return this},getElements:function(){return this.el},scale:function(r){var K=this.el,B=r.x,b=r.y,r=r.z;return K[0]*=B,K[4]*=b,K[8]*=r,K[1]*=B,K[5]*=b,K[9]*=r,K[2]*=B,K[6]*=b,K[10]*=r,K[3]*=B,K[7]*=b,K[11]*=r,this},translate:function(r){var K=this.el,B=r.x||0,b=r.y||0,r=r.z||0;return K[12]+=K[0]*B+K[4]*b+K[8]*r,K[13]+=K[1]*B+K[5]*b+K[9]*r,K[14]+=K[2]*B+K[6]*b+K[10]*r,K[15]+=K[3]*B+K[7]*b+K[11]*r,this},rotate:(JL=new Z,function(r){return JL.makeRotationFromQuaternion(r),this.multiply(JL)}),makeRotationFromEuler:function(r){var K,B,b,f,h,U,a,P,H,Y,S,_,e=this.el,o=r._x,x=r._y,T=r._z,r=r._order,t=Math.cos(o),o=Math.sin(o),p=Math.cos(x),x=Math.sin(x),q=Math.cos(T),T=Math.sin(T);return"XYZ"===r?(h=t*q,U=t*T,a=o*q,P=o*T,e[0]=p*q,e[4]=-p*T,e[8]=x,e[1]=U+a*x,e[5]=h-P*x,e[9]=-o*p,e[2]=P-h*x,e[6]=a+U*x,e[10]=t*p):"YXZ"===r?(B=p*T,b=x*q,e[0]=(K=p*q)+(f=x*T)*o,e[4]=b*o-B,e[8]=t*x,e[1]=t*T,e[5]=t*q,e[9]=-o,e[2]=B*o-b,e[6]=f+K*o,e[10]=t*p):"ZXY"===r?(B=p*T,b=x*q,e[0]=(K=p*q)-(f=x*T)*o,e[4]=-t*T,e[8]=b+B*o,e[1]=B+b*o,e[5]=t*q,e[9]=f-K*o,e[2]=-t*x,e[6]=o,e[10]=t*p):"ZYX"===r?(h=t*q,U=t*T,a=o*q,P=o*T,e[0]=p*q,e[4]=a*x-U,e[8]=h*x+P,e[1]=p*T,e[5]=P*x+h,e[9]=U*x-a,e[2]=-x,e[6]=o*p,e[10]=t*p):"YZX"===r?(H=t*p,Y=t*x,S=o*p,_=o*x,e[0]=p*q,e[4]=_-H*T,e[8]=S*T+Y,e[1]=T,e[5]=t*q,e[9]=-o*q,e[2]=-x*q,e[6]=Y*T+S,e[10]=H-_*T):"XZY"===r&&(H=t*p,Y=t*x,S=o*p,_=o*x,e[0]=p*q,e[4]=-T,e[8]=x*q,e[1]=H*T+_,e[5]=t*q,e[9]=Y*T-S,e[2]=S*T-Y,e[6]=o*q,e[10]=_*T+H),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(r){var K=this.el,B=r._x,b=r._y,f=r._z,h=f+f,U=B*(H=B+B),a=B*(Y=b+b),B=B*h,P=b*Y,b=b*h,H=(r=r._w)*H,Y=r*Y,r=r*h;return K[0]=1-(P+(f=f*h)),K[4]=a-r,K[8]=B+Y,K[1]=a+r,K[5]=1-(U+f),K[9]=b-H,K[2]=B-Y,K[6]=b+H,K[10]=1-(U+P),K[3]=0,K[7]=0,K[11]=0,K[12]=0,K[13]=0,K[14]=0,K[15]=1,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},getInverse:function(r,K){var B=this.el,b=(r=r.el)[0],f=r[1],h=r[2],U=r[3],a=r[4],P=r[5],H=r[6],Y=r[7],S=r[8],_=r[9],e=r[10],o=r[11],x=r[12],T=r[13],t=r[14],p=_*t*Y-T*e*Y+T*H*o-P*t*o-_*H*(r=r[15])+P*e*r,q=x*e*Y-S*t*Y-x*H*o+a*t*o+S*H*r-a*e*r,y=S*T*Y-x*_*Y+x*P*o-a*T*o-S*P*r+a*_*r,k=x*_*H-S*T*H-x*P*e+a*T*e+S*P*t-a*_*t,w=b*p+f*q+h*y+U*k;return 0==w?this.identity():(B[0]=p*(w=1/w),B[1]=(T*e*U-_*t*U-T*h*o+f*t*o+_*h*r-f*e*r)*w,B[2]=(P*t*U-T*H*U+T*h*Y-f*t*Y-P*h*r+f*H*r)*w,B[3]=(_*H*U-P*e*U-_*h*Y+f*e*Y+P*h*o-f*H*o)*w,B[4]=q*w,B[5]=(S*t*U-x*e*U+x*h*o-b*t*o-S*h*r+b*e*r)*w,B[6]=(x*H*U-a*t*U-x*h*Y+b*t*Y+a*h*r-b*H*r)*w,B[7]=(a*e*U-S*H*U+S*h*Y-b*e*Y-a*h*o+b*H*o)*w,B[8]=y*w,B[9]=(x*_*U-S*T*U-x*f*o+b*T*o+S*f*r-b*_*r)*w,B[10]=(a*T*U-x*P*U+x*f*Y-b*T*Y-a*f*r+b*P*r)*w,B[11]=(S*P*U-a*_*U-S*f*Y+b*_*Y+a*f*o-b*P*o)*w,B[12]=k*w,B[13]=(S*T*h-x*_*h+x*f*e-b*T*e-S*f*t+b*_*t)*w,B[14]=(x*P*h-a*T*h-x*f*H+b*T*H+a*f*t-b*P*t)*w,B[15]=(a*_*h-S*P*h+S*f*H-b*_*H-a*f*e+b*P*e)*w,this)},invert:function(){return this.getInverse(this)},makeRotationAxis:function(r,K){var B=Math.cos(K),K=Math.sin(K),b=1-B,f=r.x,h=r.y,r=r.z,U=b*f,a=b*h;return this.set(U*f+B,U*h-K*r,U*r+K*h,0,U*h+K*r,a*h+B,a*r-K*f,0,U*r-K*h,a*r+K*f,b*r*r+B,0,0,0,0,1),this},multiply:function(r){return this.multiplyMatrices(this,r)},premultiply:function(r){return this.multiplyMatrices(r,this)},multiplyMatrices:function(r,K){var r=r.el||r,K=K.el||K,B=this.el,b=r[0],f=r[4],h=r[8],U=r[12],a=r[1],P=r[5],H=r[9],Y=r[13],S=r[2],_=r[6],e=r[10],o=r[14],x=r[3],T=r[7],t=r[11],r=r[15],p=K[0],q=K[4],y=K[8],k=K[12],w=K[1],v=K[5],z=K[9],N=K[13],u=K[2],j=K[6],I=K[10],L=K[14],J=K[3],F=K[7],G=K[11],K=K[15];return B[0]=b*p+f*w+h*u+U*J,B[4]=b*q+f*v+h*j+U*F,B[8]=b*y+f*z+h*I+U*G,B[12]=b*k+f*N+h*L+U*K,B[1]=a*p+P*w+H*u+Y*J,B[5]=a*q+P*v+H*j+Y*F,B[9]=a*y+P*z+H*I+Y*G,B[13]=a*k+P*N+H*L+Y*K,B[2]=S*p+_*w+e*u+o*J,B[6]=S*q+_*v+e*j+o*F,B[10]=S*y+_*z+e*I+o*G,B[14]=S*k+_*N+e*L+o*K,B[3]=x*p+T*w+t*u+r*J,B[7]=x*q+T*v+t*j+r*F,B[11]=x*y+T*z+t*I+r*G,B[15]=x*k+T*N+t*L+r*K,this},lookAt:(LL=new e1,function(r,K,B){return LL.subVectors(r,K),this.lookAtDirection(LL,B)}),lookAtDirection:(uL=new e1,jL=new e1,IL=new e1,function(r,K){K=K||e1.UP;var B=this.el;return IL.copy(r),0===IL.lengthSq()&&(IL.z=1),IL.normalize(),uL.crossVectors(K,IL),0===uL.lengthSq()&&(1===Math.abs(K.z)?IL.x+=1e-4:IL.z+=1e-4,IL.normalize(),uL.crossVectors(K,IL)),uL.normalize(),jL.crossVectors(IL,uL),B[0]=uL.x,B[4]=jL.x,B[8]=IL.x,B[1]=uL.y,B[5]=jL.y,B[9]=IL.y,B[2]=uL.z,B[6]=jL.z,B[10]=IL.z,this}),extractScale:function(r){NL===P1&&(NL=new e1),r===P1&&(r=new e1);var K=NL.setFromMatrixColumn(this,0).length(),B=NL.setFromMatrixColumn(this,1).length(),b=NL.setFromMatrixColumn(this,2).length();return r.set(K,B,b),r},extractRotation:function(r){zL===P1&&(zL=new e1),r===P1&&(r=new Z);var K=this.el,B=r.el,b=1/zL.setFromMatrixColumn(r,0).length(),f=1/zL.setFromMatrixColumn(r,1).length(),r=1/zL.setFromMatrixColumn(r,2).length();return K[0]=B[0]*b,K[1]=B[1]*b,K[2]=B[2]*b,K[4]=B[4]*f,K[5]=B[5]*f,K[6]=B[6]*f,K[8]=B[8]*r,K[9]=B[9]*r,K[10]=B[10]*r,this},multiplyScalar:function(r){var K=this.el;return K[0]*=r,K[4]*=r,K[8]*=r,K[12]*=r,K[1]*=r,K[5]*=r,K[9]*=r,K[13]*=r,K[2]*=r,K[6]*=r,K[10]*=r,K[14]*=r,K[3]*=r,K[7]*=r,K[11]*=r,K[15]*=r,this},getPosition:function(r){return(r=r===P1?new e1:r).setFromMatrixColumn(this,3)},setPosition:function(r){var K=this.el;return K[12]=r.x,K[13]=r.y,K[14]=r.z,this},copyPosition:function(r){var K=this.el,r=r.el;return K[12]=r[12],K[13]=r[13],K[14]=r[14],this},toArray:function(r,K){var B=this.el;return(r=r===P1?[]:r)[K=K===P1?0:K]=B[0],r[K+1]=B[1],r[K+2]=B[2],r[K+3]=B[3],r[K+4]=B[4],r[K+5]=B[5],r[K+6]=B[6],r[K+7]=B[7],r[K+8]=B[8],r[K+9]=B[9],r[K+10]=B[10],r[K+11]=B[11],r[K+12]=B[12],r[K+13]=B[13],r[K+14]=B[14],r[K+15]=B[15],r},determinant:function(){var r=this.el||this,K=r[0],B=r[4],b=r[8],f=r[12],h=r[1],U=r[5],a=r[9],P=r[13],H=r[2],Y=r[6],S=r[10],_=r[14];return r[3]*(+f*a*Y-b*P*Y-f*U*S+B*P*S+b*U*_-B*a*_)+r[7]*(+K*a*_-K*P*S+f*h*S-b*h*_+b*P*H-f*a*H)+r[11]*(+K*P*Y-K*U*_-f*h*Y+B*h*_+f*U*H-B*P*H)+r[15]*(-b*U*H-K*a*Y+K*U*S+b*h*Y-B*h*S+B*a*H)},copy:function(r){var K=this.el,r=r.el||r;return K[0]=r[0],K[1]=r[1],K[2]=r[2],K[3]=r[3],K[4]=r[4],K[5]=r[5],K[6]=r[6],K[7]=r[7],K[8]=r[8],K[9]=r[9],K[10]=r[10],K[11]=r[11],K[12]=r[12],K[13]=r[13],K[14]=r[14],K[15]=r[15],this},composeFromArray:function(r,K,B){var b,f,h,U,a,P,H,Y,S,K=K?(b=K[0],f=K[1],h=K[2],K[3]):(h=f=b=0,1);return B?(U=B[0],a=B[1],P=B[2]):U=a=P=1,r?(H=r[0],Y=r[1],S=r[2]):H=Y=S=0,this._composeImpl(b,f,h,K,U,a,P,H,Y,S)},compose:function(r,K,B){var b,f,h,U,a,P,H,Y,S,K=K?(b=K._x,f=K._y,h=K._z,K._w):(h=f=b=0,1);return B?(U=B.x,a=B.y,P=B.z):U=a=P=1,r?(H=r.x,Y=r.y,S=r.z):H=Y=S=0,this._composeImpl(b,f,h,K,U,a,P,H,Y,S)},_composeImpl:function(r,K,B,b,f,h,U,a,P,H){var Y=this.el,S=B+B,_=r*(x=r+r),e=r*(T=K+K),r=r*S,o=K*T,K=K*S,B=B*S,x=b*x,T=b*T,b=b*S;return Y[0]=(1-(o+B))*f,Y[1]=(e+b)*f,Y[2]=(r-T)*f,Y[3]=0,Y[4]=(e-b)*h,Y[5]=(1-(_+B))*h,Y[6]=(K+x)*h,Y[7]=0,Y[8]=(r+T)*U,Y[9]=(K-x)*U,Y[10]=(1-(_+o))*U,Y[11]=0,Y[12]=a,Y[13]=P,Y[14]=H,Y[15]=1,this},decompose:(wL=new e1,vL=new Z,function(r,K,B){var b=this.el,f=wL.set(b[0],b[1],b[2]).length(),h=wL.set(b[4],b[5],b[6]).length(),U=wL.set(b[8],b[9],b[10]).length(),r=(this.determinant()<0&&(f=-f),r.x=b[12],r.y=b[13],r.z=b[14],vL.copy(this),1/f),b=1/h,a=1/U;return vL.el[0]*=r,vL.el[1]*=r,vL.el[2]*=r,vL.el[4]*=b,vL.el[5]*=b,vL.el[6]*=b,vL.el[8]*=a,vL.el[9]*=a,vL.el[10]*=a,K.setFromRotationMatrix(vL),B.x=f,B.y=h,B.z=U,this}),equals:function(r){for(var K=this.el,B=r.el,b=0;b<16;b++)if(K[b]!==B[b])return!1;return!0},transpose:function(){var r=this.el,K=r[1];return r[1]=r[4],r[4]=K,K=r[2],r[2]=r[8],r[8]=K,K=r[6],r[6]=r[9],r[9]=K,K=r[3],r[3]=r[12],r[12]=K,K=r[7],r[7]=r[13],r[13]=K,K=r[11],r[11]=r[14],r[14]=K,this}}),new Z),MH=new Z,RH=(Z.determinantOfArray=(FL=M.Math.Matrix4.prototype.determinant,function(r){return r?FL.call(r):0}),Z.multiplyMatrixArray=function(r,K,B,b,f,h){var U=r.el||r,K=K.el||K,B=B.el||B,a=K[f+0],P=K[f+4],H=K[f+8],Y=K[f+12],S=K[f+1],_=K[f+5],e=K[f+9],o=K[f+13],x=K[f+2],T=K[f+6],t=K[f+10],p=K[f+14],q=K[f+3],y=K[f+7],k=K[f+11],K=K[f+15],f=B[h+0],w=B[h+4],v=B[h+8],z=B[h+12],N=B[h+1],u=B[h+5],j=B[h+9],I=B[h+13],L=B[h+2],J=B[h+6],F=B[h+10],G=B[h+14],d=B[h+3],s=B[h+7],n=B[h+11],B=B[h+15];return U[b+0]=a*f+P*N+H*L+Y*d,U[b+4]=a*w+P*u+H*J+Y*s,U[b+8]=a*v+P*j+H*F+Y*n,U[b+12]=a*z+P*I+H*G+Y*B,U[b+1]=S*f+_*N+e*L+o*d,U[b+5]=S*w+_*u+e*J+o*s,U[b+9]=S*v+_*j+e*F+o*n,U[b+13]=S*z+_*I+e*G+o*B,U[b+2]=x*f+T*N+t*L+p*d,U[b+6]=x*w+T*u+t*J+p*s,U[b+10]=x*v+T*j+t*F+p*n,U[b+14]=x*z+T*I+t*G+p*B,U[b+3]=q*f+y*N+k*L+K*d,U[b+7]=q*w+y*u+k*J+K*s,U[b+11]=q*v+y*j+k*F+K*n,U[b+15]=q*z+y*I+k*G+K*B,r},M.Math.Triangle=function(r,K,B){this.a=r!==P1?r:new e1,this.b=K!==P1?K:new e1,this.c=B!==P1?B:new e1}),lH=(A.assign(RH,{barycoordFromPoint:(dL=new e1,sL=new e1,nL=new e1,function(r,K,B,b,f){dL.subVectors(b,K),sL.subVectors(B,K),nL.subVectors(r,K);var b=dL.dot(dL),B=dL.dot(sL),r=dL.dot(nL),K=sL.dot(sL),h=sL.dot(nL),U=b*K-B*B,f=f||new e1;return 0==U?f.set(-2,-1,-1):f.set(1-(K=(K*r-B*h)*(U=1/U))-(b=(b*h-B*r)*U),b,K)}),uvIntersection:(GL=new e1,function(r,K,B,b,f,h,U){return RH.barycoordFromPoint(r,K,B,b,GL),f.multiplyScalar(GL.x),h.multiplyScalar(GL.y),U.multiplyScalar(GL.z),f.add(h).add(U),f.clone()})}),M.Math.Euler=function(r,K,B,b,f){this.set(r,K,B,b,f)}),CH=(lH.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],lH.DefaultOrder="XYZ",lH.ReverseOrder=(AL={xyz:"ZYX",xzy:"YZX",yxz:"ZXY",yzx:"XZY",zxy:"YXZ",zyx:"XYZ"},function(r){return AL[r]}),A.defineProperties(lH.prototype,{x:{get:function(){return this._x},set:function(r){this._x=r,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(r){this._y=r,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(r){this._z=r,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(r){this._order=r,this.onChangeCallback()}}}),A.assign(lH.prototype,{set:function(r,K,B,b,f){return YY(r)&&(f=B,b=K,B=r[2],K=r[1],r=r[0]),b?f&&(b=lH.ReverseOrder(b)):b=this._order||"ZYX",this._x=r||0,this._y=K||0,this._z=B||0,this._order=b,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this.onChangeCallback(),this},setFromRotationMatrix:function(r,K,B){var b=M.Math.clamp,f=(r=r.el||r)[0],h=r[4],U=r[8],a=r[1],P=r[5],H=r[9],Y=r[2],S=r[6],r=r[10];return"XYZ"===(K=K||this._order)?(this._y=Math.asin(b(U,-1,1)),Math.abs(U)<.9999999?(this._x=Math.atan2(-H,r),this._z=Math.atan2(-h,f)):(this._x=Math.atan2(S,P),this._z=0)):"YXZ"===K?(this._x=Math.asin(-b(H,-1,1)),Math.abs(H)<.9999999?(this._y=Math.atan2(U,r),this._z=Math.atan2(a,P)):(this._y=Math.atan2(-Y,f),this._z=0)):"ZXY"===K?(this._x=Math.asin(b(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(-Y,r),this._z=Math.atan2(-h,P)):(this._y=0,this._z=Math.atan2(a,f))):"ZYX"===K?(this._y=Math.asin(-b(Y,-1,1)),Math.abs(Y)<.9999999?(this._x=Math.atan2(S,r),this._z=Math.atan2(a,f)):(this._x=0,this._z=Math.atan2(-h,P))):"YZX"===K?(this._z=Math.asin(b(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-H,P),this._y=Math.atan2(-Y,f)):(this._x=0,this._y=Math.atan2(U,r))):"XZY"===K?(this._z=Math.asin(-b(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(S,P),this._y=Math.atan2(U,f)):(this._x=Math.atan2(-H,r),this._y=0)):console.warn("unsupported order: "+K),this._order=K,!1!==B&&this.onChangeCallback(),this},setFromQuaternion:(ML=new Z,function(r,K,B){return ML.makeRotationFromQuaternion(r),this.setFromRotationMatrix(ML,K,B)}),setFromVector3:function(r,K){return this.set(r.x,r.y,r.z,K||this._order)},reorder:(VL=new FH,function(r){return VL.setFromEuler(this),this.setFromQuaternion(VL,r)}),equals:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order},fromArray:function(r){return this._x=r[0],this._y=r[1],this._z=r[2],r[3]!==P1&&(this._order=r[3]),this.onChangeCallback(),this},toArray:function(r,K){return(r=r===P1?[]:r)[K=K===P1?0:K]=this._x,r[K+1]=this._y,r[K+2]=this._z,r[K+3]=this._order,r},toVector3:function(r){return r?r.set(this._x,this._y,this._z):new e1(this._x,this._y,this._z)},onChange:function(r){return this.onChangeCallback=r,this},onChangeCallback:function(){}}),D.eulerArrayToQuaternionArray=(RL=new FH,lL=new lH,function(r,K){return RL.setFromEuler(lL.fromArray(r)).toArray(K)}),M.Math.Interpolant=function(r,K,B,b){this.parameterPositions=r,this._cachedIndex=0,r=K.length/r.length,B&&(r/=B),this.resultBuffer=b!==P1?b:new K.constructor(r),this.sampleValues=K,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}),mH=(A.assign(CH.prototype,{evaluate:function(r){var K,B=this.parameterPositions,b=this._cachedIndex,f=B[b],h=B[b-1];r:{K:{B:{b:if(!(r<f)){for(var U=b+2;;){if(f===P1){if(r<h)break b;return b=B.length,this._cachedIndex=b,this.copySampleValue_(b-1,r,h)}if(b===U)break;if(h=f,r<(f=B[++b]))break K}K=B.length;break B}if(h<=r)break r;var a=B[1];for(r<a&&(b=2,h=a),U=b-2;;){if(h===P1)return this._cachedIndex=0,this.copySampleValue_(0,r,f);if(b===U)break;if(f=h,(h=B[--b-1])<=r)break K}K=b,b=0}for(;b<K;){var P=b+K>>>1;r<B[P]?K=P:b=1+P}if(f=B[b],(h=B[b-1])===P1)return this._cachedIndex=0,this.copySampleValue_(0,r,f);if(f===P1)return b=B.length,this._cachedIndex=b,this.copySampleValue_(b-1,h,r)}this._cachedIndex=b,this.intervalChanged_(b,h,f)}return this.interpolateImpl(b,h,r,f)},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(r){for(var K=this.resultBuffer,B=this.sampleValues,b=this.valueSize,f=r*b,h=0;h!==b;++h)K[h]=B[f+h];return K},interpolateImpl:function(){},intervalChanged_:function(){}}),(Ut.prototype=A.create(CH.prototype)).interpolateImpl=function(r){return this.copySampleValue_(r-1)},(at.prototype=A.create(CH.prototype)).interpolateImpl=function(r,K,B,b){for(var f=this.resultBuffer,h=this.sampleValues,U=this.valueSize,a=r*U,P=a-U,H=(B-K)/(b-K),Y=1-H,S=0;S!==U;++S)f[S]=h[P+S]*Y+h[a+S]*H;return f},(Pt.prototype=A.create(CH.prototype)).interpolateImpl=function(r,K,B,b){for(var f=this.resultBuffer,h=this.sampleValues,U=this.valueSize,a=(B-K)/(b-K),P=r*U,H=P+U;P!==H;P+=4)FH.slerpFlat(f,0,h,P-U,h,P,a);return f},(Ht.prototype=A.create(CH.prototype)).intervalChanged_=function(r,K,B){var b=this.parameterPositions,f=r-2,h=r+1,U=b[f],a=b[h];if(U===P1)switch(this.getSettings_().endingStart){case"ZeroSlope":f=r,U=2*K-B;break;case"WrapAround":U=K+b[f=b.length-2]-b[f+1];break;default:f=r,U=B}if(a===P1)switch(this.getSettings_().endingEnd){case"ZeroSlope":h=r,a=2*B-K;break;case"WrapAround":a=B+b[h=1]-b[0];break;default:h=r-1,a=K}var P=.5*(B-K),H=this.valueSize;this._weightPrev=P/(K-U),this._weightNext=P/(a-B),this._offsetPrev=f*H,this._offsetNext=h*H},Ht.prototype.interpolateImpl=function(r,K,B,b){for(var f=this.resultBuffer,h=this.sampleValues,U=this.valueSize,a=r*U,P=a-U,H=this._offsetPrev,Y=this._offsetNext,r=this._weightPrev,S=this._weightNext,_=-r*(K=(b=(B=(B-K)/(b-K))*B)*B)+2*r*b-r*B,e=(1+r)*K+(-1.5-2*r)*b+(-.5+r)*B+1,o=(-1-S)*K+(1.5+S)*b+.5*B,x=S*K-S*b,T=0;T!==U;++T)f[T]=_*h[H+T]+e*h[P+T]+o*h[a+T]+x*h[Y+T];return f},(Yt.prototype=A.create(CH.prototype)).copySampleValue_=function(r){for(var K=this.resultBuffer,B=this.sampleValues,b=this.valueSize,f=r*b*3+b,h=0;h!==b;h++)K[h]=B[f+h];return K},Yt.prototype.interpolateImpl=(CL=new FH,function(r,K,B,b){for(var f=this.resultBuffer,h=this.sampleValues,U=this.valueSize,a=2*U,P=3*U,H=b-K,Y=r*P,S=Y-P,_=-2*(K=(B=(b=(B-K)/H)*b)*b)+3*B,e=K-B,o=1-_,x=e-B+b,T=0;T!==U;T++){var t=h[S+T+U],p=h[S+T+a]*H,q=h[Y+T+U],y=h[Y+T]*H;f[T]=o*t+x*p+_*q+e*y}return this.isQuaternion&&CL.fromArray(f).normalize().toArray(f),f}),M.Math.BitArray=function(r){r instanceof mH?this.fromString(r.toString()):"string"==typeof r?this.fromString(r):(this.size=r=r||0,this.data=new Uint32Array(Math.ceil(r/32)))}),DH=(A.assign(mH.prototype,{set:function(r,K,B){var b=r>>5,r=31&r;B&&1<B?(B=8==B?255:4===B?15:3,K?K&=B:K=0,this.data[b]=this.data[b]&~(B<<r)|K<<r):K?this.data[b]|=1<<r:this.data[b]&=~(1<<r)},get:function(r,K){var B=r>>5,r=31&r;return K&&1<K?this.data[B]>>r&(8==K?255:4===K?15:3):0!=(this.data[B]&1<<r)},toString:(mL=["","0","00","000","0000","00000","000000","0000000","00000000"],function(){for(var r,K="",B=0,b=this.data.length;B<b;B++)r=this.data[B].toString(16),K+=mL[8-r.length]+r;return K}),fromString:function(r){var K=r.length/8;this.size=32*K,this.data=new Uint32Array(K);for(var B=0;B<K;B++)this.data[B]=n1(r.substr(8*B,8),16);return this}}),{ms_ac:function(r,K){for(var B=K.ms_ac,b=0;b<B.length;b++)!function(r,B){var b="_"+B;r[fY(B)]=function(){return this[b]},r[hY(B)]=function(r){var K=this[b];this[b]=r,this.fp(B,K,r)}}(r,B[b])},ms_listener:function(r,K){r.addListeners=function(){var K=this,r=_K;Y1.mockTouch&&(r=HK.concat(YK).concat(SK));for(var B=0,b=(K.__events__=r).length;B<b;B++){var f=r[B];"wheel"===f&&!K.handle_wheel&&K.handle_mousewheel&&(K.handle_wheel=function(r){yY(K,r)}),K["handle_"+f]&&function(K,r,B){function b(r){"mousedown"!==K&&"mouseup"!==K&&"touchstart"!==K&&"touchend"!==K||s9(r),B.disabled||B["handle_"+K](r)}var f="__"+K;B[f]||(B[f]=b,r1(r,K,b))}(f,K.getView(),K)}},r.removeListeners=function(){var r=this.__events__;if(r){this.__events__=P1;for(var K,B,b,f,h=0,U=r.length;h<U;h++)this["handle_"+r[h]]&&(K=r[h],B=this.getView(),0,(f=this[b="__"+K])&&(K1(B,K,f),delete this[b]))}}},ms_fire:function(r,K){r.mp=function(r,K,B){this.addPropertyChangeListener(r,K,B)},r.ump=function(r,K){this.removePropertyChangeListener(r,K)},r.fp=function(r,K,B,b,f){return this.firePropertyChange(r,K,B,b,f)},r.addPropertyChangeListener=function(r,K,B){this._62I||(this._62I=new aP),this._62I.add(r,K,B)},r.removePropertyChangeListener=function(r,K){this._62I&&this._62I.remove(r,K)},r.firePropertyChange=function(r,K,B,b,f){if(b){if(b(K,B))return!1}else if(K===B)return!1;return(b=f||{}).property=r,b.oldValue=K,b.newValue=B,b.source=this,(b.data=this)._62I&&this._62I.fire(b),this.onPropertyChanged&&this.onPropertyChanged(b),!0}},ms_attr:function(r,K){r.a=function(r,K){if(2===arguments.length)this.setAttr(r,K);else{if(!PY(r))return this.getAttr(r);for(var B in r)this.setAttr(B,r[B])}return this},r.getAttr=function(r,K){if(K===P1&&(K=1),this._attrObject&&r in this._attrObject)return this._attrObject[r];if(this.getImage){var B=this.getImage();if(_1(B)&&(B=zK[B]),PY(B)&&"dataBindings"in B)for(var b=B.dataBindings,f=b.length-1;0<=f;f--){var h=b[f];if(h.attr===r){if("defaultValue"in h)return h.defaultValue;break}}}return K?t[r]:P1},r.setAttr=function(r,K){this._attrObject||(this._attrObject={});var B=this._attrObject[r];K===P1?delete this._attrObject[r]:this._attrObject[r]=K,this.fp&&this.fp("a:"+r,B,K)&&this.onAttrChanged&&this.onAttrChanged(r,B,K)},r.getSerializableAttrs=function(){var r,K={};for(r in this._attrObject)K[r]=1;return K}},ms_bnb:function(r,K){r.getBodyColor=function(r){return r.s("body.color")},r.getBorderColor=function(r){return r.s("border.color")}},_51o:function(r,K){r.mi=function(r,K,B){this.addInteractorListener(r,K,B)},r.umi=function(r,K){this.removeInteractorListener(r,K)},r.fi=function(r){this.fireInteractorEvent(r)},r.addInteractorListener=function(r,K,B){this._63I||(this._63I=new aP),this._63I.add(r,K,B)},r.removeInteractorListener=function(r,K){this._63I&&this._63I.remove(r,K)},r.fireInteractorEvent=function(r){this._63I&&this._63I.fire(r)},r.setInteractors=function(r){var K=this._interactors;K&&K.each(function(r){r.tearDown()}),YY(r)&&(r=new $(r)),(this._interactors=r)&&r.each(function(r){r.setUp()}),this.fp("interactors",K,r),this.invalidateSelection()},r.getInteractors=function(){return this._interactors}},_49o:function(r,K){r._44O=H1,r._45O=H1,r.getTopPainters=function(){return this._44O},r.getBottomPainters=function(){return this._45O},r.addTopPainter=function(r){this._44O||(this._44O=new $),this._44O.contains(r)||(this._44O.add(r),this.redraw&&this.redraw())},r.removeTopPainter=function(r){this._44O&&(this._44O.remove(r),this.redraw&&this.redraw())},r.addBottomPainter=function(r){this._45O||(this._45O=new $),this._45O.contains(r)||(this._45O.add(r),this.redraw&&this.redraw())},r.removeBottomPainter=function(r){this._45O&&(this._45O.remove(r),this.redraw&&this.redraw())},r._93db=function(K,B){var b=this;b._45O&&b._45O.each(function(r){r.draw?r.draw(K,B):r.call(b,K,B)})},r._92db=function(K,B){var b=this;b._44O&&b._44O.each(function(r){r.draw?r.draw(K,B):r.call(b,K,B)})}},ms_sm:function(r,K){r.sm=function(){return this.getSelectionModel()},r.setSelectableFunc=function(r){this.sm().setFilterFunc(r)},r.getSelectableFunc=function(){return this.sm().getFilterFunc()},r.getSelectionModel=function(){return this._selectionModel||this.dm().sm()},r.isSelectionModelShared=function(){return!this._selectionModel},r.setSelectionModelShared=function(r){var K=this,B=K.sm(),b=!K._selectionModel,f=K.handleSelectionChange,h=K.dm();b!==r&&(K.invalidateSelection&&K.invalidateSelection(),r?(h.sm().ms(f,K),K._selectionModel.ums(f,K),K._selectionModel.dispose(),K._selectionModel=H1):(h.sm().ums(f,K),K._selectionModel=new YP(h),K._selectionModel.ms(f,K)),K.onSelectionModelSharedChanged(),K.fp("selectionModelShared",b,r),K.fireViewEvent({kind:"selectionModelSharedChange",oldValue:b,newValue:r,oldSelectionModel:B,newSelectionModel:K.sm()}))},r.onSelectionModelSharedChanged=function(){this.redraw(),this.invalidateSelection&&this.invalidateSelection()},r.removeSelection=function(){var r=this.dm();r.beginTransaction(),this.sm().toSelection().each(r.remove,r),r.endTransaction()},r.selectAll=function(){var K=this;K.sm().ss(K.dm().toDatas(function(r){return K.isVisible(r)&&K.isSelectable(r)}))},r.isSelected=function(r){return this.sm().co(r)},r.isSelectedById=function(r){return!!(r=this.dm().getDataById(r))&&this.isSelected(r)},r.isSelectable=function(r){return this.sm().isSelectable(r)}},ms_tx:function(r,K){r._64I=0,r._65O=0,r.isScrollable=function(){return this.getWidth()<this._64I},r._40o=function(){return this.isScrollable()},r.getLogicalPoint=function(r){return $9(r,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},r.tx=function(r){if(r===P1)return this.getTranslateX();this.setTranslateX(r)},r.getTranslateX=function(){return this._65O},r.setTranslateX=function(r){var K=this.getWidth()-this._64I,K=(r=v1(r=0<(r=r<K?K:r)?0:r),this._65O);this._65O=r,this.fp(vn,K,r)}},ms_ty:function(r,K){r._23Q=0,r._66O=0,r._41o=function(){return this.getHeight()<this._23Q},r.getLogicalPoint=function(r){return $9(r,this._canvas||this._view,this.tx?this.tx():0,this.ty())},r.ty=function(r){if(r===P1)return this.getTranslateY();this.setTranslateY(r)},r.getTranslateY=function(){return this._66O},r.setTranslateY=function(r){var K=this.getHeight()-this._23Q,K=(r=v1(r=0<(r=r<K?K:r)?0:r),this._66O);this._66O=r,this.fp(zn,K,r)}},ms_txy:function(r,K){r._65O=0,r._66O=0,r.tx=function(r){if(r===P1)return this.getTranslateX();this.setTranslateX(r)},r.ty=function(r){if(r===P1)return this.getTranslateY();this.setTranslateY(r)},r.onTranslateEnded=function(){},r.setTranslate=function(K,B,r){var b,f,h=this;(r=pY(r))?(h._65I&&h._65I.stop(!0),b=h.tx(),f=h.ty(),r.action=function(r){h.setTranslate(b+(K-b)*r,f+(B-f)*r)},r._37o=function(){delete h._66I,delete h._65I,h.onTranslateEnded()},h._66I=1,h._65I=N9(r)):(h.tx(K),h.ty(B))},r.getTranslateX=function(){return this._65O},r.setTranslateX=function(r){r=this.adjustTranslateX(r);var K=this._65O;this._65O=r,this.fp(vn,K,r)},r.getTranslateY=function(){return this._66O},r.setTranslateY=function(r){r=this.adjustTranslateY(r);var K=this._66O;this._66O=r,this.fp(zn,K,r)},r.adjustTranslateX=function(r){return v1(r)},r.adjustTranslateY=function(r){return v1(r)},r.translate=function(r,K,B){this.setTranslate(this.tx()+r,this.ty()+K,B)},r.getLogicalPoint=function(r){return $9(r,this._canvas||this._view,this.tx(),this.ty())}},ms_dm:function(r,K){r.dm=function(r){if(!r)return this.getDataModel();this.setDataModel(r)},r.getDataModel=function(){return this._dataModel}},ms_lp:function(r,K){r.lp=function(r){return this.getLogicalPoint(r)}},ms_v:function(r,K){r._disabled=!1,r.setDisabled=function(r,K){var B=this._disabled;B!==r&&(B&&(O9(this._63O),delete this._63O),r&&(gY(this._view,this._63O=BN(K)),this.iv()),this._disabled=r,this.fp("disabled",B,r))},r.isDisabled=function(){return this._disabled},r.getDisabledDiv=function(){return this._63O},r.getView=function(){return this._view},r.addToDOM=function(r){var K=this,B=K.getView(),b=B.style;(r=r||_.body).appendChild(B),b.left="0",b.right="0",b.top="0",b.bottom="0",r1(V,"resize",function(){K.iv()}),K.iv()},r.setCursor=function(r){"default"===r&&(r=this._defaultCursor||r);var K=this.getView().style;K.cursor=r,K.cursor="-webkit-"+r,K.cursor="-moz-"+r},r.getWidth=function(){return this._view.clientWidth},r.getHeight=function(){return this._view.clientHeight},r.setWidth=function(r){this._view.style.width=r+Su,this.iv(),this.fp&&this.fp(wu,H1,r)},r.setHeight=function(r){this._view.style.height=r+Su,this.iv(),this.fp&&this.fp(vu,H1,r)},r.setFocus=function(r){var K=this._currentEditor;return!(r&&K&&(K=K.getView?K.getView():K).contains(r.target)||(YN(this._view),this.endEditing&&this.endEditing(),this.fireViewEvent("focus"),0))},r.iv=function(r){this.invalidate(r)},r.invalidate=function(r){this._68I||(this._68I=1,this._ivTimerId=y9(this._validateImpl,this,H1,r),this._ivTimerDelay=r,this.onInvalidated&&this.onInvalidated(),this.fireViewEvent("invalidate"))},r.validate=function(){var r=this._ivTimerId,K=this._ivTimerDelay;!1!==this._validateImpl()&&r&&k9(r,K)},r._validateImpl=function(){var r,K=this,B=K._view;if(!K._68I)return!1;delete K._68I,B.parentNode&&(0===B.offsetWidth&&0===B.offsetHeight&&K._67I!==H1?(K._67I===P1&&(K._67I=Y1.reinvalidateCount),0<K._67I?K._67I--:K._67I=H1,K.iv()):(K.fireViewEvent("beginValidate"),K.validateImpl(),K.onValidated&&K.onValidated(),K.fireViewEvent("validate"),(r=K._63O)&&(B.lastChild!==r&&(O9(r),gY(B,r)),L(r,0,0,K.getWidth(),K.getHeight())),$K(K),FA(K),om(K),EO(K)))},r.layout=function(r,K,B,b){1===arguments.length?L(this,r):L(this,r,K,B,b)},r.addViewListener=function(r,K,B){this._67O||(this._67O=new aP),this._67O.add(r,K,B)},r.removeViewListener=function(r,K){this._67O.remove(r,K)},r.fireViewEvent=function(r){this._67O&&(_1(r)&&(r={kind:r}),this._67O.fire(r)),Y1.viewListener&&Y1.viewListener(this,r)}},ms_tip:function(r,K){r.setToolTipEnabled=function(r){r?$1||this._13o||(this.enableToolTip(),this.fp("toolTipEnabled",!1,!0)):this._13o&&(this.disableToolTip(),this.fp("toolTipEnabled",!0,!1))},r.isToolTipEnabled=function(){return!!this._13o},r.enableToolTip=function(){var r,B=this;$1||B._13o||(B._13o=function(r){var K;r.toolTipView||((K=(r.toolTipView=B).getToolTip(r))!=H1?(Y1.toolTipContinual&&Y1.isToolTipShowing()?cH(r,K):(OH(),xK={timeout:R1(qK,gH),e:r,info:K}),TK={e:r,view:B}):OH())},r=B.getView(),r1(r,En,B._13o),r1(r,"mouseleave",Y1.hideToolTip))},r.disableToolTip=function(){var r;this._13o&&(r=this.getView(),K1(r,En,this._13o),K1(r,"mouseleave",Y1.hideToolTip),delete this._13o)},r.getToolTip=function(r){return this.getDataAt?(r=this.getDataAt(r))?r.getToolTip():H1:this.getValue?this.getValue():void 0}},_52o:function(r,K){r._zoom=1,r._29I=DK,r.zoomIn=function(r,K){this.setZoom(this._zoom*H9,r,K)},r.zoomOut=function(r,K){this.setZoom(this._zoom/H9,r,K)},r.zoomReset=function(r,K){this.setZoom(1,r,K)},r.scrollZoomIn=function(r){this.setZoom(this._zoom*Y9,H1,r)},r.scrollZoomOut=function(r){this.setZoom(this._zoom/Y9,H1,r)},r.pinchZoomIn=function(r){this.setZoom(this._zoom*S9,H1,r)},r.pinchZoomOut=function(r){this.setZoom(this._zoom/S9,H1,r)},r.adjustZoom=function(r){return r<e9?e9:_9<r?_9:r},r.getZoom=function(){return this._zoom},r.setZoom=function(K,r,B){var b,f=this;(r=pY(r))?(f._14o&&f._14o.stop(!0),b=f._zoom,r.action=function(r){f._96O(b+(K-b)*r,B)},r._37o=function(){delete f._zooming,delete f._14o,f.onZoomEnded()},f._zooming=1,f._14o=N9(r)):f._96O(K,B)},r._96O=function(r,K){var B,b;(r=this.adjustZoom(r))!==this._zoom&&(this.validate(),B=this._29I,b=this._zoom,0!==B.width&&0!==B.height&&(K=K||{x:B.x+B.width/2,y:B.y+B.height/2},this.tx((K.x-B.x)*b-K.x*r),this.ty((K.y-B.y)*b-K.y*r)),this._zoom=r,this.fp("zoom",b,r))}},ms_edge:function(r,K){r._2I=function(r){this._44I||(this._44I=new $),this._42I||(this._42I=new $),this._44I.add(r),this._42I.add(r),this._20I()},r._4I=function(r){this._44I||(this._44I=new $),this._43I||(this._43I=new $),this._44I.add(r),this._43I.add(r),this._20I()},r._16I=function(r){this._44I.remove(r),this._42I.remove(r),this._44I.isEmpty()&&delete this._44I,this._42I.isEmpty()&&delete this._42I,this._20I()},r._18I=function(r){this._44I.remove(r),this._43I.remove(r),this._44I.isEmpty()&&delete this._44I,this._43I.isEmpty()&&delete this._43I,this._20I()},r._20I=function(){var K,B=this;delete B._45I,!B._44I||B._44I.isEmpty()?delete B._70O:(B._44I.each(function(r){r.isLooped()&&!(K=K||{})[r._id]&&(B._45I||(B._45I=new $),B._45I.add(r),K[r._id]=r)}),K?(B._70O=new $,B._44I.each(function(r){K[r._id]?"A"!==K[r._id]&&(K[r._id]="A",B._70O.add(r)):B._70O.add(r)})):B._70O=B._44I)},r.hasAgentEdges=function(){return!!this._49I&&!this._49I.isEmpty()},r.getSourceAgentEdges=function(){return this._46I},r.getTargetAgentEdges=function(){return this._47I},r._1I=function(r){this._46I||(this._46I=new $),this._48I||(this._48I=new $),this._46I.add(r),this._48I.add(r),this._19I()},r._3I=function(r){this._47I||(this._47I=new $),this._48I||(this._48I=new $),this._47I.add(r),this._48I.add(r),this._19I()},r._15I=function(r){this._46I.remove(r),this._48I.remove(r),this._46I.isEmpty()&&delete this._46I,this._48I.isEmpty()&&delete this._48I,this._19I()},r._17I=function(r){this._47I.remove(r),this._48I.remove(r),this._47I.isEmpty()&&delete this._47I,this._48I.isEmpty()&&delete this._48I,this._19I()},r._19I=function(){var K,B=this,r=(delete B._49I,B._48I);r&&!r.isEmpty()&&(K={},r.each(function(r){K[r._id]?B._49I||(B._49I=new $):K[r._id]=r}),B._49I?r.each(function(r){K[r._id]&&(B._49I.add(r),delete K[r._id])}):B._49I=r)},r.getLoopedEdges=function(){return this._45I},r.getEdges=function(){return this._70O},r.getAgentEdges=function(){return this._49I},r.getSourceEdges=function(){return this._42I},r.getTargetEdges=function(){return this._43I},r._8I=function(){this._70O&&this._70O.each(function(r){r._7I()})}}}),iH=(qY(Y1,{getVersion:function(){return"7.7.1"}},!0),function(r){return r.devicePixelRatio||(r.screen&&r.screen.logicalXDPI?r.screen.deviceXDPI/r.screen.logicalXDPI:1)}),ZH=(qY(Y1,{numberDigits:5,crossOrigin:"",baseZIndex:P1,isTouchable:$1,mockTouch:!0,devicePixelRatio:iH(V),reinvalidateCount:3,hitMaxArea:3e3,imageCacheThreshold:20,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:N.disabledBackground,forceHierarchicalSerialization:!0,extractBatchTranslation:!1,extractShapeTranslation:!1,extractPolylineTranslation:!1,extractVerticesTranslation:!1,touchHitTolerance:5,mouseHitTolerance:3,envmapProbeMinWaitTime:300,envmapProbeMaxWaitTime:25e3,EnvmapTextureSize:1024,hoverDelay:600,clickDelay:200,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return xN},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],blockMinSize:1,textExtraWidth:4,encodeStringKey:null,doubleClickSpeed:500,doubleClickRange:1,doubleTouchRange:20,touchMoveThreshold:10,animDuration:200,animEasing:function(r){return r*r},labelColor:Rs,labelSelectColor:ls,labelFont:"12px arial, sans-serif",widgetIndent:$1?30:20,widgetRowHeight:$1?30:20,widgetHeaderHeight:$1?32:22,widgetTitleHeight:$1?34:24,scrollBarColor:x,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:$1?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,pinchZoomThreshold:1,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:LY,intersectionLineLine:JY,isEnter:dN,isEsc:sN,isDelete:vN,isSpace:GN,isLeft:IN,isUp:LN,isRight:JN,isDown:FN,isTouchEvent:eN,getTarget:function(r){return(eN(r)?_N(r):r).target},isString:_1,isNumber:UY,isBoolean:aY,isArray:YY,isSelectAll:wN,isFunction:HY,isObject:PY,getPropertyValue:FY,setPropertyValue:GY,addMethod:qY,createGradient:function(r,K,B,b,f,h,U,a){return(0,os[K])(r,B,b,f,h,U,a)},appendToScreen:function(r){r=r.getView?r.getView():r,(_.fullscreenElement||_.mozFullScreenElement||_.webkitFullscreenElement||_.msFullscreenElement||_.body).appendChild(r)},encodeString:function(r){return M.Math.encodeBase64(r,Y1.encodeStringKey)},decodeString:function(r){return M.Math.decodeBase64(r,Y1.encodeStringKey)},findView:function(r){function K(r,K){for(var B="2d"===K?RP.GraphView:Fr.Graph3dView,b=0,f=r.length;b<f;b++)if(r[b]instanceof B)return h[b];return null}var h=[];return function r(K,B){var b=B._ht,f=(b&&K.push(b),B.children),h=f.length;if(h)for(var U=0;U<h;U++)r(K,f[U])}(h,_.body),"all"===r?h:"2d"===r?K(h,"2d"):"3d"===r?K(h,"3d"):K(h,"3d")||K(h,"2d")},toggleFullscreen:function(K){var B,b,f,h,U,a,P,r,H,Y,S=K.getView();_.fullscreenElement||_.mozFullScreenElement||_.webkitFullscreenElement||_.msFullscreenElement?_.exitFullscreen?_.exitFullscreen():_.msExitFullscreen?_.msExitFullscreen():_.mozCancelFullScreen?_.mozCancelFullScreen():_.webkitExitFullscreen&&_.webkitExitFullscreen():(B=!0,Y=K.isSelfViewEvent?(b=K.getX(),f=K.getY(),a=K.getWidth(),P=K.getHeight(),r=S.style.background,H=S.style.backgroundColor,r||H||(S.style.backgroundColor="white"),S.requestFullscreen?S.requestFullscreen():S.msRequestFullscreen?S.msRequestFullscreen():S.mozRequestFullScreen?S.mozRequestFullScreen():S.webkitRequestFullscreen&&S.webkitRequestFullscreen(),setInterval(function(){var r;S!==(_.fullscreenElement||_.mozFullScreenElement||_.webkitFullscreenElement||_.msFullscreenElement)?(clearInterval(Y),K.setX(b),K.setY(f),K.setWidth(a),K.setHeight(P),K._fullscreen=!1,S.style.oldBackgroundColor=H,K.iv()):(r=M.Default.getWindowInfo(),!B&&r.width===K.getWidth()&&r.height===K.getHeight()||(K.setX(r.left),K.setY(r.top),K.setWidth(r.width),K.setHeight(r.height),K._fullscreen=!0,K.iv(),B=!1))},500)):(h=S.style.left,U=S.style.top,a=S.style.width,P=S.style.height,r=S.style.background,H=S.style.backgroundColor,r||H||(S.style.backgroundColor="white"),S.requestFullscreen?S.requestFullscreen():S.msRequestFullscreen?S.msRequestFullscreen():S.mozRequestFullScreen?S.mozRequestFullScreen():S.webkitRequestFullscreen&&S.webkitRequestFullscreen(),setInterval(function(){var r;S!==(_.fullscreenElement||_.mozFullScreenElement||_.webkitFullscreenElement||_.msFullscreenElement)?(clearInterval(Y),S.style.left=h,S.style.top=U,S.style.width=a,S.style.height=P,S.style.oldBackgroundColor=H,K.iv()):(r=M.Default.getWindowInfo(),!B&&r.width===K.getWidth()&&r.height===K.getHeight()||(L(K),B=!1))},500)))},appendTimeStamp:function(r){return r},setCompType:function(r,K){_1(K)&&K.substr(0,12)==PK&&(K=Y1.parse(K)),HY(K)||PY(K)?JK[r]=K:GA(r)},getCompType:function(r){var K=JK[r];return K===P1&&sK.test(r)&&(GA(r),K=JK[r]),K},getCompTypeMap:function(){return JK},drawCompType:function(r,K,B,b,f,h){r(K,B,b,f,h)},numberListener:(B$={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1},function(r){var K=r.keyCode;B$[K]||65===K&&Y1.isCtrlDown(r)||86===K&&Y1.isCtrlDown(r)||67===K&&Y1.isCtrlDown(r)||88===K&&Y1.isCtrlDown(r)||35<=K&&K<=40||(r.shiftKey||K<48||57<K)&&(K<96||105<K)&&r.preventDefault()}),ignoreKeyCodes:[122,123],preventDefault:function(r){var K=r.target.tagName;"DIV"!==K&&"CANVAS"!==K||0<=Y1.ignoreKeyCodes.indexOf(r.keyCode)||!("keydown"!==r.type||IN(r)||JN(r)||LN(r)||FN(r)||vN(r)||65===r.keyCode&&(r.metaKey||r.ctrlKey))||!0!==r.cancelable||(r.preventDefault(),r.preventManipulation&&r.preventManipulation())},getWindowInfo:function(){var r=_.documentElement;return{target:r=r&&(r.scrollLeft||r.scrollTop)?r:_.body,left:r.scrollLeft,top:r.scrollTop,width:V.innerWidth||r.clientWidth,height:V.innerHeight||r.clientHeight}},isDragging:function(){return!!xN},isLeftButton:function(r){return!!eN(r)||0===r.button},isMiddleButton:function(r){return!eN(r)&&r&&(1===r.button||4&(r.buttons||0))},isRightButton:function(r){return!eN(r)&&r&&(2===r.button||2&(r.buttons||0))},isInput:function(r){return!!r&&("INPUT"===(r=r.tagName)||"TEXTAREA"===r||"SELECT"===r)},getTouchCount:function(r){return eN(r)?r.touches.length:1},isDoubleClick:(K$={},g1=new T,z=g1.getTime(),function(r){if(1<d9(r))return!1;var K=r.button==H1?"":r.button,B=(K=r.type+K)+"_isDoubleClick",b=(b=K$[K])||(K$[K]={details:0,timeout:null,lastPoint:null});return r[B]===P1&&(r[B]=!0,K=V9(r),b.timeout&&(l1(b.timeout),b.timeout=null),B=eN(r)?Y1.doubleTouchRange:Y1.doubleClickRange,b.lastPoint&&R9(b.lastPoint,K)>B&&xt(b),b.lastPoint=K,b.details++,b.timeout=R1(function(){xt(this)}.bind(b),Y1.doubleClickSpeed)),2===b.details}),isShiftDown:function(r){return r?r.shiftKey:LK[16]},isCtrlDown:function(r){return r?W1?r.metaKey:r.ctrlKey:W1?LK[91]:LK[17]},getClientPoint:function(r){return{x:(r=eN(r)?_N(r):r).clientX,y:r.clientY}},isMouseEvent:function(r){return r instanceof MouseEvent||0===r.type.indexOf("mouse")},getTargetElement:function(r){var K=M9(r),B=Y1.isMouseEvent(r)||!_.elementFromPoint?r.target:_.elementFromPoint(K.x,K.y);if(D1&&_.elementFromPoint){for(var b=[],f=[];"none"===B.style.pointerEvents;)b.push(B),f.push(B.style.display||""),B.style.display="none",B=_.elementFromPoint(K.x,K.y);b.forEach(function(r,K){r.style.display=f[K]})}return B},getPagePoint:function(r){return{x:(r=eN(r)?_N(r):r).pageX,y:r.pageY}},createObject:function(r,K){var B,b=new r;for(B in K){var f,h=K[B];HY(h)?b[B]=h:0===B.indexOf("s:")?b.s(B.substr(2),K[B]):0===B.indexOf("a:")?b.a(B.substr(2),K[B]):(f=hY(B),h=K[B],b[f]?(b[f](h),"setToolTip"===f&&b.enableToolTip&&b.enableToolTip()):b[B]=h)}return b},setImage:function(r,K,B,b){var f=arguments.length;4===f?XK(r,b,K,B):2===f?_1(K)?K.substr(0,12)==PK?WK(r,Y1.parse(K)):XK(r,K):WK(r,K):1===f&&XK(r,r)},getImage:function(r,K,B){var b,f;return r==H1?H1:(PY(r)?b=r:(b=zK[r],!r||b!==P1||ZK&&ZK[r]||(XK(r,r),b=zK[r])),K&&b&&b.tagName?(b[r="override"===B?"colors_override":"override_rgb"===B?"colors_override_rgb":"override_a"===B?"colors_override_a":"colors"]||(b[r]={__count__:0}),(f=b[r][K])||(b[r].__count__>Y1.imageCacheThreshold&&(b[r]={__count__:0}),f=function(r,K,B,b,f){var h=mY(),U=(h.width=B,h.height=b,h.getContext("2d"));U.drawImage(r,0,0,B,b);try{for(var a=U.getImageData(0,0,B,b),P=a.data,H=0,Y=P.length;H<Y;H+=4){var S=P[H+0],_=P[H+1],e=P[H+2],o=P[H+3];"override_a"===f?P[H+3]=255*K[3]:"override_rgb"===f?(P[H+0]=255*K[0],P[H+1]=255*K[1],P[H+2]=255*K[2]):"override"===f?(P[H+0]=255*K[0],P[H+1]=255*K[1],P[H+2]=255*K[2],P[H+3]=255*K[3]):(P[H+0]=K[0]*S,P[H+1]=K[1]*_,P[H+2]=K[2]*e,P[H+3]=K[3]*o)}U.putImageData(a,0,0)}catch(K){return r}return h}(b,DN(K),b.width,b.height,B),b[r][K]=f,b[r].__count__++),f):b)},isImageComplete:function(r,K,B){var b=g(r);if(!b)return!1;if(b.tagName)return b.complete;for(var f=b.comps,h=!0,U=0,a=f.length;U<a;U++){var P,H=(P=f[U]).type;if("image"===P.type){if((r=P.name)&&r.func&&(r=W(r,K)),!T9(r,K,B)){h=!1;break}}else if(sK.test(H)&&Y1.getCompType(H)===P1){GA(H),Y1.getCompType(H)===P1&&(h=!1);break}}return h},getId:(r$=1,function(){return++r$}),callLater:function(r,K,B,b){function f(){r.apply(K,B)}return b?R1(f,b):V.requestAnimationFrame(f)},cancelLater:function(r,K){K?l1(r):V.cancelAnimationFrame(r)},clone:function(r){if(null==r||"object"!=typeof r)return r;if(r instanceof Date)return(K=new Date).setTime(r.getTime()),K;if(r instanceof Array){for(var K=[],B=0,b=r.length;B<b;B++)K[B]=v9(r[B]);return K}if(r instanceof $){for(K=new $,B=0,b=r.length;B<b;B++)K.set(B,v9(r.get(B)));return K}if(r instanceof PP)return r;if(r instanceof HP)return(K=new HP).deserialize(r.serialize()),K;if(r instanceof A){var f,K={};for(f in r)r.hasOwnProperty(f)&&(K[f]=v9(r[f]));return K}return r},callWhenLoaded:function(r,K){var B=wK(r,K=K||100);(kK=kK||{})[B]={tick:B,cb:r,delay:K}},beforeLoadURL:function(r,K){if(kK){var B={};for(K in kK){var b=kK[K],f=(l1(b.tick),wK(b.cb,b.delay));B[f]={tick:f,delay:b.delay,cb:b.cb}}kK=B}return Y1.convertURL?Y1.convertURL(r,K):r},convertURL:function(r){return r},handleRefGraphLoaded:function(r,K,B){},handleCompTypeLoaded:function(r,K){},handleImageLoaded:function(r,K){},handleUnfoundImage:function(r,K){return Y1.getImage("default_blank")},resizeImage:function(r,K,B,b){B=B||K;var f=(b=b||mY()).getContext("2d");return ZY(b,K,B,1),f.drawImage(r,0,0,K,B),b},resizeImagePOT:function(r,K,B){if(!r||!r.tagName)return r;var b,f=r.width,h=r.height;return f&&h&&(!D.isPOT(f)||!D.isPOT(h)||K&&f!==h)?(K=K?b=D.nearestPOT(Math.min(f,h)):(b=D.nearestPOT(f),D.nearestPOT(h)),Y1.resizeImage(r,b,K,B)):r},sortFunc:function(r,K){if(r===K)return 0;if(r==H1&&K!=H1)return 1;if(r!=H1&&K==H1)return-1;if(r==H1&&K==H1)return 0;var B,b=typeof r,f=typeof K;return b==mn&&f==mn?B=r.localeCompare(K):b==Wn&&f==Wn&&(B=r-K),0<(B=B===P1?(""+r).localeCompare(""+K):B)?1:B<0?-1:0},getClassMap:function(){return vK},getClass:function(r){if(_1(r)){if(!(B=vK[r])){for(var K=r.split("."),B=V,b=0;b<K.length;b++)B=B[K[b]];vK[r]=B}return B}return r},def:function(r,K,B){function b(){}var f,h,U;if(b.prototype=K.prototype,f=new b,_1(r)){if(vK[r])throw"'"+r+"' already defined";U=z9(r),f.getClassName=function(){return r}}else U=r;if(f.constructor=U,f.getClass=function(){return U},f.getSuperClass=function(){return K},B)for(h in B)DH[h]&&DH.hasOwnProperty(h)?DH[h](f,B):vs(f,B,h);U.prototype=f,U.superClass=K.prototype},startAnim:function(K){return(K=v9(K)).easing=K.easing||Y1.animEasing,K.duration||K.frames||(K.duration=Y1.animDuration),K.t=0,K.duration?K.interval=0:(K.frame=0,K.interval=K.interval||10),K.tick=function(){var r;K.duration?(r=(OK()-K.startTime)/K.duration,K.t=r=1<r?1:r,K.action(K.easing(r),r),K.isRunning()&&(1===r?K.stop():K._isPaused||(K.timeId=y9(K.tick)))):(K.frame++,r=K.t=K.frame/K.frames,K.action(K.easing(r),r),K.isRunning()&&(K.frame<K.frames?K._isPaused||(K.timeId=y9(K.tick,H1,H1,K.interval)):K.stop()))},K.resume=function(){K._isPaused&&(delete K._isPaused,K.duration?K.t<1&&(K.startTime=OK()-K.duration*K.t,K.timeId=y9(K.tick)):K.frame<K.frames&&(K.timeId=y9(K.tick,H1,H1,K.interval)))},K.pause=function(){k9(K.timeId,!K.duration),K._isPaused=!0},K.isPaused=function(){return this._isPaused},K.stop=function(r){K.isRunning()&&(k9(K.timeId,!K.duration),delete K.timeId,K.duration?K.t<1&&r&&(K.t=1,K.action(K.easing(1),1)):K.frame<K.frames&&r&&(K.frame=K.frames,K.action(K.easing(1),1)),K._37o&&K._37o(),K.finishFunc&&K.finishFunc())},K.isRunning=function(){return K.timeId!=H1},K.delay?y9(ot,H1,[K],K.delay):ot(K),K},getTextSize:(QL={},EL=_?mY().getContext("2d"):H1,function(r,K){return EL.font=r||B9,(r=QL[EL.font])||(r=2*EL.measureText("e").width+4,QL[EL.font]=r),{width:EL.measureText(K).width+Y1.textExtraWidth,height:r}}),drawText:function(r,K,B,b,f,h,U,a,P,H,Y){var S,_;K!=H1&&(S=L9(B,K),(_={}).y=H&&H!==Uu?H===Bu?h+S.height/2:h+a-S.height/2:h+a/2,_.x=P&&P!==ru?P===Ku?f+U-S.width/2:f+U/2:f+S.width/2,QY(r,K,_,B,b),Y&&XY(r,K,B,b,_.x,_.y,S.width,Y))},getDistance:function(r,K){var B=r.length;return K?3===B?u1(M1(r[0]-K[0])+M1(r[1]-K[1])+M1(r[2]-K[2])):2===B?u1(M1(r[0]-K[0])+M1(r[1]-K[1])):r.z===P1?u1(M1(K.x-r.x)+M1(K.y-r.y)):u1(M1(K.x-r.x)+M1(K.y-r.y)+M1(K.z-r.z)):3===B?u1(M1(r[0])+M1(r[1])+M1(r[2])):2===B?u1(M1(r[0])+M1(r[1])):void 0},brighter:function(r,K){return ON(r,(K=K<0?-K:K)||40)},darker:function(r,K){return ON(r,(K=0<K?-K:K)||-40)},traverse:(OL={},function(r,K,B,b){var f,P;(f=(f=OL[b=b||""])?f:OL[b]=(P=b,function r(K,B,b,f){var h;if(b&&b(K,B),h=(h=""===P?K.getChildren():K[P])instanceof M.List?h.getArray():h)for(var U=0,a=h.length;U<a;U++)r(h[U],K,b,f);f&&f(K,B)}))(r,null,K,B)}),unionPoint:function(r,K){if(!r)return H1;if(2===arguments.length)return r&&K?{x:b1(r.x,K.x),y:b1(r.y,K.y),width:j1(r.x-K.x),height:j1(r.y-K.y)}:H1;var B=r;if((B=B._as||B).length===P1)return H1;var b=B.length;if(b<=0)return H1;for(var f=1,h={x:(U=B[0]).x,y:U.y,width:0,height:0};f<b;f++){var U=B[f],a=b1(h.x,U.x),P=B1(h.x+h.width,U.x),H=b1(h.y,U.y),Y=B1(h.y+h.height,U.y);h.x=a,h.y=H,h.width=P-a,h.height=Y-H}return h},unionRect:function(r,K){return r&&!K?v9(r):!r&&K?v9(K):r&&K?((B={x:b1(r.x,K.x),y:b1(r.y,K.y)}).width=B1(r.x+r.width,K.x+K.width)-B.x,B.height=B1(r.y+r.height,K.y+K.height)-B.y,B):H1;var B},containsPoint:function(r,K,B,b){var f,h,U,a;return b!=H1&&1!==b&&(f=r.x+r.width/2,h=r.y+r.height/2,r={x:f-r.width/2*b,y:h-r.height/2*b,width:r.width*b,height:r.height*b}),B?(f=r.width/2,h=r.height/2,b=f1(-B),B=S1(-B),U=K.x-r.x-f,a=K.y-r.y-h,m9({x:-f,y:-h,width:r.width,height:r.height},K={x:B*U-b*a,y:b*U+B*a})):!(!r||K.x<r.x||K.y<r.y||K.x>r.x+r.width||K.y>r.y+r.height)},containsRect:function(r,K){if(!r||!K)return!1;var B=K.x,b=K.y,f=K.width,K=K.height,h=r.width,U=r.height;if((h|U|f|K)<0)return!1;var a=r.x,r=r.y;if(B<a||b<r)return!1;if(h+=a,(f+=B)<=B){if(a<=h||h<f)return!1}else if(a<=h&&h<f)return!1;if(U+=r,(K+=b)<=b){if(r<=U||U<K)return!1}else if(r<=U&&U<K)return!1;return!0},intersectsRect:function(r,K){if(!r||!K)return!1;var B=K.width,b=K.height,f=r.width,h=r.height;if(f<=0||h<=0||B<=0||b<=0)return!1;var U=K.x,K=K.y,a=r.x;return h+=r=r.y,B+=U,b+=K,U<(f+=a)&&K<h&&a<B&&r<b},intersection:function(r,K){if(!r||!K)return H1;var B=K.x,b=K.y,f=r.x,h=r.y,U=B,a=b,P=f,H=h;return U+=K.width,a+=K.height,(P+=r.width)<U&&(U=P),(H+=r.height)<a&&(a=H),a-=b=b<h?h:b,(U-=B=B<f?f:B)<=0||a<=0?H1:{x:B,y:b,width:U,height:a}},grow:function(r,K,B){B===P1&&(B=K),r.x-=K,r.y-=B,r.width=r.width+2*K,r.height=r.height+2*B},getScreenPoint:function(r,K,B,b,f,h,U){var a=B.getBoundingClientRect(),r=r*(h||1)-B.scrollLeft+(b||0),h=K*(U||1)-B.scrollTop+(f||0);return(b=ws(B,!1))?((K=new e1(r,h,0)).applyMatrix4(b),{x:K.x,y:K.y}):{x:r+a.left,y:h+a.top}},getLogicalPoint:function(r,K,B,b,f,h){var U,a=K.getBoundingClientRect(),P=r.target?(A9(r)?W1?LK[91]=!0:LK[17]=!0:W1?LK[91]=!1:LK[17]=!1,n9(r)?LK[16]=!0:LK[16]=!1,U=(r=eN(r)?_N(r):r).clientX,r.clientY):(U=r.x,r.y),H=ws(K,!0);if(H){var Y=new e1(U,P,0);Y.applyMatrix4(H);do{if(Math.abs(Y.z)<=1e-6)break;var S=new e1(U,P,1);if(S.applyMatrix4(H),Math.abs(S.z)<=1e-6){Y=S;break}}while(S.sub(Y),!(Math.abs(S.z)<=1e-6)&&(Y.addScaledVector(S,-Y.z/S.z),0));return{x:(Y.x+K.scrollLeft-(B||0))/(f||1),y:(Y.y+K.scrollTop-(b||0))/(h||1)}}return{x:(U-a.left+K.scrollLeft-(B||0))/(f||1),y:(P-a.top+K.scrollTop-(b||0))/(h||1)}},removeHTML:function(r){return!(!(r=r&&r.getView?r.getView():r)||!r.parentNode||(cL!==r&&((cL=r).parentNode.removeChild(r),cL=H1),0))},getToolTipDiv:function(){var r;return eK||(eK=CY(),oK=CY(),r=eK.style,Y1.baseZIndex!=H1&&(r.zIndex=n1(Y1.baseZIndex)+3+""),r.whiteSpace="nowrap",r.color=Y1.toolTipLabelColor,r.background=Y1.toolTipBackground,r.font=Y1.toolTipLabelFont,r.padding="5px",r.boxShadow="0px 0px 3px "+Y1.toolTipShadowColor),eK},isToolTipShowing:function(){return!(!eK||!eK.parentNode)||!(!oK||!oK.parentNode)},updateToolTipContent:function(r,K){Y1.isToolTipShowing()&&(K=K||TK&&TK.view,(r=r===P1&&K&&TK.e?K.getToolTip(TK.e):r)!=H1&&((r.html?(r=r.html,oK):eK).innerHTML=r))},hideToolTip:function(){var r;pK(),Y1.isToolTipShowing()&&(O9(eK),O9(oK),(r=TK&&TK.view)&&r.onHideToolTip&&r.onHideToolTip(),TK=H1)},showToolTip:function(r,K,B){var b,f,h,U,a,P;r&&K!=H1?(Y1.getToolTipDiv(),K.html?(K=K.html,b=oK,O9(eK)):(b=eK,O9(oK)),f=b.style,b.innerHTML="",K instanceof HTMLElement?b.appendChild(K):b.innerHTML=K,b.parentNode||M.Default.appendToScreen(b),r.target?(r=M9(r),K=g9(),h=r.x,U=r.y,a=$1?60:12,$1?(P=b.getBoundingClientRect(),f.left=h-P.width/2+Su,U-P.height-a<K.top?f.top=U+a+Su:f.top=U-P.height-a+Su):(f.left=h+a+Su,f.top=U+a+Su,(P=b.getBoundingClientRect()).left+P.width>K.width&&(f.left=h-a-P.width+Su),P.top+P.height>K.height&&(f.top=U-a-P.height+Su),P.left<0&&(f.left=h+a+Su),P.top<0&&(f.top=U+a+Su))):(f.left=r.x+Su,f.top=r.y+Su),pK(),B===P1?B=TK&&TK.view:TK={e:r,view:B},B&&B.onShowToolTip&&B.onShowToolTip()):OH()},startDragging:function(r,K,B){B==P1&&(B=!0),r!==xN&&(xN?B&&(eN(K)?xN.handleWindowTouchEnd(K):xN.handleWindowMouseUp(K)):eN(K)?(r1(V,bK,TN),r1(V,fK,tN),r1(V,"blur",tN)):(r1(V,En,pN),r1(V,rK,qN),r1(V,"blur",qN)),xN=r)},getImageMap:function(){return zK},toBoundaries:function(r,K,B,b){var f=[];return XN(r,K,B,b).forEach(function(r){var K=[];r.forEach(function(r){K.push(r.x,r.y)}),f.push(K)}),f},getCurrentKeyCodeMap:function(){return LK},drawCenterImage:function(r,K,B,b,f,h,U,a){!f&&h&&h.isSelfViewEvent&&(f=h);var P=DA(K,f,h),H=iA(K,f,h);ZA(r,K,v1(B-P/2),v1(b-H/2),P,H,f,h,U,a)},drawStretchImage:function(r,K,B,b,f,h,U,a,P,H,Y,S){!a&&P&&P.isSelfViewEvent&&(a=P);var _,e,o,x=DA(K,a,P,h),T=iA(K,a,P,U),t=("uniform"===B?(T*=t=b1(h/x,U/T),b+=v1((h-(x*=t))/2),f+=v1((U-T)/2),h=x,U=T):"centerUniform"===B?((h<x||U<T)&&(x*=t=b1(h/x,U/T),T*=t),b+=v1((h-x)/2),f+=v1((U-T)/2),h=x,U=T):"cover"===B&&(T*=t=x/h<T/U?h/x:U/T,b+=v1((h-(x*=t))/2),f+=v1((U-T)/2),h=x,U=T),r.interactiveInfo);t&&(e="center"===B?{x:b+h/2-x/2,y:f+U/2-T/2,width:x,height:T}:{x:b,y:f,width:h,height:U},t.rect?(_=(o=t.compInfos).length)&&(o[_-1].rect.image=K):t.rect=e),"center"===B?((o=!1!==Y&&(h<x||U<T))&&(r.save(),r.beginPath(),r.rect(b,f,h,U),r.clip()),ZA(r,K,b+h/2-x/2,f+U/2-T/2,x,T,a,P,H,S),o&&r.restore()):ZA(r,K,b,f,h,U,a,P,H,S)},toCanvas:function(r,K,B,b,f,h,U,a,P){r=g(r,U),K=K||DA(r,f),B=B||iA(r,f);var H=mY(),Y=bN(H);return a?(ZY(H,K,B,a),Y.scale(a,a)):ZY(H,K,B,1),p9(Y,r,b,0,0,K,B,f,h,U,P),r&&r.clampToEdge&&(H.clampToEdge=r.clampToEdge),Y.restore(),H},toGrayColor:function(r){if(!r)return r;var r=mN(r),K=v1(.299*r[0]+.587*r[1]+.114*r[2]);return"rgba("+K+","+K+","+K+","+r[3]/255+")"},createGradientImage:function(r,K,B,b){for(var f=["L",0,0,r,0,1,0,0,1,0,0],h=0,U=Math.min(K.length,B.length);h<U;h++)f.push(B[h],K[h]);return M.Default.toCanvas({width:r,height:r,clampToEdge:!0,comps:[{type:"shape",rotation:b||0,points:[0,0,r,0,r,r,0,r],background:"#ffffff",gradientPack:f}]})},createElement:function(r,K,B,b){return r=_.createElement(r),DY(r,K||N.widgetBorder,2),r.style.font=B||B9,b!=H1&&(r.value=b),Y1.onElementCreated&&Y1.onElementCreated(r),r},containedInView:function(r,K){return K=SN(K).getBoundingClientRect(),m9({x:K.left,y:K.top,width:K.width,height:K.height},V9(r))},isIsolating:function(){return 0<yK},setIsolating:function(r){r?yK++:yK--},getMSMap:function(){return DH},stringify:function(r,K,B){var b=Date.prototype.toJSON,f=(Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()},HP.prototype.toJSON),r=(HP.prototype.toJSON=function(){return"__ht__dataModel"+this.serialize(0)},K=B?0:K==H1?2:K,JSON.stringify(r,function(r,K){return"function"==typeof K?"__ht__"+(K.__ht__||K.toString()):UY(K)?K==H1||Y1.numberDigits==H1?K:parseFloat(K.toFixed(Y1.numberDigits)):b6(K)?null:K instanceof M.List?"__ht__list"+(K.__ht__list||Y1.stringify(K._as)):K},K));return Date.prototype.toJSON=b,HP.prototype.toJSON=f,B?PK+function(r){for(var K=8+D.randomInt(8),B=zH[8*D.randomInt(8)+(K-8)],b="",f=0;f<K;f++)b+=zH[D.randomInt(64)];var h=fs(b+U1+"__"+jn);return B+b+NH(r,h)}(r):r},parse:function(r,a){return _1(r)&&(r.substr(0,12)!=PK||(r=function(r){var K=r[0];if((K=zH.indexOf(K))<0)return"";var B=r.slice(1,1+(K=8+(7&K))),B=fs(B+U1+"__"+jn);return uH(r,B,1+K)}(r.substr(12)),_1(r)))?(a=a||{},JSON.parse(r,function(r,K){if(_1(K))if(a.ignoreFunction||"__ht__function"!=K.substr(0,14)){if(!a.ignoreDate&&"__ht__date"==K.substr(0,10))return new Date(n1(K.substr(10)));if("__ht__list"===K.substr(0,10))return new $(Y1.parse(K.substr(10)));if(!a.ignoreDataModel&&"__ht__dataModel"===K.substr(0,15))return(B=new HP).deserialize(Y1.parse(K.substr(15))),B}else{var B=K.indexOf("{")+1,b=K.lastIndexOf("}"),f=K.indexOf("(")+1,h=K.indexOf(")");if(B&&b&&f&&h)try{var U=new Function(K.substring(f,h),K.substring(B,b));return U.__ht__=K.substr(6),U}catch(r){throw console.info("=== SyntaxError ===\n",K),r}}return K})):r},loadJS:function(r,K){K&&r.push(K);var B,K=r.shift();YY(K)?(r=K.contact(r),Y1.loadJS(r)):HY(K)?(K(),Y1.loadJS(r)):_1(K)?((B=_.createElement("script")).onload=function(){Y1.loadJS(r)},B.setAttribute("src",K),_.getElementsByTagName("head")[0].appendChild(B)):r.length&&Y1.loadJS(r)},extendClass:function(r,K){var B,b=r.prototype;for(B in K)DH[B]&&DH.hasOwnProperty(B)?DH[B](b,K):b[B]=K[B]},toRoundedCorner:(gL=new e1,WL=new e1,$L=new e1,XL=new e1,function(r,K){var B,b=0,f=(r.getPoints&&(b=r.getElevation(),r=r.getPoints()),(B=r instanceof $?r:new $(r)).size());if(K<=0)return{points:B};var h=new $,U=new $,a=B.get(0);et(gL,a,b),h.add(a),U.add(1);for(var P,H,Y=1;Y<f;Y++)Y+1<f?(P=B.get(Y),H=B.get(Y+1),et(WL,P,b),et($L,H,b),XL.subVectors(gL,WL).setLength(Math.min(.99*XL.length(),K)).add(WL),P.e!==P1||a.e!==P1?h.add({x:XL.x,y:XL.z,e:XL.y}):h.add({x:XL.x,y:XL.z}),h.add(P),XL.subVectors($L,WL).setLength(Math.min(.99*XL.length(),K)).add(WL),P.e!==P1||H.e!==P1?h.add(a={x:XL.x,y:XL.z,e:XL.y}):h.add(a={x:XL.x,y:XL.z}),gL.copy(XL),U.addAll([2,3])):(h.add(B.get(Y)),U.add(2));return{points:h,segments:U}}),toColorData:mN,setCanvas:ZY,createDiv:CY,createDisabledDiv:BN,createView:lY,createCanvas:mY,appendChild:gY,initContext:bN,checkLoadingImage:$K,translateAndScale:fN,layout:L,getPosition:Ns,drawPoints:$N,drawRoundRect:Us,drawBorder:as,setFocus:YN,getter:fY,setter:hY,isEmptyObject:zY,cameraPriority:(ZL={skybox:0,main:1e4,top:1e7,infinity:1/0},A.seal(A.defineProperties({},{skybox:{configurable:!1,enumerable:!1,get:function(){return ZL.skybox},set:function(r){if(r>=ZL.main)throw new RangeError("Skybox camera must have lower priority than the main camera.");ZL.skybox=Number(r)}},main:{configurable:!1,enumerable:!1,get:function(){return ZL.main},set:function(r){if(r<=ZL.skybox)throw new RangeError("Main camera must have higher priority than the skybox camera.");if(r>=ZL.top)throw new RangeError("Main camera must have lower priority than the top camera.");ZL.main=Number(r)}},top:{configurable:!1,enumerable:!1,get:function(){return ZL.top},set:function(r){if(r<=ZL.main)throw new RangeError("Top camera must have higher priority than the main camera.");ZL.top=Number(r)}}}))),addFontFace:(DL={ttf:"truetype",otf:"opentype",eot:"embedded-opentype"},iL={eot:0,woff2:1,woff:2,ttf:3,otf:4},function(r,K,B,b){if(r){var f;if(b&&Y1.removeFontFace(r,!0),b=NK[r])return b.parentNode||_.head.appendChild(b),void(B&&B(b));0!==(K=(K=_1(K)?[K]:K).filter(function(r){return!!_1(r)&&0<r.length})).length&&(K=K.map(St),f="",K.sort(_t).forEach(function(r){f+=", "+r.url}),f=f.substr(2),(b=_.createElement("style")).innerText='@font-face{font-family: "'+r+'";src: '+f+";}",_.head.appendChild(b),NK[r]=b,B&&B(b))}}),clearFontFace:function(){if(!zY(NK)){for(var r in NK)Y1.removeFontFace(r);NK={}}},removeFontFace:function(r,K){if(r){var B=r;if(B.tagName){if(O9(B),K){var b,f=[];for(b in NK)NK[b]===B&&f.push(b);if(0<f.length)for(var h=0,U=f.length;h<U;h++)delete NK[f[h]]}}else(B=NK[r])&&(O9(B),K&&delete NK[r])}},getFontFaceMap:function(){return NK},handleFontFacesLoaded:function(r){}},!0),_&&_.fonts&&_.fonts.addEventListener&&_.fonts.addEventListener("loadingdone",function(r){Y1.handleFontFacesLoaded(r.fontfaces),Y1.findView("all").forEach(function(r){r.redraw?r.redraw():r.iv()})}),qY(k,{autoAdjustIndex:1,hierarchicalRendering:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:1,syncSize:1},!0),Y1.disabledOpacity),gH=Y1.toolTipDelay,WH=Y1.devicePixelRatio,Ds=Y1.autoMakeVisible,$H=Y1.autoHideScrollBar,XH=Y1.imageGradient,cH=Y1.showToolTip,OH=Y1.hideToolTip,QH=Y1.dashPattern,EH=Y1.lineCap,r9=Y1.lineJoin,K9=Y1.labelColor,A1=Y1.labelSelectColor,B9=Y1.labelFont,b9=Y1.widgetIndent,Rs=Y1.widgetRowHeight,f9=Y1.widgetHeaderHeight,h9=Y1.widgetTitleHeight,ls=Y1.scrollBarColor,T=Y1.scrollBarSize,U9=Y1.scrollBarTimeout,a9=Y1.scrollBarMinLength,P9=Y1.scrollBarInteractiveSize,H9=Y1.zoomIncrement,Y9=Y1.scrollZoomIncrement,S9=Y1.pinchZoomIncrement,_9=Y1.zoomMax,e9=Y1.zoomMin,o9=Y1.createObject,x9=Y1.preventDefault,g1=Y1.setImage,g=Y1.getImage,T9=Y1.isImageComplete,t9=Y1.drawCenterImage,p9=Y1.drawStretchImage,q9=Y1.getId,y9=Y1.callLater,k9=Y1.cancelLater,w9=Y1.sortFunc,v9=Y1.clone,z9=Y1.getClass,N9=Y1.startAnim,u9=Y1.brighter,j9=Y1.darker,I9=Y1.drawText,L9=Y1.getTextSize,J9=Y1.isLeftButton,F9=Y1.isMiddleButton,G9=Y1.isRightButton,d9=Y1.getTouchCount,s9=Y1.isDoubleClick,n9=Y1.isShiftDown,A9=Y1.isCtrlDown,V9=Y1.getClientPoint,M9=Y1.getPagePoint,R9=Y1.getDistance,l9=Y1.unionPoint,C9=Y1.unionRect,m9=Y1.containsPoint,D9=Y1.containsRect,i9=Y1.intersectsRect,Z9=Y1.intersection,g9=Y1.getWindowInfo,W9=Y1.grow,$9=Y1.getLogicalPoint,X9=Y1.getScreenPoint,c9=Y1.startDragging,O9=Y1.removeHTML,Q9=Y1.createElement,E9=Y1.segmentResolution,rA=Y1.shapeResolution,KA=Y1.shapeSide,BA=Y1.def,Cs=function(r,K,B){BA("ht."+r,K,B)},bA=function(r,K){r.childNodes.forEach(function(r){K(r),bA(r,K)})},fA=(qY(Y1,{toolTipLabelColor:K9,toolTipLabelFont:B9,toolTipBackground:N.toolTipBackground,toolTipShadowColor:x,debugTipLabelFont:B9,debugTipLabelColor:K9,debugTipBackground:N.toolTipBackground,drawBreakableText:OY,setDevicePixelRatio:function(r){WH=Y1.devicePixelRatio="number"==typeof r?r:iH(V),bA(_.body,function(r){(r=r._ht)&&r._canvas&&(ZY(r._canvas,r.getWidth(),r.getHeight()),r.redraw?r.redraw():r.iv())})},getPosition3dGap:function(){return T6()}},!0),1e-6),hA="undefined"!=typeof Uint16Array?Uint16Array:Array,UA="undefined"!=typeof Uint32Array?Uint32Array:hA,aA="undefined"!=typeof Float32Array?Float32Array:Array,PA=function(r,K,B){return r=[r[0]-K[0],r[1]-K[1],r[2]-K[2]],B&&0<(K=R9(r))&&(r[0]/=K,r[1]/=K,r[2]/=K),r},HA=function(){var r,K="charCodeAt",B=2*(2*_u.length+1);for(r in V)if(r===U1+ru[0]+(Su.length+2)){var b=V[r];if(!b)break;for(var f=b.length,h=0;h<f;h++)if(b[h][K](0)===B&&b[h+1]!=H1&&b[h+1]===Su[0]&&b[h+2]!=H1&&b[h+2][K](0)===B){for(var U=h+3;U<f;U++)if(b[U][K](0)===B){if(0==b[U+1])for(var a,P=U+2;P<f;P++){if(b[P][K](0)===B){0==b[P-1]&&a&&(m1=a.substr(0,a.length-1));break}a==H1?a=b[P]:a+=b[P]}break}break}break}return function(r){return[-r[0],-r[1],-r[2]]}}(),YA=function(r,K){return 3===r.length?r[0]*K[0]+r[1]*K[1]+r[2]*K[2]:r[0]*K[0]+r[1]*K[1]},SA=function(){var r=new Array(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},_A=SA(),eA=function(r){var K=new Array(16);return K[0]=r[0],K[1]=r[1],K[2]=r[2],K[3]=r[3],K[4]=r[4],K[5]=r[5],K[6]=r[6],K[7]=r[7],K[8]=r[8],K[9]=r[9],K[10]=r[10],K[11]=r[11],K[12]=r[12],K[13]=r[13],K[14]=r[14],K[15]=r[15],K},oA=function(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},xA=function(r,K){var B=r[0],b=r[1],f=r[2];return r[0]=K[0]*B+K[4]*b+K[8]*f+K[12],r[1]=K[1]*B+K[5]*b+K[9]*f+K[13],r[2]=K[2]*B+K[6]*b+K[10]*f+K[14],r},TA=function(r,K){var B=r[0],b=r[1],f=r[2],h=r[3];return r[0]=K[0]*B+K[4]*b+K[8]*f+K[12]*h,r[1]=K[1]*B+K[5]*b+K[9]*f+K[13]*h,r[2]=K[2]*B+K[6]*b+K[10]*f+K[14]*h,r[3]=K[3]*B+K[7]*b+K[11]*f+K[15]*h,r},tA=function(r,K,B){var b,f;if("number"==typeof r?f=r:r&&(f=r.length,b=!0),f)for(var h,U=0,a=0;U<f;U++)h=K?b1(f-1,1==a?U+1:2==a?U-1:U):U,B(b?r[h]:h),2<++a&&(a=0)},pA=(U$=kY(r[1]+r[7]),a$=kY(r[0]+r[3]-r[10]),P$=kY(r[8]+2),H$=function(){return f$=h$.charAt(b$),b$+=1,f$},Y$=function(){var r="";if(f$===P$)for(;H$();){if(f$===P$)return H$(),r;r+=f$}else H$()},S$=function(){for(;f$&&f$<=" ";)H$()},_$=function(){if(S$(),f$!==U$)return Y$();var r,K={};if(f$===U$){if(H$(),S$(),f$===a$)return H$(),K;for(;f$;){if(r=Y$(),S$(),H$(),K[r]=_$(),S$(),f$===a$)return H$(),K;H$(),S$()}}},function(r){if(v={},r&&(h$=r,b$=0,f$=" ",r=_$(),S$(),!f$))return r}),qA=function(r,K){var B,b,f,h,U,a,P,H,Y;K&&(B=f1(K),K=S1(K),b=r[4],f=r[5],h=r[6],U=r[7],a=r[8],P=r[9],H=r[10],Y=r[11],r[4]=b*K+a*B,r[5]=f*K+P*B,r[6]=h*K+H*B,r[7]=U*K+Y*B,r[8]=a*K-b*B,r[9]=P*K-f*B,r[10]=H*K-h*B,r[11]=Y*K-U*B)},yA=function(r,K){var B,b,f,h,U,a,P,H,Y;K&&(B=f1(K),K=S1(K),b=r[0],f=r[1],h=r[2],U=r[3],a=r[8],P=r[9],H=r[10],Y=r[11],r[0]=b*K-a*B,r[1]=f*K-P*B,r[2]=h*K-H*B,r[3]=U*K-Y*B,r[8]=b*B+a*K,r[9]=f*B+P*K,r[10]=h*B+H*K,r[11]=U*B+Y*K)},kA=function(r,K){var B,b,f,h,U,a,P,H,Y;K&&(B=f1(K),K=S1(K),b=r[0],f=r[1],h=r[2],U=r[3],a=r[4],P=r[5],H=r[6],Y=r[7],r[0]=b*K+a*B,r[1]=f*K+P*B,r[2]=h*K+H*B,r[3]=U*K+Y*B,r[4]=a*K-b*B,r[5]=P*K-f*B,r[6]=H*K-h*B,r[7]=Y*K-U*B)},wA=function(r,K,B){return vA(H1,!1===B?H1:r.getFinalScale3d(),r.getFinalRotation3d(),r.getRotationMode(),r.p3(),H1,K)},vA=function(r,K,B,b,f,h,U){return h=h||SA(),f&&k6(h,f),nO(h,B,b),U&&v6(h,h,U),K&&w6(h,K),r&&v6(h,h,r),h},zA=function(r,K,B){K=n1(K),B=n1(B),this.g=r,this._84O=K,this._85O=B,this._70I=!0,this.F=0,this._83O=K+B,this.pen={x:0,y:0}},NA="lineDashOffset",uA="setLineDash",jA=function(r,K,B){return NY(K)?r:r[uA]?(r[uA](K),B&&(r.lineDashOffset=B),r):new zA(r,K[0],1<K.length?K[1]:K[0])},IA=function(r,K){!NY(K)&&r[uA]&&(r[uA](VK),r.lineDashOffset=0)},LA=(BA(zA,A,{_69I:6,moveTo:function(r,K){var B=this.pen;B.x=r,B.y=K,this.g.moveTo(r,K),this.start||(this.start={x:r,y:K})},lineTo:function(r,K){var B=this,b=B.pen,f=r-b.x,h=K-b.y,h=d1(h,f),f=S1(h),h=f1(h),U=B._23O(b.x,b.y,r,K),a=B._85O,P=B._84O,H=B._83O;if(B.F){if(B.F>U)return B._70I?B._72I(r,K):B.moveTo(r,K),void(B.F-=U);if(B._70I?B._72I(b.x+f*B.F,b.y+h*B.F):B.moveTo(b.x+f*B.F,b.y+h*B.F),U-=B.F,B.F=0,B._70I=!B._70I,!U)return}var Y=z1(U/H);if(Y){for(var S=f*P,_=h*P,e=f*a,o=h*a,x=0;x<Y;x++)B._70I?(B._72I(b.x+S,b.y+_),B.moveTo(b.x+e,b.y+o)):(B.moveTo(b.x+e,b.y+o),B._72I(b.x+S,b.y+_));U-=H*Y}B._70I?P<U?(B._72I(b.x+f*P,b.y+h*P),B.moveTo(r,K),B.F=a-(U-P),B._70I=!1):(B._72I(r,K),U===P?(B.F=0,B._70I=!B._70I):(B.F=P-U,B.moveTo(r,K))):a<U?(B.moveTo(b.x+f*a,b.y+h*a),B._72I(r,K),B.F=P-(U-a),B._70I=!0):(B.moveTo(r,K),U===a?(B.F=0,B._70I=!B._70I):B.F=a-U)},quadraticCurveTo:function(r,K,B,b){var f,h=this,U=(P=h.pen).x,a=P.y,P=h._22O(U,a,r,K,B,b),H=0,Y=0,S=h._85O,_=h._84O;if(h.F){if(h.F>P)return h._70I?h._71I(r,K,B,b):h.moveTo(B,b),void(h.F-=P);if(H=h.F/P,f=h._20O(U,a,r,K,B,b,H),h._70I?h._71I(f[2],f[3],f[4],f[5]):h.moveTo(f[4],f[5]),h.F=0,h._70I=!h._70I,!P)return}var e,o=z1((P-P*H)/h._83O),x=_/P,T=S/P;if(o)for(var t=0;t<o;t++)h._70I?(f=h._21O(U,a,r,K,B,b,H,Y=H+x),h._71I(f[2],f[3],f[4],f[5]),H=Y,f=h._21O(U,a,r,K,B,b,H,Y=H+T),h.moveTo(f[4],f[5])):(f=h._21O(U,a,r,K,B,b,H,Y=H+T),h.moveTo(f[4],f[5]),H=Y,f=h._21O(U,a,r,K,B,b,H,Y=H+x),h._71I(f[2],f[3],f[4],f[5])),H=Y;e=P-P*H,h._70I?_<e?(f=h._21O(U,a,r,K,B,b,H,Y=H+x),h._71I(f[2],f[3],f[4],f[5]),h.moveTo(B,b),h.F=S-(e-_),h._70I=!1):(f=h._19O(U,a,r,K,B,b,H),h._71I(f[2],f[3],f[4],f[5]),P===_?(h.F=0,h._70I=!h._70I):(h.F=_-e,h.moveTo(B,b))):S<e?(f=h._21O(U,a,r,K,B,b,H,Y=H+T),h.moveTo(f[4],f[5]),f=h._19O(U,a,r,K,B,b,Y),h._71I(f[2],f[3],f[4],f[5]),h.F=_-(e-S),h._70I=!0):(h.moveTo(B,b),e===S?(h.F=0,h._70I=!h._70I):h.F=S-e)},bezierCurveTo:function(){var r=arguments;this.pen={x:r[4],y:r[5]},this.g.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5])},arc:function(r,K,B,b,f,h){h||(b=-b,f=-f);var U,a,P,H,Y,S=r,_=K,h=b,e=B,o=B,K=!1,x=-((r=j1(r=f-b)>2*F?2*F:r)/(U=N1(j1(r)/(F/4)))),T=-h;if(0<U){r=S+S1(h)*e,h=_+f1(-h)*o,K?this.lineTo(r,h):this.moveTo(r,h);for(var t=0;t<U;t++)Y=(T+=x)-x/2,a=S+S1(T)*e,P=_+f1(T)*o,H=S+S1(Y)*(e/S1(x/2)),Y=_+f1(Y)*(o/S1(x/2)),this.quadraticCurveTo(H,Y,a,P)}},rect:function(r,K,B,b){this.pen={x:r,y:K},this.moveTo(r,K),this.lineTo(r,K+b),this.lineTo(r+B,K+b),this.lineTo(r+B,K),this.lineTo(r,K)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(r,K,B,b){return u1((B-=r)*B+(r=b-K)*r)},_22O:function(r,K,B,b,f,h,U){for(var a,P,H,Y,S=0,_=r,e=K,o=0<U?U:this._69I,x=1;x<=o;x++)S+=this._23O(_,e,a=(P=(H=1-(Y=x/o))*H)*r+(H*=2*Y)*B+(Y*=Y)*f,P=P*K+H*b+Y*h),_=a,e=P;return S},_21O:function(r,K,B,b,f,h,U,a){return 0===U?this._20O(r,K,B,b,f,h,a):1===a?this._19O(r,K,B,b,f,h,U):((r=this._20O(r,K,B,b,f,h,a)).push(U/a),this._19O.apply(this,r))},_20O:function(r,K,B,b,f,h,U){var a,P;return 1!==U&&(a=B+(f-B)*U,P=b+(h-b)*U,f=(B=r+(B-r)*U)+(a-B)*U,h=(b=K+(b-K)*U)+(P-b)*U),[r,K,B,b,f,h]},_19O:function(r,K,B,b,f,h,U){var a;return 1!==U&&(r=(a=r+(B-r)*U)+((B+=(f-B)*U)-a)*U,K=(a=K+(b-K)*U)+((b+=(h-b)*U)-a)*U),[r,K,B,b,f,h]},_72I:function(r,K){var B=this.pen;r===B.x&&K===B.y||(B.x=r,B.y=K,this.g.lineTo(r,K))},_71I:function(r,K,B,b){var f=this.pen;r===B&&K===b&&B===f.x&&b===f.y||(f.x=B,f.y=b,this.g.quadraticCurveTo(r,K,B,b))}}),DH.ms_quickVisible=function(r,K){r._4BQ=!1,r._4CQ=function(r){var K=r._4EQ;return K!==P1?K:r._4EQ=this._4FQ(r)},r._4DQ=function(r){var K;r?(r._4EQ=P1,K=this,r instanceof RO||eY(r)||r instanceof ZO||r.ISubGraph?r.eachChild(function(r){K.invalidateQuickVisible(r)}):r.getEdges&&(r=r.getEdges())&&r.each(function(r){K.invalidateQuickVisible(r)})):this.dm().each(function(r){r._4EQ=P1})},r.enableQuickVisibleMode=function(){return!this._4BQ&&!this._visibleFunc&&(this._4BQ=!0,this._4FQ=this.isVisible,this.isVisible=this._4CQ,this.invalidateQuickVisible=this._4DQ,!0)},r.disableQuickVisibleMode=function(){return this._quickVisiblePending=!1,!!this._4BQ&&(this._4BQ=!1,this.isVisible=this._4FQ,this.invalidateQuickVisible=lK,!0)},r.isQuickVisibleMode=function(){return this._4BQ},r.invalidateQuickVisible=lK},r=s1()+1,K&&V.console,H1),JA=H1,FA=Y1.checkLoadingCompType=function(r){LA&&!r._72O_&&((JA=JA||{})[r._72O_=q9()]=r)},GA=function(B,r){var b,K;(r=r||B)&&!(LA=LA||{})[B]&&(b=new $O,LA[r]={request:b,url:r},(r=Y1.beforeLoadURL(r,B)).data?(K=Y1.parse(r.data),dA(B,K),Y1.handleCompTypeLoaded(B,K)):(b.onload=function(r){var K;200===this.status||0===this.status?(K=Y1.parse(b.getResponseText()),dA(B,K),Y1.handleCompTypeLoaded(B,K)):dA(B,H1)},b.onerror=function(r){dA(B,H1)},(K={}).url=encodeURI(r),K.sync=!1,b.send(K)))},dA=function(r,K){if(JK[r]=K,delete LA[r],zY(LA)&&(LA=H1,JA)){for(var B in JA)(b=JA[B]).invalidateAll&&b.invalidateAll(P1,"compTypeLoaded",r),b.redraw&&b.redraw(),b.iv(),delete b._72O_;JA=H1}if(K&&JA)for(var B in JA){var b;(b=JA[B]).invalidateAll&&b.invalidateAll(P1,"compTypeLoading",r),b.redraw&&b.redraw(),b.iv()}},sA=N.chart,nA="",AA=!0,VA=Y1.compStack=[],MA=/^style@/,RA=/^attr@/,lA=/^field@/,CA={x:.5,y:.5},mA=function(r,K,B){return!!r&&((b=B&&B.isImageFitSize?B.isImageFitSize(K,r):b)==H1?W(r.fitSize,K,B):b);var b},DA=function(r,K,B,b){return r?!(mA(r,K,B)&&b||null!=(b=W(r.width,K,B)))?20:b:0},iA=function(r,K,B,b){return r?!(mA(r,K,B)&&b||null!=(b=W(r.height,K,B)))?20:b:0},W=function(r,K,B){if(!r||!r.func)return r;var b=r.func,f=r.value,r=HY(b)?B&&B.vectorDataBindingDisabled&&!r.isSafeFunc?f:b(K,B):K instanceof PP||M.ui&&K instanceof M.ui.View?RA.test(b)?K.a(nA+b.slice(5)):MA.test(b)?K.s(nA+b.slice(6)):lA.test(b)?K[b.slice(6)]:K[b]?K[b](B):f:f;return f!==P1&&r==H1?f:r},ZA=Y1.drawImage=(m=function(r,K,B){var b,f,h=!1;return r.prefix&&e$ instanceof PP&&(f=e$.a(nA+K))!==P1&&(h=!0,b=f),(b=b===P1?r[K]:b)&&b.func&&(h=!0,b=W(b,e$,o$)),B&&(b=B(b),h||(r[K]=b)),b},p$=function(r){var K=m(r,"anchorX"),B=m(r,"anchorY");return K!==P1||B!==P1?{x:K===P1?CA.x:K,y:B===P1?CA.y:B}:(K=m(r,"type"),B=m(r,"name"),"image"===K&&B&&(r=g(B))&&r.anchorX!==P1&&r.anchorY!==P1?{x:r.anchorX,y:r.anchorY}:CA)},q$={border:function(r,K){as(C,tt(r,Zn),K.x,K.y,K.width,K.height,m(r,"width"))},image:function(r,K){var B=T$||m(r,Zn),b=t$||m(r,"blendMode"),f=m(r,"name");(f=(f=g(f,B,b))&&f.cacheRule!=H1?CP(C,f,m(r,"stretch"),K.width,K.height,e$,o$,B):f)?p9(C,f,m(r,"stretch"),K.x,K.y,K.width,K.height,e$,o$,B,null,b):AA=!1},text:function(r,a){var K,P,B,H,b,Y,S,_,f,e,o,x,T,t,p,q,y,h,k,U,w,v,z=m(r,"text");z!=H1&&(z+="",w=m(r,"gradientPack"),v=m(r,"gradient"),K=tt(r,"gradientColor"),P=m(r,"font"),B=m(r,"vertical"),H=m(r,"verticalGap")||0,b=m(r,"align"),Y=m(r,"vAlign"),S=m(r,"decoration"),_=m(r,"letterGap")||0,f=m(r,"wrap"),e=m(r,"borderWidth"),o=m(r,"borderColor"),x=L9(P,z),w?(T=gN(C,w,tt,!1,a),C.restore()):T=tt(r,Zn),!w&&v&&(T=Y1.createGradient(C,v,T||Y1.labelColor,K||N.imageGradient,a.x,a.y,a.width,a.height)),e&&YY(o)&&(o=gN(C,o,tt,!1,a),C.restore()),B?(null==H&&(H=1),t=[],p=[],U=f?$Y(z,a.height,P,_,B,H):[z],C.textBaseline=Bu,C.font=P,U.forEach(function(r){for(var K=r.length,B=0,b=(K-1)*H,f=0;f<K;f++){var h=C.measureText(r[f]);t.push(h),b+=h.fontBoundingBoxDescent||x.height,B=B1(B,h.width)}p.push({width:B,height:b})}),h=(U.length-1)*_,p.forEach(function(r){h+=r.width}),q=b&&b!==ru?b===Ku?a.x+a.width-h:a.x+(a.width-h)/2:a.x,k=0,U.forEach(function(r,K){var B=p[K],b=r.length;y=Y&&Y!==Uu?Y===Bu?a.y:a.y+a.height-B.height:a.y+(a.height-B.height)/2;for(var f=0;f<b;f++){var h=r[f],U=t[k].fontBoundingBoxDescent||x.height;cY(C,h,P,T,{x:q,y:y,width:B.width,height:U},fu,Y,S,_,e,o),y+=U+H,k++}q+=B.width+_})):1<(r=(U=f?$Y(z,a.width,P,_,B,H):z.split("\n")).length)?(w=r*L9(P,z).height+H*(r-1),v=v9(a),Y&&Y!==Uu?Y===bu&&(v.y=a.y+a.height-w):v.y=a.y+(a.height-w)/2,v.height=w,OY(C,U,v,P,T,b||ru,S,_,e,o)):cY(C,z,P,T,a,b,Y,S,_,e,o))},pieChart:function(r,K){var B=m(r,Ju),b=0;if(B&&(B.forEach(function(r){b+=r}),0<b)){for(var f=m(r,"colors")||sA,h=m(r,"startAngle")||0,U=m(r,"hollow"),a=m(r,du),P=m(r,Mu),H=m(r,Ru),Y=a?new $:H1,r=K.x,S=K.y,_=K.width,e=r+_/2,o=S+(K=K.height)/2,x=b1(_,K)/2,T=0,t=0;t<B.length;t++){var p,q,y,k,w=B[t],v=h+h1*w/b;C.fillStyle=f[T++],T===f.length&&(T=0),C.beginPath(),U?(p=e+S1(h)*x/2,q=o+f1(h)*x/2,y=e+S1(v)*x,k=o+f1(v)*x,C.moveTo(p,q),C.arc(e,o,x/2,h,v,!1),C.lineTo(y,k)):C.moveTo(e,o),C.arc(e,o,x,v,h,!0),Y&&(p=(h+v)/2,Y.add({text:HY(a)?a(w,t,b,e$):w,x:e+S1(p)*x*.75,y:o+f1(p)*x*.75})),C.closePath(),C.fill(),h=v}Y&&Y.each(function(r){I9(C,r.text,P,H,r.x,r.y,0,0,fu)})}},columnChart:function(r,K){var B=m(r,Fu);if(B&&0<B.length){var b=B.length,f=m(r,du),h=m(r,Mu),U=m(r,Ru),a=f?new $:H1,P=m(r,"minValue")||0,H=m(r,"maxValue");if(H==H1&&(H=0,B.forEach(function(r){m(r,Ju).forEach(function(r){H=B1(H,r)})})),P!==H){for(var Y=K.height/(H-P),S=K.y+H*Y,_=m(B[0],Ju).length,e=K.width/(3*_+1),o=2*e/b,x=0,T=0;T<b;T++)for(var t=B[T],p=m(t,Zn),q=m(t,"colors"),y=m(t,Ju),k=0;k<_;k++){q?C.fillStyle=q[k]:p?C.fillStyle=p:(C.fillStyle=sA[x++],x===sA.length&&(x=0));var w,v=y[k],z=v*Y,N=K.x+(1+3*k)*e+T*o;QN(C,N,S-z,o,z),a&&(v=HY(f)?f(v,k,t,e$):v,w=L9(h,v).height,a.add({x:N,y:S-z-w,width:o,height:w,text:v}))}a&&a.each(function(r){I9(C,r.text,h,U,r.x,r.y,r.width,r.height,fu)})}}},stackedColumnChart:function(r,K){var B=m(r,Fu);if(B&&0<B.length){var b=B.length,f=m(B[0],Ju).length,h=K.width/(3*f+1),U=0,a=m(r,"maxValue"),P=m(r,du),H=m(r,Mu),Y=m(r,Ru),S=P?new $:H1;if(a==H1)for(var a=0,_=0;_<f;_++){for(var e=0,o=0;o<b;o++)e+=m(B[o],Ju)[_];a=B1(a,e)}if(0<a){for(_=0;_<f;_++)for(var x=K.y+K.height,o=0;o<b;o++){var T=B[o],t=m(T,Zn),p=m(T,Ju)[_],q=p/a*K.height,t=(t?C.fillStyle=t:(C.fillStyle=sA[U++],U===sA.length&&(U=0)),x-=q,{x:K.x+(1+3*_)*h,y:x,width:2*h,height:q});QN(C,t.x,t.y,t.width,t.height),S&&(t.text=HY(P)?P(p,_,T,e$):p,S.add(t))}S&&S.each(function(r){I9(C,r.text,H,Y,r.x,r.y,r.width,r.height,fu)})}}},percentageColumnChart:function(r,K){var B=m(r,Fu);if(B&&0<B.length){for(var b=B.length,f=m(B[0],Ju).length,h=K.width/(3*f+1),U=0,a=m(r,du),P=m(r,Mu),H=m(r,Ru),Y=a?new $:H1,S=0;S<f;S++){for(var _=0,e=0;e<b;e++)_+=m(B[e],Ju)[S];if(0<_)for(var o=K.y+K.height,e=0;e<b;e++){var x=B[e],T=m(x,Zn),t=m(x,Ju)[S],p=t/_*K.height,T=(T?C.fillStyle=T:(C.fillStyle=sA[U++],U===sA.length&&(U=0)),o-=p,{x:K.x+(1+3*S)*h,y:o,width:2*h,height:p});QN(C,T.x,T.y,T.width,T.height),Y&&(T.text=HY(a)?a(t,S,x,e$):t,Y.add(T))}}Y&&Y.each(function(r){I9(C,r.text,P,H,r.x,r.y,r.width,r.height,fu)})}},lineChart:function(r,K){var B=m(r,Fu);if(B&&0<B.length){var b=B.length,f=m(r,"minValue")||0,h=m(r,"maxValue");if(h==H1&&(h=0,B.forEach(function(r){m(r,Ju).forEach(function(r){h=B1(h,r)})})),f!==h)for(var U=K.height/(h-f),a=K.y+h*U,P=m(B[0],Ju).length,H=K.width/(3*P+1),Y=0,S=m(r,"lineWidth")||2,_=m(r,"line3d"),e=m(r,"linePoint"),o=m(r,du),x=m(r,Mu),T=m(r,Ru),t=0;t<b;t++){var p=B[t],q=m(p,Zn),y=m(p,Ju);q?C.strokeStyle=q:(q=C.strokeStyle=sA[Y++],Y===sA.length&&(Y=0)),C.beginPath();for(var k=0;k<P;k++){var w=K.x+(2+3*k)*H,v=a-y[k]*U;0===k?C.moveTo(w,v):C.lineTo(w,v)}if(C.lineWidth=S,C.stroke(),_&&cN(C,q,H1,S,x$),e||o)for(var z,N=S/2+2,k=0;k<P;k++){var u,j,I,L,J=y[k],w=K.x+(2+3*k)*H,v=a-J*U;HY(e)?e(C,w,v,q,k,p,e$):e&&(C.fillStyle=q,C.beginPath(),C.arc(w,v,N,0,h1,!0),C.fill()),HY(o)?z=o(J,k,p,e$):o&&(z=J),z&&(J=L9(x,z).height,(u=C.shadowBlur)&&(j=C.shadowOffsetX,I=C.shadowOffsetY,L=C.shadowColor,C.shadowOffsetX=0,C.shadowOffsetY=0,C.shadowBlur=0,C.shadowColor=H1),I9(C,z,x,T,w,v-J-N+2,0,J,fu),u&&(C.shadowOffsetX=j,C.shadowOffsetY=I,C.shadowBlur=u,C.shadowColor=L))}}}}},function(r,d,K,B,b,f,s,h,U,a){if(d&&b&&f){var P,H,n,Y,S,_,e,o,x,A,T=[C,e$,o$,x$,T$,t$],r=(C=r,o$=h,!(e$=s)&&o$&&o$.isSelfViewEvent&&(e$=o$),x$=o$&&o$._zoom||1,T$=U,t$=a,b),h=f;if(fO()&&(0===C.maxSize&&!fO[0]||(H=!0),C.texureImage2D&&!fO[1]||(Y=!0),C.texureImage3D&&!fO[2]||(S=!0),C.drawDNDState&&!fO[3]||(e=!0),C.drawRect&&!fO[Mu[2]]||(P=!0),M[bn[1]+rn[0]+Zu[1]]&&!fO[rn[0]]||(o=!0),RK.widget[0]&&!fO[4]||(_=!0),H&&Y&&S&&_&&e&&o&&P&&(r=K,h=B)),d.tagName)return _1(m1)&&!V[m1]||C.drawImage(d,r,h,b,f),void zt(T);0!=m(d,"visible")&&(T$=T$||W(d.color,e$,o$),a||(t$=W(d.blendMode,e$,o$)),_1(m1)&&!V[m1]&&(b=r,f=h),U=DA(d,e$,o$,b),H=iA(d,e$,o$,f),n={x:0,y:0,width:U,height:H,fitSize:mA(d,e$,o$)},Y=m(d,"clip"),S=m(d,"opacity"),n.fitSize&&(_=n.rw=W(d.width,e$,o$)||20,n.widthScale=U/_,e=n.rh=W(d.height,e$,o$)||20,n.heightScale=H/e),C.save(),C.interactiveInfo&&(x=(o=C.interactiveInfo.matrix).clone(),o.appendTranslate(r,h).appendScale(b/U,f/H),C.interactiveInfo.refRect=n),hN(C,r,h),U===b&&H===f||C.scale(b/U,f/H),Y&&(HY(Y)?Y(C,U,H,e$,o$,d):(C.beginPath(),C.rect(0,0,U,H),C.clip())),S!=H1&&(C.globalAlpha*=S),A=C.compGray,m(d,"comps").forEach(function(r){var K;if(r.gray&&(C.compGray=!0),r.prefix&&(K=nA,(Y=W(r.prefix,e$,o$))&&(nA=nA+Y+".")),0==(Y=d,u=r,o$&&o$.getDrawableState?N=o$.getDrawableState(e$):o$&&o$.getState?N=o$.getState(e$):(N=e$ instanceof PP?e$.s(un):null)!==P1&&null!==N||(N=m(Y,un)),((Y=m(u,un))===P1||null===Y||Y===N)&&m(u,$u)))r.prefix&&(nA=K);else{VA.splice(0,0,r),C.interactiveInfo&&(B=C.interactiveInfo.matrix.clone());var B,b,f,h,U,a,P,H,Y,S,_,e,o,x,T,t,p,q,y,k,w,v,z,N=m(r,"opacity"),u=m(r,"shadow"),j=m(r,"type"),I=m(r,"refRect")||n,L=(Y=I,P=m(H=r,R),p=p$(H),YY(P)&&(v=P.length,x=m(H,"relative"),z=Y.width,y=Y.height,4===v?(P={x:P[0],y:P[1],width:P[2],height:P[3]},x&&(P.x*=z,P.y*=y,P.width*=z,P.height*=y)):3===v&&(v=P[0],P={width:P[1],height:P[2]},x&&(P.width*=z,P.height*=y),"object"==typeof v?v.length&&(v={x:v[0],y:v[1]}):v=Ns(v,Y,P),P.x=v.x-P.width*p.x,P.y=v.y-P.height*p.y),P.x+=m(H,"offsetX")||0,P.y+=m(H,"offsetY")||0,!x&&Y.fitSize&&(P=qt(H,P,Y))),P);if(N!=H1&&(b=C.globalAlpha,C.globalAlpha*=N),u&&(z=x$*Y1.devicePixelRatio,f=C.shadowOffsetX,h=C.shadowOffsetY,U=C.shadowBlur,a=C.shadowColor,y=m(r,"shadowOffsetX"),v=m(r,"shadowOffsetY"),p=m(r,"shadowBlur"),x=tt(r,"shadowColor"),C.shadowOffsetX=(y==H1?3:y)*z,C.shadowOffsetY=(v==H1?3:v)*z,C.shadowBlur=(p==H1?6:p)*z,C.shadowColor=x||tt(Ms)),"save"===j)C.save();else if("endClip"===j||"restore"===j)C.restore();else if("clip"===j)C.save(),$N(C,m(r,"points",pt),m(r,"segments",yt),!0),C.clip();else if(os[j]){if(vt(r,j,L=L||{x:0,y:0,width:I.width,height:I.height},I),r.prefix&&0===r.prefix.indexOf("ui.")&&o$&&M.ui&&o$ instanceof M.ui.View){o$._vectorCompInfo||(o$._vectorCompInfo=[]);for(var J=!1,F=0;F<o$._vectorCompInfo.length;F++){var G=o$._vectorCompInfo[F];if(r.prefix===G.comp.prefix&&s===G.data){o$._vectorCompInfo[F]={comp:r,type:j,rect:L,compRefRect:I,data:s,image:d,transform:C.getTransform()},J=!0;break}}J||o$._vectorCompInfo.push({comp:r,type:j,rect:L,compRefRect:I,data:s,image:d,transform:C.getTransform()})}}else j===tu?vt(r,j,L,I):"SVGPath"===j?(H=j,Y=L,p=m(P=r,"path"),q=m(P,gu),y=m(P,"scaleX"),k=m(P,"scaleY"),w=p$(P),v=H1,z=ZN(null,p),Y||((Y=P.unionRect)||(Y=l9(z),P.path.func||(P.unionRect=Y)),v=Y),Y&&((v=v||P.unionRect)||(v=l9(z),P.path.func||(P.unionRect=v)),z=kt(P,Y,v,q,y,k,w),Y=m(P,"borderPattern"),q=jA(C,Y),y=tt(P,"background"),k=tt(P,"borderColor"),w=m(P,"borderWidth"),x=m(P,"gradient"),T=tt(P,"gradientColor"),t=m(P,"border3d"),S=tt(P,"border3dColor"),_=m(P,"border3dAccuracy"),e=C.lineJoin,o=C.lineCap,C.lineJoin=m(P,"borderJoin")||r9,C.lineCap=m(P,"borderCap")||EH,y?(rs(C,y,x,T,v),ZN(C,p),C.fill(),q!==C&&ZN(C,p)):ZN(C,p),(x=m(P,"borderWidthAbsolute"))&&(C.save(),C.setTransform(1,0,0,1,0,0)),w&&k&&(C.lineWidth=w,C.strokeStyle=k,C.stroke(),t&&cN(C,k,S,w,x$,_)),IA(C,Y),m(P,"dash")&&0<(T=m(P,"dashWidth")||w)&&(Y=m(P,"dashPattern")||QH,q=jA(C,Y,m(P,"dashOffset")),t=tt(P,"dashColor")||tt(js),q!==C&&ZN(C,p),C.strokeStyle=t,C.lineWidth=T,C.stroke(),m(P,"dash3d")&&cN(C,t,tt(P,"dash3dColor"),T,x$,m(P,"dash3dAccuracy")),IA(C,Y)),x&&C.restore(),H===R&&Ps(C,y,m(P,"depth"),v),C.lineJoin=e,C.lineCap=o,z&&wt())):(q=kt(r,L=L||{x:0,y:0,width:I.width,height:I.height},L,k=m(r,gu),S=m(r,"scaleX"),_=m(r,"scaleY"),w=p$(r)),HY(j)?(Tt(r,j),Y1.drawCompType(j,C,L,r,e$,o$)):Y1.getCompType(j)?(t=(p=Y1.getCompType(j)).func||p,Tt(r,p),Y1.drawCompType(t,C,L,r,e$,o$)):q$[j]?q$[j](r,L):Y1.getCompType(j)===P1&&sK.test(j)&&(GA(j),Y1.getCompType(j)===P1&&(AA=!1)),q&&wt());u&&(C.shadowOffsetX=f,C.shadowOffsetY=h,C.shadowBlur=U,C.shadowColor=a),N!=H1&&(C.globalAlpha=b),C.interactiveInfo&&(C.interactiveInfo.matrix=B),r.prefix&&(nA=K),VA.splice(0,1),C.compGray=A}}),C.interactiveInfo&&(C.interactiveInfo.matrix=x),C.restore()),zt(T)}}),gA=(Y1.getCurrentComp=function(){return VA[0]},Y1.getParentComp=function(){return VA[1]},Y1.getInternal=function(){return{isEnter:dN,isEsc:sN,isSpace:GN,isLeft:IN,isUp:LN,isRight:JN,isDown:FN,addMethod:qY,superCall:vY,toPointsArray:XN,translateAndScale:fN,appendArray:tY,createWorldMatrix:vA,vec3TransformMat4:xA,setCanvas:ZY,createDiv:CY,createView:lY,createCanvas:mY,createImage:QK,initContext:bN,layout:L,fillRect:QN,Mat:JH,drawBorder:as,isString:_1,setBorder:DY,getPropertyValue:FY,setPropertyValue:GY,drawVerticalLine:sY,draw3DRect:Ps,getPinchDist:Ts,isSameRect:uY,getPosition:Ns,intersectionLineRect:LY,getNodeRect:SP,getEdgeAgentPosition:LP,getEdgeHostPosition:IP,getImageWidth:DA,getImageHeight:iA,initItemElement:RY,compileShaderAndFetchUniforms:rq,composeShaderSource:bq,decomposeShaderSource:Bq,drawPoints:$N,createG2:jA,closePopup:oN,isH:BY,createAnim:pY,createNormalMatrix:Yr,makeUVMatrix:Nr,toColorArray:DN,createNormals:G6,toFloatArray:Wm,glMV:Sr,glPop:Hr,batchShape:bm,createNodeMatrix:wA,getShapeModel:Zm,getFaceInfo:yr,transformAppend:S6,drawFaceInfo:kr,glUploadData:fr,glUploadElementData:Ur,glDrawArray:rr,glDrawElement:Kr,glBindTexture:A6,pickValueToColor:jq,to3dPointsArray:cm,setGLDebugMode:function(r){oU=r},cube:function(){return{vs:km,is:wm,uv:vm}},ui:function(){return{DataUI:oz,NodeUI:Tz,EdgeUI:tz,GroupUI:qz,ShapeUI:kz,GridUI:vz,Data3dUI:Dq,Node3dUI:iq,Shape3dUI:Wq}},getInternalVersion:function(){return"U2FsdGVkX19DERr/g+riCvIJkvu8Zh4GXoa5RohUySA="},getDragger:function(){return xN},addMSMap:function(r){qY(DH,r)},k:a1,overrideTimerFunc:function(r,K){y9=M.Default.callLater=r,k9=M.Default.cancelLater=K},canEnterEditDetailMode:MP,addEventListener:r1,removeEventListener:K1,createGradientByPackedData:gN,completeCubeCenterOfModel3d:Ir}},function(r){var y="toString",K="";function p(r,K,B){r!=H1&&(K==H1&&mn!=typeof r?this._54O(r,256):this._54O(r,K))}t1=r["D"+11182[y](L1(2,5))];var B=p.prototype;function q(){return new p(H1)}cu+=Pu.substr(0,1);for(var r="Microsoft Internet Explorer"==(r=r.navigator?r.navigator.appName:"")?(B.am=function(r,K,B,b,f,h){for(var U=32767&K,a=K>>15;0<=--h;){var P=32767&this[r],H=this[r++]>>15,Y=a*P+H*U;f=((P=U*P+((32767&Y)<<15)+B[b]+(1073741823&f))>>>30)+(Y>>>15)+a*H+(f>>>30),B[b++]=1073741823&P}return f},30):"Netscape"!=r?(B.am=function(r,K,B,b,f,h){for(;0<=--h;){var U=K*this[r++]+B[b]+f;f=z1(U/67108864),B[b++]=67108863&U}return f},26):(B.am=function(r,K,B,b,f,h){for(var U=16383&K,a=K>>14;0<=--h;){var P=16383&this[r],H=this[r++]>>14,Y=a*P+H*U;f=((P=U*P+((16383&Y)<<14)+B[b]+f)>>28)+(Y>>14)+a*H,B[b++]=268435455&P}return f},28),A=(B.DB=r,B.DM=(1<<r)-1,B.DV=1<<r,B.FV=L1(2,52),B.F1=52-r,B.F2=2*r-52,"0123456789abcdefghijklmnopqrstuvwxyz"),H=[],U=function(r){return String.fromCharCode(r)},b="0".charCodeAt(0),f=0;f<=9;++f)H[b++]=f;for(b="a".charCodeAt(0),f=10;f<36;++f)H[b++]=f;for(b="A".charCodeAt(0),f=10;f<36;++f)H[b++]=f;function Y(r){return A.charAt(r)}function h(r){var K=q();return K._58O(r),K}function k(r){var K,B=1;return 0!=(K=r>>>16)&&(r=K,B+=16),0!=(K=r>>8)&&(r=K,B+=8),0!=(K=r>>4)&&(r=K,B+=4),0!=(K=r>>2)&&(r=K,B+=2),0!=(K=r>>1)&&(r=K,B+=1),B}function a(r){this.m=r}function P(r){this.m=r,this.mp=r._50O(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<r.DB-15)-1,this.mt2=2*r.t}function w(r,K){return new p(r,K)}function S(){this.n=H1,this.e=0,this.d=H1,this.p=H1,this.q=H1,this.dmp1=H1,this.dmq1=H1,this._10A=H1}(r=a.prototype)._73O=function(r){return r.s<0||0<=r._52O(this.m)?r.mod(this.m):r},r.revert=function(r){return r},r._74O=function(r){r._49O(this.m,H1,r)},r._75O=function(r,K,B){r._47O(K,B),this._74O(B)},r._76O=function(r,K){r._48O(K),this._74O(K)},(r=P.prototype)._73O=function(r){var K=q();return r.abs()._59O(this.m.t,K),K._49O(this.m,H1,K),r.s<0&&0<K._52O(p.ZERO)&&this.m._78O(K,K),K},r.revert=function(r){var K=q();return r._77O(K),this._74O(K),K},r._74O=function(r){for(var K=this;r.t<=K.mt2;)r[r.t++]=0;for(var B=0;B<K.m.t;++B){var b=32767&r[B],f=b*K.mpl+((b*K.mph+(r[B]>>15)*K.mpl&K.um)<<15)&r.DM;for(r[b=B+K.m.t]+=K.m.am(0,f,r,B,0,K.m.t);r[b]>=r.DV;)r[b]-=r.DV,r[++b]++}r._57O(),r._45O(K.m.t,r),0<=r._52O(K.m)&&r._78O(K.m,r)},r._75O=function(r,K,B){r._47O(K,B),this._74O(B)},r._76O=function(r,K){r._48O(K),this._74O(K)},B._77O=function(r){for(var K=this.t-1;0<=K;--K)r[K]=this[K];r.t=this.t,r.s=this.s},B._58O=function(r){this.t=1,this.s=r<0?-1:0,0<r?this[0]=r:r<-1?this[0]=r+this.DV:this.t=0},B._54O=function(r,K){var B,b=this;if(16==K)B=4;else if(8==K)B=3;else if(256==K)B=8;else if(2==K)B=1;else if(32==K)B=5;else{if(4!=K)return void b.fromRadix(r,K);B=2}b.t=0,b.s=0;for(var f,h=r.length,U=!1,a=0;0<=--h;){var P=8==B?255&r[h]:(P=h,(f=H[(f=r).charCodeAt(P)])==H1?-1:f);P<0?"-"==r.charAt(h)&&(U=!0):(U=!1,0==a?b[b.t++]=P:a+B>b.DB?(b[b.t-1]|=(P&(1<<b.DB-a)-1)<<a,b[b.t++]=P>>b.DB-a):b[b.t-1]|=P<<a,(a+=B)>=b.DB&&(a-=b.DB))}8==B&&0!=(128&r[0])&&(b.s=-1,0<a&&(b[b.t-1]|=(1<<b.DB-a)-1<<a)),b._57O(),U&&p.ZERO._78O(b,b)},B._57O=function(){for(var r=this.s&this.DM;0<this.t&&this[this.t-1]==r;)--this.t},B._59O=function(r,K){for(var B=this.t-1;0<=B;--B)K[B+r]=this[B];for(B=r-1;0<=B;--B)K[B]=0;K.t=this.t+r,K.s=this.s},B._45O=function(r,K){for(var B=r;B<this.t;++B)K[B-r]=this[B];K.t=B1(this.t-r,0),K.s=this.s},B._44O=function(r,K){for(var B=this,b=r%B.DB,f=B.DB-b,h=(1<<f)-1,U=z1(r/B.DB),a=B.s<<b&B.DM,P=B.t-1;0<=P;--P)K[P+U+1]=B[P]>>f|a,a=(B[P]&h)<<b;for(P=U-1;0<=P;--P)K[P]=0;K[U]=a,K.t=B.t+U+1,K.s=B.s,K._57O()},B._46O=function(r,K){var B=this,b=(K.s=B.s,z1(r/B.DB));if(b>=B.t)K.t=0;else{var f=r%B.DB,h=B.DB-f,U=(1<<f)-1;K[0]=B[b]>>f;for(var a=b+1;a<B.t;++a)K[a-b-1]|=(B[a]&U)<<h,K[a-b]=B[a]>>f;0<f&&(K[B.t-b-1]|=(B.s&U)<<h),K.t=B.t-b,K._57O()}},B._78O=function(r,K){for(var B=this,b=0,f=0,h=b1(r.t,B.t);b<h;)f+=B[b]-r[b],K[b++]=f&B.DM,f>>=B.DB;if(r.t<B.t){for(f-=r.s;b<B.t;)f+=B[b],K[b++]=f&B.DM,f>>=B.DB;f+=B.s}else{for(f+=B.s;b<r.t;)f-=r[b],K[b++]=f&B.DM,f>>=B.DB;f-=r.s}K.s=f<0?-1:0,f<-1?K[b++]=B.DV+f:0<f&&(K[b++]=f),K.t=b,K._57O()},B._47O=function(r,K){var B=this.abs(),b=r.abs(),f=B.t;for(K.t=f+b.t;0<=--f;)K[f]=0;for(f=0;f<b.t;++f)K[f+B.t]=B.am(0,b[f],K,f,0,B.t);K.s=0,K._57O(),this.s!=r.s&&p.ZERO._78O(K,K)},B._48O=function(r){for(var K=this.abs(),B=r.t=2*K.t;0<=--B;)r[B]=0;for(B=0;B<K.t-1;++B){var b=K.am(B,K[B],r,2*B,0,1);(r[B+K.t]+=K.am(B+1,2*K[B],r,2*B+1,b,K.t-B-1))>=K.DV&&(r[B+K.t]-=K.DV,r[B+K.t+1]=1)}0<r.t&&(r[r.t-1]+=K.am(B,K[B],r,2*B,0,1)),r.s=0,r._57O()},B._49O=function(r,K,B){var b=this;if(!((Y=r.abs()).t<=0)){var f=b.abs();if(f.t<Y.t)return K!=H1&&K._58O(0),void(B!=H1&&b._77O(B));B==H1&&(B=q());var h=q(),U=b.s,r=r.s,a=b.DB-k(Y[Y.t-1]),P=(0<a?(Y._44O(a,h),f._44O(a,B)):(Y._77O(h),f._77O(B)),h.t),H=h[P-1];if(0!=H){var Y=H*(1<<b.F1)+(1<P?h[P-2]>>b.F2:0),S=b.FV/Y,_=(1<<b.F1)/Y,e=1<<b.F2,o=B.t,x=o-P,T=K==H1?q():K;for(h._59O(x,T),0<=B._52O(T)&&(B[B.t++]=1,B._78O(T,B)),p.ONE._59O(P,T),T._78O(h,h);h.t<P;)h[h.t++]=0;for(;0<=--x;){var t=B[--o]==H?b.DM:z1(B[o]*S+(B[o-1]+e)*_);if((B[o]+=h.am(0,t,B,x,0,P))<t)for(h._59O(x,T),B._78O(T,B);B[o]<--t;)B._78O(T,B)}K!=H1&&(B._45O(P,K),U!=r&&p.ZERO._78O(K,K)),B.t=P,B._57O(),0<a&&B._46O(a,B),U<0&&p.ZERO._78O(B,B)}}},B._50O=function(){if(this.t<1)return 0;var r=this[0];if(0==(1&r))return 0;var K=3&r;return 0<(K=(K=(K=(K=K*(2-(15&r)*K)&15)*(2-(255&r)*K)&255)*(2-((65535&r)*K&65535))&65535)*(2-r*K%this.DV)%this.DV)?this.DV-K:-K},B._51O=function(){return 0==(0<this.t?1&this[0]:this.s)},B.exp=function(r,K){if(4294967295<r||r<1)return p.ONE;var B,b=q(),f=q(),h=K._73O(this),U=k(r)-1;for(h._77O(b);0<=--U;)K._76O(b,f),0<(r&1<<U)?K._75O(f,h,b):(B=b,b=f,f=B);return K.revert(b)},B.toString=function(r){var K,B=this;if(B.s<0)return"-"+B._85O()[y](r);if(16==r)K=4;else if(8==r)K=3;else if(2==r)K=1;else if(32==r)K=5;else{if(4!=r)return B.toRadix(r);K=2}var b,f=(1<<K)-1,h=!1,U="",a=B.t,P=B.DB-a*B.DB%K;if(0<a--)for(P<B.DB&&0<(b=B[a]>>P)&&(h=!0,U=Y(b));0<=a;)P<K?(b=(B[a]&(1<<P)-1)<<K-P,b|=B[--a]>>(P+=B.DB-K)):(b=B[a]>>(P-=K)&f,P<=0&&(P+=B.DB,--a)),(h=0<b||h)&&(U+=Y(b));return h?U:"0"},B._85O=function(){var r=q();return p.ZERO._78O(this,r),r},B.abs=function(){return this.s<0?this._85O():this},B._52O=function(r){var K=this.s-r.s;if(0!=K)return K;var B=this.t;if(0!=(K=B-r.t))return this.s<0?-K:K;for(;0<=--B;)if(0!=(K=this[B]-r[B]))return K;return 0},B._55O=function(){return this.t<=0?0:this.DB*(this.t-1)+k(this[this.t-1]^this.s&this.DM)},B.mod=function(r){var K=q();return this.abs()._49O(r,H1,K),this.s<0&&0<K._52O(p.ZERO)&&r._78O(K,K),K},B._53O=function(r,K){return K=new(r<256||K._51O()?a:P)(K),this.exp(r,K)},p.ZERO=h(0),p.ONE=h(1),B._86O=function(){var r=this;if(r.s<0){if(1==r.t)return r[0]-r.DV;if(0==r.t)return-1}else{if(1==r.t)return r[0];if(0==r.t)return 0}return(r[1]&(1<<32-r.DB)-1)<<r.DB|r[0]},w1=function(){r=(H=R).split(""),K=v(H),r.forEach(function(r){0<r.length&&K&&(p1+=n1(r))});var K,r=(H=K).substr(0,4),B=H.substr(4,2),b=H.substr(6,2),f=!1,h=a1,U=[],a=Xn.charAt(7);if(t1&&(t1[y]().indexOf("nat")<0||t1[cu][y]().indexOf("nat")<0||!H?Y=H1:(r=(H=new t1(+r,B-1,+b)).setHours(9),t1[cu]()>r?Y=WN[a]:f=!0)),H&&Y&&Y[0]&&Y[N1(.5)]&&h){var P,B=pA(Y[0]);for(P in b=pA(Y[1]))U.push(P);var r=0,H=B[U[0]],Y=b[U[r++]],S=b[U[r++]],_=b[U[r++]],e=b[U[r++]],o=b[U[r++]],x=b[U[r++]],B=B[U[6]],b=b[U[+r]],r=n._27O(h);if(H===Y&&r&&b){var h=Y+S+_+e+o+x,T=!x||x===UK||!UK&&x===(sK+"")[0];if(!T&&x)for(var t,p=0,q=x.length;p<q;p++)x[p]===Yn[7]?t===UK||t[0]===lu[5]&&UK&&0<=UK.indexOf(t.substr(1))?T=!0:t=H1:(t==H1?t=x[p]:t+=x[p],p===q-1&&(t===UK||t[0]===lu[5]&&UK&&0<=UK.indexOf(t.substr(1)))&&(T=!0));h&&r._31O(h,b)&&r._31O(H,B)&&T&&(!o||t1[cu]()<o)&&(f=!0)}}return f||(EN=NY),a};(r=S.prototype)._37O=function(r){return r._53O(this.e,this.n)},r._38O=function(r,K){this.isPublic=!0,typeof r!=mn?(this.n=r,this.e=K):r!=H1&&K!=H1&&0<r.length&&0<K.length&&(this.n=w(r,16),this.e=n1(K,16))};var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M="=",R="ICMJFQ==";function v(r){for(var K,B,b="",f=0,h=0;h<r.length&&r.charAt(h)!=M;++h)(B=V.indexOf(r.charAt(h)))<0||(f=0==f?(b+=Y(B>>2),K=3&B,1):1==f?(b+=Y(K<<2|B>>4),K=15&B,2):2==f?(b=(b+=Y(K))+Y(B>>2),K=3&B,3):(b=(b+=Y(K<<2|B>>4))+Y(15&B),0));return 1==f&&(b+=Y(K<<2)),b}j=(B={})._7A={},_=j._6A={_80O:function(r){C.prototype=this;var K=new C;return r&&K._5A(r),K.hasOwnProperty("_82O")||(K._82O=function(){K.$super._82O.apply(this,arguments)}),(K._82O.prototype=K).$super=this,K},_3A:function(){var r=this._80O();return r._82O.apply(r,arguments),r},_82O:function(){},_5A:function(r){for(var K in r)r.hasOwnProperty(K)&&(this[K]=r[K]);r.hasOwnProperty(y)&&(this.toString=r.toString)},_88O:function(){return this._82O.prototype._80O(this)}},e=j._39O=_._80O({_82O:function(r,K){r=this._84O=r||[],this._65O=null!=K?K:4*r.length},toString:function(r){return(r||o).stringify(this)},_89O:function(r){var K=this._84O,B=r._84O,b=this._65O,f=r._65O;if(this._57O(),b%4)for(var h=0;h<f;h++){var U=B[h>>>2]>>>24-h%4*8&255;K[b+h>>>2]|=U<<24-(b+h)%4*8}else if(65535<B.length)for(h=0;h<f;h+=4)K[b+h>>>2]=B[h>>>2];else K.push.apply(K,B);return this._65O+=f,this},_57O:function(){var r=this._84O,K=this._65O;r[K>>>2]&=4294967295<<32-K%4*8,r.length=N1(K/4)},_88O:function(){var r=_._88O.call(this);return r._84O=this._84O.slice(0),r},_87O:function(r){for(var K=[],B=0;B<r;B+=4)K.push(4294967296*s1|0);return new e._82O(K,r)}}),N=B._2A={},o=N._69O={stringify:function(r){for(var K=r._84O,B=r._65O,b=[],f=0;f<B;f++){var h=K[f>>>2]>>>24-f%4*8&255;b.push((h>>>4).toString(16)),b.push((15&h).toString(16))}return b.join("")},_68O:function(r){for(var K=r.length,B=[],b=0;b<K;b+=2)B[b>>>3]|=n1(r.substr(b,2),16)<<24-b%8*4;return new e._82O(B,K/2)}},x=N._8A={stringify:function(r){for(var K=r._84O,B=r._65O,b=[],f=0;f<B;f++){var h=K[f>>>2]>>>24-f%4*8&255;b.push(U(h))}return b.join("")},_68O:function(r){for(var K=r.length,B=[],b=0;b<K;b++)B[b>>>2]|=(255&r.charCodeAt(b))<<24-b%4*8;return new e._82O(B,K)}},T=N._9A={stringify:function(r){try{return decodeURIComponent(escape(x.stringify(r)))}catch(r){throw new Error("")}},_68O:function(r){return x._68O(unescape(encodeURIComponent(r)))}},t=j._32O=_._80O({_1A:function(){this._83O=new e._82O,this._23O=0},_33O:function(r){typeof r==mn&&(r=T._68O(r)),this._83O._89O(r),this._23O+=r._65O},_25O:function(r){var K=this._83O,B=K._84O,b=K._65O,f=this._79O,h=b/(4*f),U=(h=r?N1(h):B1((0|h)-this._22O,0))*f,r=b1(4*U,b);if(U){for(var a=0;a<U;a+=f)this._20O(B,a);var P=B.splice(0,U);K._65O-=r}return new e._82O(P,r)},_88O:function(){var r=_._88O.call(this);return r._83O=this._83O._88O(),r},_22O:0}),j._66O=t._80O({cfg:_._80O(),_82O:function(r){this.cfg=this.cfg._80O(r),this._1A()},_1A:function(){t._1A.call(this),this._34O()},_81O:function(r){return this._33O(r),this._25O(),this},_72O:function(r){return r&&this._33O(r),this._21O()},_79O:16,_26O:function(B){return function(r,K){return new B._82O(K)._72O(r)}},_19O:function(B){return function(r,K){return new l._71O._82O(B,K)._72O(r)}}});var _,e,o,x,T,t,l,l=B._67O={},z=B;function C(){}var N=z,m=(j=N._7A)._39O,u=j._66O,j=N._67O,D=[],i=[];function Z(r){return 4294967296*(r-(0|r))|0}for(var I=2,L=0;L<64;)!function(r){for(var K=u1(r),B=2;B<=K;B++)if(!(r%B))return;return 1}(I)||(L<8&&(D[L]=Z(L1(I,.5))),i[L]=Z(L1(I,1/3)),L++),I++;var J=[],j=j._41O=u._80O({_34O:function(){this._64O=new m._82O(D.slice(0))},_20O:function(r,K){for(var B=this._64O._84O,b=B[0],f=B[1],h=B[2],U=B[3],a=B[4],P=B[5],H=B[6],Y=B[7],S=0;S<64;S++){S<16?J[S]=0|r[K+S]:(_=J[S-15],e=J[S-2],J[S]=((_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3)+J[S-7]+((e<<15|e>>>17)^(e<<13|e>>>19)^e>>>10)+J[S-16]);var _=b&f^b&h^f&h,e=Y+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&P^~a&H)+i[S]+J[S],Y=H,H=P,P=a,a=U+e|0,U=h,h=f,f=b,b=e+(((b<<30|b>>>2)^(b<<19|b>>>13)^(b<<10|b>>>22))+_)|0}B[0]=B[0]+b|0,B[1]=B[1]+f|0,B[2]=B[2]+h|0,B[3]=B[3]+U|0,B[4]=B[4]+a|0,B[5]=B[5]+P|0,B[6]=B[6]+H|0,B[7]=B[7]+Y|0},_21O:function(){var r=this._83O,K=r._84O,B=8*this._23O,b=8*r._65O;return K[b>>>5]|=128<<24-b%32,K[14+(64+b>>>9<<4)]=z1(B/4294967296),K[15+(64+b>>>9<<4)]=B,r._65O=4*K.length,this._25O(),this._64O},_88O:function(){var r=u._88O.call(this);return r._64O=this._64O._88O(),r}}),F=(N._41O=u._26O(j),N._42O=u._19O(j),new RegExp(""));function G(r){var K=r.substring(0,38);return K&&30==K.indexOf("05000420")?["ss",r.substring(38)]:[]}function g(r,K,B,b){if((K=w(K=(K=K.replace(F,"")).replace(/[ \n]+/g,""),16))._55O()>this.n._55O())return 0;if(0==(K=G(this._37O(K)[y](16).replace(/^1f+00/,""))).length)return!1;for(var f,h,U,a=KA,P=[0,.5,.75,.875,.9375],H=[],Y=[],S=[],_=h1/a,e=(e=K=K[1],r=d._4O.Util._56O(r,"ss"),(U={}).v=r==e,U.t=1,U.s=0,y1=U.v,r),o=U.t=0,x=0;o<P.length;o++)for(var T=o%2==0?0:.5,t=0;t<=a;t++)h=1-P[o],H.push(.5*S1(f=(t+T)*_)*h,.5*P[o]*2-.5,.5*-f1(f)*h),Y.push((t+T)/a,h);for(o=0;o<P.length-1;o++)for(var p=o*(a+1),q=(o+1)*(a+1),t=0;t<a;t++)S.push(p+t,q+t+1,q+t,p+t,p+t+1,q+t+1);return S.forEach(function(r){x+=r}),K==e&&10<x}function W(r){return(r=r.replace(F,K)).replace(/[ \n]+/g,K)}F.compile("[^0-9a-f]","gi"),S._28O=-1,S._29O=-2,r._31O=g,r._63O=g,S._43O=-2;var d,$,X,s=new function(){var P=this;P._5O=function(r,K){return"8"!=r.substring(K+2,K+3)?1:0==(r=n1(r.substring(K+3,K+4)))?-1:0<r&&r<10?r+1:-2},P._13O=function(r,K){var B=P._5O(r,K);return B<1?"":r.substring(K+2,K+2+2*B)},P._12O=function(r,K){return""==(r=P._13O(r,K))?-1:(n1(r.substring(0,1))<8?new p(r,16):new p(r.substring(2),16))._86O()},P._6O=function(r,K){return(r=P._5O(r,K))<0?r:K+2*(r+1)},P._11O=function(r,K){var B=P._6O(r,K),K=P._12O(r,K);return r.substring(B,B+2*K)},P._10O=function(r,K){return P._6O(r,K)+2*P._12O(r,K)},P._7O=function(r,K){for(var B=[],b=P._6O(r,K),f=(B.push(b),P._12O(r,K)),h=b,U=0;;){var a=P._10O(r,h);if(a==H1||2*f<=a-b)break;if(200<=U)break;B.push(a),h=a,U++}return B}},c=(s._90O=U(34),s._91O=U1+U(108),(d=d!=H1&&d?d:{})._4O!=H1&&d._4O||(d._4O={}),d._4O),O=(d._4O.Util=new function(){this._56O=function(r,K){return(new d._4O._3O)._30O(r)},this._4A=function(r,K){return(new d._4O._3O)._36O(r)},this._11A=function(r,K){return(new c._3O)._30O(r)}},d._4O._3O=function(r){var B=this;B._8O=function(r,K){if("ss"==r&&"cj"==K){try{B.md=z._67O._41O._3A()}catch(r){}B._24O=function(r){B.md._81O(r)},B._35O=function(r){r=z._2A._69O._68O(r),B.md._81O(r)},B._60O=function(){return B.md._72O()[y](z._2A._69O)},B._30O=function(r){return B._24O(r),B._60O()},B._36O=function(r){return B._35O(r),B._60O()}}},B._24O=function(r){},B._35O=function(r){},B._60O=function(){},B._30O=function(r){},B._36O=function(r){},B._8O("ss","cj")},k1=function(r){var K=AY[An[7]],B=1,b=!1;if(AN.a!=AY[Wn])return AN.a;if(AN.forEach(function(r){B*=r}),B<r){if(K&&K[1]&&K[0]){var f=K[0],K=(K=K[1]).split(s._90O),f=f.split(s._90O),h=K[3],U=f[3],a=K[7],P=K[11],H=K[15],Y=K[19],S=K[23],K=K[27],f=f[7],a=h+a+P+H+Y+S,_=!S,H=U===h;if(S=S===nK.toString()[0]?S+S+S:S){var e=S&&S.split(hY("firefox")[3]);if(e)for(var o=0;o<e.length;o++){var x=e[o];if(x[0]===Kn[8]&&(x=x.substring(1)),0<=Rn.indexOf(x)){_=!0;break}}}(b=H&&iK()(U,f)&&iK()(a,K)&&_&&(!Y||r<Y))&&0<=P.indexOf(Hu.length)&&(k1[Hu.length]=Hu),b&&0<=P.indexOf(Hu.length+1)&&(k1[Hu.length+1]=Hu),b&&0<=P.indexOf(Hu.length+3)&&(k1[Hu.length+3]=Hu),b&&0<=P.indexOf(kn.length)&&(k1[kn.length]=kn),b&&0<=P.indexOf(Tu[0])&&(k1[Tu[0]]=Tu)}b||(oz.prototype._42=qK)}else b=!0,k1[Hu.length]=k1[Hu.length+1]=k1[Hu.length+3]=k1[kn.length]=k1[Tu[0]]=Hu;return AN.a=b},String.fromCharCode(45),w),Q=/^1f+00/,n=(B={_18O:function(r){return v(r.replace(/\s+/g,""))},_14O:function(r){return r=this._18O(r),this._15O(r)},_15O:function(r){var K;if("2a864886f70d010101"==(r=this._17O(r))._61O)return r=this._16O(r.key),(K=new S)._38O(r.n,r.e),K},_16O:function(r){var K={},B=(r.substr(0,2),s._7O(r,0));return B.length,r.substr(B[0],2),K.n=s._11O(r,B[0]),r.substr(B[1],2),K.e=s._11O(r,B[1]),K},_17O:function(r){var K={},B=(K._40O=H1,s._7O(r,0)),b=(B.length,B[0]);return r.substr(b,2),(b=s._7O(r,b)).length,r.substr(b[0],2),K._61O=s._11O(r,b[0]),"06"==r.substr(b[1],2)?K._40O=s._11O(r,b[1]):"30"==r.substr(b[1],2)&&(K._40O={},K._40O.p=s._70O(r,b[1],[0],"02"),K._40O.q=s._70O(r,b[1],[1],"02"),K._40O.g=s._70O(r,b[1],[2],"02")),r.substr(B[1],2),K.key=s._11O(r,B[1]).substr(2),K}})._17O?B:H1,E=n._27O=function(r,K,B){return n._14O(r)},r1=(iK=function(){return function(r,K){if(r&&K){if(K=W(K),K=O(K,L1(2,4)),!this||!this.n||K._55O()>this.n._55O())return 0;if(0==(K=G(this._37O(K)[y](L1(2,4)).replace(Q,""))).length)return!1;var B=K[0];return K[1]==d._4O.Util._56O(r,B)}}.bind(E(a1))},_n.length-Sn.length);if(0<r1)for(var K1=0;K1<r1;K1++)$=c.Util,X=W;q1=function(r,K){K=X(K);var B=E(NA),b=Su.length,f=2*b,K=O(K,L1(b,f)),h=!0;if(h=B&&(U=B[Yu[0]])&&K._55O()<=U._55O()?!1:h)return 0;var U=G(B._37O(K)[y](L1(b,f)).replace(Q,""));return 0!=U.length&&(h=U[0],U[1]==$._11A(r,h))}}(V),qY(Y1,{load:(y$={},function(r,K,B){var b,f=y$[r],h=B?"c_"+(B.sync?"1":"0")+"_"+(B.post?"1":"0")+"_"+(B.responseType||"H")+"_"+(B.mimeType||"H")+"_"+(B.data?JSON.stringify(B.data):"H"):"";f&&(b=f[h])?b.push(K):(y$[r]||(f=y$[r]={count:0}),b=f[h]=[K],f.count++,Y1.xhrLoad(r,function(K){delete f[h],f.count--,f.count||delete y$[r],b.forEach(function(r){r(K)})},B))}),asyncEach:function(b,K,f){"function"!=typeof f&&(f=Function.prototype);var h=new Array(b.length),U=0,a=!1;b.forEach(function(r,B){K(r,function(r,K){if(!a)return r?(a=!0,f(null)):(h[B]=K,++U===b.length?f(h):void 0)})})},xhrLoad:function(r,B,b){var f=!1,h=(YY(r)||(f=!0,r=[r]),(b=b||{}).sync),U=null,K=b.method||"GET";if(b.post&&(K="POST"),b.method=K,Y1.asyncEach(r,function(r,K){var B;(r=Y1.beforeLoadURL(r)).data?K(null,r.data):(b.url=encodeURI(r),(B=new $O).onload=function(r){200===this.status||0===this.status?K(null,B.getResponseText()):K(!0)},B.onerror=function(r){K(!0)},B.send(b))},function(r){var K="function"==typeof B;(K||h)&&(U=f&&r?r[0]:r,K&&B(U))}),h)return U}}),A.setPrototypeOf||function(r,K){return r.__proto__=K,r}),WA=A.getPrototypeOf||function(r){return r.__proto__},$A=A.freeze,XA=(A.isFrozen,Jt.create=function(r,K){return function r(K,B,b,f){var h=f(b),U=new Jt(K,B,b,h);if(!h){for(var a=U.children,P=U.childMap,H=A.keys(b),Y=0,S=H.length;Y<S;++Y){var _=r(U,_=H[Y],b[_],f);a.push(_),P[_.name]=_}U.children=$A(a),U.childMap=$A(P)}return $A(U),U}(P1,P1,r,K)},Jt.prototype.forEach=function(r,K){for(var B=this.children,b=0,f=B.length;b<f;++b)r(B[b],K)},Jt),$A=A.freeze,cA=1,OA={main:{mask:1,priority:Y1.cameraPriority.main,clearDepth:!1,ignore:!1},top:{mask:2,priority:Y1.cameraPriority.top,ignore:!1}},QA="main",EA=OA[QA].mask,rP=function(r,K,B,b){var f;if(r=r||0,B&&K in B)f=B[K].mask;else if(K in OA)f=OA[K].mask,!b&&B&&(B[K]=v9(OA[K]));else{if(b)return r;var h,b=1;if(32<=(b=B?(h=A.keys(B),fP.forEach(function(r){h.indexOf(r)<0&&h.push(r)}),h.length):hP))throw new Error("Only 31 render layer can be defined.");b={mask:1<<b,priority:OA[QA].priority},B?B[K]=b:(hP++,OA[K]=b,f=OA[K].mask,fP=bP(A.keys(OA)),hP=fP.length,cA++)}return r|f},KP=function(r,K,B){var b=0;if("string"==typeof r)b=rP(b,r,K,B);else for(var f=0,h=r.length;f<h;++f)b=rP(b,r[f],K,B);return b},BP=function(r,K){return r&&K&&r&K},bP=function(r){return r.sort(function(r,K){return OA[r].priority-OA[K].priority})},fP=bP(A.keys(OA)),hP=fP.length,$=(qY(Y1,{setRenderLayerInfo:function(r,K){if(rP(0,r),K){for(var B in K)OA[r][B]=K[B];K.priority&&(fP=bP(A.keys(OA)))}},getRenderLayerInfo:function(r){return OA[r]}},!0),M.List=function(){this._as=[];var r,K,B=arguments.length;if(1===B){var b=arguments[0];if(SY(b)&&(b=b._as),YY(b))for(K=b.length,r=0;r<K;r++)this._as.push(b[r]);else b!=H1&&this._as.push(b)}else if(1<B)for(r=0;r<B;r++)this._as.push(arguments[r])}),UP=(Cs("List",A,{forEach:function(r,K){this.each(r,K)},push:function(){for(var r=0;r<arguments.length;r++)this.add(arguments[r])},pop:function(){return this._as.pop()},shift:function(){return this._as.shift()},unshift:function(){return this._as.unshift.apply(this._as,arguments)},size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(r,K){return K===P1?this._as.push(r):this._as.splice(K,0,r)},addAll:function(r){SY(r)&&(r=r._as),YY(r)?tY(this._as,r):this._as.push(r)},get:function(r){return this._as[r]},slice:function(r,K){return new $(this._as.slice(r,K))},remove:function(r){return 0<=(r=this._as.indexOf(r))&&r<this._as.length&&this.removeAt(r),r},removeAt:function(r){return this._as.splice(r,1)[0]},set:function(r,K){return this._as[r]=K},clear:function(){return this._as.splice(0,this._as.length)},contains:function(r){return 0<=this._as.indexOf(r)},indexOf:function(r){return this._as.indexOf(r)},each:function(r,K){for(var B=0,b=this._as.length;B<b;B++){var f=this._as[B];K?r.call(K,f,B,this):r(f,B,this)}},reverseEach:function(r,K){for(var B=this._as.length-1;0<=B;B--){var b=this._as[B];K?r.call(K,b):r(b)}},getArray:function(){return this._as},toArray:function(r,K){if(r){for(var B,b=[],f=0,h=this._as.length;f<h;f++)B=this._as[f],K?r.call(K,B)&&b.push(B):r(B)&&b.push(B);return b}return this._as.concat()},toList:function(r,K){if(r){for(var B,b=new $,f=0,h=this._as.length;f<h;f++)B=this._as[f],K?r.call(K,B)&&b.add(B):r(B)&&b.add(B);return b}return new $(this)},reverse:function(){this._as.reverse()},sort:function(r){return this._as.sort(r||w9),this},toString:function(){return this._as.toString()}}),A.defineProperties($.prototype,{length:{get:function(){return this._as.length},set:function(r){this._as.length=r}}}),new $),aP=(qY(UP,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:lK,each:lK,reverseEach:lK,toArray:function(){return[]},toList:function(){return new $},add:CK,addAll:CK,set:CK,remove:CK,removeAt:CK,clear:CK}),M.Notifier=function(){this._f=0}),PP=(Cs("Notifier",A,{contains:function(r,K){if(this._ls)for(var B,b=0,f=this._ls.size();b<f;b++)if(r===(B=this._ls.get(b)).l&&K===B.s)return!0;return!1},add:function(r,K,B){r={l:r,s:K,a:B},this._ls||(this._ls=new $),this._f?(this._as||(this._as=new $),this._as.add(r)):r.a?this._ls.add(r,0):this._ls.add(r)},remove:function(r,K){this._ls&&(this._f?(this._rs||(this._rs=new $),this._rs.add({l:r,s:K})):this._remove(r,K))},_remove:function(r,K){for(var B,b=this._ls,f=0,h=b.size();f<h;f++)if((B=b.get(f)).l===r&&B.s===K)return void b.removeAt(f)},fire:function(r){var K=this,B=K._ls;if(K._b=1e4,B){++K._f;try{for(var b,f=0,h=B.size();f<h;f++)(b=B.get(f)).s?b.l.call(b.s,r):b.l(r)}catch(r){R1(function(){throw r})}finally{if(--K._f)return;if(K._rs){for(h=K._rs.size(),f=0;f<h;f++)b=K._rs.get(f),K._remove(b.l,b.s);delete K._rs}if(K._as){for(h=K._as.size(),f=0;f<h;f++)(b=K._as.get(f)).a?B.add(b,0):B.add(b);delete K._as}}}}}),M.Data=function(){this._id=q9()}),HP=(Cs("Data",A,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","styleMap","layer","adjustChildrenToTop","dataBindings"],ms_dm:1,ms_attr:1,_icon:H1,_parent:H1,_children:UP,_childMap:H1,_styleMap:H1,_layer:"0",_renderLayer:QA,_renderLayerMask:EA,_adjustChildrenToTop:!1,getRenderLayerMask:function(){return this._renderLayerMask||EA},getRenderLayer:function(){return this._renderLayer||QA},setRenderLayer:function(r){var K=rP(0,r,null,!0),K=(this._renderLayerMask=K,this._renderLayer);this._renderLayer=r,this.fp("renderLayer",K,this._renderLayer)},testRenderLayer:function(r){return OA[r]&&BP(this._renderLayerMask,OA[r].mask)},getUIClass:function(){return H1},get3dUIClass:function(){return H1},beginTransaction:function(){this._dataModel&&this._dataModel.beginTransaction()},endTransaction:function(){this._dataModel&&this._dataModel.endTransaction()},s:function(r,K){if(2===arguments.length)this.setStyle(r,K);else{if(!PY(r))return this.getStyle(r);for(var B in r)this.setStyle(B,r[B])}return this},fp:function(r,K,B,b,f){return this.firePropertyChange(r,K,B,b,f)},firePropertyChange:function(r,K,B,b,f){if(b){if(b(K,B))return!1}else if(K===B)return!1;return(b=f||{}).property=r,b.oldValue=K,b.newValue=B,(b.data=this)._dataModel&&this._dataModel.handleDataPropertyChange(b),this.onPropertyChanged(b),!0},onPropertyChanged:function(r){var K,B,b=this._parent,f=r.property;eY(b)&&(B="s:ingroup"===f,((K=this.s(zu))&&TP[f]||f===B)&&b._81I(),(K||B)&&b.fp("childChange",!0,!1)),xY(b)&&(TP[f]||"elevation"===f||pP[f]||"scaleTall"===f||"tall"===f)&&b.updateFromChildren(),"s:alwaysOnTop"!==f&&"s:shape3d.alwaysOnTop"!==f||(r.newValue?this.setRenderLayer("top"):this.setRenderLayer(P1))},_21I:function(r){if(r&&this._dataModel)throw"Remove data from dataModel before adding";this._dataModel=r},removeFromDataModel:function(){this._dataModel?this._dataModel.remove(this):this.setParent(null)},clearChildrenFromDataModel:function(r){for(var K=0,B=this._children.toArray(),b=B.length;K<b;K++)B[K].removeFromDataModel()},getId:function(){return this._id},setId:function(r){this._id=r},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(r,K){return this._children.toList(r,K)},eachChild:function(r,K){this._children.each(r,K)},addChild:function(r,K){var B=this;r!==B&&(B._children===UP&&(B._children=new $,B._childMap={}),0<=K||(K=B._children.size()),B._childMap[r._id]||B.isDescendantOf(r)||(r._parent&&r._parent.removeChild(r),(K<0||K>B._children.size())&&(K=B._children.size()),B._children.add(r,K),(B._childMap[r._id]=r).setParent(B),B.onChildAdded(r,K),B.fp(wn,H1,r)))},onChildAdded:function(r,K){},removeChild:function(r){var K;this._childMap&&this._childMap[r._id]&&(K=this._children.remove(r),delete this._childMap[r._id],this.fp(wn,r,H1),r.setParent(H1,K),this.onChildRemoved(r,K))},onChildRemoved:function(r,K){},getChildAt:function(r){return this._children.get(r)},clearChildren:function(){if(!this._children.isEmpty())for(var r=0,K=this._children.toArray(),B=K.length;r<B;r++)this.removeChild(K[r])},getParent:function(){return this._parent},setParent:function(r,K){var B,b,f=this;f._73I||f._parent===r||f===r||r&&r.isDescendantOf(f)||(B=f._parent,f._parent=r,f._73I=1,B?(K==H1&&(K=B.getChildren().indexOf(f)),B.removeChild(f)):f._dataModel&&K==H1&&(K=f._dataModel.getRoots().indexOf(f)),r&&(r.addChild(f),b=r.getChildren().indexOf(f)),delete f._73I,f.fp("parent",B,r,P1,{oldIndex:K,newIndex:b}),f.onParentChanged(B,r))},onParentChanged:function(r,K){},hasChildren:function(){return 0<this._children.size()},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(r){return!!r&&(this.isDescendantOf(r)||r.isDescendantOf(this))},isParentOf:function(r){return!(!r||!this._childMap||!this._childMap[r._id])},isDescendantOf:function(r){if(!r||r.isEmpty())return!1;for(var K=this._parent;K;){if(r===K)return!0;K=K._parent}return!1},getOwnStyle:function(r){var K=this._styleMap;return K?K[r]:P1},getStyle:function(r){var K=this._styleMap;return K&&(K=K[r])!==P1?K:T1[r]},setStyle:function(r,K){this._styleMap||(this._styleMap={});var B=this._styleMap[r];K===P1?delete this._styleMap[r]:this._styleMap[r]=K,this.fp("s:"+r,B,K)&&this.onStyleChanged(r,B,K)},onStyleChanged:function(r,K,B){},iv:function(r){this.invalidate(r)},invalidate:function(r){this.fp(r||"*",!1,!0)},toString:function(){return this._displayName||this._name||this._tag||this._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(r,K){var B=this.s(Vu);this.beginTransaction(),B||this.s(Vu,B={}),K?B[r]=K:delete B[r],this.fp(Vu,H1,B),this.endTransaction()},removeStyleIcon:function(r){var K,B=this.s(Vu);return B&&(K=B[r],delete B[r],this.fp(Vu,H1,B)),K},_calcAnchorMatrix3d:function(){},appendAnchorMatrix3d:function(r){var K,B,b;(this.hasOwnProperty("_anchor")||this.hasOwnProperty("_anchorElevation"))&&(K=(b=this.getAnchor3d()).x-.5,B=b.y-.5,b=b.z-.5,k6(r,[-K,-B,-b]))},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,renderLayer:1,tag:1,adjustChildrenToTop:1,dataBindings:1}},getSerializableStyles:function(){var r,K={};for(r in this._styleMap)K[r]=1;return K},getCurrentPrefix:function(){return this._interactPrefix||nA},ca:function(r,K){return r=this.getCurrentPrefix()+r,2===arguments.length?this.a(r,K):this.a(r)}}),M.DataModel=function(){var b=this,f=(b._isDeserializing=0,b._datas=new $,b._dataMap={},b._roots=new $,b._rootMap={},b._fsDataMap={},b._78O={},b._reflectorMap={},b._36I=new aP,b._35I=new aP,b._serializeNotifier=new aP,b._selectionModel=new YP(b),b._29Q=[]),h=b._scheduleCallback=function(){for(var r=Date.now(),K=0;K<f.length;K++){var B=f[K];B.enabled&&r-B.lastTime>B.interval&&(B.beforeAction&&B.beforeAction(),B.action&&b.each(function(r){B.action(r)}),B.afterAction&&B.afterAction(),B.lastTime=r)}f.length&&(b._30Q=V.requestAnimationFrame(h))}}),YP=(Cs("DataModel",A,{ms_fire:1,ms_attr:1,ms_ac:["layers","name","autoAdjustIndex","hierarchicalRendering","background","envmapType","envmap","postProcessingData","init"],_name:P1,_autoAdjustIndex:!0,_hierarchicalRendering:!1,_background:P1,_init:P1,_envmap:P1,_envmapType:P1,_postProcessingData:P1,sm:function(){return this.getSelectionModel()},mm:function(r,K,B){this.addDataModelChangeListener(r,K,B)},umm:function(r,K){this.removeDataModelChangeListener(r,K)},md:function(r,K,B){this.addDataPropertyChangeListener(r,K,B)},umd:function(r,K){this.removeDataPropertyChangeListener(r,K)},mh:function(r,K,B){this.addHierarchyChangeListener(r,K,B)},umh:function(r,K){this.removeHierarchyChangeListener(r,K)},getAttrObject:function(){return this._attrObject},setAttrObject:function(r){return this._attrObject=r},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getFullscreenDatas:function(){return this._fsDataMap},getReflectors:function(){return this._reflectorMap},getDataById:function(r){return this._dataMap[r]},removeDataById:function(r){this.remove(this.getDataById(r))},toDatas:function(r,K){return this._datas.toList(r,K)},each:function(r,K){this._datas.each(r,K)},getDataByTag:function(r){return this._78O[r]},getTagMap:function(){return this._78O},removeDataByTag:function(r){this.remove(this.getDataByTag(r))},add:function(r,K,B){var b=this,f=r._id,h=r._tag,U=b._roots;if(b._dataMap[f])throw"'"+f+"' already exists";h!=H1&&(b._78O[h]=r),b._dataMap[f]=r,0<=B?b._datas.add(r,B):b._datas.add(r),r._parent||(b._rootMap[f]=r,0<=K?U.add(r,K):U.add(r)),r.s("fullscreen")!==P1&&(b._fsDataMap[f]=r),r.s("shape3d.reflector")&&(b._reflectorMap[f]=r),r._21I(b),b.onAdded(r),b._36I.fire({kind:"add",data:r,rootsIndex:K,datasIndex:B})},onAdded:function(r){},remove:function(r,K){var B,b,f,h,U,a,P;r&&(B=this,b=r._id,f=K&&K.keepStructure,a=K&&K.keepChildren,h=r.getTag(),r._dataModel===B&&((U=r instanceof RO)&&Y1.setIsolating(!0),this.beginTransaction(),f?B._removingData||(B._removingData=r):B.prepareRemove(r),a||r.toChildren().each(function(r){B.remove(r,K)},B),f?B._removingData===r&&(r._parent&&r._parent.removeChild(r),delete B._removingData):r._parent&&r._parent.removeChild(r),a=B._datas.remove(r),delete B._dataMap[b],h!=H1&&delete B._78O[h],B._rootMap[b]&&(delete B._rootMap[b],P=B._roots.remove(r)),B._fsDataMap[b]&&delete B._fsDataMap[b],B._reflectorMap[b]&&delete B._reflectorMap[b],r._21I(H1),B.onRemoved(r),B._36I.fire({kind:yu,data:r,rootsIndex:P,datasIndex:a}),this.endTransaction(),U&&Y1.setIsolating(!1)))},onRemoved:function(r){},prepareRemove:function(r){},clear:function(){var r,K=this;K._datas.size()&&(r=K._historyManager?this.toJSON():P1,K._datas.toArray().forEach(function(r){r._21I(H1)}),K._datas.clear(),K._dataMap={},K._roots.clear(),K._rootMap={},K._fsDataMap={},K._reflectorMap={},K._78O={},K._36I.fire({kind:ku,json:r}))},contains:function(r){return r&&r._dataModel===this},handleDataPropertyChange:function(r){var K,B,b,f,h=r.data,U=r.property;"parent"===U?(b=h._id,B=this._rootMap,K=this._roots,h._parent?B[b]&&(delete B[b],K.remove(h)):B[b]||(B[b]=h,K.add(h))):"tag"===U?(B=r.oldValue,K=r.newValue,f=this._78O,B!=H1&&delete f[B],K!=H1&&(f[K]=h)):"s:fullscreen"===U?(b=h._id,B=this._fsDataMap,r.oldValue!=H1&&delete B[b],r.newValue!=H1&&(B[b]=h)):"s:shape3d.reflector"===U&&(b=h._id,f=this._reflectorMap,r.oldValue&&delete f[b],r.newValue&&(f[b]=h)),this.onDataPropertyChanged(h,r),this._35I.fire(r)},onDataPropertyChanged:function(r,K){},addDataModelChangeListener:function(r,K,B){this._36I.add(r,K,B)},removeDataModelChangeListener:function(r,K){this._36I.remove(r,K)},addSerializeListener:function(r,K,B){this._serializeNotifier.add(r,K,B)},removeSerializeListener:function(r,K){this._serializeNotifier.remove(r,K)},fireSerializeEvent:function(r){this._serializeNotifier.fire(r)},addDataPropertyChangeListener:function(r,K,B){this._35I.add(r,K,B)},removeDataPropertyChangeListener:function(r,K){this._35I.remove(r,K)},_38I:function(r,K,B){this._37I&&this._37I.fire({data:r,oldIndex:K,newIndex:B})},addHierarchyChangeListener:function(r,K,B){this._37I||(this._37I=new aP),this._37I.add(r,K,B)},removeHierarchyChangeListener:function(r,K){this._37I.remove(r,K)},getSiblings:function(r){return(r=r._parent)?r._children:this._roots},eachByHierarchical:function(r,K,B){if(K)return this._eachByHierarchical(r,K,B);for(var b=0,f=this._roots,h=f.size();b<h;b++)if(!1===this._eachByHierarchical(r,f.get(b),B))return!1;return!0},_eachByHierarchical:function(r,K,B){if(B){if(!1===r.call(B,K))return!1}else if(!1===r(K))return!1;for(var b=K.size(),f=0;f<b;f++)if(!1===this._eachByHierarchical(r,K.getChildAt(f),B))return!1;return!0},reverseEachByHierarchical:function(r,K,B){if(K)return this._reverseEachByHierarchical(r,K,B);for(var b=this._roots,f=b.size()-1;0<=f;f--)if(!1===this._reverseEachByHierarchical(r,b.get(f),B))return!1;return!0},_reverseEachByHierarchical:function(r,K,B){for(var b=K.size()-1;0<=b;b--)if(!1===this._reverseEachByHierarchical(r,K.getChildAt(b),B))return!1;if(B){if(!1===r.call(B,K))return!1}else if(!1===r(K))return!1;return!0},eachByDepthFirst:function(r,K,B){if(K)return this._11I(r,K,B);for(var b=0,f=this._roots,h=f.size();b<h;b++)if(!1===this._11I(r,f.get(b),B))return!1;return!0},_11I:function(r,K,B){for(var b=K.size(),f=0;f<b;f++)if(!1===this._11I(r,K.getChildAt(f),B))return!1;if(B){if(!1===r.call(B,K))return!1}else if(!1===r(K))return!1;return!0},eachByBreadthFirst:function(r,K,B){var b=new $;for(K?b.add(K):this._roots.each(b.add,b);0<b.size();)if((K=b.removeAt(0)).eachChild(b.add,b),B){if(!1===r.call(B,K))return!1}else if(!1===r(K))return!1;return!0},moveTo:function(r,K){var B=this.getSiblings(r),b=B.indexOf(r);b===K||b<0||0<=K&&K<=B.size()&&(B.remove(r),K>B.size()&&K--,B.add(r,K),this._38I(r,b,K))},moveUp:function(r){this.moveTo(r,this.getSiblings(r).indexOf(r)-1)},moveDown:function(r){this.moveTo(r,this.getSiblings(r).indexOf(r)+1)},moveToTop:function(r){this.moveTo(r,0)},moveToBottom:function(r){this.moveTo(r,this.getSiblings(r).size())},moveSelectionUp:function(r){this.beginTransaction(),r=r||this.sm();var K=new $;qs(r,K,this._roots),K.each(this.moveUp,this),this.endTransaction()},moveSelectionDown:function(r){this.beginTransaction(),r=r||this.sm();var K=new $;ys(r,K,this._roots),K.each(this.moveDown,this),this.endTransaction()},moveSelectionToTop:function(r){this.beginTransaction(),r=r||this.sm();var K=new $;ps(r,K,this._roots),K.each(this.moveToTop,this),this.endTransaction()},moveSelectionToBottom:function(r){this.beginTransaction(),r=r||this.sm();var K=new $;ts(r,K,this._roots),K.each(this.moveToBottom,this),this.endTransaction()},moveToIndex:function(r,K,B){var b=this.getDatas();(B=null==B?b.indexOf(r):B)===K||B<0||0<=K&&K<=b.size()&&(b.remove(r),K>b.size()&&K--,b.add(r,K),this._76I(r,B,K))},bringForward:function(r){this.moveToIndex(r,this.getDatas().indexOf(r)+1)},bringToFront:function(r){this.moveToIndex(r,this.size())},sendBackward:function(r){this.moveToIndex(r,this.getDatas().indexOf(r)-1)},sendToBack:function(r){this.moveToIndex(r,0)},bringSelectionForward:function(r){this.beginTransaction(),r=r||this.sm();for(var K=new $,B=this.getDatas(),b=!1,f=0;f<B.size();f++){var h=B.get(B.size()-1-f);r.contains(h)?b&&K.add(h):b=!0}K.each(this.bringForward,this),this.endTransaction()},bringSelectionToFront:function(r){this.beginTransaction(),r=r||this.sm();for(var K=new $,B=this.getDatas(),b=0;b<B.size();b++){var f=B.get(b);r.contains(f)&&K.add(f)}K.each(this.bringToFront,this),this.endTransaction()},sendSelectionBackward:function(r){this.beginTransaction(),r=r||this.sm();for(var K=new $,B=this.getDatas(),b=!1,f=0;f<B.size();f++){var h=B.get(f);r.contains(h)?b&&K.add(h):b=!0}K.each(this.sendBackward,this),this.endTransaction()},sendSelectionToBack:function(r){this.beginTransaction(),r=r||this.sm();for(var K=new $,B=this.getDatas(),b=0;b<B.size();b++){var f=B.get(B.size()-1-b);r.contains(f)&&K.add(f)}K.each(this.sendToBack,this),this.endTransaction()},addScheduleTask:function(r){this.removeScheduleTask(r),r.enabled==H1&&(r.enabled=!0),r.interval==H1&&(r.interval=10),r.lastTime=Date.now(),this._29Q.push(r),this._30Q==H1&&(this._30Q=V.requestAnimationFrame(this._scheduleCallback))},removeScheduleTask:function(r){var K=this._29Q;0<=(r=K.indexOf(r))&&K.splice(r,1),K.length||this._30Q==H1||(V.cancelAnimationFrame(this._30Q),delete this._30Q)},getHistoryManager:function(){return this._historyManager},enableHistoryManager:function(r){this._historyManager||new M.HistoryManager(this),null!=r&&this._historyManager.setMaxHistoryCount(r),this._historyManager.setDisabled(!1)},disableHistoryManager:function(){this._historyManager&&this._historyManager.setDisabled(!0)},clearHistoryManager:function(){this._historyManager&&this._historyManager.clear()},undo:function(r){this._historyManager&&this._historyManager.undo(r)},redo:function(r){this._historyManager&&this._historyManager.redo(r)},beginTransaction:function(){this._historyManager&&this._historyManager.beginTransaction()},endTransaction:function(){this._historyManager&&this._historyManager.endTransaction()},addHistory:function(r){this._historyManager&&this._historyManager.addHistory(r)},onHistoryManagerChanged:function(){},isDeserializing:function(){return 0<this._isDeserializing},setDeserializing:function(r){r?this._isDeserializing++:this._isDeserializing--},isCubicEnvmap:function(){return!1},setCubicEnvmap:function(r){},setEnvmap:function(r){var K=this._envmap;K===(this._envmap=r)&&YY(K)&&YY(r)&&(K=[]),this.fp("envmap",K,r)}}),M.SelectionModel=function(r){this._68O=O1,this._map={},this._73O=new $,this._74I=new aP,this._21I(r)}),SP=(Cs("SelectionModel",A,{ms_fire:1,ms_dm:1,ms:function(r,K,B){this.addSelectionChangeListener(r,K,B)},ums:function(r,K){this.removeSelectionChangeListener(r,K)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===c1},co:function(r){return this._map[r._id]!=H1},ss:function(r){this.setSelection(r)},as:function(r){this.appendSelection(r)},rs:function(r){this.removeSelection(r)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(r){var K;this._68O===r||r!==Yu&&r!==c1&&r!==O1||(this.cs(),K=this._68O,this._68O=r,this.fp("selectionMode",K,r))},_21I:function(r){var K=this._dataModel;K!==r&&(K&&(this.cs(),K.umm(this.handleDataModelChange,this)),(this._dataModel=r).mm(this.handleDataModelChange,this,!0),this.fp(Nn,K,r))},dispose:function(){this.cs(),this._dataModel.umm(this.handleDataModelChange,this)},handleDataModelChange:function(r){var K;r.kind===yu?(K=r.data,this.co(K)&&(this._73O.remove(K),delete this._map[K._id],this._75I(yu,new $(K)))):r.kind===ku&&this.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(r){var K;this._filterFunc!==r&&(this.cs(),K=this._filterFunc,this._filterFunc=r,this.fp("filterFunc",K,this._filterFunc))},_75I:function(r,K,B,b){B&&(this._73O.each(function(r){b[r._id]?B.remove(r):B.add(r)}),K=B.toList()),this._74I.fire({kind:r,datas:new $(K)})},addSelectionChangeListener:function(r,K,B){this._74I.add(r,K,B)},removeSelectionChangeListener:function(r,K){this._74I.remove(r,K)},_97O:function(r,K){for(var B,b=0,f=new $(r);b<f.size();b++)B=f.get(b),(this._filterFunc&&!this._filterFunc(B)||K&&this.co(B)||!K&&!this.co(B)||!this._dataModel.contains(B))&&(f.removeAt(b),b--);return f},appendSelection:function(r){var K,B,b,f=this;f._68O!==Yu&&(K=f._73O,(r=f._97O(r,!0)).isEmpty()||(f.sg()&&(B=new $(K),b=f._map,K.clear(),f._map={},r=new $(r.get(r.size()-1))),r.each(function(r){K.add(r),f._map[r._id]=r}),f._75I("append",r,B,b)))},removeSelection:function(r){var K=this._97O(r),B=0,b=K.size();if(0!==b){for(;B<b;B++){var f=K.get(B);this._73O.remove(f),delete this._map[f._id]}this._75I(yu,K)}},toSelection:function(r,K){return this._73O.toList(r,K)},getSelection:function(){return this._73O},each:function(r,K){this._73O.each(r,K)},setSelection:function(r){var K,B,b=this,f=b._73O;b._68O===Yu||f.isEmpty()&&!r||1===f.size()&&b.ld()===r||(K=new $(f),B=b._map,f.clear(),b._map={},r=b._97O(r,!0),(r=b.sg()&&1<r.size()?new $(r.get(r.size()-1)):r).each(function(r){f.add(r),b._map[r._id]=r}),b._75I("set",H1,K,B))},clearSelection:function(){var r,K=this._73O;0<K.size()&&(r=K.toList(),K.clear(),this._map={},this._75I(ku,r))},selectAll:function(){var r=this;if(r._68O!==Yu){var K,B=r._dataModel.toDatas();if(r._filterFunc)for(a=0;a<B.size();a++)K=B.get(a),r._filterFunc(K)||(B.removeAt(a),a--);for(var b=r._73O,f=new $(b),h=r._map,U=(b.clear(),r._map={},(B=r.sg()&&1<B.size()?new $(B.get(B.size()-1)):B).size()),a=0;a<U;a++)K=B.get(a),b.add(K),r._map[K._id]=K;r._75I("all",H1,f,h)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(r){return this._map[r._id]!=H1},getLastData:function(){var r=this._73O;return 0<r.size()?r.get(r.size()-1):H1},getFirstData:function(){var r=this._73O;return 0<r.size()?r.get(0):H1},isSelectable:function(r){return!(!r||this._68O===Yu)&&(!this._filterFunc||this._filterFunc(r))},getTopSelection:function(){var B=this,b=new $;return B._73O.each(function(r){for(var K=r.getParent();K;){if(B.contains(K)){r=H1;break}K=K.parent}r&&b.add(r)}),b}}),function(r,K,B,b){var f=this,r=(K||(K=$1?5:3,b=B=20),{x:0,y:K,width:B,height:b});if(B)for(var h=0;h<B;h++)if(3===B)b=20;else for(var U=0;U<b;U++)f=V||B;m9(r,{x:F,y:2*F})&&(K=vu[0]+Bu[0]+ku[1]+pn.length,iN.eye=[f[K],f[r=Wu[0]+tn[0]+ku[1]+Gu.length]],f[K]=hY.eye,f[r]=hY[In])}(),function(r,K){var B;return(B=oY(K)&&(r=r.getDataUI(K))&&r._88I?r._88I.rect:B)||K.getRect()});qY(Y1,{edgeGroupAgentFunc:H1,graphViewAutoScrollZone:16,graphViewZoomable:!0,graphViewResettable:!1,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:N.rectSelectBorder,graphViewRectSelectBackground:KK,graphViewEditPointSize:$1?17:7,graphViewEditPointBorderColor:N.editPointBorder,graphViewEditPointBackground:N.editPointBackground,setEdgeType:function(r,K,B){FK[r]=K,dK[r]=B},getEdgeType:function(r){return FK[r]},getEdgeTypeMap:function(){return FK},getNodeRect:SP},!0);(K={"layout.h":P1,"layout.v":P1,"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":P1,"2d.attachable":!1,"2d.hostable":!1,interactive:!1,preventDefaultWhenInteractive:!0,disableDoubleClick:!1,"image.stretch":"fill",icons:P1,ingroup:!0,"body.color":P1,"2d.gray":!1,fullscreen:P1,"fullscreen.gap":2,"fullscreen.lock":!1,opacity:P1,pixelPerfect:!0,keepAspectRatio:!1,"attach.points":null,"attach.style":null,"attach.close.threshold":16,"vector.layoutable":!1,"clip.direction":"top","clip.percentage":P1,"clip.host":!1,"host.clip.padding":0,"select.color":Ms,"select.width":1,"select.padding":2,"select.type":R,"shadow.interactable":!0,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,shadow2:!1,"shadow2.color":Ms,"shadow2.blur":6,"shadow2.offset.x":3,"shadow2.offset.y":3,"border.color":P1,"border.width":2,"border.padding":2,"border.type":R,label:P1,"label.font":P1,"label.color":K9,"label.background":P1,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":P1,"label.max":P1,"label.opacity":P1,"label.scale":1,"label.align":P1,"label.selectable":!0,"label.decoration":P1,label2:P1,"label2.font":P1,"label2.color":K9,"label2.background":P1,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":P1,"label2.max":P1,"label2.opacity":P1,"label2.scale":1,"label2.align":P1,"label2.selectable":!0,"label2.decoration":P1,note:P1,"note.expanded":!0,"note.font":P1,"note.color":A1,"note.background":Ms,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":P1,"note.toggleable":!0,"note.border.width":1,"note.border.color":P1,"note.opacity":P1,"note.scale":1,"note.align":P1,note2:P1,"note2.expanded":!0,"note2.font":P1,"note2.color":A1,"note2.background":Ms,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":P1,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":P1,"note2.opacity":P1,"note2.scale":1,"note2.align":P1,"group.type":P1,"group.image":P1,"group.image.stretch":"fill","group.repeat.image":P1,"group.repeat.image.stretch":P1,"group.repeat.image.rotation":0,"group.border.repeat.image":P1,"group.border.repeat.image.stretch":P1,"group.border.repeat.image.rotation":0,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":P1,"group.title.color":A1,"group.title.background":N.groupTitleBackground,"group.title.align":ru,"group.title.orientation":Bu,"group.background":N.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":P1,"group.border.color":o,"group.border.radius":P1,"group.border.cap":EH,"group.border.join":r9,"group.border.width.absolute":!1,"group.splitLine":!1,"group.gradient":H1,"group.gradient.color":"#FFF",shape:P1,"shape.background":o,"shape.repeat.image":P1,"shape.repeat.image.stretch":P1,"shape.repeat.image.rotation":0,"shape.border.repeat.image":P1,"shape.border.repeat.image.stretch":P1,"shape.border.repeat.image.rotation":0,"shape.border.width":0,"shape.border.width.absolute":!1,"shape.border.color":o,"shape.border.3d":!1,"shape.border.3d.color":P1,"shape.border.3d.accuracy":P1,"shape.border.cap":EH,"shape.border.join":r9,"shape.border.pattern":P1,"shape.gradient":H1,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":QH,"shape.dash.offset":0,"shape.dash.color":js,"shape.dash.width":P1,"shape.dash.3d":!1,"shape.dash.3d.color":P1,"shape.dash.3d.accuracy":P1,"shape.polygon.side":6,"shape.arc.from":F,"shape.arc.to":h1,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":P1,"shape.gradient.pack":P1,"shape.border.gradient.pack":P1,"shape.fill.rule":"nonzero","shape.fill.clip.direction":"top","shape.fill.clip.percentage":P1,"shape.foreground":P1,"shape.foreground.gradient":H1,"shape.foreground.gradient.color":"#FFF","shape.foreground.clip.direction":"top","shape.foreground.clip.percentage":P1,"shape.regular":!0,"autolayout.gap":P1,"autolayout.hgap":P1,"autolayout.vgap":P1,"edge.type":P1,"edge.points":P1,"edge.segments":P1,"edge.color":o,"edge.width":2,"edge.width.absolute":!1,"edge.repeat.image":null,"edge.offset":0,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":P1,"edge.3d.accuracy":P1,"edge.cap":EH,"edge.join":r9,"edge.source.position":17,"edge.source.anchor.x":P1,"edge.source.anchor.y":P1,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.source.index":-1,"edge.source.percent":0,"edge.target.position":17,"edge.target.anchor.x":P1,"edge.target.anchor.y":P1,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.target.index":-1,"edge.target.percent":0,"edge.pattern":P1,"edge.dash":!1,"edge.dash.pattern":QH,"edge.dash.offset":0,"edge.dash.color":js,"edge.dash.width":P1,"edge.dash.3d":!1,"edge.dash.3d.color":P1,"edge.dash.3d.accuracy":P1,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":P1,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":P1,"grid.column.percents":P1,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":N.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":N.gridCellBorderColor,"grid.block":P1,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":N.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":K9,"text.gradient.pack":P1,"text.font":B9,"text.shadow":!1,"text.shadow.color":Ms,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3,"text.scale.x":1,"text.scale.y":1,"text.gradient":P1,"text.gradient.color":"#FFF","text.decoration":P1,"text.vertical":!1,"text.vertical.gap":1,"text.wrap":!1,"text.letter.gap":null,"text.border.color":Ms,"text.border.width":0,keepPosition:!0})[un]=P1,qY(T1,K,!0),qY(HP,{_76I:function(r,K,B){this._39I&&this._39I.fire({data:r,oldIndex:K,newIndex:B})},addIndexChangeListener:function(r,K,B){this._39I||(this._39I=new aP),this._39I.add(r,K,B)},removeIndexChangeListener:function(r,K){this._39I.remove(r,K)},prepareRemove:function(r){_Y(r)&&(r.setSource(H1),r.setTarget(H1)),r._70O&&r._70O.toList().each(this.remove,this),r._69O&&r._69O.toList().each(function(r){r.setHost(H1)}),r._host&&r.setHost(H1)},onAdded:function(r){this.isAutoAdjustIndex()&&this.adjustIndex(r)},onDataPropertyChanged:function(r,K){xP[K.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(r)},isAdjustable:function(r){return l(r)||_Y(r)},isAdjustedToBottom:function(r){return!!eY(r)&&r.isExpanded()&&NP(r)},adjustIndex:function(r){this.isHierarchicalRendering()||(this.isAdjustedToBottom(r)?(this.sendToBottom(r),r.eachChild(this.adjustIndex,this)):this.sendToTop(r))},sendToTop:function(K){var r,B,b=this;b.contains(K)&&b.isAdjustable(K)&&(B=b._datas,K!==B.get(b.size()-1)&&(r=B.indexOf(K),B.removeAt(r),B.add(K),b._76I(K,r,b.size()-1)),_Y(K)&&((B=K._40I)&&!b.isAdjustedToBottom(B)&&b.sendToTop(B),(B=K._41I)&&!b.isAdjustedToBottom(B)&&b.sendToTop(B)),K._69O&&K._69O.each(function(r){r.isRelatedTo(K)||l(K)&&r.isLoopedHostOn(K)||b.sendToTop(r)}),K.ISubGraph||eY(K)&&!K.isExpanded()||K._adjustChildrenToTop&&K.eachChild(function(r){_Y(r)||b.sendToTop(r)}))},sendToBottom:function(r,K){var B,b;r!==K&&this.contains(r)&&this.isAdjustable(r)&&(K&&!this.contains(K)||(B=(b=this._datas).remove(r),K=K?this._datas.indexOf(K):0,b.add(r,K),B!==K&&(this._76I(r,B,K),!(b=r._parent)||b.ISubGraph||_Y(b)||this.sendToBottom(r._parent,r))))}}),qY(DH,{ms_edit:function(r,K){r._46O=function(r){var K=this,B=K.gv.dm(),b=K._index,f=K._89I,h=K._node,U=K._shape,a=K._edge,P=K._77I;h&&f?(this.fi({kind:"endEditRect",event:r,data:h,direction:f}),B.endTransaction()):U&&0<=b?(K.fi({kind:"endEditPoint",event:r,data:U,index:b}),B.endTransaction()):a&&0<=b?(K.fi({kind:"endEditPoint",event:r,data:a,index:b}),B.endTransaction()):P&&(K.fi({kind:"endEditRotation",event:r,data:P}),B.endTransaction())},r._78I=function(r){var K=this,B=(K.autoScroll(r),K.gv.lp(r)),b=K._index,f=K._89I,h=K._node,U=K._shape,a=K._edge,P=K._77I;h&&f?(K._80O(B),K.fi({kind:"betweenEditRect",event:r,data:h,direction:f})):U&&0<=b?(B.e=U.getPoints().get(b).e,U.setPoint(b,B),K.fi({kind:"betweenEditPoint",event:r,data:U,index:b})):a&&0<=b?(h=a.s(iu),B.e=h.get(b).e,h.set(b,B),a.fp(iu,H1,h),K.fi({kind:"betweenEditPoint",event:r,data:a,index:b})):P&&(f=P.p(),U=P.getScale(),h=F1+d1(B.y-f.y,B.x-f.x),U.y<0&&(h+=F),j1(h)<.04&&(h=0),P.setRotation(h),K.fi({kind:"betweenEditRotation",event:r,data:P}))},r._80O=function(r){var K=this._node,B=this._rect,b=B.x,f=B.y,h=B.width,U=B.height,a=this._89I,P=this._anchor,H=this._matrix,r=H.tfi(r);"northwest"===a?B=l9(r,{x:b+h,y:f+U}):a===Hu?B=l9({x:b,y:r.y},{x:b+h,y:f+U}):"northeast"===a?B=l9({x:b,y:r.y},{x:r.x,y:f+U}):a===Pu?B=l9({x:r.x,y:f},{x:b+h,y:f+U}):a===au?B=l9({x:b,y:f},{x:r.x,y:f+U}):"southwest"===a?B=l9({x:r.x,y:f},{x:b+h,y:r.y}):"south"===a?B=l9({x:b,y:f},{x:b+h,y:r.y}):"southeast"===a&&(B=l9({x:b,y:f},r)),K.setPosition(H.tf(B.x+B.width*P.x,B.y+B.height*P.y)),K.setWidth(B.width),K.setHeight(B.height)},r._80I=function(r,K,B,b){var f=this.gv._zoom,f=(this.gv.getEditPointSize()+2)/f;return!!m9({x:K-f/2,y:B-f/2,width:f,height:f},r)&&(this._89I!==b&&(this._89I=b),!0)},r._79I=function(r,K,B){var b=this,f=b.gv,h=K?f.getDataUI(K):H1;if(h=h?h._55O:H1){var U,a,P=f._zoom,H=(f.getEditPointSize()+2)/P,Y=f.lp(r);if(l(K)){if(h._56O&&l(K)&&(U=h._98o,m9({x:U.x-H/2,y:U.y-H/2,width:H,height:H},Y)))return b._77I=K,B&&b.fi({kind:"beginEditRotation",event:r,data:K}),b.setCursor("crosshair"),!0;if(h._43O&&K instanceof CO)for(e=(a=K.getPoints()).size()-1;0<=e;e--)if(U=a.get(e),m9({x:U.x-H/2,y:U.y-H/2,width:H,height:H},Y))return b._index=e,b._shape=K,B&&b.fi({kind:"beginEditPoint",event:r,data:K,index:e}),b.setCursor("crosshair"),!0;if(h._42O)for(var S=K.getEditControlPoints(),_=["northwest",-1,-1,Pu,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,au,1,0,"northeast",1,-1,Hu,0,-1],e=0,o=S.length;e<o;e++){var x,T,t,p=S[e];if(b._80I(Y,p.x,p.y,_[3*e]))return p=(b._node=K).getWidth(),t=K.getHeight(),x=K.getAnchor(),b._rect={x:-p*x.x,y:-t*x.y,width:p,height:t},b._anchor=x,b._matrix=K.getMatrix(),p=K.getRotation(),t=S1(p),x=f1(p),p=_[3*e+1]*IY(K.getScale().x),T=_[3*e+2]*IY(K.getScale().y),t=Math.atan2(-x*p-t*T,t*p-x*T),p=(Math.round(t/(Math.PI/4))+8)%8,b.setCursor([$n,"nesw-resize",Xn,"nwse-resize",$n,"nesw-resize",Xn,"nwse-resize"][p]),B&&b.fi({kind:"beginEditRect",event:r,data:K,direction:b._89I}),!0}}if(h._43O&&_Y(K)&&K.s(Zu)===Lu&&(a=K.s(iu)))for(e=a.size()-1;0<=e;e--)if(U=a.get(e),m9({x:U.x-H/2,y:U.y-H/2,width:H,height:H},Y))return b._index=e,b._edge=K,B&&b.fi({kind:"beginEditPoint",event:r,data:K,index:e}),b.setCursor("crosshair"),!0}return!1}},ms_gv:function(r,K){r._currentSubGraph=H1,r._initView=function(){this._fpsInfo={time:0,fps:0,frames:0}},r.upSubGraph=function(){this.setCurrentSubGraph(vP(this._currentSubGraph))},r.isVisible=function(r){var K=this;if(vP(r)!==K._currentSubGraph)return!1;if(_Y(r)){var B=r._40I,b=r._41I;if(!B||!b)return!1;if(!(r.s("edge.independent")||K.isVisible(B)&&K.isVisible(b)))return!1;if(r.isEdgeGroupHidden())return!1}else for(var f=r._parent;f&&!f.ISubGraph;){if(eY(f)&&(!f.isExpanded()||!K.isVisible(f)))return!1;f=f._parent}if(r._parent instanceof RO&&!K.isVisible(r._parent))return!1;if(r._refGraph instanceof ZO&&!K.isVisible(r._refGraph))return!1;if(K instanceof eq){if(!r.s("3d.visible"))return!1}else{if((B=K.getLayersInfo())&&(b=B[r._layer])&&!1===b.visible)return!1;if(!r.s("2d.visible"))return!1}return!K._visibleFunc||K._visibleFunc(r)},r.handleSelectionChange=function(r){var B=this;r.datas.each(function(r){B.invalidateData(r);var K=r._parent;eY(K)&&l(r)&&r.s(zu)&&(B.invalidateData(K),K._49I&&K._49I.each(function(r){B.invalidateData(r)}))}),B.onSelectionChanged(r)},r.onSelectionChanged=function(r){var K=this.sm();1!==K.size()||"set"!==r.kind&&"append"!==r.kind||(r=K.ld(),this.isAutoMakeVisible()&&this.makeVisible(r),this.adjustIndex&&this._dataModel.isAutoAdjustIndex()&&this.adjustIndex(r))},r.makeVisible=function(r){if(r&&(this.getDataUI?this.getDataUI(r):this.getData3dUI(r))){var K=r,B=vP(r);for(B!==this._currentSubGraph&&this.setCurrentSubGraph(B);(K=K._parent)&&K!==B;)eY(K)&&K.setExpanded(!0);this._23I=r,this.iv()}},r.getLabel=function(r){var K=r.getStyle(du);return K===P1?r.getName():K},r.getLabelBackground=function(r){return r.getStyle("label.background")},r.getLabelColor=function(r){return r.getStyle("label.color")},r.getLabel2=function(r){return r.getStyle("label2")},r.getLabel2Background=function(r){return r.getStyle("label2.background")},r.getLabel2Color=function(r){return r.getStyle("label2.color")},r.getNote=function(r){return r.getStyle(nu)},r.getNoteBackground=function(r){return r.getStyle("note.background")},r.getNote2=function(r){return r.getStyle(Au)},r.getNote2Background=function(r){return r.getStyle("note2.background")},r.handleClick=function(r,K,B){K?(this.fi({kind:"clickData",event:r,data:K,part:B}),this.onDataClicked(K,r)):(this.fi({kind:"clickBackground",event:r}),this.onBackgroundClicked(r))},r.handleDoubleClick=function(r,K,B){var b=this;J9(r)&&(K?(b.fi({kind:"doubleClickData",event:r,data:K,part:B}),b.onDataDoubleClicked(K,r,B),b.checkDoubleClickOnNote(r,K,B)||b.checkDoubleClickOnRotation&&b.checkDoubleClickOnRotation(r,K,B)||(_Y(K)?b.onEdgeDoubleClicked(K,r,B):K.ISubGraph?b.onSubGraphDoubleClicked(K,r,B):eY(K)?b.onGroupDoubleClicked(K,r,B):K.IDoorWindow?b.onDoorWindowDoubleClicked(K,r,B):K.ICSGBox&&b.onCSGBoxDoubleClicked(K,r,B))):(b.fi({kind:"doubleClickBackground",event:r}),b.onBackgroundDoubleClicked(r)))},r.onSubGraphDoubleClicked=function(r,K,B){this.setCurrentSubGraph(r)},r.onEdgeDoubleClicked=function(r,K,B){this.isEditable(r)||(r.ISubGraph&&!A9(K)?this.setCurrentSubGraph(r):r.s("edge.toggleable")&&r.toggle())},r._39Q=function(r){return!!this.isInteractive(r)&&this.preventDefaultWhenInteractive(r)},r.preventDefaultWhenInteractive=function(r){return r.s("preventDefaultWhenInteractive")},r.onGroupDoubleClicked=function(r,K,B){r.s("group.toggleable")&&r.toggle()},r.onDoorWindowDoubleClicked=function(r,K,B){r.s("dw.toggleable")&&r.toggle(!0)},r.onCSGBoxDoubleClicked=function(r,K,B){this instanceof eq&&(K=this.intersectObject(K,r))&&r.s(K.part+".toggleable")&&r.toggleFace(K.part,!0)},r.onBackgroundClicked=function(r){},r.onBackgroundDoubleClicked=function(r){this.upSubGraph()},r.onDataClicked=function(r,K,B){},r.onDataDoubleClicked=function(r,K,B){},r.onAutoLayoutEnded=function(){},r.onMoveEnded=function(){},r.onPanEnded=function(){},r.onPinchEnded=function(){},r.onRectSelectEnded=function(){},r.onZoomEnded=function(){},r.serialize=function(r){return this.dm().serialize(r)},r.toJSON=function(){return this.dm().toJSON()},r.deserialize=function(r,K){var a=this,P=((K=K instanceof PP?{rootParent:K}:aY(K)?{setId:K}:HY(K)?{finishFunc:K}:K||{}).view=a).dm();return K.reset&&(P.setAttrObject({}),P.setLayers(P1),P.setName(P1),P.setAutoAdjustIndex(!0),P.setHierarchicalRendering(!1),P.setBackground(P1),P.setInit(P1),P.setPostProcessingData(P1),P.setEnvmap(P1),P.setEnvmapType(P1),a.disableToolTip(),a instanceof M.graph.GraphView?(a.setZoomable(Y1.graphViewZoomable),a.setPannable(Y1.graphViewPannable),a.setRectSelectable(Y1.graphViewRectSelectable)):a instanceof M.graph3d.Graph3dView&&(a.shadowMap.resetProperties(),a.setDashDisabled(Y1.graph3dViewDashDisabled),a.setUvClipEnabled(Y1.graph3dViewUvClipEnabled),a.getHighlightHelper().resetProperties(),a.resetHeadlightProperties(),a.resetFogProperties(),a.setBatchInfoMap({}),a.setBatchColorDisabled(Y1.graph3dViewBatchColorDisabled),a.setBatchInstancedDisabled(Y1.graph3dViewBatchInstancedDisabled),a.setBatchBlendDisabled(Y1.graph3dViewBatchBlendDisabled),a.setBatchBrightnessDisabled(Y1.graph3dViewBatchBrightnessDisabled),a.setFlowBlendMode(Y1.graph3dViewFlowBlendMode),a.setMoveStep(Y1.graph3dViewMoveStep),a.setRotateStep(Y1.graph3dViewRotateStep),a.setSortable(Y1.graph3dViewSortable),a.setSortFunc(P1),a.setSkybox(P1),a.setToneMapping(P1),a.setToneMappingExposure(1),a.disableOIT(),a.setOITPassCount(3))),K.__innerHandler__=function(r){var B,b,f,K,h,U;aY(P.a("toolTipEnable"))&&(P.a("toolTipEnable")?a.enableToolTip():a.disableToolTip()),YY(P.a("fontFaces"))&&P.a("fontFaces").forEach(function(r){Y1.addFontFace(r.name,r.url)}),a instanceof M.graph.GraphView&&(aY(P.a("zoomable"))&&a.setZoomable&&a.setZoomable(P.a("zoomable")),aY(P.a("pannable"))&&a.setPannable&&a.setPannable(P.a("pannable")),aY(P.a("rectSelectable"))&&a.setRectSelectable&&a.setRectSelectable(P.a("rectSelectable")),!0===P.a("fitContent")&&a.fitContent&&a.fitContent(!0,0)),a instanceof M.graph3d.Graph3dView&&((r=r.scene)&&r.shadow!=H1&&a.shadowMap.setShadow(r.shadow,r.shadowParams),(U=P.a("sceneContext"))?(U.eye&&a.setEye(U.eye),U.center&&a.setCenter(U.center),UY(U.far)&&a.setFar(U.far),UY(U.near)&&a.setNear(U.near)):(UY(P.a("sceneNear"))&&a.setNear(P.a("sceneNear")),UY(P.a("sceneFar"))&&a.setFar(P.a("sceneFar")),r&&(r.eye&&a.setEye(r.eye),r.center&&a.setCenter(r.center))),UY(P.a("sceneDevicePixelRatio"))&&a.setDevicePixelRatio(P.a("sceneDevicePixelRatio")),UY(P.a("sceneFovy"))&&a.setFovy(P.a("sceneFovy")),aY(P.a("sceneOrtho"))&&a.setOrtho(P.a("sceneOrtho")),UY(P.a("sceneOrthoWidth"))&&a.setOrthoWidth(P.a("sceneOrthoWidth")),aY(P.a("sceneShadowEnabled"))&&(P.a("sceneShadowEnabled")?a.enableShadow():a.disableShadow()),UY(P.a("sceneShadowDegreeX"))&&a.setShadowDegreeX(P.a("sceneShadowDegreeX")),UY(P.a("sceneShadowDegreeZ"))&&a.setShadowDegreeZ(P.a("sceneShadowDegreeZ")),UY(P.a("sceneShadowIntensity"))&&a.setShadowIntensity(P.a("sceneShadowIntensity")),P.a("sceneShadowQuality")!=H1&&a.setShadowQuality(P.a("sceneShadowQuality")),P.a("sceneShadowType")&&a.setShadowType(P.a("sceneShadowType")),UY(P.a("sceneShadowRadius"))&&a.setShadowRadius(P.a("sceneShadowRadius")),UY(P.a("sceneShadowBias"))&&a.setShadowBias(P.a("sceneShadowBias")),P.a("sceneShadowBounding")&&a.setShadowBounding(P.a("sceneShadowBounding")),aY(P.a("sceneDashEnable"))&&a.setDashDisabled(!P.a("sceneDashEnable")),aY(P.a("sceneUvClipEnabled"))&&a.setUvClipEnabled(P.a("sceneUvClipEnabled")),_1(P.a("sceneHighlightMode"))&&a.setHighlightMode(P.a("sceneHighlightMode")),UY(P.a("sceneHighlightWidth"))&&a.setHighlightWidth(P.a("sceneHighlightWidth")),P.a("sceneHighlightColor")&&a.setHighlightColor(P.a("sceneHighlightColor")),P.a("sceneHighlightType")&&a.setHighlightType(P.a("sceneHighlightType")),P.a("sceneHighlightGlow")&&a.setHighlightGlow(P.a("sceneHighlightGlow")),P.a("sceneHighlightStrength")&&a.setHighlightStrength(P.a("sceneHighlightStrength")),aY(P.a("sceneHeadlightEnable"))&&a.setHeadlightDisabled(!P.a("sceneHeadlightEnable")),P.a("sceneHeadlightDirection")!=H1&&a.setHeadlightDirection(P.a("sceneHeadlightDirection")),UY(P.a("sceneHeadlightRange"))&&a.setHeadlightRange(P.a("sceneHeadlightRange")),P.a("sceneHeadlightColor")&&a.setHeadlightColor(P.a("sceneHeadlightColor")),UY(P.a("sceneHeadlightIntensity"))&&a.setHeadlightIntensity(P.a("sceneHeadlightIntensity")),UY(P.a("sceneHeadlightAmbientIntensity"))&&a.setHeadlightAmbientIntensity(P.a("sceneHeadlightAmbientIntensity")),UY(P.a("sceneHeadlightRatioForPhysicalMaterial"))&&a.setHeadlightRatioForPhysicalMaterial(P.a("sceneHeadlightRatioForPhysicalMaterial")),UY(P.a("sceneHeadlightGroup"))&&a.setHeadlightGroup(P.a("sceneHeadlightGroup")),aY(P.a("sceneFogEnable"))&&a.setFogDisabled(!P.a("sceneFogEnable")),P.a("sceneFogMode")&&a.setFogMode(P.a("sceneFogMode")),UY(P.a("sceneFogDensity"))&&a.setFogDensity(P.a("sceneFogDensity")),P.a("sceneFogColor")&&a.setFogColor(P.a("sceneFogColor")),UY(P.a("sceneFogNear"))&&a.setFogNear(P.a("sceneFogNear")),UY(P.a("sceneFogFar"))&&a.setFogFar(P.a("sceneFogFar")),aY(P.a("sceneBatchBrightnessDisabled"))&&a.setBatchBrightnessDisabled(P.a("sceneBatchBrightnessDisabled")),P.a("sceneFlowBlendMode")!==P1&&a.setFlowBlendMode(P.a("sceneFlowBlendMode")),P.a("sceneToneMapping")!==P1&&a.setToneMapping(P.a("sceneToneMapping")),UY(P.a("sceneToneMappingExposure"))&&a.setToneMappingExposure(P.a("sceneToneMappingExposure")),aY(P.a("sceneBatchBlendDisabled"))&&a.setBatchBlendDisabled(P.a("sceneBatchBlendDisabled")),aY(P.a("sceneBatchColorDisabled"))&&a.setBatchColorDisabled(P.a("sceneBatchColorDisabled")),aY(P.a("sceneBatchInstancedDisabled"))&&a.setBatchInstancedDisabled(P.a("sceneBatchInstancedDisabled")),P.a("sceneBatchInfoMap")&&a.setBatchInfoMap(P.a("sceneBatchInfoMap")),P.a("sceneRenderLayerInfoMap")&&a.setRenderLayerInfoMap(P.a("sceneRenderLayerInfoMap")),UY(P.a("sceneMoveStep"))&&a.setMoveStep(P.a("sceneMoveStep")),UY(P.a("sceneRotateStep"))&&a.setRotateStep(P.a("sceneRotateStep")),aY(P.a("sceneSortable"))&&a.setSortable(P.a("sceneSortable")),HY(P.a("sceneSortFunc"))&&a.setSortFunc(P.a("sceneSortFunc")),_1(P.a("sceneShaderSummary"))&&(a.enableShaderCompileParallel(),a.setShaderGCInterval(1/0),a.deserializePhysicalShader(P.a("sceneShaderSummary"))),aY(P.a("sceneOIT"))&&a.enableOIT(),UY(P.a("sceneOITPassCount"))&&a.setOITPassCount(P.a("sceneOITPassCount")),(U=P.a("sceneSkyboxType")||"sphere")!=H1&&(b=!(B={}),r=P.a("sceneSkyboxColor"),"sphere"===U?(B.shape3d=U,(K=P.a("sceneSkyboxImage"))&&(B["shape3d.image"]=K,b=!0)):"cube"===U?(B.shape3d=P1,["front","back","left","right","top","bottom"].forEach(function(r){var K=r+".image",r=r.charAt(0).toUpperCase()+r.slice(1);(r=P.a("sceneSkybox"+r+"Image"))&&(B[K]=r,b=!0)})):"color"===U&&r&&(b=!0),b&&(f=new JO,h=P.a("sceneSkyboxDiameter"),UY(h)?f.s3(h,h,h):f.s3(20,20,20),B["body.color"]=P.a("sceneSkyboxBodyColor"),B.envmap=P.a("sceneSkyboxEnvmap"),B["envmap.probe"]=P.a("sceneSkyboxEnvmapProbe"),B.roughness=P.a("sceneSkyboxRoughness"),B["shape3d.light"]=B["all.light"]=P.a("sceneSkyboxLight"),B["light.mask"]=P.a("sceneSkyboxLightMask"),B["headlight.ambientIntensity"]=P.a("sceneSkyboxHeadLightAmbientIntensity"),B["skybox.blur.size"]=P.a("sceneSkyboxBlurSize"),B["skybox.blur.resolution"]=P.a("sceneSkyboxBlurResolution"),B["texture.wrap"]="clampToEdge",B["3d.clipbox.mask"]=QQ,B["effect.flow.mask"]=QQ,"color"===U&&(B.shape3d="sphere",(h=(K=f.s("shape3d.image"))&&M.Default.getImage(K))&&"CANVAS"===h.tagName||(h=_.createElement("canvas"),K=M.Math.generateUUID(),M.Default.setImage(K,h)),K&&a.getTextureMap()&&a.deleteTexture(K),M.Default.setCanvas(h,2,1024,1),(U=h.getContext("2d")).clearRect(0,0,2,1024),U.beginPath(),U.rect(0,0,2,1024),gN(U,r,function(r){return r},!1,{x:0,y:0,width:2,height:1024}),U.fill(),U.restore(),B["shape3d.image"]=K),f.s(B),["X","Y","Z"].forEach(function(r){var K=P.a("sceneSkyboxRotation"+r);UY(K)&&f["setRotation"+r](K)}),a.setSkybox(f))))},P.deserialize(r,K.rootParent,K)},r.isDebugTipShowing=function(){return!!this._debugDiv},r.showDebugTip=function(){var r,B,b=this,f=b._debugDiv;f||((f=b._debugDiv=_.createElement("div")).style.position="absolute",f.style.overflow="hidden",f.style.font=Y1.debugTipLabelFont,f.style.padding="6px",f.style.backgroundColor=Y1.debugTipBackground,f.style.color=Y1.debugTipLabelColor,r=b.getView(),b._79O?r.insertBefore(f,b._79O):r.appendChild(f),B=function(){b.redraw();var r=b._canvas,r="FPS: "+b._fpsInfo.fps+"<br/>Datas: "+b.dm().getDatas().length+(r?"<br/>Size: "+r.width+" * "+r.height:""),K=b.dm()._historyManager;K&&(r+="<br/>Undoes: "+K.getHistories().length+" index: "+K.getHistoryIndex()),(K=b.getDebugTip())&&(r+="<hr>"+K),f.innerHTML=r,b._isDebugging&&requestAnimationFrame(B)},requestAnimationFrame(B),b._isDebugging=!0)},r.hideDebugTip=function(){var r=this._debugDiv;r&&(delete this._debugDiv,this.getView().removeChild(r),this._isDebugging=!1)},r.updateDOMAppendMatrix=function(){var r=this.getView();r&&(r.updateAppendMatrix=!0)},r.countFrame=function(){var r,K;this._isDebugging&&(1e3<(r=Date.now())-(K=this._fpsInfo).time?(K.fps=Math.round(1e5*(K.frames+1)/(r-K.time))/100,K.time=r,K.frames=0):K.frames++)}},ms_icons:function(r,K){r.getRotation=function(r,K){return r==H1?0:r},r._15O=function(){var r=this,K=r.s(Vu);if(K){var B,b=r,f=r.data||r._data,h=f.getRotation&&f.getRotation(),U=r._38o={icons:K,rects:{}};for(B in K){var a=K[B],P=W(a.shape3d,f,b);if(!(!1===W(a.visible,f,b)||W(a.for3d,f,b)&&!r.I3d||P&&!r.I3d)){var H=P?[P]:W(a.names,f,b),Y=H?H.length:0,S=W(a.position,f,b)||3,_=W(a.offsetX,f,b)||0,e=W(a.offsetY,f,b)||0,o=W(a.direction,f,b)||au,x=(T=W(a.gap,f,b))!=H1?T:1,T=W(a.rotation,f,b),t=W(a.keepOrien,f,b),p=W(a.rotationFixed,f,b)?T:r.getRotation(T,t,S),q=H1,y=U.rects[B]=new Array(Y);UY(h)&&(UY(p)?p+=h:p=h),y.rotation=p;for(var k=0;k<Y;k++){var w,v,z,N=H[k];P?v=w=0:(N=g(N),w=W(a.width,f,b),v=W(a.height,f,b),w==H1&&(w=DA(N,f)),v==H1&&(v=iA(N,f))),q?o===au?_+=w/2:o===Pu?_-=w/2:o===Hu?e-=v/2:e+=v/2:q={width:w,height:v},r.I3d?(N=-w/2,z=-v/2,z={width:w,height:v,mat:r._16O(W(a.autorotate,f,b),S,q,W(a.face,f,b)||Q1,W(a.t3,f,b),W(a.r3,f,b),W(a.rotationMode,f,b),_,e),vs:new aA([N,-z,0,N,-z-v,0,N+w,-z-v,0,N+w,-z,0])}):(z={x:(N=r.getPosition(S,_,e,q,W(a.positionFixed,f,b))).x-w/2,y:N.y-v/2,width:w,height:v},r._68o(z,p)),y[k]=z,o===au?_+=w/2+x:o===Pu?_-=w/2+x:o===Hu?e-=v/2+x:e+=v/2+x}}}}}}});var _P={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},eP={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},oP={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},xP={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},TP={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},tP={"edge.type":1,"edge.group":1},pP={rotation:1,rotationX:1,rotationZ:1,rotation3d:1},qP={rotation:1,position:1,width:1,height:1,anchor:1,scale:1,host:1,"s:vector.layoutable":1},yP={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},kP={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},wP={shape:1,thickness:1,position:1,anchor:1,scale:1},vP=function(r){if(!r)return H1;var K,B;if(_Y(r))return K=r._40I,B=r._41I,K&&B&&(K=vP(K))===vP(B)?K:H1;for(var b=r._parent;_Y(b)&&!b.ISubGraph;)b=b._parent;return b?b.ISubGraph?b:vP(b):H1},zP=function(r,K,B,b){var f=K.getStyle(B)*b;f&&W9(r,f),(f=K.getStyle(B+".left")*b)&&(r.x-=f,r.width+=f),(f=K.getStyle(B+".right")*b)&&(r.width+=f),(f=K.getStyle(B+".top")*b)&&(r.y-=f,r.height+=f),(f=K.getStyle(B+".bottom")*b)&&(r.height+=f),r.width<0&&(r.width=-r.width,r.x-=r.width),r.height<0&&(r.height=-r.height,r.y-=r.height)},NP=function(r){for(var K,B=0,b=r.size();B<b;B++)if(K=r.getChildAt(B),l(K)&&NP(K))return!0;return r.hasAgentEdges()},uP=function(r){if(!r)return H1;for(var K=r._parent;eY(K);){if(!eY(K._parent))return K.isExpanded()?r:K;K.isExpanded()||(r=K),K=K._parent}return r},jP=function(r,K){if(!r||!K)return H1;var B,b,f,h=vP(r),U=vP(K);if(h===U)return r;for(;U&&h!==U;)U=vP(U);if(h===U)return r;(B=new $).add(r,0);for(var a=r._parent;l(a)&&!K.isDescendantOf(a);)B.add(a,0),a=a._parent;for(f=B.size(),b=0;b<f;b++){var P=B.get(b);if(eY(P)&&!P.isExpanded())return P;if(P.ISubGraph)return P}return r},IP=function(r,K,B){var b,f,h,U="target"===(B="target"!==B?"source":B)?K.getTargetAgent():K.getSourceAgent(),B="edge."+B+".";return _Y(U)?((b=r.getDataUI(U))._79o(),0<=(f=K.s(B+"index"))?(h=XP(b))[Math.max(0,Math.min(f,h.length-1))]:(f=K.s(B+"percent")||0,f=Math.max(0,Math.min(f,1)),h=iP(b),$P(h,100*f))):LP(r,U,K.s(B+"position"),K.s(B+"offset.x"),K.s(B+"offset.y"),K.s(B+"anchor.x"),K.s(B+"anchor.y"))},LP=function(r,K,B,b,f,h,U){if(!K)return H1;var a,P,H,Y,S,_=K.getRotation?K.getRotation():0;return B=h!==P1||U!==P1?(h=h===P1?.5:h,U=U===P1?.5:U,H=K.getScale(),_&&!oY(K,r)||H.x<0||H.y<0?(a=K.getPosition(),Y=K.getWidth(),P=K.getHeight(),S=K.getAnchor(),new JH(_,a.x,a.y,H.x,H.y).tf((h-S.x)*Y,(U-S.y)*P)):{x:(a=SP(r,K)).x+h*a.width,y:a.y+U*a.height}):Ns(B,SP(r,K)),_&&(S=b*(H=S1(_))-f*(Y=f1(_)),f=b*Y+f*H,b=S),B.x+=b,B.y+=f,B},JP=function(r,K){var B,b,f=function(r,K){if(!r||!K)return H1;var B,b,f,h,U,a;if(r===K){if(!(h=r.getLoopedEdges()))return H1;h=new $(h)}else{if(U=r.getAgentEdges(),a=K.getAgentEdges(),!U||!a)return H1;for(b=U.size(),B=0;B<b;B++)f=U.get(B),a.contains(f)&&(h=h||new $).add(f)}if(h)for(B=0;B<h.size();B++)(f=h.get(B)).getStyle(Zu)===Lu&&(f._22I(H1),h.removeAt(B),B--);return h}(r,K);f&&!f.isEmpty()&&(1===f.size()?f.get(0)._22I(H1):(B=new $,b=new $,f.each(function(r){r=r.s("edge.group"),B.contains(r)||B.add(r)}),B.sort(),B.each(function(K){b.add(new M.EdgeGroup(f.toList(function(r){return K===r.s("edge.group")}),b))}),b.each(function(K){K.each(function(r){r._22I(K)})})))},FP=function(r,K,B){var b=r._canvas,r=(r._zoom,$9(K,b)),K=$9(B,b);return{x:r.x-K.x,y:r.y-K.y}},GP=function(r,K){var B,b,f,h,U,a,P,H,Y,S,_,e;K&&(B=K.rect,b=K.color,f=K.rotation,h=K.labelWidth,U=K.background,a=K.opacity,P=(e=K.scale)!=H1&&1!==e,a!=H1&&(H=r.globalAlpha,r.globalAlpha*=a),(f||P)&&(r.save(),Y=B.x+B.width/2,S=B.y+B.height/2,hN(r,Y,S),f&&UN(r,f),P&&r.scale(e,e),hN(r,-Y,-S)),U&&QN(r,B.x,B.y,B.width,B.height,U),h&&(_=B.width,(e=r.createLinearGradient(B.x,B.y,B.x+_,B.y)).addColorStop(0,b),e.addColorStop(.9,b),e.addColorStop(1,ln),b=e,B.width=h),OY(r,K.ss,B,K.font,b,K.align,K.decoration),h&&(B.width=_),(f||P)&&r.restore(),a!=H1&&(r.globalAlpha=H))},dP=function(r,K){var B,b,f,h,U,a,P,H,Y,S,_,e,o,x,T,t,p;K&&(b=(B=K.rect).x,f=B.y,h=B.width,U=B.height,a=K.background,P=K.backgroundImage,H=K.borderWidth,Y=K.borderColor,S=K.labelWidth,_=K.opacity,e=(p=K.scale)!=H1&&1!==p,_!=H1&&(o=r.globalAlpha,r.globalAlpha*=_),e&&(r.save(),x=B.x+B.width/2,t=B.y+B.height/2,hN(r,x,t),r.scale(p,p),hN(r,-x,-t)),K.expanded?(p=b1(8,h/4),x=f+U-8,r.fillStyle=a,r.beginPath(),r.moveTo(b,f),r.lineTo(b,x),r.lineTo(b+h/2,x),r.lineTo(b+h/2,f+U),r.lineTo(b+h/2+p,x),r.lineTo(b+h,x),r.lineTo(b+h,f),r.closePath(),r.fill(),H&&(r.lineWidth=H,r.lineJoin="round",r.lineCap="round",Y?r.strokeStyle=Y:(r.strokeStyle=j9(a),r.beginPath(),r.moveTo(b+h,f),r.lineTo(b+h,x),r.lineTo(b+h/2+p,x),r.lineTo(b+h/2,f+U),r.stroke(),r.strokeStyle=u9(a),r.beginPath(),r.moveTo(b+h,f),r.lineTo(b,f),r.lineTo(b,x),r.lineTo(b+h/2,x),r.lineTo(b+h/2,f+U)),r.stroke()),P?p9(r,g(P),Mn,B.x,B.y,B.width,B.height-8,K.data,K.view):(B.height-=8,a=K.color,S&&((t=r.createLinearGradient(b,f,b+(T=h),f)).addColorStop(0,a),t.addColorStop(.9,a),t.addColorStop(1,ln),a=t,B.width=S),OY(r,K.ss,B,K.font,a,K.align),S&&(B.width=T),B.height+=8)):K.icon?ZA(r,g(K.icon),b,f,h,U,K.data,K.view):(p=h/2,H&&(r.lineWidth=H,r.lineJoin="round",r.lineCap="round",r.strokeStyle=Y||j9(a),r.beginPath(),r.arc(b+p,f+p,p,F1,1.6*F,!0),r.moveTo(b+p,f+U),r.lineTo(b+h-p/5,f+p),r.stroke(),r.strokeStyle=Y||u9(a),r.beginPath(),r.arc(b+p,f+p,p,1.6*F,F1,!0),r.moveTo(b+p,f+U),r.lineTo(b+p/5,f+p),r.stroke()),r.fillStyle=a,r.beginPath(),r.arc(b+p,f+p,p,0,h1,!0),r.moveTo(b+p,f+U),r.lineTo(b+h-p/5,f+p),r.lineTo(b+p/5,f+p),r.closePath(),r.fill(),r.fillStyle=K.color,r.beginPath(),r.arc(b+p,f+p,p/3,0,h1,!0),r.fill()),e&&r.restore(),_!=H1&&(r.globalAlpha=o))},sP=function(r,K){return 2*r<K?r:K/2},nP=function(r,K,B,b){if(!r||!K)return 0;var f=d1(K.y-r.y,K.x-r.x);return(f=!B&&K.x<r.x?f+F:f)+b},AP=function(r,K,B,b,f,h,U){return U&&(r.x>K.x||r.x===K.x&&r.y>K.y)&&(B=zs[B],f=-f),(U=Ns(B,{x:0,y:0,width:R9(r,K),height:0},h)).x+=b,U.y+=f,(U=new JH(d1(K.y-r.y,K.x-r.x)).tf(U)).x+=r.x,U.y+=r.y,U},VP=function(r,B,b,K,f){if(r._19Q=!0,!b.getEdgeGroup())return K?b.s("edge.gap"):0;if(_Y(b.getSourceAgent())||_Y(b.getTargetAgent()))return 0;var h,U=0,a=0,P=0;return b.getEdgeGroup().getSiblings().each(function(r){r.each(function(r){var K;B.isVisible(r)&&r.s(Zu)==f&&(K=r.s("edge.gap"),h?a+=P/2+K/2:h=r,P=K,r===b&&(U=a))})}),K?a-U+P:(K=U-a/2,h&&b._40I!==h._40I&&(r._19Q=!1),K)},MP=function(r){if(1===(K=r._getValidSelection()).length){var K,B=(K=K[0])instanceof M.Edge;if((K instanceof M.Shape||B)&&(!(B=B&&K.s("edge.type"))||"points"===B))return(B=r.gv).isPointEditable&&!B.isPointEditable(K)||!B.isEditable(K)?void 0:K}},RP=M.graph={},r=function(r,K,B){BA("ht.graph."+r,K,B)},lP=(M.layout={},{}),CP=function(r,K,B,b,f,h,U,a){var P=U._zoom;if(!P)return K;if(P!==U._cacheZoom&&(U._cacheZoom=P,U._cacheImage={}),P*=WH,b=Math.ceil(b),f=Math.ceil(f),2048<b*P||2048<f*P)return K;var H,Y=[K.uuid,b,f,B].join("_"),S=h.s("state");if(S&&(Y+="_"+S),(S=K.cacheRule)&&(HY(S)?e=S(h,U):HY(S.func)&&(e=S.func(h,U))),e===P1&&h instanceof M.Data){var _=K.dataBindings;if(_){for(var e="",o=_.length-1;0<=o;o--){var x=h.ca(_[o].attr);PY(x)||YY(x)||(e+="_"+x)}e=e.slice(1)}}if(Y+="_"+e,b<=f&&b*P<1?(H=f/b,f=(b=1/P)*H):f<=b&&f*P<1&&(H=b/f,b=(f=1/P)*H),b=Math.ceil(b),f=Math.ceil(f),!(S=U._cacheImage[Y])){if(AA=!0,S=M.Default.toCanvas(K,b,f,B,h,U,a,P),!AA)return K;U._cacheImage[Y]=S}return S};qY(Y1,{setImageCacheRule:function(r,K){var B,b;for(b in K||"object"!=typeof r?(B={})[r]=K:B=r,B){var f=B[b];_1(b)?(BA=g(b))?BA.cacheRule=f:lP[b]=f:b.cacheRule=f}}});(K={comps:[{type:tu,points:[85,50,70,115,100,71,86,107,88,49,47,105,111,102,79,115,108,105,47,65,47,111,82,83,72,70,77,53,109,105,109,49,87,102,106,122,78,117,52,100,71,117,107,61],borderWidth:1,borderColor:H1}]})[wu]=K[vu]=160,V.Image&&((UO=new V.Image).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAALUlEQVRYR+3QQREAAAABQfqXFsNnFTizzXk99+MAAQIECBAgQIAAAQIECBAgMBo/ACHo7lH9AAAAAElFTkSuQmCC",g1("default_blank",UO)),g1("node_image",QK(30,30,[{type:R,rect:[4,5,22,16],gradient:XH,gradientColor:Vs,background:o},{type:R,rect:[2,3,26,20],borderWidth:1,borderColor:o},{type:R,rect:[11,23,8,4],background:o},{type:R,rect:[6,27,18,2],background:o}])),g1("node_icon",QK(16,16,[{type:R,rect:[2,2,12,10],gradient:XH,gradientColor:Vs,background:o},{type:eu,rect:[2,2,12,10],width:1,color:o},{type:R,rect:[6,12,4,2],background:o},{type:R,rect:[4,14,8,1],background:o}])),g1("block_icon",QK(16,16,[{type:eu,rect:[1,1,14,14],width:1,color:o}])),g1("group_image",QK(66,39,[{type:R,rect:[44.3,18,18.1,12.8],gradient:XH,gradientColor:Vs,background:o},{type:R,rect:[3.3,17.8,18.1,12.8],gradient:XH,gradientColor:Vs,background:o},{type:R,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:o,gradient:XH,gradientColor:Vs,background:o},{type:R,rect:[26.2,29.4,12.8,4.2],background:o},{type:R,rect:[21.3,33.5,22.5,2.3],background:o},{type:R,rect:[5.3,32.7,14.1,2.1],background:o},{type:R,rect:[9,30.4,6.7,2.4],background:o},{type:R,rect:[50,30.7,6.7,2.4],background:o},{type:R,rect:[46.3,33,14.1,2.1],background:o}])),g1("group_icon",QK(16,16,[{type:R,rect:[4,12,4,2],background:o},{type:R,rect:[2,13,8,1],background:o},{type:R,rect:[12,12,2,1],background:o},{type:R,rect:[11,13,4,1],background:o},{type:R,rect:[10,7,6,5],gradient:XH,gradientColor:Vs,background:o},{type:R,rect:[1,2,10,10],gradient:XH,gradientColor:Vs,background:o},{type:eu,rect:[1,2,10,10],width:1,color:o}])),g1("refGraph_icon",QK(16,16,[{type:"shape",borderWidth:1,borderColor:o,borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:o,borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}])),g1("edge_icon",QK(16,16,[{type:R,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:XH,gradientColor:Vs,background:o},{type:R,rect:[10.8,1,4,4],background:o},{type:R,rect:[1,11,4,4],background:o}])),g1("subGraph_image",QK(72,45,[{type:tu,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:XH,gradientColor:Vs,background:o},{type:R,rect:[29.6,30.7,3.6,1.8],background:o},{type:R,rect:[28.4,32.3,6,1.2],background:o},{type:R,rect:[37.3,32,10.8,1.8],background:o},{type:R,rect:[39.1,29.9,7.2,2.3],background:o},{type:R,rect:[26.6,23.7,9.6,7.2],gradient:XH,gradientColor:Vs,background:o},{type:R,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:o,gradient:XH,gradientColor:Vs,background:o}])),g1("subGraph_icon",QK(17,17,[{type:tu,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:XH,gradientColor:Vs,background:o}])),g1("shape_icon",QK(16,16,[{type:tu,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:o}])),g1("polyline_icon",QK(16,16,[{type:tu,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:o},EK(7.5,.4),EK(7.5,6.3),EK(13.6,6.3),EK(13.6,14),EK(.7,13.9),EK(.7,.3)])),g1("grid_icon",QK(16,16,[{type:R,rect:[1,1,4,4],background:o,gradient:XH,gradientColor:Vs},{type:R,rect:[6,1,4,4],background:o,gradient:XH,gradientColor:Vs},{type:R,rect:[11,1,4,4],background:o,gradient:XH,gradientColor:Vs},{type:R,rect:[11,6,4,4],background:o,gradient:XH,gradientColor:Vs},{type:R,rect:[6,6,4,4],background:o,gradient:XH,gradientColor:Vs},{type:R,rect:[1,6,4,4],background:o,gradient:XH,gradientColor:Vs},{type:R,rect:[11,11,4,4],background:o,gradient:XH,gradientColor:Vs},{type:R,rect:[6,11,4,4],background:o,gradient:XH,gradientColor:Vs},{type:R,rect:[1,11,4,4],background:o,gradient:XH,gradientColor:Vs}])),g1("light_icon",QK(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:o},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:o,gradient:XH,gradientColor:Vs,background:{func:function(r){return r=r?r.s(cQ):H1,YY(r)?"rgb("+n1(255*r[0])+","+n1(255*r[1])+","+n1(255*r[2])+")":r||o}}}])),g1("text_icon",QK(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:o}])),g1("border_image",{fitSize:!0,comps:[{type:"border",relative:!0,rect:[0,0,1,1],color:{func:"style@border_color"},width:{func:"style@border_width"}}]}),g1("columnChart_image",{fitSize:!0,boundExtend:150,comps:[{type:{func:"style@chart.type"},relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"}}]}),g1("lineChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"lineChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"},linePoint:{func:"style@chart.line.point"},lineWidth:{func:"style@chart.line.width"},line3d:{func:"style@chart.line.3d"}}]}),g1("pieChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"pieChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},hollow:{func:"style@chart.hollow"},startAngle:{func:"style@chart.start.angle"},values:{func:"style@chart.values"},colors:{func:"style@chart.colors"}}]});var mP=function(r,K,B,b,f,h){var U,a,P,H,Y,S=[],_=-((b=Math.abs(b)>2*Math.PI?2*Math.PI:b)/(U=Math.ceil(Math.abs(b)/(Math.PI/4)))),e=-B;if(0<U){b=r+Math.cos(B)*f,B=K+Math.sin(-B)*h,S.push({x:b,y:B});for(var o=0;o<U;o++)Y=(e+=_)-_/2,a=r+Math.cos(e)*f,P=K+Math.sin(e)*h,H=r+Math.cos(Y)*(f/Math.cos(_/2)),Y=K+Math.sin(Y)*(h/Math.cos(_/2)),S.push({x:H,y:Y}),S.push({x:a,y:P})}return S},DP=function(r){if(r){var K=r._data;if(K instanceof M.Shape)return{points:K.getPoints(),segments:K.getSegments()};if(K instanceof M.Edge&&(K=r._78o)){var r=K.type,B=K.points,b=K.segments,f=K.edgeTypeInfo;if(!r||B){var h=(U=K.sourcePoint).x,U=U.y,a=(P=K.targetPoint).x,P=P.y;if(r)b?((H=new $({x:h,y:U})).addAll(B),H.add({x:a,y:P}),Y=new $(b._as)):(H=new $({x:h,y:U}),B.each(function(r){H.add(r)}),H.add({x:a,y:P}));else if(K.looped)for(var H=new $(mP(h,U,0,2*Math.PI,K.radius,K.radius)),Y=new $([1]),S=0;S<(H.size()-1)/2;S++)Y.add(3);else H=new $,K.center?(H.add({x:K.c1.x,y:K.c1.y}),H.add({x:h,y:U}),H.add({x:a,y:P}),H.add({x:K.c2.x,y:K.c2.y})):(H.add({x:h,y:U}),H.add({x:a,y:P}))}else f&&(H=new $(f.points._as),f.segments&&(Y=new $(f.segments._as)));return{points:H,segments:Y}}}},iP=function(r,K,B){if(null==K){if(!(r=DP(r)))return;K=r.points,B=r.segments}if(K){if("number"==typeof(K=Array.isArray(K)?new $(K):K).get(0)){for(var b=new M.List,f=0;f<K.size();f+=2)b.add({x:K.get(f),y:K.get(f+1)});K=b}if(!B){B=[1];for(var h=K.length-1;0<h;h--)B.push(2)}Array.isArray(B)&&(B=new $(B));for(var U=XN(K._as,B._as,50),a=U.length,P=[],f=0;f<a;f++){var H=U[f];1<H.length&&P.push(H)}return P}},ZP=function(r){for(var K=0,B=r.length-1,b=0;b<B;b++){var f=r[b],h=(U=r[b+1]).x-f.x,U=U.y-f.y;K+=Math.sqrt(h*h+U*U)}return K},gP=function(r,K){for(var B=0,b=K.length,f=0;f<b;f++)if(r<(B+=K[f]))return f;return Math.min(f,b-1)},WP=function(r,K){for(var B=0,b=0,f=r.length-1,h=0;h<f;h++){var U=r[h],a=r[h+1],P=a.x-U.x,H=a.y-U.y;if(K<(B+=a=Math.sqrt(P*P+H*H))){B-=a,b=h;break}}var Y=r[b],S=r[b+1],S=Math.atan2(S.y-Y.y,S.x-Y.x),_=K-B,H=Math.sin(S)*_,P=Math.cos(S)*_;return{x:Y.x+P,y:Y.y+H}},$P=function(r,K){if(r){var B;if(0===K)B=r[0][0];else if(100===K)B=(r=r[r.length-1])[r.length-1];else{for(var b=0,f=[],h=r.length,U=0;U<h;U++){var a=r[U];b+=a=ZP(a),f.push(a)}for(var P=gP(K=b*K/100,f),H=0,Y=0;Y<P;Y++)H+=f[Y];B=WP(r[P],K-=H)}return B}},XP=function(r){for(var K,B,b,f,h,U=[],a=-1,P=0,H=((b=r instanceof oz?(B=(K=DP(r)).points,K.segments):(B=r,arguments[1]))||B).length;P<H;P++){if(3===(f=b?b.get(P):1))h=2;else if(4===f)h=3;else{if(5===f)continue;h=1}a+=h,U.push(B.get(a))}return U},cP=(qY(Y1,{_edgeProtectMethod:{getStraightLinePoints:iP,calculateLineLength:ZP,calcSegmentIndexByDistance:gP,calculatePointAlongLine:WP,getPercentPosition:$P,getRealPointsFromDataUI:XP}}),function(r,K){for(var B=r.vertices,b=0;b<B.length;b++){var f=B[b],h=f.y;f.y=f.z,f.z=-h,K&&(f.y+=K)}}),OP=function(r){for(var K,B,b,f,h,U,a=[],P=[],H=[],Y=r.faces,S=0,_=Y.length;S<_;S++,0){var e=Y[S];1===e.i?(K||(K=[],B=[],b=[]),QP(e,S,0,0,r,K,b,B)):2===e.i?(f||(f=[],h=[],U=[]),QP(e,S,0,0,r,f,U,h)):QP(e,S,0,0,r,a,H,P)}return{vs:a,uv:P,ns:H,top_vs:K,top_uv:B,top_ns:b,bottom_vs:f,bottom_uv:h,bottom_ns:U}},QP=function(r,K,B,b,f,h,U,a){var P,H,Y,S=f.vertices,f=f.faceVertexUvs,_=S[r.a],e=S[r.b],S=S[r.c];h.push(_.x,_.y,_.z,e.x,e.y,e.z,S.x,S.y,S.z);3===(h=r.vertexNormals).length?(P=h[0],H=h[1],Y=h[2]):P=H=Y=r.normal,U.push(P.x,P.y,P.z,H.x,H.y,H.z,Y.x,Y.y,Y.z),_=f[0][K][0],e=f[0][K][1],S=f[0][K][2];a.push(_.x,_.y,e.x,e.y,S.x,S.y)},EP=(k$=new e1,w$=new e1,v$=new e1,z$=new e1,N$=new e1,u$=new e1,j$=new e1,I$=new e1,L$=new e1,J$=new e1,F$=new e1,G$=new e1,dt.prototype._findVertex=function(r,K,B){return G$.fromArray(r,3*K),B&&G$.applyMatrix4(B),r=[G$.x,G$.y,G$.z].join(","),(K=this._vertexMap[r])||((B=G$.clone())._key=r,this._vertexMap[r]=K=B),K},dt.prototype._findLine=function(r,K){var B=[r,K];return r._key>K._key&&B.reverse(),B._key=[B[0]._key,B[1]._key].join("|"),(r=this._lineMap[B._key])||((this._lineMap[B._key]=r=B)._triangles={},B._planes={},this._lineList.push(B)),r},d$=new e1(1,0,0),s$=new e1(0,1,0),n$=new e1(0,0,1),A$=new e1,V$=new e1,M$=new B,dt.prototype._addTriangle=function(r,K,B,b,f,h,U,a){var P,H=this._findVertex(r,B,h),Y=this._findVertex(r,b,h),r=this._findVertex(r,f,h),h=this._findLine(H,Y),S=this._findLine(Y,r),_=this._findLine(r,H);K?(P=(new e1).fromArray(K,3*B),B=(new e1).fromArray(K,3*b),b=(new e1).fromArray(K,3*f),U&&(P.applyMatrix3(U),B.applyMatrix3(U),b.applyMatrix3(U)),P._key=At(P,a),B._key=At(B,a),b._key=At(b,a),st(h,0,P,Y,B,r,b),st(S,0,B,r,b,H,P),st(_,0,b,H,P,Y,B)):(V$.subVectors(r,Y),A$.subVectors(Y,H),(P=(new e1).crossVectors(A$,V$))._key=At(P,a),nt(h,r,P),nt(S,H,P),nt(_,Y,P))},dt.prototype._toLineVS=function(r){for(var K=this._lineList,B=0,b=K.length;B<b;++B){var f,h=K[B],U=!1;for(f in h._triangles)if(1==A.keys(h._triangles[f]).length){r.push(h[0].x,h[0].y,h[0].z,h[1].x,h[1].y,h[1].z),U=!0;break}if(!U)for(var a in h._planes)if(1==h._planes[a]._vertices.length){r.push(h[0].x,h[0].y,h[0].z,h[1].x,h[1].y,h[1].z),U=!0;break}}},[function(r,K){var B,b,f,h,U,a,P,H;if((k=r._ctlineModel)||(r._ctlineModel=k=[]),k[0])return k[0];var Y,S,_,e,o,x,T,t,p,q=YY(r)?r:[r],y=["","top_","bottom_"],k=[],w=[];for(zr(q,K,w),B=0,b=w.length;B<b;B++)if((P=w[B])&&(H=P.mesh))for(gm(H),f=0,h=y.length;f<h;f++)if(a=H[y[f]+"lvs"])for(T=k.length,t=a.length,k.length=T+t,p=0;p<t;++p,++T)k[T]=a[p];else if(U=H[y[f]+"vs"]){for(var v=H[y[f]+"is"],z=P.matrix,N=v?v.length:U.length/3,u=0;u<N-1;)x=v?(Y=v[u],S=v[u+1],_=v[u+2],e=v[u+3],o=v[u+4],v[u+5]):(S=(Y=u)+1,_=u+2,e=u+3,o=u+4,u+5),k$.fromArray(U,3*Y),w$.fromArray(U,3*S),v$.fromArray(U,3*_),z$.fromArray(U,3*e),N$.fromArray(U,3*o),u$.fromArray(U,3*x),z&&(k$.applyMatrix4(z),w$.applyMatrix4(z),v$.applyMatrix4(z),z$.applyMatrix4(z),N$.applyMatrix4(z),u$.applyMatrix4(z)),u+=3*function(r,K,B,b,f){for(var h,U=[K,B,b],a=[f,N$,u$],P=[],H=U.length,Y=!0;H--&&Y;){for(var S=U[H],_=a.length,e=!1;_--;)if(S.equals(a[_])){a.splice(_,1),P.push(S),e=!0;break}if(!e){if(h){Y=!1;break}h=S}}return Y&&2===P.length&&(f=a[0],j$.subVectors(h,P[0]),L$.subVectors(f,P[0]),I$.subVectors(h,P[1]),j$.x*I$.y*L$.z+I$.x*L$.y*j$.z+L$.x*j$.y*I$.z-L$.x*I$.y*j$.z-L$.y*I$.z*j$.x-L$.z*I$.x*j$.y<1e-6&&(J$.subVectors(f,P[1]),F$.subVectors(P[1],P[0]),Gt(F$,j$)&&Gt(F$,L$)&&(F$.negate(),Gt(F$,I$)&&Gt(F$,J$))))?(r.push(P[1].x,P[1].y,P[1].z),r.push(h.x,h.y,h.z),r.push(h.x,h.y,h.z),r.push(P[0].x,P[0].y,P[0].z),r.push(P[0].x,P[0].y,P[0].z),r.push(f.x,f.y,f.z),r.push(f.x,f.y,f.z),r.push(P[1].x,P[1].y,P[1].z),2):(r.push(K.x,K.y,K.z),r.push(B.x,B.y,B.z),r.push(B.x,B.y,B.z),r.push(b.x,b.y,b.z),r.push(b.x,b.y,b.z),r.push(K.x,K.y,K.z),1)}(k,k$,w$,v$,z$);u<N&&(_=v?(Y=v[u],S=v[u+1],v[u+2]):(S=(Y=u)+1,u+2),k$.fromArray(U,3*Y),w$.fromArray(U,3*S),v$.fromArray(U,3*_),z&&(k$.applyMatrix4(z),w$.applyMatrix4(z),v$.applyMatrix4(z)),k.push(k$.x,k$.y,k$.z),k.push(w$.x,w$.y,w$.z),k.push(w$.x,w$.y,w$.z),k.push(v$.x,v$.y,v$.z),k.push(v$.x,v$.y,v$.z),k.push(k$.x,k$.y,k$.z))}return r._ctlineModel[0]=k},function(r,K,B){var b,f,h,U,a,P,H,Y=r._ctlineModel;if(Y||(r._ctlineModel=Y=[]),(Y=Y[1])&&Y.epsilon===B)return Y;(Y=[]).epsilon=B;var S,_,e,o=YY(r)?r:[r],x=["","top_","bottom_"],T=new dt,t=[];for(zr(o,K,t),b=0,f=t.length;b<f;b++)if((P=t[b])&&(H=P.mesh))for(gm(H),h=0,U=x.length;h<U;h++)if(a=H[x[h]+"vs"])for(var p=H[x[h]+"is"],q=P.matrix,y=p?p.length:a.length/3,k=0,k=0;k<y;k+=3)e=p?(S=p[k],_=p[k+1],p[k+2]):(_=(S=k)+1,k+2),T._addTriangle(a,P1,S,_,e,q,P1,B);return T._toLineVS(Y),r._ctlineModel[1]=Y},function(r,K,B){var b,f,h,U,a,P,H,Y=r._ctlineModel;if(Y||(r._ctlineModel=Y=[]),(Y=Y[2])&&Y.epsilon===B)return Y;(Y=[]).epsilon=B;var S,_,e,o=YY(r)?r:[r],x=["","top_","bottom_"],T=new dt,t=[];for(zr(o,K,t),b=0,f=t.length;b<f;b++)if((P=t[b])&&(H=P.mesh))for(gm(H),h=0,U=x.length;h<U;h++)if(a=H[x[h]+"vs"])for(var p,q=(p=P.matrix)?M$.getNormalMatrix(p):null,y=H[x[h]+"is"],k=H[x[h]+"ns"],w=y?y.length:a.length/3,v=0,v=0;v<w;v+=3)e=y?(S=y[v],_=y[v+1],y[v+2]):(_=(S=v)+1,v+2),T._addTriangle(a,k,S,_,e,p,q,B);return T._toLineVS(Y),r._ctlineModel[2]=Y}]),rO=function(r,K,B,b,f,h,U,a,P,H){B==H1&&(B=!0),b==H1&&(b=!0),U==H1&&(U=1),a==H1&&(a=0);var Y=new eO,S=($N(Y,r,K,P),Y=Y.toShapes(),P1);return H&&(H.length?S={minX:H[0],minY:-H[3],maxX:H[2],maxY:-H[1]}:(S={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Y.forEach(function(r){r=r.getBoundingBox(),S.minX=b1(r.minX,S.minX),S.minY=b1(r.minY,S.minY),S.maxX=B1(r.maxX,S.maxX),S.maxY=B1(r.maxY,S.maxY)}))),OP(new uO(Y,{top:B,bottom:b,curveSegments:f,amount:U,repeatUVLength:h,boundingBox:S},-U/2+a))},KO=function(r,K){this.repeatUVLength=r,this._bb=K},BO=(KO.prototype={generateTopUV:function(r,K,B,b,f,h,U){var a,P,H,Y=(r=r.vertices)[b].x,b=r[b].y,S=r[f].x,f=r[f].y,_=r[h].x,r=r[h].y;return K=(h=this.repeatUVLength)?(P=a=0,H=h):(this._bb||(this._bb=K.getBoundingBox()),a=(h=this._bb).minX,P=h.minY,H=h.maxX-a,h.maxY-P),U?[new i((Y-a)/H,(b-P)/K),new i((S-a)/H,(f-P)/K),new i((_-a)/H,(r-P)/K)]:[new i((Y-a)/H,1-(b-P)/K),new i((S-a)/H,1-(f-P)/K),new i((_-a)/H,1-(r-P)/K)]},generateBottomUV:function(r,K,B,b,f,h){return this.generateTopUV(r,K,B,b,f,h,!0)},generateSideWallUV:function(r,K,B,b,f,h,U,a,P,H,Y,S){if(!this._cl){for(var _=[],e=0,o=B.length,x=0;x<o;x++){var T=B[x],t=B[(x+1)%o],p=T.x-t.x,T=T.y-t.y,t=u1(p*p+T*T);_.push(e),e+=t}for(x=0;x<o;x++)_[x]/=e;this._cl=_}var q=1-P/H,P=1-(P+1)/H;return(H=(_=this._cl)[Y])<(Y=_[S])&&(H+=1),[new i(H,q),new i(Y,q),new i(Y,P),new i(H,P)]}},function(r,K,B,b,f,h){this.a=r,this.b=K,this.c=B,this.i=h,this.normal=b instanceof e1?b:new e1,this.vertexNormals=b instanceof Array?b:[]}),bO=(BO.prototype={constructor:BO},[-8,14,2,10,2,7,3,2,-1]),fO=function(){if(fO.eye!=H1)return fO.eye;for(var r=iN.eye,K=bO,B=PP.prototype.getClassName(),b="",f=!1,B=+new V[B.substr(3,3)+$n[0]],h=0;h<K.length;h++){var U=K.length-h;b+=h%2==0?K[h]+U+"":K[h]-U+""}for(h=0;h<4;h++)b+=0;if((b=b*b.length/b.length)<B){if(r&&r[0]&&r[4/R.length]){for(var a,P,H,Y,S,_,e,o,x=r[0],T=r[1],t="",p=0,h=0;h<T.length;h++)'"'===T[h]?o?(o=!1,p%2!=0&&(a==H1?a=t:P==H1?P=t:H==H1?H=t:Y==H1?Y=t:S==H1?S=t:_==H1?_=t:e==H1&&(e=t)),p++,t=""):o=!0:o&&(t+=T[h]);for(var q,y,k,w="",v=0,h=0;h<x.length;h++)'"'===x[h]?q?(q=!1,v%2!=0&&(y==H1?y=w:k==H1&&(k=w)),v++,w=""):q=!0:q&&(w+=x[h]);var r=a+P+H+Y+S+_,z=!_||_===UK||!UK&&_===AK.toString()[0];if(!z&&_)for(var N,h=0,u=_.length;h<u;h++)_[h]===on[4]?N===UK?z=hn:N[0]===Eu[7]&&UK&&0<=UK.indexOf(N.substr(1))?z=an:N=H1:(N==H1?N=_[h]:N+=_[h],h===u-1&&(N===UK?z=hn:N[0]===Eu[7]&&UK&&0<=UK.indexOf(N.substr(1))&&(z=an)));(f=q1(r,e)&&q1(y,k)&&y===a&&z&&(!S||B<S))&&0<=H.indexOf(mK[0])&&(fO[mK[0]]=1),f&&0<=H.indexOf(1)&&(fO[1]=1),f&&0<=H.indexOf(3)&&(fO[2]=1),f&&0<=H.indexOf(4)&&(fO[3]=1),f&&0<=H.indexOf(7)&&(fO[4]=1),f&&0<=H.indexOf(Nn[1])&&(fO[Nn[1]]=1),f&&0<=H.indexOf(Gu[0])&&(fO[Gu[0]]=1)}}else f=!0,fO[mK[0]]=fO[1]=fO[2]=fO[3]=fO[4]=fO[Nn[1]]=fO[Gu[0]]=1;return fO.eye=f},hO=function(){},UO=hO.prototype,aO=(UO.getPointAt=function(r){return r=this.getUtoTmapping(r),this.getPoint(r)},UO.getPoints=function(r){r=r||5;for(var K=[],B=0;B<=r;B++)K.push(this.getPoint(B/r));return K},UO.getSpacedPoints=function(r){r=r||5;for(var K=[],B=0;B<=r;B++)K.push(this.getPointAt(B/r));return K},UO.getLength=function(){var r=this.getLengths();return r[r.length-1]},UO.getLengths=function(r){if(r=r||this.__arcLengthDivisions||200,this.cacheArcLengths&&this.cacheArcLengths.length==r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var K,B,b=[],f=this.getPoint(0),h=0;for(b.push(0),B=1;B<=r;B++)h+=(K=this.getPoint(B/r)).distanceTo(f),b.push(h),f=K;return this.cacheArcLengths=b},UO.getUtoTmapping=function(r,K){for(var B,b=this.getLengths(),f=0,h=b.length,U=K||r*b[h-1],a=0,P=h-1;a<=P;)if((B=b[f=z1(a+(P-a)/2)]-U)<0)a=f+1;else{if(!(0<B)){P=f;break}P=f-1}return b[f=P]==U?f/(h-1):(f+(U-(K=b[f]))/(b[f+1]-K))/(h-1)},UO.getTangent=function(r){var K=r-1e-4,K=(1<(r=r+1e-4)&&(r=1),this.getPoint(K=K<0?0:K));return this.getPoint(r).clone().sub(K).normalize()},UO.getTangentAt=function(r){return r=this.getUtoTmapping(r),this.getTangent(r)},hO.create=function(r,K){return r.prototype=MY(hO.prototype),r.prototype.getPoint=K,r},function(){this.curves=[],this.autoClose=!1}),PO=((B=aO.prototype=MY(UO)).add=function(r){this.curves.push(r)},B.closePath=function(){var r=this.curves[0].getPoint(0),K=this.curves[this.curves.length-1].getPoint(1);r.equals(K)||this.curves.push(new pO(K,r))},B.getPoint=function(r){for(var K,B,b=r*this.getLength(),f=this.getCurveLengths(),h=0;h<f.length;){if(f[h]>=b)return B=1-(f[h]-b)/(K=this.curves[h]).getLength(),K.getPointAt(B);h++}return null},B.getLength=function(){var r=this.getCurveLengths();return r[r.length-1]},B.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;for(var r=[],K=0,B=this.curves.length,b=0;b<B;b++)K+=this.curves[b].getLength(),r.push(K);return this.cacheLengths=r},B.getTransformedPoints=function(r){return this.getPoints(r)},B.getBoundingBox=function(){for(var r,K,B,b,f,h=this.getPoints(),U=r=Number.NEGATIVE_INFINITY,a=B=Number.POSITIVE_INFINITY,P=h[0]instanceof e1,H=new(P?e1:i),Y=0,S=h.length;Y<S;Y++)(f=h[Y]).x>U&&(U=f.x),f.x<a&&(a=f.x),f.y>r&&(r=f.y),f.y<B&&(B=f.y),P&&(f.z>K&&(K=f.z),f.z<b&&(b=f.z)),H.add(f);var _={minX:a,minY:B,maxX:U,maxY:r};return P&&(_.maxZ=K,_.minZ=b),_},function(r){aO.call(this),this.actions=[],r&&this.fromPoints(r)}),B=PO.prototype=MY(aO.prototype),HO="moveTo",YO="quadraticCurveTo",SO="bezierCurveTo",_O="ellipse",eO=(B.fromPoints=function(r){this.moveTo(r[0].x,r[0].y);for(var K=1,B=r.length;K<B;K++)this.lineTo(r[K].x,r[K].y)},B.moveTo=function(r,K){var B=Array.prototype.slice.call(arguments);this.actions.push({action:HO,args:B})},B.lineTo=function(r,K){var B=Array.prototype.slice.call(arguments),b=(f=this.actions[this.actions.length-1].args)[f.length-2],f=f[f.length-1],b=new pO(new i(b,f),new i(r,K));this.curves.push(b),this.actions.push({action:"lineTo",args:B})},B.quadraticCurveTo=function(r,K,B,b){var f=Array.prototype.slice.call(arguments),h=(U=this.actions[this.actions.length-1].args)[U.length-2],U=U[U.length-1],h=new qO(new i(h,U),new i(r,K),new i(B,b));this.curves.push(h),this.actions.push({action:YO,args:f})},B.bezierCurveTo=function(r,K,B,b,f,h){var U=Array.prototype.slice.call(arguments),a=(P=this.actions[this.actions.length-1].args)[P.length-2],P=P[P.length-1],a=new yO(new i(a,P),new i(r,K),new i(B,b),new i(f,h));this.curves.push(a),this.actions.push({action:SO,args:U})},B.arc=function(r,K,B,b,f,h){var U=(a=this.actions[this.actions.length-1].args)[a.length-2],a=a[a.length-1];this.absarc(r+U,K+a,B,b,f,h)},B.absarc=function(r,K,B,b,f,h){this.absellipse(r,K,B,B,b,f,h)},B.ellipse=function(r,K,B,b,f,h,U){var a=(P=this.actions[this.actions.length-1].args)[P.length-2],P=P[P.length-1];this.absellipse(r+a,K+P,B,b,f,h,U)},B.absellipse=function(r,K,B,b,f,h,U){var a=Array.prototype.slice.call(arguments),r=new tO(r,K,B,b,f,h,U),K=(this.curves.push(r),r.getPoint(1));a.push(K.x),a.push(K.y),this.actions.push({action:_O,args:a})},B.getSpacedPoints=function(r,K){r=r||40;for(var B=[],b=0;b<r;b++)B.push(this.getPoint(b/r));return B},B.getPoints=function(r,K){r=r||12;for(var B,b,f,h,U,a,P,H,Y,S,_,e,o,x,T,t,p,q=[],y=0,k=this.actions.length;y<k;y++)switch(b=(B=this.actions[y]).action,f=B.args,b){case HO:case"lineTo":q.push(new i(f[0],f[1]));break;case YO:for(h=f[2],U=f[3],H=f[0],Y=f[1],_=0<q.length?(S=(e=q[q.length-1]).x,e.y):(S=(e=this.actions[y-1].args)[e.length-2],e[e.length-1]),J=1;J<=r;J++)x=oO.b2(o=J/r,S,H,h),T=oO.b2(o,_,Y,U),q.push(new i(x,T));break;case SO:for(h=f[4],U=f[5],H=f[0],Y=f[1],a=f[2],P=f[3],_=0<q.length?(S=(e=q[q.length-1]).x,e.y):(S=(e=this.actions[y-1].args)[e.length-2],e[e.length-1]),J=1;J<=r;J++)x=oO.b3(o=J/r,S,H,a,h),T=oO.b3(o,_,Y,P,U),q.push(new i(x,T));break;case"arc":for(var w=f[0],v=f[1],z=f[2],N=f[3],u=f[4],j=!!f[5],I=u-N,L=2*r,J=1;J<=L;J++)o=J/L,x=w+z*S1(F=N+(o=j?o:1-o)*I),T=v+z*f1(F),q.push(new i(x,T));break;case _O:for(var F,w=f[0],v=f[1],G=f[2],A=f[3],N=f[4],u=f[5],j=!!f[6],I=u-N,L=2*r,J=1;J<=L;J++)o=J/L,x=w+G*S1(F=N+(o=j?o:1-o)*I),T=v+A*f1(F),q.push(new i(x,T))}var d=T1["shape3d.point.epsilon"],s=!1,k=q.length;for(y=0,k=q.length;y<k;y++)t=q[y],p=y===k-1?q[0]:q[y+1],t&&p&&j1(t.x-p.x)<d&&j1(t.y-p.y)<d&&(s=!0,q[y]=null);if(s){for(var n=[],y=0;y<k;y++)q[y]&&n.push(q[y]);q=n}return K&&q.push(q[0]),q},B.toShapes=function(r,K){function B(r){for(var K=[],B=0,b=r.length;B<b;B++){var f=r[B],h=new eO;h.actions=f.actions,h.curves=f.curves,K.push(h)}return K}var b=function(r){for(var K,B,b=[],f=new PO,h=0,U=r.length;h<U;h++)B=(K=r[h]).args,(K=K.action)==HO&&0!=f.actions.length&&(b.push(f),f=new PO),f[K].apply(f,B);return 0!=f.actions.length&&b.push(f),b}(this.actions);if(0==b.length)return[];if(!0===K)return B(b);var f,h,U,a=[];if(1==b.length)return h=b[0],(U=new eO).actions=h.actions,U.curves=h.curves,a.push(U),a;var P,H,Y,S,_,e,o=!oO.isClockWise(b[0].getPoints()),o=r?!o:o,x=[],T=[],t=[],p=0;for(T[p]=P1,t[p]=[],H=0,Y=b.length;H<Y;H++)P=(h=b[H]).getPoints(),f=oO.isClockWise(P),(f=r?!f:f)?(!o&&T[p]&&p++,T[p]={s:new eO,p:P},T[p].s.actions=h.actions,T[p].s.curves=h.curves,o&&p++,t[p]=[]):t[p].push({h:h,p:P[0]});if(!T[0])return B(b);if(1<T.length){for(var q=!1,y=[],k=0,w=T.length;k<w;k++)x[k]=[];for(k=0,w=T.length;k<w;k++){T[k];for(var v=t[k],z=0;z<v.length;z++){for(var N=v[z],u=!0,j=0;j<T.length;j++)!function(r,K){for(var B=K.length,b=!1,f=B-1,h=0;h<B;f=h++){var U=K[f],a=K[h],P=a.x-U.x,H=a.y-U.y;if(1e-10<j1(H)){if(H<0&&(U=K[h],P=-P,a=K[f],H=-H),!(r.y<U.y||r.y>a.y))if(r.y==U.y){if(r.x==U.x)return 1}else{if(0==(H=H*(r.x-U.x)-P*(r.y-U.y)))return 1;H<0||(b=!b)}}else if(r.y==U.y&&(a.x<=r.x&&r.x<=U.x||U.x<=r.x&&r.x<=a.x))return 1}return b}(N.p,T[j].p)||(k!=j&&y.push({froms:k,tos:j,hole:z}),u?(u=!1,x[j].push(N)):q=!0);u&&x[k].push(N)}}0<y.length&&(q||(t=x))}for(H=0,Y=T.length;H<Y;H++)for(U=T[H].s,a.push(U),_=0,e=(S=t[H]).length;_<e;_++)U.holes.push(S[_].h);return a},function(){PO.apply(this,arguments),this.holes=[]}),oO=((B=eO.prototype=MY(B)).getPointsHoles=function(r){for(var K=this.holes.length,B=[],b=0;b<K;b++)B[b]=this.holes[b].getTransformedPoints(r);return B},B.extractAllPoints=function(r){return{shape:this.getTransformedPoints(r),holes:this.getPointsHoles(r)}},B.extractPoints=function(r){return this.extractAllPoints(r)},{triangulateShape:function(k,r){function w(r,K,B){return r.x!=K.x?r.x<K.x?r.x<=B.x&&B.x<=K.x:K.x<=B.x&&B.x<=r.x:r.y<K.y?r.y<=B.y&&B.y<=K.y:K.y<=B.y&&B.y<=r.y}function v(r,K,B,b,f){var h=K.x-r.x,U=K.y-r.y,a=b.x-B.x,P=b.y-B.y,H=r.x-B.x,Y=r.y-B.y,S=U*a-h*P,_=U*H-h*Y;if(1e-10<j1(S)){if(0<S){if(_<0||S<_)return[];if((e=P*H-a*Y)<0||S<e)return[]}else{if(0<_||_<S)return[];if(0<(e=P*H-a*Y)||e<S)return[]}if(0==e)return!f||0!=_&&_!=S?[r]:[];if(e==S)return!f||0!=_&&_!=S?[K]:[];if(0==_)return[B];if(_==S)return[b];var e=e/S;return[{x:r.x+e*h,y:r.y+e*U}]}if(0!=_||P*H!=a*Y)return[];var o,x,T,t,p,q,y,e=0==a&&0==P;return(S=0==h&&0==U)&&e?r.x!=B.x||r.y!=B.y?[]:[r]:S?w(B,b,r)?[r]:[]:e?w(r,K,B)?[B]:[]:(_=0!=h?(t=r.x<K.x?(T=(o=r).x,(x=K).x):(T=(o=K).x,(x=r).x),B.x<b.x?(y=(p=B).x,(q=b).x):(y=(p=b).x,(q=B).x)):(t=r.y<K.y?(T=(o=r).y,(x=K).y):(T=(o=K).y,(x=r).y),B.y<b.y?(y=(p=B).y,(q=b).y):(y=(p=b).y,(q=B).y)),T<=y?t<y?[]:t==y?f?[]:[p]:t<=_?[p,x]:[p,q]:_<T?[]:T==_?f?[]:[o]:t<=_?[o,x]:[o,q])}function z(r,K,B,b){var f=K.x-r.x,K=K.y-r.y,h=B.x-r.x,B=B.y-r.y,U=b.x-r.x,b=b.y-r.y,r=f*B-K*h,f=f*b-K*U;return 1e-10<j1(r)?(K=U*B-b*h,0<r?0<=f&&0<=K:0<=f||0<=K):0<f}for(var K,B,b,f,h={},U=k.concat(),a=0,P=r.length;a<P;a++)Array.prototype.push.apply(U,r[a]);for(Y=0,S=U.length;Y<S;Y++)h[b=U[Y].x+":"+U[Y].y],h[b]=Y;for(var k=function(U){for(var r,K,B,b,f=k.concat(),a=[],h=[],P=0,H=U.length;P<H;P++)a.push(P);for(var Y,S,_,e,o,x=0,T=2*a.length;0<a.length&&!(--T<0);)for(r=x;r<f.length;r++){for(var t=f[r],p=-1,P=0;P<a.length;P++)if(K=a[P],h[B=t.x+":"+t.y+":"+K]===P1){for(var q=U[K],y=0;y<q.length;y++)if(b=q[y],Y=r,S=y,o=e=_=void 0,_=f.length-1,e=Y-1,o=Y+1,z(f[Y],f[e=e<0?_:e],f[o=_<o?0:o],q[S])&&(e=q.length-1,!!z(q[S],q[_=(_=S-1)<0?e:_],q[o=e<(o=S+1)?0:o],f[Y]))&&!function(r,K){for(var B,b=0;b<f.length;b++)if(B=b+1,B%=f.length,0<v(r,K,f[b],f[B],!0).length)return 1}(t,b)&&!function(r,K){for(var B,b,f,h=0;h<a.length;h++)for(B=U[a[h]],b=0;b<B.length;b++)if(f=b+1,f%=B.length,0<v(r,K,B[b],B[f],!0).length)return 1}(t,b)){p=y,a.splice(P,1),b=f.slice(0,r+1),_=f.slice(r),e=q.slice(p),S=q.slice(0,p+1),f=b.concat(e).concat(S).concat(_),x=r;break}if(0<=p)break;h[B]=!0}if(0<=p)break}return f}(r),H=xO.Triangulate(k,!1),Y=0,S=H.length;Y<S;Y++)for(B=H[Y],K=0;K<3;K++)(f=h[b=B[K].x+":"+B[K].y])!==P1&&(B[K]=f);return H.concat()},isClockWise:function(r){return xO.Triangulate.area(r)<0},b2p0:function(r,K){return(r=1-r)*r*K},b2p1:function(r,K){return 2*(1-r)*r*K},b2p2:function(r,K){return r*r*K},b2:function(r,K,B,b){return this.b2p0(r,K)+this.b2p1(r,B)+this.b2p2(r,b)},b3p0:function(r,K){return(r=1-r)*r*r*K},b3p1:function(r,K){var B=1-r;return 3*B*B*r*K},b3p2:function(r,K){return 3*(1-r)*r*r*K},b3p3:function(r,K){return r*r*r*K},b3:function(r,K,B,b,f){return this.b3p0(r,K)+this.b3p1(r,B)+this.b3p2(r,b)+this.b3p3(r,f)}}),xO={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var r=A.keys(this.faces);return r.length?r[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(r){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(r){var K=r.familyName.toLowerCase();return this.faces[K]=this.faces[K]||{},this.faces[K][r.cssFontWeight]=this.faces[K][r.cssFontWeight]||{},this.faces[K][r.cssFontWeight][r.cssFontStyle]=r},drawText:function(r){for(var K=this.getFace(),B=this.size/K.resolution,b=0,f=String(r).split(""),h=f.length,U=[],a=0;a<h;a++){var P=new PO;(P=this.extractGlyphPoints(f[a],K,B,b,P))&&(b+=P.offset*this.spacing,U.push(P.path))}return{paths:U,offset:b/2}},extractGlyphPoints:function(r,K,B,b,f){var h,U,a,P,H,Y,S,_,e,o,x,T,t,p,q,y,k,w,v=[];if(r=K.glyphs[r]||K.glyphs["?"]){if(r.o)for(H=(P=r._cachedOutline||(r._cachedOutline=r.o.split(" "))).length,S=Y=B,h=0;h<H;)switch(P[h++]){case"m":_=P[h++]*Y+b,e=P[h++]*S,f.moveTo(_,e);break;case"l":_=P[h++]*Y+b,e=P[h++]*S,f.lineTo(_,e);break;case"q":if(o=P[h++]*Y+b,x=P[h++]*S,p=P[h++]*Y+b,q=P[h++]*S,f.quadraticCurveTo(p,q,o,x),w=v[v.length-1])for(T=w.x,t=w.y,U=1,a=this.divisions;U<=a;U++){var z=U/a;oO.b2(z,T,p,o),oO.b2(z,t,q,x)}break;case"b":if(o=P[h++]*Y+b,x=P[h++]*S,p=P[h++]*Y+b,q=P[h++]*S,y=P[h++]*Y+b,k=P[h++]*S,f.bezierCurveTo(p,q,y,k,o,x),w=v[v.length-1])for(T=w.x,t=w.y,U=1,a=this.divisions;U<=a;U++)oO.b3(z=U/a,T,p,y,o),oO.b3(z,t,q,k,x)}return{offset:r.ha*B,path:f}}},generateShapes:function(r,K){var B=(K=K||{}).font;if(B===P1&&!(B=xO.getDefaultFont()))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var b=K.size!==P1?K.size:1,f=K.curveSegments!==P1?K.curveSegments:4,h=K.spacing!==P1?K.spacing:1,U=K.weight!==P1?K.weight:"normal",K=K.style!==P1?K.style:"normal";xO.size=b,xO.divisions=f,xO.face=B,xO.weight=U,xO.style=K,xO.spacing=h;for(var a=xO.drawText(r).paths,P=[],H=0,Y=a.length;H<Y;H++)Array.prototype.push.apply(P,a[H].toShapes());return P}},TO=(R$=1e-10,(B=xO).Triangulate=function(r,K){var B=r.length;if(B<3)return null;var b,f,h=[],U=[],a=[];if(0<Vt(r))for(Y=0;Y<B;Y++)U[Y]=Y;else for(Y=0;Y<B;Y++)U[Y]=B-1-Y;for(var P=B,H=2*P,Y=P-1;2<P;){if(H--<=0)return K?a:h;if(function(r,K,B,b,f,h){var U,a,P,H,Y,S,_,e,o,x=r[h[K]].x,T=r[h[K]].y,t=r[h[B]].x,p=r[h[B]].y,q=r[h[b]].x,y=r[h[b]].y;if(!((t-x)*(y-T)-(p-T)*(q-x)<R$)){for(H=q-t,Y=y-p,S=x-q,_=T-y,e=t-x,o=p-T,U=0;U<f;U++)if(a=r[h[U]].x,P=r[h[U]].y,!(a===x&&P===T||a===t&&P===p||a===q&&P===y)&&-R$<=H*(P-p)-Y*(a-t)&&-R$<=S*(P-y)-_*(a-q)&&-R$<=e*(P-T)-o*(a-x))return;return 1}}(r,b=P<=(b=Y)?0:b,Y=P<=(Y=b+1)?0:Y,f=P<=(f=Y+1)?0:f,P,U)){var S,_,e=U[b],o=U[Y],x=U[f];for(h.push([r[e],r[o],r[x]]),a.push([U[b],U[Y],U[f]]),_=(S=Y)+1;_<P;S++,_++)U[S]=U[_];H=2*--P}}return K?a:h},B.Triangulate.area=Vt,V._typeface_js={faces:xO.faces,loadFace:xO.loadFace},function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]}),B=TO.prototype={constructor:TO,computeFaceNormals:function(){for(var r=new e1,K=new e1,B=0,b=this.faces.length;B<b;B++){var f=this.faces[B],h=this.vertices[f.a],U=this.vertices[f.b],a=this.vertices[f.c];r.subVectors(a,U),K.subVectors(h,U),r.cross(K),r.normalize(),f.normal.copy(r)}},computeVertexNormals:function(r){for(var K,B=new Array(this.vertices.length),b=0,f=this.vertices.length;b<f;b++)B[b]=new e1;if(r)for(var h,U,a,P=new e1,H=new e1,Y=0,S=this.faces.length;Y<S;Y++)K=this.faces[Y],h=this.vertices[K.a],U=this.vertices[K.b],a=this.vertices[K.c],P.subVectors(a,U),H.subVectors(h,U),P.cross(H),B[K.a].add(P),B[K.b].add(P),B[K.c].add(P);else for(Y=0,S=this.faces.length;Y<S;Y++)B[(K=this.faces[Y]).a].add(K.normal),B[K.b].add(K.normal),B[K.c].add(K.normal);for(b=0,f=this.vertices.length;b<f;b++)B[b].normalize();for(Y=0,S=this.faces.length;Y<S;Y++)(K=this.faces[Y]).vertexNormals[0]=B[K.a].clone(),K.vertexNormals[1]=B[K.b].clone(),K.vertexNormals[2]=B[K.c].clone()},mergeVertices:function(){for(var r,K,B,b,f={},h=[],U=[],a=L1(10,4),P=0,H=this.vertices.length;P<H;P++)r=this.vertices[P],f[r=v1(r.x*a)+"_"+v1(r.y*a)+"_"+v1(r.z*a)]===P1?(f[r]=P,h.push(this.vertices[P]),U[P]=h.length-1):U[P]=U[f[r]];for(var Y=[],P=0,H=this.faces.length;P<H;P++){(K=this.faces[P]).a=U[K.a],K.b=U[K.b],K.c=U[K.c];for(var S=[K.a,K.b,K.c],_=0;_<3;_++)if(S[_]==S[(_+1)%3]){Y.push(P);break}}for(P=Y.length-1;0<=P;P--){var e=Y[P];for(this.faces.splice(e,1),B=0,b=this.faceVertexUvs.length;B<b;B++)this.faceVertexUvs[B].splice(e,1)}var o=this.vertices.length-h.length;return this.vertices=h,o}},tO=function(r,K,B,b,f,h,U){this.aX=r,this.aY=K,this.xRadius=B,this.yRadius=b,this.aStartAngle=f,this.aEndAngle=h,this.aClockwise=U},pO=(tO.prototype=MY(UO),tO.prototype.getPoint=function(r){(K=this.aEndAngle-this.aStartAngle)<0&&(K+=h1),h1<K&&(K-=h1),r=!0===this.aClockwise?this.aEndAngle+(1-r)*(h1-K):this.aStartAngle+r*K;var K=this.aX+this.xRadius*S1(r),r=this.aY+this.yRadius*f1(r);return new i(K,r)},function(r,K){this.v1=r,this.v2=K}),qO=((h=pO.prototype=MY(UO)).getPoint=function(r){var K=this.v2.clone().sub(this.v1);return K.multiplyScalar(r).add(this.v1),K},h.getPointAt=function(r){return this.getPoint(r)},h.getTangent=function(r){return this.v2.clone().sub(this.v1).normalize()},function(r,K,B){this.v0=r,this.v1=K,this.v2=B}),yO=(qO.prototype=MY(UO),qO.prototype.getPoint=function(r){var K=oO.b2(r,this.v0.x,this.v1.x,this.v2.x),r=oO.b2(r,this.v0.y,this.v1.y,this.v2.y);return new i(K,r)},function(r,K,B,b){this.v0=r,this.v1=K,this.v2=B,this.v3=b}),kO=(yO.prototype=MY(UO),yO.prototype.getPoint=function(r){var K=oO.b3(r,this.v0.x,this.v1.x,this.v2.x,this.v3.x),r=oO.b3(r,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new i(K,r)},hO.create(function(r,K){this.v1=r,this.v2=K},function(r){var K=new e1;return K.subVectors(this.v2,this.v1),K.multiplyScalar(r),K.add(this.v1),K}),hO.create(function(r,K,B){this.v0=r,this.v1=K,this.v2=B},function(r){var K=oO.b2(r,this.v0.x,this.v1.x,this.v2.x),B=oO.b2(r,this.v0.y,this.v1.y,this.v2.y),r=oO.b2(r,this.v0.z,this.v1.z,this.v2.z);return new e1(K,B,r)})),wO=hO.create(function(r,K,B,b){this.v0=r,this.v1=K,this.v2=B,this.v3=b},function(r){var K=oO.b3(r,this.v0.x,this.v1.x,this.v2.x,this.v3.x),B=oO.b3(r,this.v0.y,this.v1.y,this.v2.y,this.v3.y),r=oO.b3(r,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return new e1(K,B,r)}),vO=function(r,A,V,K,B,b,f,h){TO.call(this),K=K!==P1?K:.5,B=B!==P1?B:.5,r=r||8,b=b||0,f=f||h1;for(var U=(h=h!==P1?h:1)/2,a=[],P=[],H=this.vertices,Y=this.faces,S=this.faceVertexUvs,_=0;_<=1;_++){for(var e=[],o=[],x=+_,T=x*(B-K)+K,t=0;t<=r;t++){var p=t/r,q=new e1,y=-(p*f+b);q.z=T*f1(y),q.y=-x*h+U,q.x=T*S1(y),H.push(q),e.push(H.length-1),o.push(new i(p,x))}a.push(e),P.push(o)}for(var k,w,v=(B-K)/h,t=0;t<r;t++)for(w=0!==K?(k=H[a[0][t]].clone(),H[a[0][t+1]].clone()):(k=H[a[1][t]].clone(),H[a[1][t+1]].clone()),k.setY(u1(k.x*k.x+k.z*k.z)*v).normalize(),w.setY(u1(w.x*w.x+w.z*w.z)*v).normalize(),_=0;_<1;_++){var z=a[_][t],N=a[_+1][t],u=a[_+1][t+1],j=a[_][t+1],I=k.clone(),L=k.clone(),J=w.clone(),F=w.clone(),G=P[_][t].clone(),d=P[_+1][t].clone(),M=P[_+1][t+1].clone(),R=P[_][t+1].clone();Y.push(new BO(z,N,j,[I,L,F])),S[0].push([G,d,R]),Y.push(new BO(N,u,j,[L.clone(),J,F.clone()])),S[0].push([d.clone(),M,R.clone()])}if(A&&0<K)for(this.vertices.push(new e1(0,U,0)),t=0;t<r;t++){z=a[0][t],N=a[0][t+1],u=this.vertices.length-1,I=new e1(0,1,0),L=new e1(0,1,0),J=new e1(0,1,0),G=P[0][t].clone(),d=P[0][t+1].clone(),M=new i(d.x,0),Y.push(new BO(z,N,u,[I,L,J],0,1));var l=S1(s=t/r*h1),C=f1(s),m=S1(n=(t+1)/r*h1),D=f1(n);S[0].push([new i(.5+.5*l,.5+.5*C),new i(.5+.5*m,.5+.5*D),new i(.5,.5)])}if(V&&0<B)for(this.vertices.push(new e1(0,-U,0)),t=0;t<r;t++){z=a[_][t+1],N=a[_][t],u=H.length-1,I=new e1(0,-1,0),L=new e1(0,-1,0),J=new e1(0,-1,0),G=P[_][t+1].clone(),d=P[_][t].clone(),Y.push(new BO(z,N,u,[I,L,J],0,2));var s,n,l=S1(s=t/r*h1),C=f1(s),m=S1(n=(t+1)/r*h1),D=f1(n);S[0].push([new i(.5+.5*m,.5-.5*D),new i(.5+.5*l,.5-.5*C),new i(.5,.5)])}},zO=(vO.prototype=MY(B),function(r,K,B,b,f,h,U){TO.call(this),U=U||.5,r=r||16,K=K||16,B=(B!==P1?B:0)-F,b=b!==P1?b:h1,f=f!==P1?f:0,h=h!==P1?h:F;for(var a=[],P=[],H=this.vertices,Y=this.faces,S=this.faceVertexUvs,_=0;_<=K;_++){for(var e=[],o=[],x=0;x<=r;x++){var T=x/r,t=_/K,p=new e1;p.x=-U*S1(B+T*b)*f1(f+t*h),p.y=U*S1(f+t*h),p.z=U*f1(B+T*b)*f1(f+t*h),H.push(p),e.push(H.length-1),o.push(new i(T,t))}a.push(e),P.push(o)}for(_=0;_<K;_++)for(x=0;x<r;x++){var q=a[_][x+1],y=a[_][x],k=a[_+1][x],w=a[_+1][x+1],v=H[q].clone().normalize(),z=H[y].clone().normalize(),N=H[k].clone().normalize(),u=H[w].clone().normalize(),j=P[_][x+1].clone(),I=P[_][x].clone(),L=P[_+1][x].clone(),J=P[_+1][x+1].clone();j1(H[q].y)===U?(j.x=(j.x+I.x)/2,Y.push(new BO(q,k,w,[v,N,u])),S[0].push([j,L,J])):j1(H[k].y)===U?(L.x=(L.x+J.x)/2,Y.push(new BO(q,y,k,[v,z,N])),S[0].push([j,I,L])):(Y.push(new BO(q,y,w,[v,z,u])),S[0].push([j,I,J]),Y.push(new BO(y,k,w,[z.clone(),N,u.clone()])),S[0].push([I.clone(),L,J.clone()]))}}),NO=(zO.prototype=MY(B),function(r,K,B,b,f,h){TO.call(this),r=r||.33,K=K||.17,b=b||8,B=B||6,f=f||0,h=h||h1;for(var U=new e1,a=[],P=[],H=0;H<=b;H++)for(var Y=H/b*h1+F,S=0;S<=B;S++){var _=S/B*h+f,e=(U.x=r*S1(_),U.z=-r*f1(_),new e1),o=r+K*S1(Y);e.x=o*S1(_),e.z=-o*f1(_),e.y=K*f1(Y),this.vertices.push(e),a.push(new i(S/B,1-H/b)),P.push(e.clone().sub(U).normalize())}for(H=1;H<=b;H++)for(S=1;S<=B;S++){var x=(B+1)*H+S-1,T=(B+1)*(H-1)+S-1,t=(B+1)*(H-1)+S,p=(B+1)*H+S,q=new BO(x,T,p,[P[x].clone(),P[T].clone(),P[p].clone()]);this.faces.push(q),this.faceVertexUvs[0].push([a[x].clone(),a[T].clone(),a[p].clone()]),q=new BO(T,t,p,[P[T].clone(),P[t].clone(),P[p].clone()]),this.faces.push(q),this.faceVertexUvs[0].push([a[T].clone(),a[t].clone(),a[p].clone()])}this.computeFaceNormals()}),uO=(NO.prototype=MY(B),function(r,K,B){r&&(TO.call(this),r=r instanceof Array?r:[r],this.addShapeList(r,K),!1!==K.convertYZ&&cP(this,B),this.computeFaceNormals())}),jO=((h=uO.prototype=MY(TO.prototype)).addShapeList=function(r,K){for(var B=r.length,b=0;b<B;b++){var f=r[b];this.addShape(f,K)}},h.addShape=function(T,t){var r,K,B,b,f,h,U=t.amount,a=t.curveSegments||rA,p=t.steps||1,P=t.extrudePath,H=!1,q=new KO(t.repeatUVLength,t.boundingBox),y=(P&&(r=P.getSpacedPoints(p),H=!0,K=t.frames!==P1?t.frames:new jO.FrenetFrames(P,p,!1),B=new e1,b=new e1,f=new e1),this),k=this.vertices.length,Y=(P=T.extractPoints(a)).shape,S=P.holes;if(!oO.isClockWise(Y))for(Y=Y.reverse(),e=0,o=S.length;e<o;e++)h=S[e],oO.isClockWise(h)&&(S[e]=h.reverse());for(var _=oO.triangulateShape(Y,S),a=Y,e=0,o=S.length;e<o;e++)h=S[e],Y=Y.concat(h);for(var x,w,v,z=Y.length,N=_.length,u=0;u<z;u++)x=Y[u],H?(b.copy(K.normals[0]).multiplyScalar(x.x),B.copy(K.binormals[0]).multiplyScalar(x.y),f.copy(r[0]).add(b).add(B),J(f.x,f.y,f.z)):J(x.x,x.y,0);for(v=1;v<=p;v++)for(u=0;u<z;u++)x=Y[u],H?(b.copy(K.normals[v]).multiplyScalar(x.x),B.copy(K.binormals[v]).multiplyScalar(x.y),f.copy(r[v]).add(b).add(B),J(f.x,f.y,f.z)):J(x.x,x.y,U/p*v);if(t.bottom)for(var j=0;j<N;j++)F((w=_[j])[2],w[1],w[0],!0);if(t.top)for(j=0;j<N;j++)F((w=_[j])[0]+z*p,w[1]+z*p,w[2]+z*p,!1);var I=0;for(L(a,I),I+=a.length,e=0,o=S.length;e<o;e++)L(h=S[e],I),I+=h.length;function L(r,K){for(var B,b,f=r.length;0<=--f;){(b=(B=f)-1)<0&&(b=r.length-1);for(var h=0,U=p,h=0;h<U;h++){var a=z*h,P=z*(h+1),H=(S=void 0,K+B+a),a=K+b+a,Y=K+b+P,P=K+B+P,S=r,_=h,e=U,o=B,x=b;H+=k,a+=k,Y+=k,P+=k,y.faces.push(new BO(H,a,P)),y.faces.push(new BO(a,Y,P)),S=q.generateSideWallUV(y,T,S,t,H,a,Y,P,_,e,o,x),y.faceVertexUvs[0].push([S[0],S[1],S[3]]),y.faceVertexUvs[0].push([S[1],S[2],S[3]])}}}function J(r,K,B){y.vertices.push(new e1(r,K,B))}function F(r,K,B,b){y.faces.push(new BO(r+=k,K+=k,B+=k,null,0,b?2:1)),b=b?q.generateBottomUV(y,T,t,r,K,B):q.generateTopUV(y,T,t,r,K,B),y.faceVertexUvs[0].push(b)}},function(r,K,B,b,f){TO.call(this),B=B||1,b=b||8,f=f||!1;var h,U,a,P,H,Y,S,_,e,o,x,T,t,p,q,y,k=[],w=(K=K||64)+1,v=new e1,z=new jO.FrenetFrames(r,K,f),N=z.tangents,u=z.normals,j=z.binormals;for(this.tangents=N,this.normals=u,this.binormals=j,P=0;P<w;P++)for(k[P]=[],a=r.getPointAt(P/(w-1)),N[P],h=u[P],U=j[P],H=0;H<b;H++)p=-B*S1(q=H/b*h1),q=B*f1(q),v.copy(a),v.x+=p*h.x+q*U.x,v.y+=p*h.y+q*U.y,v.z+=p*h.z+q*U.z,k[P][H]=(p=v.x,q=v.y,y=v.z,this.vertices.push(new e1(p,q,y))-1);for(P=0;P<K;P++)for(H=0;H<b;H++)Y=k[P][H],S=k[e=f?(P+1)%K:P+1][H],_=k[e][e=(H+1)%b],e=k[P][e],o=new i(P/K,H/b),x=new i((P+1)/K,H/b),T=new i((P+1)/K,(H+1)/b),t=new i(P/K,(H+1)/b),this.faces.push(new BO(Y,S,e)),this.faceVertexUvs[0].push([o,x,t]),this.faces.push(new BO(S,_,e)),this.faceVertexUvs[0].push([x.clone(),T,t.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}),IO=(jO.prototype=MY(B),jO.FrenetFrames=function(r,K,B){var b,f,h,U,a,P=new e1,H=[],Y=[],S=[],_=new e1,e=new Z,o=K+1;for(this.tangents=H,this.normals=Y,this.binormals=S,a=0;a<o;a++)H[a]=r.getTangentAt(a/(o-1)),H[a].normalize();for(Y[0]=new e1,S[0]=new e1,K=Number.MAX_VALUE,f=j1(H[0].x),h=j1(H[0].y),U=j1(H[0].z),f<=K&&(K=f,P.set(1,0,0)),h<=K&&(K=h,P.set(0,1,0)),U<=K&&P.set(0,0,1),_.crossVectors(H[0],P).normalize(),Y[0].crossVectors(H[0],_),S[0].crossVectors(H[0],Y[0]),a=1;a<o;a++)Y[a]=Y[a-1].clone(),S[a]=S[a-1].clone(),_.crossVectors(H[a-1],H[a]),1e-4<_.length()&&(_.normalize(),b=I1(jY(H[a-1].dot(H[a]),-1,1)),Y[a].applyMatrix4(e.makeRotationAxis(_,b))),S[a].crossVectors(H[a],Y[a]);if(B)for(b=I1(jY(Y[0].dot(Y[o-1]),-1,1)),b/=o-1,0<H[0].dot(_.crossVectors(Y[0],Y[o-1]))&&(b=-b),a=1;a<o;a++)Y[a].applyMatrix4(e.makeRotationAxis(H[a],b*a)),S[a].crossVectors(H[a],Y[a])},function(r,K,B,b){TO.call(this),B=B||0,b=b==H1?h1:b;for(var f=1/(r.length-1),h=1/(K=K||18),U=0,a=K;U<=a;U++)for(var P=B+U*h*b,H=S1(P),Y=f1(P),S=0,_=r.length;S<_;S++){var e=r[S],o=new e1;o.x=H*e.x-Y*e.y,o.y=Y*e.x+H*e.y,o.z=e.z,this.vertices.push(o)}for(var x=r.length,U=0,a=K;U<a;U++)for(S=0,_=r.length-1;S<_;S++){var T=S+x*U,t=T+x,H=T+1+x,p=T+1,q=U*h,y=S*f,k=q+h,w=y+f;this.faces.push(new BO(T,p,t)),this.faceVertexUvs[0].push([new i(q,y),new i(q,w),new i(k,y)]),this.faces.push(new BO(t,p,H)),this.faceVertexUvs[0].push([new i(k,y),new i(q,w),new i(k,w)])}this.mergeVertices(),cP(this),this.computeFaceNormals(),this.computeVertexNormals()}),LO=(IO.prototype=MY(B),function(r,K){r=xO.generateShapes(r,K=K||{}),K.amount=K.amount!==P1?K.amount:.5,(K.convertYZ=!1)!==K.fill&&(K.bottom=!0,K.top=!0),uO.call(this,r,K)}),JO=(LO.prototype=MY(h),M.Node=function(){vY(JO,this);var B=this._styleMap={};this.getStyle=function(r){var K=B[r];return K!==P1?K:T1[r]},this.setStyleMap=function(r){var K=B;B=this._styleMap=r||{},this.fp("styleMap",K,B)}}),FO={X:qA,Y:yA,Z:kA},GO={X:0,Y:1,Z:2},dO={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},sO=new FH,nO=function(r,K,B){var b,f;K&&(b=K[0],f=K[1],K=K[2],"xzy"===B?(yA(r,f),kA(r,K),qA(r,b)):"xyz"===B?(kA(r,K),yA(r,f),qA(r,b)):"yxz"===B?(kA(r,K),qA(r,b),yA(r,f)):"yzx"===B?(qA(r,b),kA(r,K),yA(r,f)):"zxy"===B?(yA(r,f),qA(r,b),kA(r,K)):"zyx"===B?(qA(r,b),yA(r,f),kA(r,K)):(yA(r,f),kA(r,K),qA(r,b)))},AO=(Cs("Node",PP,{ms_ac:["rotationMode","anchorElevation"],ms_edge:!0,_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:UO="xzy",_64O:0,_rotationX:0,_53O:0,_host:H1,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_anchorElevation:.5,_scale:{x:1,y:1},_scaleTall:1,_54O:0,getUIClass:function(){return Tz},get3dUIClass:function(){return iq},getX:function(){return this.p().x},setX:function(r){this.p(r,this.p().y)},getY:function(){return this.p().y},setY:function(r){this.p(this.p().x,r)},getAnchorX:function(){return this.getAnchor().x},setAnchorX:function(r){this.setAnchor(r,this.getAnchor().y)},getAnchorY:function(){return this.getAnchor().y},setAnchorY:function(r){this.setAnchor(this.getAnchor().x,r)},getScaleX:function(){return this.getScale().x},setScaleX:function(r){this.setScale(r,this.getScale().y)},getScaleY:function(){return this.getScale().y},setScaleY:function(r){this.setScale(this.getScale().x,r)},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},setQuaternion:function(r){return r=(new lH).setFromQuaternion(r,lH.ReverseOrder(this.getRotationMode())),this._applyClosestR3(r.x,r.y,r.z)},getQuaternion:(UH=new lH,aH=new lH,PH=new FH,function(r){return r=r||new FH,this.getEuler(UH),UH.equals(aH)?r.copy(PH):r.copy(PH.setFromEuler(aH.copy(UH)))}),getEuler:function(r){var K=this.r3();return(r=r||new lH).set(K[0],K[1],K[2],lH.ReverseOrder(this.getRotationMode()))},setEuler:function(r){return r=r.clone().reorder(lH.ReverseOrder(this.getRotationMode())),this.r3(r.x,r.y,r.z)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(r,K){xA(r,vA(H1,H1,this.r3(),this.getRotationMode())),this.translate3d(r[0]*K,r[1]*K,r[2]*K)},translateFront:function(r){this.translate3dBy([0,0,1],r)},translateBack:function(r){this.translate3dBy([0,0,-1],r)},translateLeft:function(r){this.translate3dBy([-1,0,0],r)},translateRight:function(r){this.translate3dBy([1,0,0],r)},translateTop:function(r){this.translate3dBy([0,1,0],r)},translateBottom:function(r){this.translate3dBy([0,-1,0],r)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(r,K,B){1===arguments.length&&(K=r[1],B=r[2],r=r[0]),this.p(r,B),this.setElevation(K)},translate3d:function(r,K,B){1===arguments.length&&(K=r[1],B=r[2],r=r[0]),this.translate(r,B),this.setElevation(this._54O+K)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(r,K,B){1===arguments.length&&(K=r[1],B=r[2],r=r[0]),this.setSize(r,B),this.setTall(K)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(r,K,B){var b,f=this;f._updatingRotation3d||((f._updatingRotation3d=1)===arguments.length&&(K=r[1],B=r[2],r=r[0]),b=[f._rotationX,-f._64O,f._53O],f._rotationX=r,f._64O=-K,f._53O=B,f.fp("rotation3d",b,[r,K,B]),delete f._updatingRotation3d)},_applyClosestR3:function(r,K,B){var b,f,h,U=this.r3(),a=this.getRotationMode();"xzy"===a||"yzx"===a?(b=0<r?r-F:r+F,f=0<K?K-F:K+F,h=0<B?F-B:-F-B):"xyz"===a||"zyx"===a?(b=0<r?r-F:r+F,h=0<B?B-F:B+F,f=0<K?F-K:-F-K):"yxz"!==a&&"zxy"!==a||(h=0<B?B-F:B+F,f=0<K?K-F:K+F,b=0<r?F-r:-F-r),Rt([b,f,h],U)<Rt([r,K,B],U)?this.r3(b,f,h):this.r3(r,K,B)},setRotationY:function(r){this.setRotation(-r)},getRotationY:function(){return-this._64O},lookAtDirection:function(r,K){K=K||Q1;var B=this,b=R9(r);K===Q1?(B.r3([-J1(r[1]/b),-d1(r[2],r[0])+F1,0]),B.setRotationMode("xzy")):K===Ku?(B.r3(0,-d1(r[2],r[0]),J1(r[1]/b)),B.setRotationMode("zyx")):K===ru?(B.r3(0,-d1(r[2],r[0])+F,-J1(r[1]/b)),B.setRotationMode("zyx")):K===Bu?(B.r3([-J1(r[1]/b)+F1,-d1(r[2],r[0])+F1,0]),B.setRotationMode("xzy")):K===bu&&(B.r3([-J1(r[1]/b)-F1,-d1(r[2],r[0])+F1,0]),B.setRotationMode("xzy")),K===E1&&(B.r3([-J1(r[1]/b)+F,-d1(r[2],r[0])+F1,F]),B.setRotationMode("zxy"))},lookAt:function(r,K){return this.lookAtDirection(PA(r,this.p3()),K)},lookAtX:(rH=new e1,KH=new e1,BH=new e1,bH=new Z,fH=new Z,hH=new lH,function(r,K){var B=wA(this);bH.fromArray(B),BH.copy(this.p3()),rH.copy(r).sub(BH),rH.lengthSq()<1e-6||(rH.normalize(),"string"==typeof(K=K||Q1)?K===Q1?KH.set(0,0,1):K===E1?KH.set(0,0,-1):K===ru?KH.set(-1,0,0):K===Ku?KH.set(1,0,0):K===Bu?KH.set(0,1,0):K===bu&&KH.set(0,-1,0):KH.copy(K).normalize(),KH.applyMatrix4(bH).sub(BH).normalize(),(B=Math.acos(rH.dot(KH)))&&((r=rH.clone().cross(KH)).lengthSq()<1e-6&&(K===Bu||K===bu||0===K[0]&&0===K[1]?r.set(0,0,1):r.set(0,1,0)).applyMatrix4(bH).sub(BH),r.normalize(),hH.set(this.r3(),this.getRotationMode(),!0),bH.makeRotationFromEuler(hH),fH.makeRotationAxis(r,-B),hH.setFromRotationMatrix(fH.multiply(bH)),this._applyClosestR3(hH.x,hH.y,hH.z)))}),getHost:function(){return this._host},setHost:function(r){var K,B=this;B!==r&&B._host!==r&&((K=B._host)&&(K._removeAttach(B),K.updateLayoutAttaches()),B._host=r,B._host&&(B._host._addAttach(B),B._host.updateLayoutAttaches()),B.fp("host",K,r),B.onHostChanged(K,r))},getAttaches:function(){return this._69O},_addAttach:function(r){this._69O||(this._69O=new $),this._69O.add(r),this.fp("attaches",H1,r)},_removeAttach:function(r){this._69O.remove(r),this._69O.isEmpty()&&delete this._69O,this.fp("attaches",r,H1)},getImage:function(){return this._pendingCheckImageJSON&&Y1.getImage(this._image)&&(this._pendingCheckImageJSON=!1,this.getParent()instanceof ZO&&this.getParent().checkPendingUpdateInfo()),this._image},setImage:function(r){var K=this._image,B=this.getWidth(),b=this.getHeight();this._image=r,this.fp("image",K,r)&&(null!=r&&(PY(r)||_1(r)&&/\.json$/i.test(r))&&(this._pendingCheckImageJSON=!0),yK||(this.fp(wu,B,this.getWidth()),this.fp(vu,b,this.getHeight())))},getElevation:function(){return this._54O},setElevation:function(r){var K;this._50O||(this._50O=1,K=this._54O,this._54O=r,this.fp(kn,K,r),delete this._50O)},getRotation:function(){return this._64O},setRotation:function(r){var K;this._49O||(this._49O=1,K=this._64O,this._64O=r,this.fp(gu,K,r),delete this._49O)},getRotationX:function(){return this._rotationX},setRotationX:function(r){var K;this._51O||(this._51O=1,K=this._rotationX,this._rotationX=r,this.fp("rotationX",K,r),delete this._51O)},getRotationZ:function(){return this._53O},setRotationZ:function(r){var K;this._52O||(this._52O=1,K=this._53O,this._53O=r,this.fp("rotationZ",K,r),delete this._52O)},getPosition:function(){return this._position},setPosition:function(r,K){this._50I||(this._50I=1,(K=2===arguments.length?{x:r,y:K}:r).x===this._position.x&&K.y===this._position.y||(r=this._position,this._position=K,this.fp(yn,r,K)),delete this._50I)},translate:function(r,K){var B=this._position;this.p(B.x+r,B.y+K)},hasInheritedSize:function(){var r=this.getStyle("shape3d");if(r){var K=K6(r);if(K&&K.rawS3)return!0;if(("billboard"===r||"plane"===r)&&g(this.getStyle("shape3d.image")))return!0}return!(!this.hasOwnProperty("_image")||!g(this._image))},getWidth:function(){if(0<=this._width)return this._width;var r=this.getStyle("shape3d");if(r){var K,B=K6(r);if(B&&B.rawS3)return B.rawS3[0];if("billboard"===r||"plane"===r)return(K=g(this.getStyle("shape3d.image")))?DA(K,this):20}return(K=g(this._image))?DA(K,this):20},setWidth:function(r){var K=this._width;this._width=r,this.fp(wu,K,r)},getHeight:function(){if(0<=this._height)return this._height;var r=this.getStyle("shape3d");if(r){var K,B=K6(r);if(B&&B.rawS3)return B.rawS3[2];if("plane"===r)return(K=g(this.getStyle("shape3d.image")))?iA(K,this):20;if("billboard"===r)return 2}return(K=g(this._image))?iA(K,this):20},setHeight:function(r){var K=this._height;this._height=r,this.fp(vu,K,r)},getTall:function(){if(0<=this._tall)return this._tall;var r=this.getStyle("shape3d");if(r){var K=K6(r);if(K&&K.rawS3)return K.rawS3[1];if("billboard"===r)return(K=g(this.getStyle("shape3d.image")))?iA(K,this):20;if("plane"===r)return 2}return 20},setTall:function(r){var K=this._tall;this._tall=r,this.fp("tall",K,r)},setSize:function(r,K){2===arguments.length?(this.setWidth(r),this.setHeight(K)):(this.setWidth(r.width),this.setHeight(r.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(r,K,B,b,f){var h=this.getAnchor(),U=this.getScale(),a=(arguments.length<=2&&(f=K,K=r.y,B=r.width,b=r.height,r=r.x),f&&U.x<0?1-h.x:h.x),h=f&&U.y<0?1-h.y:h.y;this.p(r+B*a,K+b*h),f&&(B/=Math.abs(U.x),b/=Math.abs(U.y)),this.setWidth(B),this.setHeight(b)},getMatrix:function(){var r=this._64O,K=this._position,B=this.getScale();return new JH(r,K.x,K.y,B.x,B.y)},getMatrix4:(O$=new e1,Q$=new FH,E$=new e1,function(r){return this.getQuaternion(Q$),O$.copy(this.p3()),E$.copy(this.getFinalScale3d()),(r=r||new Z).compose(O$,Q$,E$)}),getAnchorRect:function(){var r=this.getWidth(),K=this.getHeight(),B=this.getAnchor();return{x:-r*B.x,y:-K*B.y,width:r,height:K}},toLocal:function(r){return this.getMatrix().tfi(r)},toGlobal:function(r){return this.getMatrix().tf(r)},getAttachPosition:(c$=new JH,function(r,K,B,b){B=B||0,b=b||0;var f=this.getAnchor(),h=this._64O,U=this._position,a=this.getScale();return c$.setFromTransform(h,U.x,U.y).tf({x:B+a.x*this.getWidth()*(r-f.x),y:b+a.y*this.getHeight()*(K-f.y)})}),isInRect:function(r){r=this.toLocal(r);var K=this.getWidth(),B=this.getHeight();return r.x+=K*this.getAnchorX(),r.y+=B*this.getAnchorY(),!(r.x<0||r.y<0||r.x>K||r.y>B)},getRect:function(){var r=this.getWidth(),K=this.getHeight(),B={x:-r*(B=this.getAnchor()).x,y:-K*B.y,width:r,height:K},r=this.getMatrix();return l9([r.tf(B.x,B.y),r.tf(B.x+B.width,B.y),r.tf(B.x+B.width,B.y+B.height),r.tf(B.x,B.y+B.height)])},getAnchorElevation:function(){return this._anchorElevation},getAnchor3d:function(){var r=this.getAnchor(),K=this._anchorElevation;return{x:r.x,y:K,z:r.y}},setAnchorElevation:function(r){var K=this._anchorElevation;return K!==r&&(this._anchorElevation=r,this.fp("anchorElevation",K,r),!0)},setAnchor3d:function(r,K,B,b){"number"==typeof r?f={x:r,y:K,z:B}:(f=r.length?{x:r[0],y:r[1],z:r[2]}:r,b=K),this.beginTransaction();var f,B=this.getAnchor3d(),r=this.setAnchor(f.x,f.z);return(r=!!this.setAnchorElevation(f.y)||r)&&b&&!yK&&(this.getAnchor3d(),K=wA(this),b=xA([f.x-B.x,f.y-B.y,f.z-B.z],K),this.p3(b)),this.endTransaction(),r},getAnchor:function(){if(this.hasOwnProperty("_anchor"))return this._anchor;var r=g(this._image);return r&&r.anchorX!==P1?{x:r.anchorX,y:r.anchorY}:this._anchor},setAnchor:function(r,K,B){var b,f,h,U,a=this;return"number"==typeof r?U={x:r,y:K}:(U=r.length?{x:r[0],y:r[1]}:r,B=K),((r=a.getAnchor()).x!==U.x||r.y!==U.y)&&(a.beginTransaction(),a._anchor=U,a.fp("anchor",r,U),B&&!yK&&(K=a.getPosition(),B=a.getSize(),b=a.getRotation(),f=a.getScale(),h=-B.width*(r.x-U.x)*f.x,B=-B.height*(r.y-U.y)*f.y,r=f1(b),U=S1(b),a.setPosition(K.x+U*h-r*B,K.y+r*h+U*B)),a.endTransaction(),!0)},getLocalQuaternion:function(r){if(!(K=this.getHost()))return this.getQuaternion(r);var K=K.getQuaternion(),B=this.getQuaternion();return(r=r||new FH).copy(K).inverse().multiply(B)},setLocalQuaternion:function(r){var K=this.getHost();if(!K)return this.setQuaternion(r);K=K.getQuaternion(),this.setQuaternion(K.clone().multiply(r))},getLocalEuler:(X$=new FH,function(r){return this.getHost()?(this.getLocalQuaternion(X$),(r=r||new lH).setFromQuaternion(X$,lH.ReverseOrder(this.getRotationMode()))):this.getEuler(r)}),setLocalEuler:($$=new FH,function(r){return this.getHost()?($$.setFromEuler(r),this.setLocalQuaternion($$)):this.setEuler(r)}),getLocalPosition3d:function(r){(r=r||new e1).copy(this.p3());var K=this.getHost();return K?(K=K.getMatrix4(),r.applyMatrix4(K.getInverse(K))):r},setLocalPosition3d:function(r){var K,B=this.getHost();B?(B=B.getMatrix4(),(K=new e1(r)).applyMatrix4(B),this.p3(K.x,K.y,K.z)):r.x!==P1?this.p3(r.x,r.y,r.z):this.p3(r)},getScale:function(){return this._scale},setScale:function(r,K){K=2===arguments.length?{x:r,y:K}:r,(r=this.getScale()).x===K.x&&r.y===K.y||(this._scale=K,this.fp("scale",r,K))},getScaleTall:function(){return this._scaleTall},getScale3d:function(){var r=this._scaleTall,K=this.getScale();return[K.x,r,K.y]},getFinalScale3d:function(){var r=this.s3(),K=this._dynamicScale3d,B=this.getScale3d();return r&&(B[0]*=r[0],B[1]*=r[1],B[2]*=r[2]),K&&(B[0]*=K[0],B[1]*=K[1],B[2]*=K[2]),B},getFinalRotation3d:function(){return this._dynamicRotation||this.r3()},setScaleTall:function(r){var K=this._scaleTall;K!==r&&(this._scaleTall=r,this.fp("scaleTall",K,r))},setScale3d:function(r,K,B){K="number"==typeof r?{x:r,y:K,z:B}:r.length?{x:r[0],y:r[1],z:r[2]}:r,this.setScaleTall(K.y),this.setScale(K.x,K.z)},getCorners:function(r,K){r==H1&&(r=0),K==H1&&(K=r);var B=this.getAnchor(),b=this.getWidth(),f=this.getHeight(),h=-b*B.x-r,B=-f*B.y-K,b=b+2*r,r=f+2*K;return[(f=this.getMatrix()).tf(h,B),f.tf(h,B+r),f.tf(h+b,B+r),f.tf(h+b,B)]},getEditControlPoints:function(r,K,B){K==H1&&(K=0),B==H1&&(B=K);var b=this.getAnchor(),f=this.getWidth(),h=this.getHeight(),U=-f*b.x-K,b=-h*b.y-B,f=f+2*K,K=h+2*B;return r?[{x:U,y:b},{x:U,y:0},{x:U,y:b+K},{x:0,y:b+K},{x:U+f,y:b+K},{x:U+f,y:0},{x:U+f,y:b},{x:0,y:b}]:[(h=this.getMatrix()).tf(U,b),h.tf(U,0),h.tf(U,b+K),h.tf(0,b+K),h.tf(U+f,b+K),h.tf(U+f,0),h.tf(U+f,b),h.tf(0,b)]},rotateAt:function(r,K,B){var b=this._position,f=this._64O,h=new JH(f,b.x,b.y).tf(r,K),r=u1(r*r+K*K),K=d1(b.y-h.y,b.x-h.x)+B;this.setRotation(f+B),this.p(h.x+r*S1(K),h.y+r*f1(K))},rotateAroundAxis:function(r,K){this.setQuaternion(this.getQuaternion().multiply(sO.setFromAxisAngle(r,K)))},rotateAroundWorldAxis:function(r,K){this.setQuaternion(this.getQuaternion().premultiply(sO.setFromAxisAngle(r,K)))},rotateX:function(r){return this.rotateAroundAxis(e1.AxisX,r)},rotateY:function(r){return this.rotateAroundAxis(e1.AxisY,r)},rotateZ:function(r){return this.rotateAroundAxis(e1.AxisZ,r)},onParentChanged:function(r,K){JO.superClass.onParentChanged.apply(this,arguments),this._8I()},onPropertyChanged:(W$={},"width|height|position|anchor|rotation|scale|s:layout.h|s:layout.v".split("|").forEach(function(r){W$[r]=!0}),function(K){var r,B=this,b=(JO.superClass.onPropertyChanged.call(B,K),K.property);W$[b]&&!B._layoutUpdating&&B.updateLayoutParameters(null,b),B._69O&&B._69O.each(function(r){r.handleHostPropertyChange(K)}),B._49I&&B._49I.each(function(r){r.fp("agentChange",!0,!1)}),qP[b]&&this.updateLayoutAttaches(),"a:layout"===b.substring(0,8)&&(this.updateLayoutAttaches(),(r=B._host)&&r.updateLayoutAttaches()),"s:shape3d.autorotate"!==b&&"s:autorotate"!==b&&"s:shape3d.fixSizeOnScreen"!==b&&"s:fixSizeOnScreen"!==b&&"s:hide.overlapping.group"!==b||(B._47Q=B.s("autorotate")||B.s("shape3d.autorotate")||B.s("fixSizeOnScreen")||B.s("shape3d.fixSizeOnScreen")||B.s("hide.overlapping.group"))}),onHostChanged:function(r,K){this.updateAttach(),this.updateLayoutParameters()},handleHostPropertyChange:function(r){this.updateAttach(r)},onStyleChanged:function(r,K,B){JO.superClass.onStyleChanged.apply(this,arguments),kP[r]&&this.updateAttach()},updateLayoutAttaches:function(){var r;if(!yK&&this.s("vector.layoutable"))return!!((r=g(this.getImage()))&&r.layoutAttach&&(r=r.layoutAttach)&&r(this))||void 0},updateAttach:function(r){yK?this.updateLayoutParameters():this._51I||(this._51I=1,this._71O(r),delete this._51I)},_71O:function(r){var K,B,b,f,h,U,a=this,P=a._host,H=r?r.property:H1,Y=r?r.oldValue:H1,S=r?r.newValue:H1;if(P instanceof JO&&(!r||qP[H])){var _=g(P.getImage());if(_&&_.layoutAttach)return}P instanceof M.Grid?H===kn?a.setElevation(a._54O+S-Y):r&&!yP[H]||(_=a.s("attach.row.index"),f=a.s("attach.column.index"),(B=P.getCellRect(_,f))&&(b=a.s("attach.row.span"),K=a.s("attach.column.span"),1===b&&1===K||(B=C9(B,P.getCellRect(_+b-1,f+K-1))),zP(B,a,"attach.padding",1),a.setRect(B))):P instanceof CO&&0<=(_=a.s("attach.index"))&&(!r||wP[H])?(b=a.s("attach.thickness"),f=P.getScale(),K=Math.max(f.x,f.y),0<b&&a.setHeight(P.getThickness()*b*K),B=a.s("attach.offset"),_<(b=(f=P.getPoints()).size())&&(h=P.getPointsMatrix2d(),U=f.get(_),b=b===_+1?f.get(0):f.get(_+1),U=h.apply(U),f=[(b=h.apply(b)).x-U.x,b.y-U.y],(_=R9(f))&&(a.s("attach.offset.relative")&&(B*=_),a.s("attach.offset.opposite")&&(B=_-B),h={x:U.x+f[0]/_*B,y:U.y+f[1]/_*B},(U=a.s("attach.gap"))&&(a.s("attach.gap.relative")&&(U*=P.getThickness()*K),h=q6(H1,h,b,U)),a.p(h),a.setRotation(d1(f[1],f[0]))))):r&&(H===yn?a.translate(S.x-Y.x,S.y-Y.y):H===kn?a.setElevation(a._54O+S-Y):pP[H]?"rotation3d"===H?a.syncRotation3d(P,S,Y):a._11Q(P,H,S-Y):"anchor"!==H&&"width"!==H&&"height"!==H&&"scale"!==H||a.layout(P))},_11Q:(D$=new M.Math.Euler,i$=M.Math.Euler.ReverseOrder,Z$=new M.Math.Vector2,g$=new M.Math.Vector2,function(r,K,B){var b=r.p3(),f=r.r3(),h=this.p3(),U=this.r3();if(K===gu&&(K="rotationY",B=-B),(K===gu||"rotationY"===K)&&0===U[0]&&0===U[2]&&0===f[0]&&0===f[2]&&0===h[1]&&0===b[1])return this.setRotation(-U[1]-B),Z$.set(h[0],h[2]).rotateAround(g$.set(b[0],b[2]),-B),void this.p(Z$.x,Z$.y);var r=(U=dO[r.getRotationMode()])[0],a=U[1],U=U[2],P=FO[r],H=FO[a],Y=FO[U],S=SA(),r=(K===gu+r?(Y(S,f[GO[U]]),H(S,f[GO[a]]),P(S,B),H(S,-f[GO[a]]),Y(S,-f[GO[U]])):K===gu+a?(Y(S,f[GO[U]]),H(S,B),Y(S,-f[GO[U]])):K===gu+U&&Y(S,B),PA(h,b)),P=(xA(r,S),this.p3(b[0]+r[0],b[1]+r[1],b[2]+r[2]),this.getRotationMode());nO(S,this.r3(),P),D$.setFromRotationMatrix(S,i$(P)),this.r3([D$.x,D$.y,D$.z])}),syncRotation3d:(l$=new FH,C$=new lH,m$=new e1,function(r,K,B){var b;B[0]===K[0]&&B[1]===K[1]&&B[2]===K[2]||(b=lH.ReverseOrder(r.getRotationMode()),sO.setFromEuler(C$.set(B[0],B[1],B[2],b)),l$.setFromEuler(C$.set(K[0],K[1],K[2],b)),l$.multiply(sO.inverse()),B=r.p3(),K=this.p3(),m$.set(K[0]-B[0],K[1]-B[1],K[2]-B[2]).applyQuaternion(l$),this.p3(B[0]+m$.x,B[1]+m$.y,B[2]+m$.z),this.setQuaternion(this.getQuaternion(sO).premultiply(l$)))}),isHostOn:function(r){if(this._host&&r&&r._69O)for(var K={},B=this._host;B&&B!==this&&!K[B._id];){if(B===r)return!0;B=(K[B._id]=B)._host}return!1},isLoopedHostOn:function(r){return this.isHostOn(r)&&r.isHostOn(this)},getScaledSize:function(){var r=this.getSize(),K=this.getScale();return r.width*=Math.abs(K.x),r.height*=Math.abs(K.y),r},invalidateView:function(){var r=this.dm();r&&r.firePropertyChange("invalidateView",!1,!0)},layout:function(r){if(r=r||this.getHost()){var K=this,B=K.s("layout.h")||"center",b=K.s("layout.v")||"center";if("center"!==B||"center"!==b){var f,h,U,a,P,H,Y=new M.Math.Vector2,S=r.getPosition(),_=r.getAnchor(),e=r.getScaledSize(),o=(K.getPosition(),1),x=1;switch(K._layoutUpdating=!0,B){case"left":Y.setX(K._layoutHValue-_.x*e.width);break;case"right":Y.setX((1-_.x)*e.width-K._layoutHValue);break;case"leftright":f=e.width-K._layoutHValue[2],U=K.getRotation()-r.getRotation(),a=Math.abs(Math.sin(U)),o+=(P=Math.abs(Math.cos(U)))*f/K._layoutHValue[3],x+=a*f/K._layoutHValue[4],Y.setX(K._layoutHValue[1]+(K._layoutHValue[5]-_.x)*e.width);break;case"center":Y.setX((.5-_.x)*e.width-K._layoutHValue);break;case"scale":U=K.getRotation()-r.getRotation(),a=Math.abs(Math.sin(U)),P=Math.abs(Math.cos(U)),Y.setX((.5-_.x)*e.width-K._layoutHValue[1]*e.width/K._layoutHValue[0]),o+=P*(h=e.width/K._layoutHValue[2]-1),x+=a*h}switch(b){case"top":Y.setY(K._layoutVValue-_.y*e.height);break;case"bottom":Y.setY((1-_.y)*e.height-K._layoutVValue);break;case"topbottom":U||(U=K.getRotation()-r.getRotation(),a=Math.abs(Math.sin(U)),P=Math.abs(Math.cos(U))),o+=a*(f=e.height-K._layoutVValue[2])/K._layoutVValue[3],x+=P*f/K._layoutVValue[4],Y.setY(K._layoutVValue[1]+(K._layoutVValue[5]-_.y)*e.height);break;case"center":Y.setY((.5-_.y)*e.height-K._layoutVValue);break;case"scale":U||(U=K.getRotation()-r.getRotation(),a=Math.abs(Math.sin(U)),P=Math.abs(Math.cos(U))),Y.setY((.5-_.y)*e.height-K._layoutVValue[1]*e.height/K._layoutVValue[0]),o+=a*(h=e.height/K._layoutVValue[2]-1),x+=P*h}"leftright"!==B&&"scale"!==B&&"topbottom"!==b&&"scale"!==b||(b=this.getScale(),H=Math.abs(b.x),b=Math.abs(b.y),"leftright"===B||"scale"===B?K.setSize(K._layoutHValue[3]*o/H,K._layoutHValue[4]*x/b):K.setSize(K._layoutVValue[3]*o/H,K._layoutVValue[4]*x/b)),Y.rotateAround(null,r.getRotation()),this.setPosition(Y.x+S.x,Y.y+S.y),K._layoutUpdating=P1}}},updateLayoutParameters:function(r,K){if(r=r||this.getHost()){var B=this,b=B.s("layout.h"),f=B.s("layout.v");if(b||f){var h,U,a,P,H,Y,S=new M.Math.Vector2,_=r.getPosition(),e=r.getAnchor(),o=r.getScaledSize(),x=B.getPosition(),T=B.getScaledSize();switch(S.set(x.x-_.x,x.y-_.y),S.rotateAround(null,-r.getRotation()),b){case"left":B._layoutHValue=S.x+e.x*o.width;break;case"right":B._layoutHValue=-S.x+(1-e.x)*o.width;break;case"center":B._layoutHValue=-S.x+(.5-e.x)*o.width;break;case"leftright":case"scale":h="scale"===b?-S.x+(.5-e.x)*o.width:(U=B.getAnchor(),a=B.getRotation()-r.getRotation(),P=Math.cos(a),H=Math.sin(a),Y=-Math.min(-U.x*P+U.y*H,-U.x*P-(1-U.y)*H,(1-U.x)*P+U.y*H,(1-U.x)*P-(1-U.y)*H),S.x-(Y-e.x)*o.width),"position"===K&&"object"==typeof B._layoutHValue?(B._layoutHValue[0]=o.width,B._layoutHValue[1]=h):B._layoutHValue=[o.width,h,o.width,T.width,T.height,Y]}switch(f){case"top":B._layoutVValue=S.y+e.y*o.height;break;case"bottom":B._layoutVValue=-S.y+(1-e.y)*o.height;break;case"center":B._layoutVValue=-S.y+(.5-e.y)*o.height;break;case"topbottom":case"scale":h="scale"===f?-S.y+(.5-e.y)*o.height:(a||(U=B.getAnchor(),a=B.getRotation()-r.getRotation(),P=Math.cos(a),H=Math.sin(a)),Y=-Math.min(-U.x*H-U.y*P,-U.x*H+(1-U.y)*P,(1-U.x)*H-U.y*P,(1-U.x)*H+(1-U.y)*P),S.y-(Y-e.y)*o.height),"position"===K&&"object"==typeof B._layoutVValue?(B._layoutVValue[0]=o.height,B._layoutVValue[1]=h):B._layoutVValue=[o.height,h,o.height,T.width,T.height,Y]}}}},getSerializableProperties:function(){var r=JO.superClass.getSerializableProperties.call(this);return qY(r,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,anchorElevation:1,scale:1,scaleTall:1,_width:1,_height:1,_tall:1,elevation:1}),r}}),M.Edge=function(r,K){vY(AO,this),this.setSource(r),this.setTarget(K),this._geometryVersion=0}),VO=(Cs("Edge",PP,{ms_edge:!0,_icon:"edge_icon",getUIClass:function(){return tz},get3dUIClass:function(){return gq},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},canSetSourceTarget:function(r,K){if(r===this)return!1;if(l(r))return!0;for(var B,b,f,h,U=[this],a=-1,P=0;a<P;)if(B=U[++a]._44I)for(f=0,h=(B=B.getArray()).length;f<h;f++)if(b=B[f],_Y(b)&&!(0<=U.indexOf(b))){if(b===r)return!1;U.push(b),P++}return!0},setSource:function(r){var K;this._source!==r&&this.canSetSourceTarget(r)&&(K=this._source,this._source=r,K&&K._16I(this),r&&r._2I(this),this._7I(),this.fp("source",K,r))},setTarget:function(r){var K;this._target!==r&&this.canSetSourceTarget(r)&&(K=this._target,this._target=r,K&&K._18I(this),r&&r._4I(this),this._7I(),this.fp("target",K,r))},isLooped:function(){return this._source===this._target&&l(this._source)&&l(this._target)},onPropertyChanged:(HH={},["source","target","sourceAgent","targetAgent","edgeGroup","agentChange","s:edge.width","s:edge.type","s:edge.offset","s:edge.center","s:edge.points","s:edge.segments","s:edge.gap","s:edge.source.t3","s:edge.source.position","s:edge.source.anchor.x","s:edge.source.anchor.y","s:edge.source.anchor.elevation","s:edge.source.offset.x","s:edge.source.offset.y","s:edge.source.offset.elevation","s:edge.source.index","s:edge.source.percent","s:edge.target.t3","s:edge.target.position","s:edge.target.anchor.x","s:edge.target.anchor.y","s:edge.target.anchor.elevation","s:edge.target.offset.x","s:edge.target.offset.y","s:edge.target.offset.elevation","s:edge.target.index","s:edge.target.percent","s:edge.color","s:edge.gradient.color","s:edge.pattern","s:edge.dash","s:edge.dash.color","s:edge.dash.pattern","s:edge.dash.offset","s:repeat.uv.length","s:rotate.uv.length","s:rotate.vs.length","s:body.color","s:shape3d","s:shape3d.visible","s:shape3d.image","s:shape3d.smooth","s:shape3d.resolution","s:shape3d.color","s:shape3d.blend","s:shape3d.side","s:shape3d.start.angle","s:shape3d.sweep.angle","s:shape3d.top.cap","s:shape3d.top.image","s:shape3d.top.visible","s:shape3d.top.color","s:shape3d.bottom.cap","s:shape3d.bottom.image","s:shape3d.bottom.visible","s:shape3d.bottom.color","s:shape3d.uv.union"].forEach(function(r){HH[r]=!0}),function(r){var K;HH[r.property]&&(this._geometryVersion++,K=!0),K&&this._49I&&this._49I.each(function(r){r.fp("agentChange",!0,!1)}),"s:alwaysOnTop"!==r.property&&"s:shape3d.alwaysOnTop"!==r.property||(r.newValue?this.setRenderLayer("top"):this.setRenderLayer(P1))}),_7I:function(){var r,K=this,B=function(r){if(r.isLooped())return r._source;var K=uP(r._source),B=uP(r._target);return K===B?r._source:jP(K,B)}(K),B=(K._40I!==B&&((r=this._40I)&&r._15I(K),(K._40I=B)&&B._1I(K),K.fp("sourceAgent",r,B),JP(r,K._41I),JP(B,K._41I)),function(r){if(r.isLooped())return r._target;var K=uP(r._source),B=uP(r._target);return K===B?r._target:jP(B,K)}(K));K._41I!==B&&((r=K._41I)&&r._17I(K),(K._41I=B)&&B._3I(K),K.fp("targetAgent",r,B),JP(r,K._40I),JP(B,K._40I))},_22I:function(r){this._52I=r,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){return this._52I&&this._52I.get(0)!==this&&!this.getStyle(Du)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var r=this._52I;return r&&!this.getStyle(Du)&&1<r.size()&&this===r.get(0)},toggle:function(){this.beginTransaction();var r=this._52I,K=!this.s(Du);r&&1<r.size()&&(r.each(function(r){r.s(Du,K)}),r.getSiblings().each(function(K){K!==r&&K.each(function(r){r.fp("edgeGroup",H1,K)})})),this.endTransaction()},setStyle:function(r,K){var B;r!==iu&&"edge.segments"!==r||(K=YY(B=K)?new $(B):B),AO.superClass.setStyle.call(this,r,K)},onStyleChanged:function(r,K,B){AO.superClass.onStyleChanged.apply(this,arguments),tP[r]&&JP(this._41I,this._40I)},getSerializableProperties:function(){var r=AO.superClass.getSerializableProperties.call(this);return qY(r,{source:1,target:1}),r}}),M.Group=function(){vY(VO,this)}),MO=(Cs("Group",JO,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return qz},onChildAdded:function(r,K){VO.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(r,K){VO.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var r;this._54I||yK||(r=this.getChildrenRect())&&(this._53I=1,this.p(Ns(this.s("group.position"),r,this.getSize())),delete this._53I)},getChildrenRect:function(){var K,B=this;return B.eachChild(function(r){l(r)&&(K=C9(K,B.getChildRect(r)))}),K},getChildRect:function(K){var B;return l(K)&&K.s(zu)&&(eY(K)&&K.isExpanded()&&K.eachChild(function(r){B=C9(B,K.getChildRect(r))}),!B&&K.getRect&&(B=K.getRect())),B},setPosition:function(r,K){this._54I||(K=2===arguments.length?{x:r,y:K}:r,yK||this._53I||(this._54I=1,ks(this._children,K.x-this._position.x,K.y-this._position.y),delete this._54I),VO.superClass.setPosition.call(this,K))},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(r){var K;this._57O!==r&&(K=this._57O,this._57O=r,this.fp("expanded",K,this._57O),this._fireInvalidateDeep(),this._8I())},_fireInvalidateDeep:function(){this.eachChild(function(r){eY(r)?r._fireInvalidateDeep():r.iv()})},_8I:function(){VO.superClass._8I.call(this),this.eachChild(function(r){l(r)&&r._8I()})},onStyleChanged:function(r,K,B){VO.superClass.onStyleChanged.apply(this,arguments),"group.position"===r&&this._81I()},getSerializableProperties:function(){var r=VO.superClass.getSerializableProperties.call(this);return r.expanded=1,r}}),M.Camera=function(){vY(MO,this),this.s({"shadow.cast":!1,"shadow.receive":!1,shape3d:"billboard"}),this._viewMatrix=new D.Matrix4,this._projectMatrix=new D.Matrix4,this.setScale3d(1,1,-1),this.setCullingMask("main,top"),this._projectMatrixDirty=!0}),RO=(MO.CubeDirectionParam=[1,0,0,0,-1,0,-1,0,0,0,-1,0,0,1,0,0,0,1,0,-1,0,0,0,-1,0,0,1,0,-1,0,0,0,-1,0,-1,0],Cs("Camera",JO,{get3dUIClass:function(){return Camera3dUI},attachRenderTarget:function(r){this._projectMatrixDirty=!0,this.renderTarget=r},detachRenderTarget:function(){this._projectMatrixDirty=!0,this.renderTarget=null},setCullingMask:function(r){r=r.split(","),this._cullingLayers=r,this._cullingMask=KP(r,null,!0),this.gv&&(this._currentCullingMask=KP(r,this.gv.getRenderLayerInfoMap(),!0))},isLayerVisible:function(r){var K,r=this.gv?(K=this.gv.getRenderLayerInfo(r),this._currentCullingMask):(K=OA[r],this._cullingMask);return K&&BP(r,K.mask)},isOrtho:function(){return"ortho"===this.s("camera.type")&&!this.isCube()},isCube:function(){return this.renderTarget&&this.renderTarget.isCube()},isPerspective:function(){return!this.isOrtho()},setViewMatrix:(oH=new M.Math.Matrix4,xH=new M.Math.Euler,function(r){r.isMatrix4?this._viewMatrix.copy(r):this._viewMatrix.fromArray(r),oH.getInverse(this._viewMatrix),this.p3(oH.getPosition().toArray()),xH.set(0,0,0,this.getRotationMode(),!0).setFromRotationMatrix(oH),this.r3([xH.x,xH.y,xH.z])}),getViewMatrix:function(r){var K=vA(null,null,this.r3(),this.getRotationMode(),this.p3()),B=this._viewMatrix;return B.fromArray(K).getInverse(B),B.toArray(r)},setProjectMatrix:function(r){r.isMatrix4?this._projectMatrix.copy(r):this._projectMatrix.fromArray(r),r=this._projectMatrix.getElements(),this.isOrtho()?this.s({"camera.near":(r[14]+1)/r[10],"camera.far":(r[14]-1)/r[10],"camera.ortho.width":2/r[0]}):this.s({"camera.near":r[14]/(r[10]-1),"camera.far":r[14]/(r[10]+1),"camera.fovy":2*Math.atan(1/r[5]),"camera.aspect":r[5]/r[0]}),this._projectMatrixDirty=!1},onPropertyChanged:function(r){MO.superClass.onPropertyChanged.call(this,r),"s:camera.near"!==(r=r.property)&&"s:camera.far"!==r&&"s:camera.fovy"!==r&&"s:camera.aspect"!==r&&"s:camera.ortho.width"!==r||(this._projectMatrixDirty=!0)},getProjectMatrix:function(){var r,K,B,b,f,h,U,a=this;return a._projectMatrixDirty&&(r=a.gv,B=(K=a.isCube())?1:a.s("camera.aspect")||(r?r.getAspect():null)||Y1.graph3dViewAspect,b=a.s("camera.near")||(r?r.getNear():null)||Y1.graph3dViewNear,f=a.s("camera.far")||(r?r.getFar():null)||Y1.graph3dViewFar,h=SA(),a.isOrtho()?(U=(a.s("camera.ortho.width")||(r?r.getOrthoWidth():null)||Y1.graph3dViewOrthoWidth)/2,u6(h,-U,U,-(U/=B),U,b,f)):(U=K?Math.PI/2:a.s("camera.fovy")||(r?r.getFovy():null)||Y1.graph3dViewFovy,N6(h,U,B,b,f)),a._projectMatrix.fromArray(h),a._projectMatrixDirty=!1),a._projectMatrix.toArray()},lookAt:function(r,K){var B=this.p3();return r.x?this.lookAtDirection([r.x-B[0],r.y-B[1],r.z-B[2]],K):this.lookAtDirection([r[0]-B[0],r[1]-B[1],r[2]-B[2]],K)},lookAtDirection:(YH=new M.Math.Matrix4,SH=new M.Math.Euler,_H=new M.Math.Vector3,eH=new M.Math.Vector3,function(r,K){YH.lookAtDirection(_H.copy(r).multiplyScalar(-1),K?eH.copy(K):eH.set(0,1,0)),SH.set(0,0,0,this.getRotationMode(),!0).setFromRotationMatrix(YH),this.r3([SH.x,SH.y,SH.z])}),updateAndRender:function(r){return r.syncRenderState(),r.updateScene(),this.render(r)},getSize:function(r){var K=this.renderTarget;return K?[K.width,K.height]:r?(K=r.getDevicePixelRatio(),[r.getWidth()*K,r.getHeight()*K]):[0,0]},getWidth:function(r){return this.getSize(r)[0]},getHeight:function(r){return this.getSize(r)[1]},getEye:function(){return this.p3()},getCenter:function(){var r=new e1,K=this.getEuler();return r.set(0,0,-1).applyEuler(K),this.gv&&(K=new e1(this.gv.getEye()),K=new e1(this.gv.getCenter()).sub(K).length(),r.setLength(K)),[(K=this.p3())[0]+r.x,K[1]+r.y,K[2]+r.z]},getUp:function(){var r=new e1,K=this.getEuler(),K=(r.set(0,0,-1).applyEuler(K),(new e1).set(0,1,0).applyEuler(K)),B=(new e1).set(0,1,0);return(Math.abs(r.cross(K).dot(B))<1e-5?B:K).toArray()},render:function(r){var K=this,B=r.getGL();if(!B)return!1;this._currentCullingMask=KP(this._cullingLayers,r.getRenderLayerInfoMap(),!0);var b=K.renderTarget,f=K.getSize(r),h=((K.gv=r)._camera=K,r._frameState.renderState.glState.color.clear.slice(0)),U=(C6(B,K.s("camera.background")),r.getEye);if(r.getEye=function(){return K.p3()},r.syncRenderState(),K.isCube())for(var a=MO.CubeDirectionParam,P=0;P<6;P++)b&&b.bind(B,P),r._18Q=null,K.lookAtDirection([a[6*P+0],a[6*P+1],a[6*P+2]],[a[6*P+3],a[6*P+4],a[6*P+5]]),!1!==K.s("camera.clear")&&B.clear(16384),r.setViewport(B,0,0,f[0],f[1]),K.s("camera.onlySky")?r.renderSky():r.renderScene({renderAxis:K.s("camera.renderAxis"),renderGrid:K.s("camera.renderGrid"),renderEdit:K.s("camera.renderEdit"),renderShadowMap:K.s("camera.renderShadowMap"),renderReflector:!1}),r._18Q=null,b&&b.unbind(B);else b&&b.bind(B),r._18Q=null,!1!==K.s("camera.clear")&&B.clear(16384),r.overlappingBox.clear(),r.setViewport(B,0,0,f[0],f[1]),K.s("camera.onlySky")?r.renderSky():r.renderScene({renderAxis:K.s("camera.renderAxis"),renderGrid:K.s("camera.renderGrid"),renderEdit:K.s("camera.renderEdit"),renderShadowMap:K.s("camera.renderShadowMap")}),r._18Q=null,b&&b.unbind(B);return r.getEye=U,C6(B,h),r._camera=null,!(K.gv=null)}}),M.Block=function(){vY(RO,this),this.s({"shadow.cast":!1,"shadow.receive":!1})}),B=(Cs("Block",JO,{_icon:"block_icon",_clickThroughEnabled:!1,_syncSize:!0,_scaleMode:"2d",ms_ac:["clickThroughEnabled","syncSize","scaleMode"],getUIClass:function(){return yz},get3dUIClass:function(){return Zq},onChildAdded:function(r,K){RO.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(r,K){RO.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},_getBoundingBox:(wH=new Z,function(r,K){if(!(r=r instanceof JO?[r]:r)||0===r.length)return H1;var K=[],B=(function(r,b){var f=(new Z).makeRotationFromEuler(this.getEuler()).setPosition((new e1).fromArray(this.p3()));f.getInverse(f),r.forEach(function(r){var K,B;l(r)&&(K=b,B=f,wH.fromArray(wA(r)),r=r.getAnchor3d(),K.push((new e1).set(0-r.x,0-r.y,0-r.z).applyMatrix4(wH).applyMatrix4(B)),K.push((new e1).set(0-r.x,0-r.y,1-r.z).applyMatrix4(wH).applyMatrix4(B)),K.push((new e1).set(0-r.x,1-r.y,0-r.z).applyMatrix4(wH).applyMatrix4(B)),K.push((new e1).set(0-r.x,1-r.y,1-r.z).applyMatrix4(wH).applyMatrix4(B)),K.push((new e1).set(1-r.x,0-r.y,0-r.z).applyMatrix4(wH).applyMatrix4(B)),K.push((new e1).set(1-r.x,0-r.y,1-r.z).applyMatrix4(wH).applyMatrix4(B)),K.push((new e1).set(1-r.x,1-r.y,0-r.z).applyMatrix4(wH).applyMatrix4(B)),K.push((new e1).set(1-r.x,1-r.y,1-r.z).applyMatrix4(wH).applyMatrix4(B)))})}.call(this,r,K),[1/0,1/0,1/0]),b=[-1/0,-1/0,-1/0];return K.forEach(function(r){B[0]=Math.min(r.x,B[0]),B[1]=Math.min(r.y,B[1]),B[2]=Math.min(r.z,B[2]),b[0]=Math.max(r.x,b[0]),b[1]=Math.max(r.y,b[1]),b[2]=Math.max(r.z,b[2])}),{min:B,max:b}}),updateFromChildren:function(){var r,K,B,b,f,h,U,a,P;yK||this._updatingToChildren||!this._syncSize||0===this.size()||this._freezeSyncFromChildren||(B=this._getBoundingBox(this.toChildren(l)))&&(this._updatingFromChildren=1,r=(new e1).fromArray(this.getScale3d()),K=(new e1).fromArray(B.min),B=(new e1).fromArray(B.max),U=Y1.blockMinSize,P=new e1,0===(B=B.clone().sub(K)).x&&P.setX(.5),0===B.y&&P.setY(.5),0===B.z&&P.setZ(.5),b=this._width==H1||-1===this._width,f=new e1(this.getAnchor3d()),h=r.clone().multiply((new e1).fromArray(this.s3())),0===(a=B.clone()).x&&a.setX(U),0===a.y&&a.setY(U),0===a.z&&a.setZ(U),h=(U=f.clone().multiply(h)).clone().multiplyScalar(-1).sub(K).divide(a).add(U.divide(a)).add(P),U=this.s("keepPosition"),b||this._anchorChanged||this._scaleChanged||!U?(a=(f=!b&&U?h:f).clone().multiply(B).add(K).applyEuler(this.getEuler()).add((new e1).fromArray(this.p3())),this.p3([a.x,a.y,a.z])):this.setAnchor3d(h.x,h.y,h.z),P=new e1(1,1,1).divide(r).multiply(B),this.s3(Math.abs(P.x),Math.abs(P.y),Math.abs(P.z)),delete this._updatingFromChildren)},setPosition:function(r,K){this._updatingToChildren||(K=2===arguments.length?{x:r,y:K}:r,yK||this._updatingFromChildren||(this._updatingToChildren=1,ks(this._children,K.x-this._position.x,K.y-this._position.y),delete this._updatingToChildren),RO.superClass.setPosition.call(this,K))},setSize3d:function(){this.beginTransaction(),RO.superClass.setSize3d.apply(this,arguments),this.endTransaction()},setTall:function(r){var K;this._updatingToChildren||(this.beginTransaction(),(r=B1(r,Y1.blockMinSize))!==(K=this.getTall())&&RO.superClass.setTall.call(this,r),yK||this._updatingFromChildren||(this._updatingToChildren=1,this._adjustChildTallOrScale(r/K,"size"),delete this._updatingToChildren,this.updateFromChildren()),this.endTransaction())},setWidth:function(r){return this.setSize(r,this.getHeight())},setHeight:function(r){return this.setSize(this.getWidth(),r)},setSize:function(r,K){var B,b,f=Y1.blockMinSize;r=B1(r,f),K=B1(K,f),(f=this)._updatingToChildren||(2!==arguments.length&&(K=r.height,r=r.width),this.beginTransaction(),B=f.getWidth(),b=f.getHeight(),r!==B&&RO.superClass.setWidth.call(f,r),K!==b&&RO.superClass.setHeight.call(f,K),yK||f._updatingFromChildren||(f._updatingToChildren=1,f._adjustChildScaleOrSize(r/B,K/b,"size"),delete f._updatingToChildren,f.updateFromChildren()),this.endTransaction())},_adjustChildScaleOrSize:function(H,Y,S){var _,e;this._syncSize&&(_=this.getPosition(),e=this.getRotation(),this.eachChild(function(r){var K,B,b,f,h,U,a,P;l(r)&&(f=r.getPosition(),P=r.getRotation(),K=r.getWidth(),B=r.getHeight(),U=(b=r.getScale()).x*K,a=b.y*B,0!=U&&0!=a&&(H*Y<0&&r.setRotation(-1*P),(f=new JH(P,f.x,f.y,U,a)).translate(-_.x,-_.y),f.rotate(-e),P=d1(f.b*Math.sign(U),f.a*Math.sign(U)),f.scale(H,Y),a=S1(P),P=Math.abs(a)<.001?(U=f1(P),h=f.b/U,-f.c/U):(h=f.a/a,f.d/a),"scale"===S?r.setScale(h/K,P/B):"size"===S&&(U=h/b.x,a=P/b.y,r.setScale(IY(h)*Math.abs(b.x),IY(P)*Math.abs(b.y)),r instanceof M.Shape?(r.setWidthForce(Math.max(Math.abs(U),1e-5)),r.setHeightForce(Math.max(Math.abs(a),1e-5))):r.setSize(Math.max(.01,Math.abs(U)),Math.max(.01,Math.abs(a)))),f.rotate(e),f.translate(_.x,_.y),r.setPosition(f.tx,f.ty)))}))},_calcChangeFactor:function(r,K,B,b){var r=j1(r),f=(B=j1(B))<r?r/B:B/r;return r=j1(K),B=j1(b),B1(f,B<r?r/B:B/r)},setElevation:function(r){this._updatingToChildren||0!=(r-=this.getElevation())&&(yK||this._updatingFromChildren||(this._updatingToChildren=1,ks(this._children,0,r,0),delete this._updatingToChildren),RO.superClass.setElevation.apply(this,arguments))},setScaleTall:function(r){var K=this;if(!K._updatingToChildren){var B,b=K.getScaleTall();if(j1(r)<.01&&(r=.01*(IY(r)||IY(b))),"3d"===K._scaleMode)return B=K.getScale(),void K.setScale3d(B.x,r,B.y);RO.superClass.setScaleTall.call(K,r),yK||K._updatingFromChildren||(K._updatingToChildren=1,K._adjustChildTallOrScale(r/b,"scale"),delete K._updatingToChildren,K._scaleChanged=1,this.updateFromChildren(),delete K._scaleChanged)}},_adjustChildTallOrScale:function(B,b){var f;this._syncSize&&(f=this.getElevation(),this.eachChild(function(r){var K;l(r)&&("size"===b?(K=r.getTall(),B<0&&r.setScaleTall(-1*r.getScaleTall()),r.setTall(Math.max(.01,Math.abs(K*B)))):(K=r.getScaleTall(),r.setScaleTall(K*B)),r.setElevation(f+(r.getElevation()-f)*B))}))},setAnchor3d:function(){var r;if(!this._updatingToChildren)return this.beginTransaction(),(r=RO.superClass.setAnchor3d.apply(this,arguments))&&!yK&&!this._updatingFromChildren&&this._syncSize&&(this._anchorChanged=1,this.updateFromChildren(),delete this._anchorChanged),this.endTransaction(),r},setAnchor:function(r,K,B){var b=this;if(!b._updatingToChildren){var f=b.getAnchor(),h=RO.superClass.setAnchor.apply(b,arguments);if(yK||b._updatingFromChildren||!b._syncSize)return h;b._updatingToChildren=1;var U=b.getAnchor(),a=(P=b.getSize()).width*(f.x-U.x),P=P.height*(f.y-U.y),f=(new Z).compose(new e1,this.getQuaternion(),new e1(this.getScale3d())),H=new e1(a,0,P).applyMatrix4(f);return b.eachChild(function(r){var K;l(r)&&(K=new e1(r.p3()),r.p3(K.add(H).toArray()))}),delete b._updatingToChildren,h}},setAnchorElevation:function(r){var K=this;if(!K._updatingToChildren){var B=K.getAnchorElevation(),b=RO.superClass.setAnchorElevation.apply(K,arguments);if(yK||K._updatingFromChildren||!K._syncSize)return b;K._updatingToChildren=1;var f=K.getAnchorElevation(),B=K.getTall()*(B-f),f=(new Z).compose(new e1,this.getQuaternion(),new e1(this.getScale3d())),h=new e1(0,B,0).applyMatrix4(f);return K.eachChild(function(r){var K;l(r)&&(K=new e1(r.p3()),r.p3(K.add(h).toArray()))}),delete K._updatingToChildren,b}},setRotation:function(r){this._updateChildrenRotation3d("rotation",r)},setRotationX:function(r){this._updateChildrenRotation3d("rotationX",r)},setRotationZ:function(r){this._updateChildrenRotation3d("rotationZ",r)},setRotation3d:function(r,K,B){var b,f,h=this;h._updatingToChildren||(b=h.r3(),RO.superClass.setRotation3d.apply(h,arguments),f=h.r3(),yK||h._updatingFromChildren||(h._updatingToChildren=1,h.eachChild(function(r){l(r)&&r.syncRotation3d(h,f,b)}),delete h._updatingToChildren))},_updateChildrenRotation3d:function(r,K){var B;this._updatingToChildren||(B=this[fY(r)](),RO.superClass[hY(r)].call(this,K),yK||this._updatingFromChildren||this._updateRotationToChildren(r,K-B))},_updateRotationToChildren:function(K,B){var b=this;b._updatingToChildren=1,b.eachChild(function(r){l(r)&&r._11Q(b,K,B)}),delete b._updatingToChildren},setScale:function(r,K){var B,b=this;b._updatingToChildren||(null==K&&(K=r.y,r=r.x),B=b.getScale(),j1(r)<.01&&(r=.01*(IY(r)||IY(B.x))),j1(K)<.01&&(K=.01*(IY(K)||IY(B.y))),"3d"===b._scaleMode?b.setScale3d(r,b.getScaleTall(),K):(RO.superClass.setScale.call(b,r,K),yK||b._updatingFromChildren||(b._updatingToChildren=1,r/=B.x,K/=B.y,b._adjustChildScaleOrSize(r,K,"scale"),delete b._updatingToChildren,b._scaleChanged=1,b.updateFromChildren(),delete b._scaleChanged)))},onPropertyChanged:function(r){RO.superClass.onPropertyChanged.call(this,r),"s:3d.visible"!==r.property&&"parent"!==r.property||this._invalidateChildrenBatch()},_invalidateChildrenBatch:function(){this.eachChild(function(r){(r.s("batch")||r.s("wf.geometry")||r.s("wf.visible"))&&r.iv(),r instanceof RO&&r._invalidateChildrenBatch()})},getSerializableProperties:function(){var r=RO.superClass.getSerializableProperties.call(this);return r.clickThroughEnabled=1,r.syncSize=1,r.scaleMode=1,r},setScale3d:(TH=new e1,tH=new e1,pH=new e1,qH=new Z,yH=new FH,kH=new e1,function(r,K,B){var b,f,h=this,K="number"==typeof r?{x:r,y:K,z:B}:r.length?{x:r[0],y:r[1],z:r[2]}:r;"3d"!==h._scaleMode?RO.superClass.setScale3d.apply(h,arguments):h._syncSize&&0!==h.size()&&((b=h.getMatrix4()).getInverse(b),RO.superClass.setScaleTall.call(h,K.y),RO.superClass.setScale.call(h,K.x,K.z),f=h.getMatrix4(),yK||h._updatingFromChildren||(h._updatingToChildren=1,h.eachChild(function(r){var K;l(r)&&(tH.fromArray(r.s3()),r instanceof M.Polyline?(K=r.getThickness(),tH.x=tH.x||K,tH.y=tH.y||K,tH.z=tH.z||K,kH.copy(r.getScale3d()).multiplyScalar(K),r.getQuaternion(yH),TH.copy(r.p3()),pH.copy(r.getFinalScale3d()),pH.x=pH.x||kH.x,pH.y=pH.y||kH.y,pH.z=pH.z||kH.z,qH.compose(TH,yH,pH)):r.getMatrix4(qH),qH.premultiply(b).premultiply(f),qH.decompose(TH,yH,pH),pH.divide(tH),r.setQuaternion(yH),r.p3(TH.toArray()),r.setScale3d(pH.toArray()))}),delete h._updatingToChildren,h._scaleChanged=1,h.updateFromChildren(),delete h._scaleChanged))})}),M.Grid=function(){vY(M.Grid,this)}),lO=(Cs("Grid",JO,{IRotatable:!1,_icon:"grid_icon",_image:H1,getUIClass:function(){return vz},setRotation:function(){},getCellRect:function(r,K){var B=this.s("grid.row.count"),b=this.s("grid.column.count");if(B<=0||b<=0||r<0||B<=r||K<0||b<=K)return H1;var f,h,U,a=this.getRect(),P=this.s("grid.row.percents"),H=this.s("grid.column.percents");if(zP(a,this,"grid.border",-1),P&&P._as&&(P=P._as),H&&H._as&&(H=H._as),P&&P.length===B){for(f=U=0;f<r;f++)U+=a.height*P[f];a.y+=U,a.height=a.height*P[r]}else a.height=a.height/B,a.y+=a.height*r;if(H&&H.length===b){for(f=h=0;f<K;f++)h+=a.width*H[f];a.x+=h,a.width=a.width*H[K]}else a.width=a.width/b,a.x+=a.width*K;return W9(a,-this.s("grid.gap")),a}}),M.Text=function(){vY(lO,this),this.setSize(100,50),this.s("text","TEXT")}),CO=(Cs("Text",JO,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return zz},setWidth:function(r){lO.superClass.setWidth.call(this,r=r||.001)},setHeight:function(r){lO.superClass.setHeight.call(this,r=r||.001)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),g1("__text__",{width:{value:100,isSafeFunc:!0,func:function(r){return r?r._width:100}},height:{value:50,isSafeFunc:!0,func:function(r){return r?r._height:50}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"},scaleX:{func:"style@text.scale.x"},scaleY:{func:"style@text.scale.y"},gradient:{func:"style@text.gradient"},gradientColor:{func:"style@text.gradient.color"},gradientPack:{func:"style@text.gradient.pack"},decoration:{func:"style@text.decoration"},vertical:{func:"style@text.vertical"},verticalGap:{func:"style@text.vertical.gap"},wrap:{func:"style@text.wrap"},letterGap:{func:"style@text.letter.gap"},borderWidth:{func:"style@text.border.width"},borderColor:{func:"style@text.border.color"}}]}),M.Shape=function(){vY(CO,this),this._59O=new $}),mO=(CO.__de__=K,Cs("Shape",JO,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return kz},get3dUIClass:function(){return Wq},getLength:function(r){return VY(XN(this._59O,this._58O,r,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var r=this._58O;return r&&new $(r._as.slice(0))},setSegments:function(r){var K=this._58O;r=r?YY(r)?new $(r.slice(0)):new $(r._as.slice(0)):null,(K&&r&&K._as.join(",")!==r._as.join(",")||K!==r)&&(this._58O=r,this.fp("segments",K,r))},getPoints:function(){return this._59O},toPoints:function(){var r=this._59O;return new $(r._as.slice(0))},getPointsMatrix2d:function(){var r=new D.Matrix2d,K=this.getPosition(),B=this.getScale(),b=this.getRotation();return r.translate(-K.x,-K.y).scale(B.x,B.y).rotate(b).translate(K.x,K.y),r},getPointsMatrix3d:function(){var r=new D.Matrix4,K=r.getElements(),B=this.p3(),b=(k6(K,B),nO(K,this.getFinalRotation3d(),this.getRotationMode()),this.getScale3d()),f=this._dynamicScale3d;return f&&(b[0]*=f[0],b[1]*=f[1],b[2]*=f[2]),w6(K,b),k6(K,HA(B)),r},setPoints:function(r,K){var B,b,f=this,h=f._59O;r=r?YY(r)?new $(r.slice(0)):new $(r._as.slice(0)):new $,K&&(B=f.getPosition(),b=new JH(f.getRotation(),0,0,f.getScale().x,f.getScale().y)),(h&&r&&h._as.join(",")!==r._as.join(",")||h!==r)&&(f._59O=r,f.fs(),f.fp("points",h,r)),K&&(r=(h=f.getPosition()).x-B.x,K=h.y-B.y,B=b.tf(r,K),f.setPosition(h.x-r+B.x,h.y-K+B.y))},setPoints3d:function(r,K){var B=new e1(this.p3()),b=this.getPointsMatrix3d();b.setPosition(new e1),DO.superClass.setPoints.call(this,r),K&&(r=new e1(this.p3()).clone().sub(B).applyMatrix4(b),B.add(r),this.p3(B.x,B.y,B.z))},addPoint:function(r,K,B){var b=this.toPoints();b.add(r,K),this.setPoints(b,B)},setPoint:function(r,K,B){var b=this.toPoints();b.set(r,K),this.setPoints(b,B)},removePointAt:function(r){var K=this.toPoints();K.removeAt(r),this.setPoints(K)},setWidthForce:function(r){var K,B,b,f,h=this;h._55I||yK||!h.getWidth()||(h._55I=1,K=h._position.x,B=r/h.getWidth(),b=h.toPoints(),f=new $,1!=B&&(b.each(function(r){f.add({x:(r.x-K)*B+K,y:r.y,e:r.e})}),h.setPoints(f),WN(h,[B,0,0,1,K*(1-B),0]),h.fs()),delete h._55I),CO.superClass.setWidth.call(h,r)},setWidth:function(r){return this.setWidthForce(r<fA?fA:r)},setHeightForce:function(r){var K,B,b,f,h=this;h._55I||yK||!h.getHeight()||(h._55I=1,K=h._position.y,B=r/h.getHeight(),b=h.toPoints(),f=new $,1!=B&&(b.each(function(r){f.add({x:r.x,y:(r.y-K)*B+K,e:r.e})}),h.setPoints(f),WN(h,[1,0,0,B,0,K*(1-B)]),h.fs()),delete h._55I),CO.superClass.setHeight.call(h,r)},setHeight:function(r){return this.setHeightForce(r<fA?fA:r)},setAnchorElevation:function(r){this._55I=!0;var K,B=this._updatingAnchor3d,r=(yK||B||(K=this.getAnchorElevation(),0!=(K=this.getTall()*(K-r))&&this.shiftPointsElevation(K)),CO.superClass.setAnchorElevation.apply(this,arguments));return B||delete this._55I,r},getShapeElevation:function(r){return this._54O-(this.getTall()||0)*(this._anchorElevation-.5)},setAnchor3d:function(r,K,B,b){var f,h,U,a,P,H=this,r=("number"==typeof r?f={x:r,y:K,z:B}:(f=r.length?{x:r[0],y:r[1],z:r[2]}:r,b=K),H._55I=!0,H._updatingAnchor3d=!0,H.beginTransaction(),yK||(B=H.getAnchor3d(),r=H.getSize(),K=H.getTall(),h=r.width*(B.x-f.x),U=r.height*(B.z-f.z),a=K*(B.y-f.y),b||H.shiftPoints(h,U,a),P=H.p3()),CO.superClass.setAnchor3d.apply(H,arguments));return yK||b&&(K=H.p3(),H.shiftPoints(K[0]-P[0]+h,K[2]-P[2]+U,K[1]-P[1]+a)),H.endTransaction(),delete H._updatingAnchor3d,delete H._55I,r},setAnchor:function(r,K,B){var b,f,h,U=this,a=(U._55I=!0,U._updatingAnchor3d),P=!yK&&!a,K=(P&&("number"==typeof r?f={x:r,y:K}:(f=r.length?{x:r[0],y:r[1]}:r,B=K),r=U.getAnchor(),b=(K=U.getSize()).width*(r.x-f.x),f=K.height*(r.y-f.y),B||U.shiftPoints(b,f),h=U.getPosition()),CO.superClass.setAnchor.apply(U,arguments));return P&&(r=U.getPosition(),B&&U.shiftPoints(r.x-h.x+b,r.y-h.y+f)),a||delete U._55I,K},shiftPoints:function(B,b,f){var h,r,U;(B||b||f)&&(h=this.getElevation()||0,r=this.toPoints(),U=new $,r.each(function(r){var K=r.e;U.add({x:r.x+B,y:r.y+b,e:K=f?(K==H1?h:K)+f:K})}),this.setPoints(U),this.fs())},shiftPointsElevation:function(r){return this.shiftPoints(0,0,r)},setPosition:function(r,K){var B=this;if(!B._28Q){if(B._28Q=1,!B._55I&&!yK){if(r=(K=2===arguments.length?{x:r,y:K}:r).x-B._position.x,K=K.y-B._position.y,0==r&&0==K)return void delete B._28Q;B._55I=1,B.shiftPoints(r,K),WN(B,[1,0,0,1,r,K]),delete B._55I}CO.superClass.setPosition.apply(B,arguments),delete B._28Q}},fs:function(){this.fireShapeChange()},_70I:function(){if(2!==this._59O.size())return!1;var r=this._58O;return!r||2===r.size()&&1===r.get(0)&&2===r.get(1)},fireShapeChange:function(){var r;this._55I||yK||(r=l9(this._59O))&&(this._55I=1,this.setRect(r),delete this._55I),this.fp(tu,!1,!0)},getSerializableProperties:function(){var r=CO.superClass.getSerializableProperties.call(this);return r.segments=1,r.points=1,r.thickness=1,r.closePath=1,r}}),M.Points=function(){vY(mO,this)}),DO=(Cs("Points",JO,{_59O:[],_colors:[],_sizes:[],_uvoffsets:[],get3dUIClass:function(){return $q},getPoints:function(){return this._59O},setPoints:function(r){var K=this._59O,B=(r=r?r.slice(0):[])[0];if(UY(B)){var b=r;r=[];for(var f=0,h=b.length;f<h;f+=3)r.push({x:b[f],e:b[f+1],y:b[f+2]})}this._59O=r,this._pointsDirty=!0,this.fp("points",K,this._59O)},setPoint:function(r,K){var B=this._59O.slice(0);B[r]=K,this.setPoints(B)},addPoint:function(r){this.setPoint(this._59O.length,r)},getColors:function(){return this._colors},setColors:function(r){var K=this._colors;r=r?r.slice(0):[],this._colors=r,this._colorsDirty=!0,this.fp("colors",K,r)},setPointColor:function(r,K){var B=this._colors.slice(0);B[r]=K,this.setColors(B)},getSizes:function(){return this._sizes},setSizes:function(r){var K=this._sizes;r=r?r.slice(0):[],this._sizes=r,this._sizesDirty=!0,this.fp("sizes",K,this._sizes)},setPointSize:function(r,K){var B=this._sizes.slice(0);B[r]=K,this.setSizes(B)},getUvoffsets:function(){return this._uvoffsets},setUvoffsets:function(r){var K=this._uvoffsets;r=r?r.slice(0):[],this._uvoffsets=r,this._offsetsDirty=!0,this.fp("uvoffsets",K,this._uvoffsets)},setPointUvoffset:function(r,K,B){var b;"object"==typeof K?(b=K[0],B=K[1]):b=K,(K=this._uvoffsets.slice(0))[2*r+0]=b,K[2*r+1]=B,this.setUvoffsets(K)},getPointInfo:function(r){if(!(K=this.getPoints())||K[r]==H1)return H1;var K=[(K=K[r]).x,K.e,K.y],B=this.mat||wA(this),b=[K[0],K[1],K[2]];return xA(b,B),B=this.getColors()[r]||this.s("points.color"),{size:(r=this.getSizes()[r])==H1?this.s("points.size"):r,color:B,local:K,world:b}},getSerializableProperties:function(){var r=mO.superClass.getSerializableProperties.call(this);return r.points=1,r.colors=1,r.sizes=1,r.uvoffsets=1,r},onPropertyChanged:function(r){mO.superClass.onPropertyChanged.call(this,r),"s:points.color"===(r=r.property)?this._colorsDirty=!0:"s:points.size"===r?this._sizesDirty=!0:"s:points.model"===r&&(this._modelDirty=!0)},getWidth:function(){if(0<=this._width)return this._width;var r=this.getStyle("points.model");return(r=r&&K6(r))&&r.rawS3?r.rawS3[0]:1},getHeight:function(){if(0<=this._height)return this._height;var r=this.getStyle("points.model");return(r=r&&K6(r))&&r.rawS3?r.rawS3[2]:1},getTall:function(){if(0<=this._tall)return this._tall;var r=this.getStyle("points.model");return(r=r&&K6(r))&&r.rawS3?r.rawS3[1]:1}}),M.Polyline=function(){vY(DO,this),this.s({"shape.background":null,"shape.border.width":2}),this._geometryVersion=0}),iO=(Cs("Polyline",CO,{_icon:"polyline_icon",get3dUIClass:function(){return cq},getUIClass:function(){return wz},setClosePath:function(r){},setTall:function(r){var K,B,b,f,h=this;h.beginTransaction(),h._55I||h._24Q||yK||!h.getTall()||(h._24Q=1,K=h._54O,1!=(B=r/h.getTall())&&(b=h.toPoints(),f=new $,b.each(function(r){f.add({x:r.x,y:r.y,e:r.e==H1?r.e:(r.e-K)*B+K})}),h.setPoints(f),h.fs()),delete h._24Q),DO.superClass.setTall.call(h,r),h.endTransaction()},setElevation:function(r){this.beginTransaction(),this._55I||this._24Q||yK||(this._24Q=1,0!=(r-=this._54O)&&this.shiftPointsElevation(r),delete this._24Q),DO.superClass.setElevation.apply(this,arguments),this.endTransaction()},fireShapeChange:function(){var r=this,K=r._59O;if(!r._55I&&!r._24Q&&!yK){var B=K.size();if(B){for(var b=1,f=K.get(0),h=r._54O,U=(f.e==H1&&(f.e=h),f.e),a=0;b<B;b++){(f=K.get(b)).e==H1&&(f.e=h);var P=b1(U,f.e),H=B1(U+a,f.e),U=P,a=H-P}r._24Q=1,r.setTall(a),r.setElevation(U+a*r._anchorElevation),delete r._24Q}}DO.superClass.fireShapeChange.apply(r,arguments)},onPropertyChanged:(vH={},["points","segments","thickness","position","elevation","rotation","rotationX","rotationZ","rotationMode","scale","scaleTall","s:shape.border.color","s:shape.border.gradient.color","s:shape.border.pattern","s:shape.dash","s:shape.dash.color","s:shape.dash.pattern","s:shape.dash.offset","s:3d.clip.direction","s:repeat.uv.length","s:rotate.vs.length","s:rotate.uv.length","s:body.color","s:shape3d","s:shape3d.visible","s:shape3d.image","s:shape3d.smooth","s:shape3d.resolution","s:shape3d.color","s:shape3d.blend","s:shape3d.side","s:shape3d.start.angle","s:shape3d.sweep.angle","s:shape3d.top.cap","s:shape3d.top.image","s:shape3d.top.visible","s:shape3d.top.color","s:shape3d.bottom.cap","s:shape3d.bottom.image","s:shape3d.bottom.visible","s:shape3d.bottom.color","s:shape3d.uv.union"].forEach(function(r){vH[r]=!0}),function(r){DO.superClass.onPropertyChanged.call(this,r),vH[r.property]&&this._geometryVersion++})}),M.SubGraph=function(){vY(iO,this)}),ZO=(Cs("SubGraph",JO,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){iO.superClass._8I.call(this),this.eachChild(function(r){l(r)&&r._8I()})}}),Y1.loadingRefGraph=0,M.RefGraph=function(){vY(ZO,this)}),gO=(Cs("RefGraph",RO,{_icon:"refGraph_icon",getRef:function(){return this._ref},setRef:function(r){var K=this._ref;this._ref=r,this.fp("ref",K,r),this.updateRef()},_21I:function(r){ZO.superClass._21I.apply(this,arguments),this.updateRef()},updateRef:function(){var B,K,b=this;Y1.loadingRefGraph++,b.clearChildrenFromDataModel(),Y1.loadingRefGraph--,b._ref&&b._dataModel&&(b._xhrLoadHandler&&(b._xhrLoadHandler.cancel=!0),B=yK,(K=b._xhrLoadHandler=function(r){var K;r&&b._dataModel&&(Y1.loadingRefGraph++,K=b._pendingUpdateInfo={needToRestore:B},B&&(K.p3=b.p3(),K.s3=b.s3(),K.r3=b.r3(),K.anchor3d=b.getAnchor3d(),K.scale3d=b.getScale3d()),b.r3(0,0,0),b.setScale3d(1,1,1),b.setAnchor3d(.5,.5,.5),b.p3(0,0,0),K=Y1.parse(r),(r=b._dataModel.deserialize(K,b,{justDatas:!0})).each(function(r){r._refGraph=b}),b.checkPendingUpdateInfo(),Y1.loadingRefGraph--,Y1.handleRefGraphLoaded(b,r,K))}).xhrLoadCalled=!1,Y1.load(b._ref,function(r){K.cancel||(K.xhrLoadCalled?K(r):y9(function(){K(r)}))}),K.xhrLoadCalled=!0)},checkPendingUpdateInfo:function(){var K,r=this,B=r._pendingUpdateInfo;B?(K=!0,this.eachChild(function(r){(r._pendingCheckImageJSON||r._pendingUpdateInfo)&&(K=!1)}),K&&(Y1.loadingRefGraph++,r._pendingUpdateInfo=null,r.updateFromChildren(),B.needToRestore&&(r.setAnchor3d(B.anchor3d),r.setScale3d(B.scale3d),r.r3(B.r3),r.p3(B.p3)),this.getParent()instanceof ZO&&this.getParent().checkPendingUpdateInfo(),r.onPendingUpdated&&r.onPendingUpdated(),Y1.loadingRefGraph--)):r.onPendingUpdated&&(Y1.loadingRefGraph++,r.onPendingUpdated(),Y1.loadingRefGraph--)},getSerializableProperties:function(){var r=ZO.superClass.getSerializableProperties.call(this);return r.ref=1,r}}),M.EdgeGroup=function(r,K){this._70O=r,this._siblings=K;for(var B,b=0,f=r.size(),h=T1[Du];b<f;b++)if((B=r.get(b).getOwnStyle(Du))!=H1){h=B;break}for(h==H1&&(h=!0),(K=(K=Y1.edgeGroupAgentFunc)&&K(r))&&K!==r.get(0)&&(r.remove(K),r.add(K,0)),b=0;b<f;b++)r.get(b).s(Du,h)},Cs("EdgeGroup",A,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(r){return this._70O.get(r)},indexOf:function(r){return this._70O.indexOf(r)},each:function(r,K){this._70O.each(r,K)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(K,B){this._siblings.each(function(r){r._70O.each(K,B)})}}),qY(Y1,{setConnectAction:function(r,K,B){var b=GK[r]={type:r,action:K};if(B)for(var f in B)b[f]=B[f]},getConnectAction:function(r,K){if(!K){if(!r)return null;K=r.getCurrentConnectActionType()}return GK[K]},doConnectAction:function(K,r,B,b){if(b=b||K.getCurrentConnectActionType(),!(b=GK[b]))return!1;var f=b.action;return!!f&&(r instanceof X.Group?K.sm().getSelection().each(function(r){f.call(null,K,r,B)}):f.call(null,K,r,B),!0)},doDeleteConnectionAction:function(K,r,B){if(B=B||K.getCurrentConnectActionType(),!(B=GK[B])||!B.delete)return!1;var b=B.delete.action;return!!b&&(r instanceof X.Group?K.sm().getSelection().each(function(r){b.call(null,K,r)}):b.call(null,K,r),!0)}}),M.JSONSerializer=function(r,K){this.dm=this._dataModel=r,Y1.forceHierarchicalSerialization?this._hierarchical=!0:this._hierarchical=K==H1?r.isHierarchicalRendering():K}),WO=(Cs("JSONSerializer",A,{ms_ac:["hierarchical"],serialize:function(r){return Y1.stringify(this.toJSON(),r)},toJSON:function(){var r,K,B=this,b=B.dm,f=b.getRoots(),h=B.json={v:Y1.getVersion(),p:{},a:{},d:[]},U=b.getSerializableAttrs();for(K in(r=b.getInit())&&(h.init=r),(r=b.getName())&&(h.p.name=r),(r=b.getBackground())&&(h.p.background=r),(r=b.getLayers())&&(h.p.layers=r),(r=b.getEnvmap())&&(h.p.envmap=r),(r=b.getEnvmapType())&&(h.p.envmapType=r),h.p.autoAdjustIndex=b.isAutoAdjustIndex(),h.p.hierarchicalRendering=b.isHierarchicalRendering(),U){var a=b.a(K);a!==P1&&B[An](K,a,h.a)}return zY(h.a)&&delete h.a,B._hierarchical?f.each(B.serializeData,this):b.each(function(r){B.serializeData(r)}),b.fireSerializeEvent({type:"serialize",json:h}),b.getPostProcessingData()&&(h.p.postProcessingData=b.getPostProcessingData()),h},isSerializable:function(r){return!0},getProperties:function(r){return r.getSerializableProperties()},getStyles:function(r){return r.getSerializableStyles()},getAttrs:function(r){return r.getSerializableAttrs()},serializeData:function(r){var K=this;if(K.isSerializable(r)&&!r._refGraph){var B,b,f,h,U,a=new(z9(r.getClassName())||r.getClass()),P={c:r.getClassName(),i:r.getId(),p:{},s:{},a:{}};for(B in K.json.d.push(P),K.getProperties(r))/^_/.test(B)?(U=r[B],"_width"!==B&&"_height"!==B||U!=H1&&-1!==U||(h==P1&&(f=(r.s("layout.h")||r.s("layout.v"))&&r.getHost()||r instanceof M.Node&&(f=r.getParent())&&f instanceof M.Block||r.s("fullscreen"),h=r.hasInheritedSize()),f&&h&&(U=r[B]="_width"===B?r.getWidth():r.getHeight())),U!==a[B]&&K[An](B.substr(1),U,P.p)):r[b=fY(B)]&&(U=r[b]())!==a[b]()&&K[An](B,U,P.p);for(B in K.getStyles(r))(U=r.s(B))!==a.s(B)&&K[An](B,U,P.s);for(B in K.getAttrs(r))(U=r.a(B))!==a.a(B)&&K[An](B,U,P.a);zY(P.p)&&delete P.p,zY(P.s)&&delete P.s,zY(P.a)&&delete P.a}K._hierarchical&&r.getChildren().each(K.serializeData,K)},serializeValue:function(r,K,B){SY(K)?K={__a:K._as}:K instanceof PP?K={__i:K.getId()}:K instanceof HP&&(K={__dm:K.serialize(0)}),B[r]=K},deserialize:function(r,K,B){var b=this;if(!_1(r)||!/.json$/.test(r))return b.deserializeImpl(r,K,B);Y1.xhrLoad(r,function(r){b.deserializeImpl(r,K,B)})},deserializeImpl:function(r,K,B){var b=this.dm,f=(b.setDeserializing(!0),B=aY(B)?{setId:B}:HY(B)?{finishFunc:B}:B||{},r=this.json=_1(r)?Y1.parse(r):r,!B.justDatas&&r.a&&r.a.onPreDeserialize&&!B.disableOnPreDeserialize&&r.a.onPreDeserialize(r,b,B.view),b.beginTransaction(),yK++,this._82I={},new $),h=new $,U=0,a=r.d.length;if(B.justDatas||(!B.disableInit&&HY(r.init)&&r.init(b),b.setInit(r.init)),!B.justDatas){for(var P in r.a)b.a(P,this[Vn](r.a[P]));for(var H in r.p)b[hY(H)](r.p[H])}for(;U<a;U++){var Y=r.d[U],S=new(z9(Y.c)),_=Y.i;B.setId&&_!=H1&&(S._id=_),this._82I[_]=S,f.add(S),h.add(Y)}for(U=0;U<a;U++)this.deserializeData(f.get(U),h.get(U));return f.each(function(r){K&&!r.getParent()&&r.setParent(K),b.add(r)}),B.__innerHandler__&&B.__innerHandler__(r,b,B.view,f),b.fireSerializeEvent({type:"deserialize",json:r}),yK--,b.endTransaction(),!B.justDatas&&r.a&&r.a.onPostDeserialize&&!B.disableOnPostDeserialize&&r.a.onPostDeserialize(r,b,B.view,f),B.finishFunc&&B.finishFunc(r,b,B.view,f),b.setDeserializing(!1),f},deserializeData:function(r,K){for(var B in K.p)r[hY(B)](this[Vn](K.p[B]));for(B in K.s)r.s(B,this[Vn](K.s[B]));for(B in K.a)r.a(B,this[Vn](K.a[B]))},deserializeValue:function(r){if(PY(r)){var K,B=r.__i;if(B!=H1)return this._82I[B];if((B=r.__dm)!=H1)return(K=new M.DataModel).deserialize(B),K;if(B=r.__a,YY(B))return new $(B)}return r}}),qY(HP,{serialize:function(r,K){return new gO(this,K).serialize(r)},toJSON:function(r){return new gO(this,r).toJSON()},deserialize:function(r,K,B){return new gO(this).deserialize(r,K,B)}}),M.OverlappingBox=function(r){this.gv=r,this.boxes={}}),$O=(Cs("OverlappingBox",A,{clear:function(){var r,K=this.boxes;for(r in K)K[r].length=0},isOverlapping:function(r,K){var B,b,f,h,U=this.boxes,a=U[r];for(a?(B=a.rects,b=a.length):a=U[r]={rects:B=[],length:b=0},f=0;f<b;f++)if((h=B[f]).x<K.x+K.w&&h.x+h.w>K.x&&h.y<K.y+K.h&&h.h+h.y>K.y)return!0;return B.length<=b?(B.push(K),a.length++):B[a.length++]=K,!1}}),qY(Y1,{fetch:function(r,K){r.open((K=K||{}).method||"GET",K.url||"",!(null!=K.sync&&K.sync)),"json"===K.dataType&&r.setRequestHeader("Content-Type","application/json"),K.responseType&&(r.responseType=K.responseType),r.send(K.data)},convertImageSrc:function(r,K){(K=K&&"function"==typeof K?K:function(){})(r)}}),M.Request=function(){}),XO=(Cs("Request",A,{_mimeType:P1,getXhr:function(){return this._xhr||(this._xhr=new XMLHttpRequest,this.overrideMimeType("text/plain")),this._xhr},send:function(r){var K=this.getXhr();r.mimeType&&this.overrideMimeType(r.mimeType),K.onload=this.onload,K.onerror=this.onerror,Y1.fetch(K,r)},onload:function(){},onerror:function(){},getResponseType:function(){return this.getXhr().responseType},setOverrideMimeType:function(r){this.overrideMimeType(r)},getMimeType:function(){return this._mimeType},overrideMimeType:function(r){this.getXhr().overrideMimeType(this._mimeType=r)},getResponseHeader:function(r){return this.getXhr().getResponseHeader(r)},getResponseText:function(){var r=this.getXhr();return r.response||r.responseText},getStatus:function(){return this.getXhr().status}}),{}),cO={},OO={},QO={},EO=function(r){for(var K in OO)OO[K]&&!r["_loading_"+K+"_"]&&(QO[K][r["_loading_"+K+"_"]=q9()]=r)},rz=function(r,K,B,b){var f,h=QO[r];if(K&&h){for(var U in h)(f=h[U]).invalidateAll&&f.invalidateAll(P1,r+"Loaded",B),f.redraw&&f.redraw(),f.iv(),delete f["_loading_"+r+"_"];QO[r]={}}else if(b&&!zY(h))for(var U in h)(f=h[U]).invalidateAll&&f.invalidateAll(P1,r+"Loading",B),f.redraw&&f.redraw(),f.iv()},Kz="placeholderResource";function Bz(r,K){var B;_z&&(delete _z[r],(B=zY(_z))&&(_z=OO[Kz]=H1),rz(Kz,B,r,K))}var bz,fz,hz,Uz,az,Pz,Hz,Yz,Sz,_z=H1,ez=(QO[Kz]={},Y1.addPendingPlaceholder=function(r,K){(_z=_z||(OO[Kz]={}))[r]||(_z[r]=!0,y9(function(){Bz(r,!1)},H1,H1,K||1e5))},Y1.removePendingPlaceholder=Bz,function(a,P){function H(r,K){(B=b(r,K))&&(K=B),e[r]=K,delete _[r];var B=zY(_);B&&(_=OO[a]=H1),rz(a,B,r,K)}function Y(r,K){H(r,K),K&&Y1[B](r,K)}var S,_=H1,e=XO[a]={},o=a.charAt(0).toUpperCase()+a.substr(1),b=(QO[a]={},(P=P||MK).handleLoaded||lK),f="load"+o+"ByURL",B="handle"+o+"Loaded";cO[f]=function(B,b){if((b=b||B)&&!(_=_||(OO[a]={}))[B]){var f=new $O,h=!(_[B]={request:f,url:b});if("string"==typeof b&&(h=sK.test(b),b=Y1.beforeLoadURL(b,B)),b.data){var r=b.data;h&&r&&(r=Y1.parse(r)),P.delayToNextFrame?y9(function(){Y(B,r)}):Y(B,r)}else{f.onload=function(r){var K;200===this.status||0===this.status?(K=f.getResponseText(),h&&(K=Y1.parse(K)),Y(B,K)):H(B,Y1["handleUnfound"+o](B,b)||H1)},f.onerror=function(r){H(B,Y1["handleUnfound"+o](B,b)||H1)};var K={};if(K.url=encodeURI(b),K.sync=!1,P.loadingParam)for(var U in P.loadingParam)K[U]=P.loadingParam[U];f.send(K)}}},Y1["get"+o]=function(r){var K=e[r];return K===P1&&(cO[f](r),K=e[r]),K},Y1["get"+o+"Map"]=function(){return e},"shader"==a?(S=function(r,K){K&&null!==K.data&&(e[r]=null,EQ[r]=null),cO[f](r,K)},Y1.setShader=function(r,K,B){var b,f,h,U;_1(K)&&K.match(/\/\/ *FS/i)?(EQ[r]=null,e[r]=K):_1(K)&&_1(B)?(h=0,U=function(){0<h||(_&&(delete _[r],zY(_)&&(_=OO[a]=H1)),S(r,b&&f?{data:b+"\n// FS\n"+f}:{data:null}))},K.match(/void\s+main/i)?b=K:(h++,Y1.xhrLoad(K,function(r){b=r,h--,U()})),B.match(/void\s+main/i)?f=B:(h++,Y1.xhrLoad(B,function(r){f=r,h--,U()})),h&&((_=_||(OO[a]={}))[r]={}),U()):S(r,K)}):"shaderChunk"===a?Y1.setShaderChunk=function(r,K,B){_1(K)&&(B==P1&&(K.match(/\n/i)?B=!1:K.match(/\.(glsl|fs|vs|shader|txt|js)$/)&&(B=!0)),B?cO[f](r,K):e[r]=K)}:Y1["set"+o]=function(r,K){_1(K)&&K.substr(0,12)==PK&&(K=Y1.parse(K)),HY(K)||PY(K)?e[r]=K:cO[f](r)},Y1[B]=function(r,K){},Y1["handleUnfound"+o]=function(r,K){}}),oz=(Y1.registerResourceLoader=function(r,K){ez(r,K)},RP.GraphView=function(r){var K=this;K._24I={},K._34I=new $,K.enableDirtyRect(),K._25I={},K._56I={},K._view=lY(1,K),K._canvas=mY(K._view),K.dm(r||new HP),this._coreInteractor=new Fz(this),K.setEditable(!1),K.setScrollBarVisible(Y1.graphViewScrollBarVisible),K._initView()},r("GraphView",A,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:[Bn,bn,rn,Kn,"resettable","editInteractor",Eu,"zoomable","pannable","rectSelectable","autoScrollZone",Yn,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","anchorEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_zoomable:Y1.graphViewZoomable,_resettable:Y1.graphViewResettable,_pannable:Y1.graphViewPannable,_rectSelectable:Y1.graphViewRectSelectable,_autoScrollZone:Y1.graphViewAutoScrollZone,_rectSelectBackground:Y1.graphViewRectSelectBackground,_rectSelectBorderColor:Y1.graphViewRectSelectBorderColor,_editPointSize:Y1.graphViewEditPointSize,_editPointBorderColor:Y1.graphViewEditPointBorderColor,_editPointBackground:Y1.graphViewEditPointBackground,_scrollBarColor:ls,_scrollBarSize:T,_autoHideScrollBar:$H,_autoMakeVisible:Ds,_currentActionType:null,getCoreInteractor:function(){return this._coreInteractor},getLayers:function(){return this._dataModel.getLayers()},setLayers:function(r){this._dataModel.setLayers(r)},setEditable:function(r){var K,B=this,b=B.__interactorMap__;b||(K=RP.XEditInteractor,b=B.__interactorMap__={scrollBar:new Az(B),select:new dz(B),edit:new(K||lz)(B),text:new nz(B),move:new sz(B),default:new Gz(B),touch:new Vz(B,{editable:!1})}),r?(B._uieditable=!0,B.setInteractors([b.scrollBar,b.select,b.text,b.edit,b.move,b.default,b.touch])):(B._uieditable=!1,B.setInteractors([b.scrollBar,b.select,b.move,b.default,b.touch]))},getCanvas:function(){return this._canvas},_33I:function(r){var K=r.getUIClass();return K?new K(this,r):H1},getDataUI:function(r){var K=this._25I[r._id];return K===P1&&(K=this._33I(r),this._25I[r._id]=K),K},getNodeRect:function(r){return Y1.getNodeRect(this,r)},getFullscreenDatas:function(){return this._dataModel.getFullscreenDatas()},getEdgeInfo:function(r){return(r=this.getDataUI(r))?(r._79o(),r._78o):null},getEdgeSourcePosition:function(r){var K=(r=this.getDataUI(r)).s,r=r._data._40I;return LP(this,r,K("edge.source.position"),K("edge.source.offset.x"),K("edge.source.offset.y"),K("edge.source.anchor.x"),K("edge.source.anchor.y"))},getEdgeTargetPosition:function(r){var K=(r=this.getDataUI(r)).s,r=r._data._41I;return LP(this,r,K("edge.target.position"),K("edge.target.offset.x"),K("edge.target.offset.y"),K("edge.target.anchor.x"),K("edge.target.anchor.y"))},dispose:function(){},invalidateAll:function(r){var K=this;if(r){for(var B in K._25I)(B=K._25I[B])&&B.dispose();K._25I={},K._56I={},K._24I={},K._34I.clear(),K.redraw()}else K.dm().each(function(r){K.invalidateData(r)})},invalidateSelection:function(){var K=this;K.sm().each(function(r){K.invalidateData(r)})},invalidateData:function(r){this._24I[r._id]=r,this._21Q(r),this.iv()},_21Q:function(r){var K,B=this._24I;_Y(r)&&dK[r.s(Zu)]&&((K=r.getSourceAgent())&&K.getAgentEdges().each(function(r){B[r._id]=r}),(K=r.getTargetAgent())&&K.getAgentEdges().each(function(r){B[r._id]=r}),this.iv())},redraw:function(r){this._32I||(r?this._34I.add(r):(this._32I=1,this._34I.clear()),this.iv())},each:function(r,K){var B=0,b=this.getLayers(),f=this._dataModel,h=f._datas._as,U=h.length;if(b)for(var a={},P=(f.isHierarchicalRendering()&&f.eachByHierarchical(function(r){_=r._layer,(S=(S=a[_])||(a[_]=[])).push(r)}),b.length);B<P;B++){var H,Y,S,_=b[B];if(PY(_)&&(_=_.name),f.isHierarchicalRendering()){if((S=a[_])&&0<(H=S.length))for(var e=0;e<H;e++)if(Y=S[e],!1===(K?r.call(K,Y):r(Y)))return}else for(e=0;e<U;e++)if((Y=h[e])._layer===_&&!1===(K?r.call(K,Y):r(Y)))return}else if(f.isHierarchicalRendering())this._dataModel.eachByHierarchical(r,null,K);else for(;B<U;B++)if(Y=h[B],!1===(K?r.call(K,Y):r(Y)))return},reverseEach:function(r,K){var B,b=this._dataModel,f=b._layers,h=b._datas._as,U=h.length;if(f){var a={};for(b.isHierarchicalRendering()&&b.reverseEachByHierarchical(function(r){S=r._layer,(Y=(Y=a[S])||(a[S]=[])).push(r)}),B=f.length-1;0<=B;B--){var P,H,Y,S=f[B];if(PY(S)&&(S=S.name),b.isHierarchicalRendering()){if((Y=a[S])&&0<(P=Y.length))for(var _=0;_<P;_++)if(H=Y[_],!1===(K?r.call(K,H):r(H)))return}else for(_=U-1;0<=_;_--)if((H=h[_])._layer===S&&!1===(K?r.call(K,H):r(H)))return}}else if(b.isHierarchicalRendering())b.reverseEachByHierarchical(r,null,K);else for(B=U-1;0<=B;B--)if(H=h[B],!1===(K?r.call(K,H):r(H)))return},getViewRect:function(){return this._29I},getContentRect:function(){var r,K,B=this,b=B._84I;return b||(r=this.dm().a("width"),K=this.dm().a("height"),0<r&&0<K?B._84I={x:0,y:0,width:r,height:K}:(B.each(function(r){B.isVisible(r)&&(b=C9(b,B.getDataUIBounds(r)))}),B._84I=b||DK)),B._84I},getScrollRect:function(){return C9(this.getContentRect(),this._29I)},makeCenter:function(r,K,B){var b,f,h,U,a=this;a.getWidth()&&a.getHeight()?(a.makeVisible(r),a.validate(),(f=a.getDataUIBounds(r))&&(U=a.getWidth(),b=a.getHeight(),h=f.x+f.width/2,f=f.y+f.height/2,h=-h*a._zoom+U/2,U=-f*a._zoom+b/2,a.setTranslate(h,U,K))):B||y9(a.makeCenter,a,[r,K,!0],500)},fitData:function(K,B,b,f,r){var h,U=this;U.getWidth()&&U.getHeight()?(h=function(){U.makeVisible(K),U.validate();var r=U.getDataUIBounds(K);r&&(r=v9(r),W9(r,b==H1?20:b),U.fitRect(r,B,f))},B?Y1.callWhenLoaded(h):h()):r||y9(U.fitData,U,[K,B,b,f,!0],500)},fitContent:function(K,B,b,r){var f,h=this;h.getWidth()&&h.getHeight()?(f=function(){h.validate();var r=v9(h.getContentRect());W9(r,B==H1?20:B),h.fitRect(r,K,b)},K?Y1.callWhenLoaded(f):f()):r||y9(h.fitContent,h,[K,B,b,!0],500)},fitRect:function(r,K,B){var b=this,f=b.getWidth(),h=b.getHeight(),U=r.x+r.width/2,a=r.y+r.height/2,P=b1(f/r.width,h/r.height),U=-U*(r=b._zoom)+f/2,f=-a*r+h/2;0===P||isNaN(P)||(B&&(P=b1(1,P)),K?(b._65I&&(delete b._65I.finishFunc,b._65I.stop(!0)),b._14o&&b._14o.stop(!0),b.setTranslate(U,f,{finishFunc:function(){b.setZoom(P,K)}})):(b.setTranslate(U,f),b.setZoom(P)))},fitSelection:function(r,K,B){var b=this,f=b.sm(),h=null;f.size()&&(f.each(function(r){h=C9(b.getDataUIBounds(r),h)}),r&&W9(h,r),b.fitRect(h,K,B))},toCanvas:function(r,K,B){K=K||this._zoom,this.validateImpl();var b=this.getContentRect(),B=(B&&W9(b,B),b.width||(b.width=10),b.height||(b.height=10),mY()),f=b.x*K,h=b.y*K,U=Math.ceil(b.width*K),b=Math.ceil(b.height*K),a=(ZY(B,U,b,1),bN(B)),U=((r=r||this._dataModel.getBackground())&&QN(a,0,0,U,b,r),hN(a,-f,-h),a.scale(K,K),this._zoom);return this._zoom=K,this._42(a),this._zoom=U,a.restore(),this.redraw(),B},toDataURL:function(r,K,B,b){return this.toCanvas(r,B,b).toDataURL(K||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(U,a){var r,K,P=this,B=P.dm().getBackground(),b=(B&&(r=P.dm().a("width"),K=P.dm().a("height"),0<r&&0<K&&QN(U,0,0,r,K,B)),P.__htmlOrderList),H=[],Y=P._forcedLayoutHTML;if(P._93db(U,a),P.each(function(r){var K,B,b,f,h=P.getDataUI(r);h&&(K=P._56I[r._id],f=h._htmlView,K&&(B=h._79o(),f=h._htmlView,M.HtmlNode&&r instanceof M.HtmlNode?h._42(U):(r=P.getViewRect(),b=f&&f.layoutHTML,!a||i9(a,B)?(b&&(f.layoutHTML(),h.__outerLayout&&delete h.__outerLayout),h._42(U)):i9(r,B)||!b||h.__outerLayout&&!Y||(f.layoutHTML(),h.__outerLayout=!0))),f&&(H.push(f),(f=f.getView?f.getView():f).style.display=K?"block":Yu))}),b&&0<H.length){var f=!1;if(b.length!==H.length)f=!0;else for(var h=0;h<H.length;h++)if(H[h]!==b[h]){f=!0;break}f&&(H.forEach(function(r){!1!==r.autoAdjustIndex&&P.appendHTML(r,!0)}),this.__htmlOrderList=H)}else this.__htmlOrderList=H;P._92db(U,a)},disableDirtyRect:function(){this._shouldRedrawAll=p},enableDirtyRect:function(){var r=this;r._shouldRedrawAll=function(){return r._32I}},validateImpl:function(){this.tryUpdateRootData();var B,K,b,r,f,h,U,a=this,P=a.tx(),H=a.ty(),Y=a._zoom,S=a._canvas,_=this.getWidth(),e=this.getHeight(),o=a._29I,x={x:-P/Y,y:-H/Y,width:_/Y,height:e/Y},T={},t=a._34I,p=a._24I,q=a._shouldRedrawAll(),y=a._23I;for(B in a._24I={},_===S.clientWidth&&e===S.clientHeight||(ZY(S,_,e),a._forcedLayoutHTML=q=1),q||uY(x,o)||(a._forcedLayoutHTML=q=1),a._29I=x,a.each(function(r){B=r._id;var K=T[B]=a.isVisible(r);K!==a._56I[B]&&(p[B]=r,(b=a.getDataUI(p[B]))&&b._84o(K),a._84o(r,K))},a),p)(b=a.getDataUI(p[B]))&&(!q&&a._56I[B]&&(r=b._79o())&&t.add(r),b.invalidate()),a._83I=1;if(a._56I=T,!q)for(B in p)T[B]&&(b=a.getDataUI(p[B]))&&(r=b._79o())&&t.add(r);q?K=x:(t.each(function(r){i9(x,r)&&(K=C9(K,r))}),K&&(W9(K,B1(1,1/Y)),K.x=z1(K.x*Y)/Y,K.y=z1(K.y*Y)/Y,K.width=N1(K.width*Y)/Y,K.height=N1(K.height*Y)/Y,K=Z9(x,K))),(a._74O=K)&&0!==K.width&&0!==K.height&&(o=bN(S),S=K.x,f=K.y,h=K.width,U=K.height,S=Math.floor((S*Y+P)*WH),f=Math.floor((f*Y+H)*WH),h=Math.ceil(h*Y*WH)+1,U=Math.ceil(U*Y*WH)+1,q||(K.x=(S/WH-P)/Y,K.y=(f/WH-H)/Y,K.width=h/WH/Y,K.height=U/WH/Y),o.beginPath(),o.rect(S,f,h,U),o.clip(),o.clearRect(S,f,h,U),fN(o,P,H,Y),a._42(o,K),o.restore(),delete a._74O),t.clear(),delete a._32I,delete a._forcedLayoutHTML,y&&0<_&&0<e&&((b=a.getDataUI(y))&&(r=b._79o(),f=(S=a._29I).x,h=S.y,U=S.width,P=S.height,Y=a._zoom,r&&!i9(r,S)&&(r.x+r.width<f&&a.tx(-r.x*Y),r.x>f+U&&a.tx(-(r.x+r.width-U)*Y),r.y+r.height<h&&a.ty(-r.y*Y),r.y>h+P&&a.ty(-(r.y+r.height-P)*Y))),delete a._23I),a._83I&&(delete a._83I,delete a._84I),a._98O(),a.countFrame(),zY(a._24I)||y9(a.iv,a)},isValidGuideLineSource:function(r){return!0},tryUpdateRootData:function(){if(!this._rootDataUpdating){this._rootDataUpdating=!0;var r,K,B=this.getFullscreenDatas();for(K in B)r=B[K],this.scaleRootData(r);this.onRootDataUpdated&&this.onRootDataUpdated(),this._rootDataUpdating=!1}},scaleRootData:function(r){if("uniform"===(S=r.s("fullscreen"))||"fill"===S){r.getRotation()&&r.setRotation(0);var K=r.s("fullscreen.gap")||0,B=this.getWidth(),b=this.getHeight();if(B&&b){var B=B-2*K,b=b-2*K,f=r.getAnchor(),h=(U=r.getScaledSize()).width,U=U.height;if(H=r.s("fullscreen.lock"))return"uniform"===S?h/U<B/b?(Y=b/U,h=U*B/b):(Y=B/h,U=h*b/B):"v"===H?(h=B/(Y=b/U),r.getWidth()!==h&&r.setWidth(h)):(U=b/(Y=B/h),r.getHeight()!==U&&r.setHeight(U)),this.setZoom(Y),a=K-(r.getX()-f.x*h)*Y,P=K-(r.getY()-f.y*U)*Y,a!==this.tx()&&this.tx(a),void(P!==this.ty()&&this.ty(P));var a=this.tx(),P=this.ty(),H={x:(-a+K)/(Y=this._zoom),y:(-P+K)/Y,width:B/Y,height:b/Y},Y=("uniform"===S&&(a=h/U,K=(P=Math.min(H.width,H.height*a))/a,H.x+=.5*(H.width-P),H.y+=.5*(H.height-K),H.width=P,H.height=K),B=H.width/r.getScaleX(),b=H.height/r.getScaleY(),r.getWidth()==B&&r.getHeight()===b||r.setSize(B,b),H.x+f.x*H.width),S=H.y+f.y*H.height;Y===(h=r.getPosition()).x&&S===h.y||r.setPosition(Y,S)}}},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(r){var K=this;r!==K.isScrollBarVisible()&&(r?(gY(K._view,K._79O=CY()),gY(K._79O,K._27I=CY()),gY(K._79O,K._28I=CY())):(O9(K._79O),delete K._79O,delete K._27I,delete K._28I),K.fp("scrollBarVisible",!r,r))},getDebugTip:function(){return""},showScrollBar:function(){var r=this;r._79O&&(r._85I||(R1(function(){r._86I()},U9),r.iv()),r._85I=new Date)},_86I:function(){var r=this;r._85I&&((new Date).getTime()-r._85I.getTime()>=U9?(delete r._85I,r.iv()):R1(function(){r._86I()},U9))},getVScrollBar:function(){return this._27I},getHScrollBar:function(){return this._28I},_98O:function(){var r=this._27I,K=this._28I;if(this._79O){if(this._autoHideScrollBar&&!this._85I)return r.style.visibility=Wu,void(K.style.visibility=Wu);var B=this.getScrollBarColor(),b=this._zoom,f=this.getScrollBarSize(),h=this.getViewRect(),U=this.getScrollRect(),a=h.height*b,P=U.height*b,H=h.width*b-f-2,Y=a*((h.y-U.y)*b/P),S=a/P*a,_=r.style,P=(a<P-.5?(S<a9&&(a<(Y=(Y=Y+S/2-a9/2)<0?0:Y)+a9&&(Y=a-a9),S=a9),L(r,H,Y,f,S),_.visibility=$u,_.background=B,_.borderRadius=f/2+Su):_.visibility=Wu,h.width*b),a=U.width*b,Y=h.height*b-f-2,H=P*((h.x-U.x)*b/a),r=P/a*P,_=K.style;P<a-.5?(r<a9&&(P<(H=(H=H+r/2-a9/2)<0?0:H)+a9&&(H=P-a9),r=a9),L(K,H,Y,r,f),_.visibility=$u,_.background=B,_.borderRadius=f/2+Su):_.visibility=Wu}},setDataModel:function(r){var K=this,B=K._dataModel,b=K._selectionModel;B!==r&&(B&&(B.ump(K.handleDataModelPropertyChange,K),B.umm(K.handleDataModelChange,K),B.umd(K.handleDataPropertyChange,K),B.removeIndexChangeListener(K._75O,K),B.removeHierarchyChangeListener(K.handleHierarchyChange,K),b||B.sm().ums(K.handleSelectionChange,K)),(K._dataModel=r).mp(K.handleDataModelPropertyChange,K),r.mm(K.handleDataModelChange,K),r.md(K.handleDataPropertyChange,K),r.addIndexChangeListener(K._75O,K),r.addHierarchyChangeListener(K.handleHierarchyChange,K),b?b._21I(r):r.sm().ms(K.handleSelectionChange,K),K.invalidateAll(!0),K.fp(Nn,B,r),K.updateBackground())},getLayersInfo:function(){var r;return this._layersInfo===P1&&((r=this.getLayers())?(this._layersInfo={},r.forEach(function(r){var K=PY(r)?r.name:r;this._layersInfo[K]=r},this)):this._layersInfo=null),this._layersInfo},calculateEdgePosition:function(r,K,B){r instanceof M.Data?(b=this.getDataUI(r),a=iP(b)):(a=iP(null,r,arguments[1]),K=arguments[2],B=arguments[3]);var a,b,f=function(B){var b=1/0,f=0,h=new i;function r(r){var K;return 0<=r&&r<=1&&(h=$P(a,100*r),(K=(B.x-h.x)*(B.x-h.x)+(B.y-h.y)*(B.y-h.y))<b&&(b=K,f=r,1))}for(var K=0;K<100;++K)r(K/100);for(var U=.005;.001<U;)r(f-U)||r(f+U)||(U/=2);return f}(K=2===K.length?new i(K[0],K[1]):K),h=$P(a,100*f);if(!B)for(var U=b?XP(b):XP(r,arguments[1]),P=new i(h.x,h.y),H=49/(this._zoom*this._zoom),Y=0,S=U.length;Y<S;Y++)if(P.distanceToSquared(U[Y])<H)return{index:Y,point:U[Y],distance:Math.sqrt((U[Y].x-K.x)*(U[Y].x-K.x)+(U[Y].y-K.y)*(U[Y].y-K.y))};return{percent:f,point:h,distance:Math.sqrt((h.x-K.x)*(h.x-K.x)+(h.y-K.y)*(h.y-K.y))}},getPercentPositionOfPath:function(r,K){var B;return r instanceof M.Data?(B=this.getDataUI(r),B=iP(B)):(B=iP(null,r,arguments[1]),K=arguments[2]),$P(B,K)},getNeareastPositionOfPath:function(){return this.calculateEdgePosition.apply(this,arguments)},getPointsOfPath:function(r){for(var K,B,b,f,b=r instanceof M.Data?(K=this.getDataUI(r),B=(K=DP(K)).points,K.segments):(B=r,arguments[1]),h=r instanceof M.Shape?r.getPointsMatrix2d():new D.Matrix2d,U=[],a=-1,P=-1,H=0,Y=(b||B).length;H<Y;H++)5!==(f=b?b.get(H):1)&&(P++,3===f?(lt(U,B,a+1,P,"C",h),lt(U,B,a+2,P,"M",h),a+=2):4===f?(lt(U,B,a+1,P-1,"R",h),lt(U,B,a+2,P,"L",h),lt(U,B,a+3,P,"M",h),a+=3):(lt(U,B,a+1,P,"M",h),a+=1));return U},calculateAttachPoint:(bz=new i,fz=new i,hz=new i,function(r,K){var B=this.getAttachPoints(r);if(!B||!B.length)return null;hz.set(K.x,K.y);for(var b,f,h,U,a=1/0,P=0,H=B.length;P<H;P++)h=B[P],fz.x=h.x,fz.y=h.y,bz.x=h.offsetX||0,bz.y=h.offsetY||0,h=LP(this,r,0,bz.x,bz.y,fz.x,fz.y),(f=hz.distanceToSquared(h))<a&&(b=P,a=f,U=h);return a=Math.sqrt(a),"close"===(K=this.getAttachStyle(r))&&r.s("attach.close.threshold")/this._zoom<a?null:{index:b,distance:a,info:B[b],point:U}}),getAttachPoints:function(r){var K=r.s("attach.points");return K||((K=g(r._image))?W(K.attachPoints,r,this)||null:void 0)},getAttachStyle:function(r){var K=r.s("attach.style");return K||((K=g(r._image))?W(K.attachStyle,r,this)||"close":void 0)},updateLayers:function(){this._layersInfo=P1,this.invalidateSelection(),this.redraw()},updateBackground:function(){var r=this.dm().a("width"),K=this.dm().a("height");this._canvas.style.background=!(0<r&&0<K)&&this.dm().getBackground()||""},handleDataModelPropertyChange:function(r){var K,B;"background"===r.property?(K=this._canvas.style.background,B=r.newValue||"",this.updateBackground(),this.fp("canvasBackground",K,B),this.redraw()):"a:width"===r.property||"a:height"===r.property?(this._83I=1,this.updateBackground(),this.redraw()):"layers"===r.property?this.updateLayers():"hierarchicalRendering"===r.property&&this.redraw()},handleDataPropertyChange:function(r){this.dm().isHierarchicalRendering()&&"parent"===r.property&&r.data.hasChildren()&&this.redraw(),this.invalidateData(r.data)},onPropertyChanged:function(r){var K,B=r.property;this.redraw(),"zoom"===B?(K=this.sm().getSelection()).size()&&K.each(function(r){r.invalidate()}):"dataModel"===B&&(this._83I=1),oP[B]?this.showScrollBar():B===Eu&&this.onCurrentSubGraphChanged(r)},onCurrentSubGraphChanged:function(r){this.sm().cs(),this.reset()},handleDataModelChange:function(r){var K,B,b,f=this,h=r.kind,r=r.data;f._83I=1,"add"===h?(f.invalidateData(r),_Y(r)&&r.getEdgeGroup()&&r.getEdgeGroup().eachSiblingEdge(f.invalidateData,f),r.getHost&&r.getHost()&&r.getHost().updateLayoutAttaches()):h===yu?(f._21Q(r),K=r._id,(B=f._25I[K])&&(f._56I[K]&&(b=B._79o())&&f.redraw(b),B.dispose(),delete f._25I[K],delete f._24I[K],delete f._56I[K]),r===f._currentSubGraph&&f.setCurrentSubGraph(H1)):h===ku&&(f.invalidateAll(!0),f.setCurrentSubGraph(H1))},_75O:function(r){this.invalidateData(r.data)},handleHierarchyChange:function(r){this.dm().isHierarchicalRendering()&&r.data.hasChildren()&&this.redraw(),this.invalidateData(r.data)},adjustIndex:function(r){if(this.isVisible(r)){this.dm().beginTransaction();for(var K=r;K._parent&&this.isVisible(K._parent);)K=K._parent;K&&K!==r&&this._dataModel.adjustIndex(K),this._dataModel.adjustIndex(r),this.dm().endTransaction()}},getImage:function(r){return r.getImage?r.getImage():P1},getSelectWidth:function(r){var K=g(this.getImage(r));return K&&W(K.disableSelectedBorder,r,this)?0:r.s("select.width")},getSelectColor:function(r){return r.s("select.color")},isSelectable:function(r,K){return!!this.isSelected(r)||!(!K&&r.getParent()instanceof RO&&this.isSelectable(r.getParent(),!0)&&r.getParent().isSyncSize())&&((!(K=(K=this.getLayersInfo())&&K[r._layer])||!1!==K.selectable)&&(r.s("2d.selectable")&&this.sm().isSelectable(r)))},isMovable:function(r){if(_Y(r)&&r.getStyle(Zu)!==Lu)return!1;var K=this.getLayersInfo();return(!(K=K&&K[r._layer])||!1!==K.movable)&&(!!r.s("2d.movable")&&(!this._movableFunc||this._movableFunc(r)))},isEditable:function(r){if(M._uiSerializing)return this._uieditable;if(!this._editInteractor||!this.isSelected(r))return!1;if(eY(r)){var K=this.getDataUI(r);if(!K||K._88I)return!1}return(!_Y(r)||r.getStyle(Zu)===Lu)&&((!(K=(K=this.getLayersInfo())&&K[r._layer])||!1!==K.editable)&&(!!r.s("2d.editable")&&(!this._editableFunc||this._editableFunc(r))))},handleDelete:function(r){this._editInteractor&&(this._editInteractor.handleDelete?this._editInteractor.handleDelete():this.removeSelection())},isPointEditable:function(r){return(!l(r)||0===r.getRotation())&&(!this._pointEditableFunc||this._pointEditableFunc(r))},isRectEditable:function(r){return!this._rectEditableFunc||this._rectEditableFunc(r)},isAnchorEditable:function(r){return!this._anchorEditableFunc||this._anchorEditableFunc(r)},isRotationEditable:function(r){return!(!r.setRotation||!1===r.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(r))},isSourceTargetEditable:function(r,K,B){return!0},getRotationPoint:function(r){var K=r.getAnchor(),B=r.getScale(),b=this._zoom,K=xs(r.getRotation(),0,-r.getHeight()*B.y*K.y-(B.y<0?-1:1)*($1?32:16)/b),B=r.p();return K.x+=B.x,K.y+=B.y,K},getLogicalPoint:function(r){return $9(r,this._canvas,this.tx(),this.ty(),this._zoom,this._zoom)},getScreenPoint:function(r,K){var B;return"object"==typeof r?K=r.x!==P1?(B=r.x,r.y):(B=r[0],r[1]):B=r,X9(B,K,this._canvas,this.tx(),this.ty(),this._zoom,this._zoom)},getSelectedDataAt:function(r){var K=this;return this.getDataAt(r,function(r){return K.isSelected(r)})},getDataInfoAt:function(r,K,B){var b=this.lp(r),f=this.getDataAt(b,K,B);if(f){var h={data:f,ui:r=this.getDataUI(f),point:b},U=r._38o;if(U){var a,P=U.icons;for(a in P){var H=P[a],Y=U.rects[a];if(Y)for(var S=W(H.names,f,this),H=S?S.length:0,_=Y.rotation,e=H-1;0<=e;e--){var o=S[e],x=Y[e];if(m9(x,b,_))return h.part="icons",h.name=a,h.icon=o,h.rect=x,h.index=e,h.rotation=_,h}}}if(this.isNoteVisible(f)){if(r.note2Info&&m9(r.note2Info.clickRect,b,H1,r.note2Info.scale))return h.part="note2",h;if(r.noteInfo&&m9(r.noteInfo.clickRect,b,H1,r.noteInfo.scale))return h.part="note",h}if(this.isLabelVisible(f)){if(r.label2Info&&m9(r.label2Info.rect,b,r.label2Info.rotation,r.label2Info.scale))return h.part="label2",h;if(r.labelInfo&&m9(r.labelInfo.rect,b,r.labelInfo.rotation,r.labelInfo.scale))return h.part="label",h}if(f.isInRect&&f.isInRect(b))return h.part="body",h}return h},getDataAt:function(K,B,b){K.target&&(K=this.lp(K));var f,h=this._zoom;return this.reverseEach(function(r){if((B?B(r):this.isSelectable(r))&&this.rectIntersects(r,bY(K.x,K.y,b,h)))return f=r,!1},this),f},getIconInfoAt:function(r,K){if(r.target&&(r=this.lp(r)),K=K||this.getDataAt(r)){var B=this.getDataUI(K);if(B&&B._38o){var b=B._38o,f=new $;for(U in b.icons)f.add(U);for(var h=f.size()-1;0<=h;h--)for(var U=f.get(h),a=b.rects[U],P=a.rotation,H=a.length-1;0<=H;H--){var Y=a[H],S=Y.width,_=Y.height,e={x:r.x-Y.x-S/2,y:r.y-Y.y-_/2};if(P!=H1&&(e=xs(-P,e.x,e.y)),m9(Y={x:-S/2,y:-_/2,width:S,height:_},e))return{key:U,index:H,name:b.icons[U].names[H],rect:a[H],point:r,rotation:P,relativeRect:Y,relativePoint:e,data:K}}}}return H1},getDatasInRect:function(K,B,b){b===P1&&(b=1);var f=this,h=new $;return f.reverseEach(function(r){b&&!f.isSelectable(r)||(B?f.rectIntersects(r,K):f.rectContains(r,K))&&h.add(r)}),h},moveSelection:function(r,K){this.dm().beginTransaction(),ks(this.sm().toSelection(this.isMovable,this),r,K),this.dm().endTransaction()},moveDatas:function(r,K,B){this.dm().beginTransaction(),r instanceof $||(r=new $(r)),ks(r,K,B),this.dm().endTransaction()},getDataUIBounds:function(r){return(r=this.getDataUI(r))?r._79o():H1},drawData:function(K,r,B){var b,f=this.getDataUI(r);f&&(b=f._79o(),B&&!i9(B,b)||(f._42(K),r instanceof M.Block&&r.eachChild(function(r){this.isVisible(r)&&this.drawData(K,r,B)},this)))},getBoundsForGroup:function(r){return r.s(zu)?this.getDataUIBounds(r):H1},isPixelPerfect:function(r){return r.s("pixelPerfect")},rectIntersects:function(r,K){this.validate();var B=H1;if(this._56I[r._id]&&(f=this._25I[r._id])){var b=f._79o();if(D9(K,b))B=!0;else if((K=Z9(K,b))&&(B=f.rectIntersects?f.rectIntersects(K):B)==H1){if(!this.isPixelPerfect(r))return!0;var b=K.x,f=K.y,h=K.width,U=K.height,a=this._zoom,P=h*U*a*a,H=((H=Y1.hitMaxArea)<P&&(a*=Math.sqrt(H/P)),b*=a,f*=a,lN(h=(h*=a)<2?2:h,U=(U*=a)<2?2:U));hN(H,-b,-f),H.scale(a,a),this._drawForChecking=!0,this.drawData(H,r,K),this._drawForChecking=!1;try{for(var Y=0,S=H.getImageData(0,0,h,U).data;Y<S.length;Y+=4)if(0!==S[Y+3]){B=!0;break}H.restore()}catch(r){VN=H1,B=!1}}}return!!B},rectContains:function(r,K){return!(!this._56I[r._id]||!(r=this._25I[r._id]))&&D9(K,r._79o())},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(r){var K,B,b,f,h;Y1.isInput(r.target)||(B=(h=(K=this)._focusData)&&K._25I[h._id],f=0,b=K._dataModel._datas,h&&h._enabled&&h._editable&&B&&B.onKeyDown&&!0===B.onKeyDown(r)||(9===r.keyCode&&(h&&(f=b.indexOf(h),n9(r)?-1==--f&&(f=0):++f===b.size()&&(f=0)),K._focusData=h=b.get(f),K.sm().setSelection(h)),wN(r)?K.selectAll():GN(r)&&K.isResettable()&&K.reset(),K.sm().isEmpty()?K._editing||(B=K.tx(),b=K.ty(),f=!1,h=n9()?100:10,IN(r)&&(B-=h,f=!0),LN(r)&&(b-=h,f=!0),JN(r)&&(B+=h,f=!0),FN(r)&&(b+=h,f=!0),f&&K.setTranslate(B,b)):(vN(r)&&K.handleDelete(r),h=n9()?10:1,IN(r)&&(K.moveSelection(-h,0),K.fi({kind:"moveLeft"})),LN(r)&&(K.moveSelection(0,-h),K.fi({kind:"moveUp"})),JN(r)&&(K.moveSelection(h,0),K.fi({kind:"moveRight"})),FN(r)&&(K.moveSelection(0,h),K.fi({kind:"moveDown"})))))},handleScroll:function(r,K){if(x9(r),this.isZoomable()){if(!this.getEditInteractor()){var B=this.getDataAt(r);if(B){var b=g(this.getImage(B));if(b&&W(b.scrollable,B,this))return}}var f,h=this.getFullscreenDatas();for(f in h)if(h[f].s("fullscreen.lock"))return;b=this.lp(r),0<K?this.scrollZoomIn(b):K<0&&this.scrollZoomOut(b)}},handlePinch:function(r,K,B){!this.isZoomable()||Math.abs(K-B)<Y1.pinchZoomThreshold||(B<K?this.pinchZoomIn(r):this.pinchZoomOut(r))},checkDoubleClickOnNote:function(r,K){var B=this.lp(r),b=this.getDataUI(K),f=b.note2Info;return f&&K.s("note2.toggleable")&&m9(f.clickRect,B)?(K.s(mu,!K.s(mu)),this.fi({kind:"toggleNote2",event:r,data:K}),!0):!!((f=b.noteInfo)&&K.s("note.toggleable")&&m9(f.clickRect,B))&&(K.s(Cu,!K.s(Cu)),this.fi({kind:"toggleNote",event:r,data:K}),!0)},_84o:function(r,K){},isNoteVisible:function(r){return.15<this._zoom},isLabelVisible:function(r){return.15<this._zoom},isEditVisible:function(r){return.15<this._zoom},autoScroll:function(r,K){var B=this,b=B.getAutoScrollZone(),f=b/B.getZoom(),h=b/4,U=B._29I,r=B.lp(r),a={x:B.tx(),y:B.ty()};return r&&0<b&&U&&(r.x-U.x<f?B.translate(h,0):U.x+U.width-r.x<f&&B.translate(-h,0),r.y-U.y<f?B.translate(0,h):U.y+U.height-r.y<f&&B.translate(0,-h)),a.x=B.tx()-a.x,a.y=B.ty()-a.y,K&&(K.x+=a.x,K.y+=a.y),a},getMoveMode:function(r,K){return(K=K.s("2d.move.mode"))||(LK[88]?"x":LK[89]?"y":"xy")},getSerializableProperties:function(){return{scrollBarColor:1,scrollBarSize:1,autoMakeVisible:1,autoHideScrollBar:1,editable:1,resettable:1,pannable:1,rectSelectable:1,autoScrollZone:1,visibleFunc:1,movableFunc:1,editableFunc:1,pointEditableFunc:1,rectEditableFunc:1,anchorEditableFunc:1,rotationEditableFunc:1,rectSelectBackground:1,rectSelectBorderColor:1,editPointSize:1,editPointBorderColor:1,editPointBackground:1,hoverDelay:1,dataModel:1,selectionModel:1,currentSubGraph:1,zoom:1,translateX:1,translateY:1}},serializeProperty:function(r,K,B){return"currentSubGraph"===K?{__i:r.getId()}:B.serializeProperty(r,K,this)},deserializeProperty:function(r,K,B){return"currentSubGraph"===K?this.dm().__idMap[r.__i]:B.deserializeProperty(r,K,this)},setDefaultCursor:function(r,K){this._defaultCursor=r,!1!==K&&this.setCursor(r)},getCurrentConnectActionType:function(){return this._currentActionType},setCurrentConnectActionType:function(r){return!(r!==H1&&!Y1.getConnectAction(null,r)||(this._currentActionType=r,this.redraw(),0))},getEditStyle:function(r){var K=this.getEditInteractor();return K?K.getStyle(r):P1},setEditStyle:function(r,K,B){var b=this.getEditInteractor();return!!b&&(b.setStyle(r,K,B),!0)},isConnectActionVisible:function(r){var K=Y1.getConnectAction(this);return!!K&&(K=K.visible,HY(K)?K(this,r):K)},isInteractive:function(r){if(this._drawForChecking)return!1;var K=g(this.getImage(r));return!(!K||!W(K.interactive,r,this))||r.s("interactive")},getRenderingStyleIconName:function(){return xz},appendHTML:function(r,K){var B=this.getView();if(!(K||r&&r.parentNode!==B))return!1;var b=r.getView&&r.getView(),f=r.beforeCanvas;return!(!K&&b&&b.parentNode===B)&&((r.getView||r.isSelfViewEvent)&&(r=r.getView()),K=this.getEditInteractor(),f?B.insertBefore(r,this.getCanvas()):K&&K._canvas?B.insertBefore(r,K._canvas):this.isScrollBarVisible()?B.insertBefore(r,this.getView().lastChild):gY(B,r),!0)},_layoutHTMLImpl:function(r,K,B){var b,f,h,U,a,P;1<arguments.length?(f=this._zoom,(K=K.getView?(b=K).getView():K).style.position="absolute",B?(h=r.getRect(),L(b||K,this.tx()+h.x*f,this.ty()+h.y*f,h.width*f,h.height*f)):(B=new LH,h=r.getAnchorRect(),U=r.getPosition(),a=r.getScale(),P=K.style,L(b||K,h),B.appendTranslate(this.tx(),this.ty()),B.appendScale(f,f),B.append(new LH(r.getRotation(),U.x,U.y,a.x,a.y)),KN(P,"transform","matrix("+B.a.toFixed(5)+", "+B.b.toFixed(5)+", "+B.c.toFixed(5)+",\n    "+B.d.toFixed(5)+", "+B.tx.toFixed(5)+", "+B.ty.toFixed(5)+")"),KN(P,"transformOrigin",(-h.x).toFixed(5)+"px "+(-h.y).toFixed(5)+"px"),K.updateAppendMatrix=!0)):this._layoutHTML&&this._layoutHTML()},getTextEditInfo:function(r){if(r instanceof lO)return{name:"text",accessType:"s",font:r.s("text.font"),isMultiline:!0}},getState:function(r){var K=r.s("state");return K||((K=g(r._image))?W(K.state,r,this)||null:void 0)},getShape:function(r){return r.getStyle(tu)}}),A.defineProperties(RP.GraphView.prototype,{layoutHTML:{get:function(){return this._layoutHTMLImplBind||(this._layoutHTMLImplBind=this._layoutHTMLImpl.bind(this)),this._layoutHTMLImplBind},set:function(r){this._layoutHTML=r}}}),function(r,K){this.gv=r,this.s=function(r){return K.getStyle(r)},this._data=K,this._87I=new $}),xz=H1,Tz=(BA(oz,A,{_6I:H1,ms_icons:1,_84o:function(r){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},getSelectWidth:function(){return!this.gv.isSelected(this._data)||this.isShadowed()?0:this.gv.getSelectWidth(this._data)},getSelectColor:function(){return this.gv.getSelectColor(this._data)},getBodyColor:function(r){var K=this._data;return this.gv.getBodyColor(K)||(r?K.getStyle(r):H1)},_2Q:function(r){return this.s(r)},_1Q:function(r,K,B,b){var f,h=this.s,U=h("2d.gray"),a=h(K+".dash.color");U&&(a=Y1.toGrayColor(a)),r.strokeStyle=a,r.lineWidth=B,r.stroke(),h(K+".dash.3d")&&(f=h(K+".dash.3d.color"),cN(r,a,U?Y1.toGrayColor(f):f,B,this.gv._zoom,h(K+".dash.3d.accuracy"))),IA(r,b)},invalidate:function(){this._6I=H1},_79o:function(){var r,K,B=this;return B._6I||(r=B._data,K=B.gv,B.labelInfo=B.label2Info=B.noteInfo=B.note2Info=B._38o=H1,B._87I.clear(),B.interactiveInfo=K.isInteractive(r)?{}:H1,B._3O(),B._55O=K.isEditable(r)?{_42O:K.isRectEditable(r),_43O:K.isPointEditable(r),_56O:K.isRotationEditable(r)}:H1,B._6I=B._81o()),B._6I},_3O:function(){},getPosition:function(r,K,B,b){return DK},_68o:function(r,K){var B,b;r&&this._87I.add(K?(K=new JH(K),B=r.width/2,b=r.height/2,(K=l9([K.tf(-B,-b),K.tf(B,-b),K.tf(B,b),K.tf(-B,b)])).x+=r.x+B,K.y+=r.y+b,K):r)},_81o:function(){var K,r,B,b,f=this,h=f.s;return f._24O(du,"getLabel"),f._24O(su,"getLabel2"),f._26O(nu,"getNote"),f._26O(Au,"getNote2"),f._15O(),f._55O&&f._48O(),f._87I.each(function(r){K=C9(K,r)}),K&&h("shadow.interactable")&&(r=f.isShadowed(),B=h("shadow2"),b=v9(K),B?(b.x+=h("shadow2.offset.x"),b.y+=h("shadow2.offset.y"),W9(b,h("shadow2.blur"))):r&&(b.x+=h("shadow.offset.x"),b.y+=h("shadow.offset.y"),W9(b,h("shadow.blur"))),K=C9(K,b)),f._87I.clear(),K},_42:function(r){var K,B,b,f,h,U,a,P=this,H=P._data,Y=P.gv,S=P.s,_=S("opacity"),e=this.isShadowed(),o=S("shadow2");(e||o)&&(K=r.shadowOffsetX,B=r.shadowOffsetY,b=r.shadowBlur,f=r.shadowColor,h=Y.getZoom()*Y1.devicePixelRatio,r.shadowOffsetX=S((U=e?"shadow":"shadow2")+".offset.x")*h,r.shadowOffsetY=S(U+".offset.y")*h,r.shadowBlur=S(U+".blur")*h,r.shadowColor=e?P.getSelectColor():S(U+".color")),_!=H1&&(a=r.globalAlpha,r.globalAlpha=_),P.drawBody(r),Y.isLabelVisible(H)&&(Y._drawForChecking&&!S("label.selectable")||GP(r,P.labelInfo),Y._drawForChecking&&!S("label2.selectable")||GP(r,P.label2Info)),Y.isNoteVisible(H)&&(dP(r,P.noteInfo),dP(r,P.note2Info)),P._99O(r),_!=H1&&(r.globalAlpha=a),(e||o)&&(r.shadowOffsetX=K,r.shadowOffsetY=B,r.shadowBlur=b,r.shadowColor=f)},drawBody:function(r){},_47O:function(r){},_24O:function(r,K){var B,b,f,h=this._data,U=this.gv,a=this.s,P=U[K](h);P!=H1&&(B=a(r+".scale"),f=a(r+".max"),b=a(r+".position"),U=this[r+"Info"]={label:P,scale:B,color:U[K+"Color"](h),font:a(r+".font"),opacity:a(r+".opacity"),align:a(r+".align"),decoration:a(r+".decoration"),rotation:this.getRotation(a(r+".rotation"),!1,b),background:U[K+"Background"](h)},K=WY(U,P),0<f&&f<K.width&&(U.labelWidth=K.width,K.width=f),1!==B&&(K.width*=B,K.height*=B),h=this.getPosition(b,a(r+".offset.x"),a(r+".offset.y"),K,a(r+".position.fixed")),K.x=h.x-K.width/2,K.y=h.y-K.height/2,this._68o(U.rect=K,U.rotation),1!==B&&(P=K.width/B,f=K.height/B,U.rect={x:h.x-P/2,y:h.y-f/2,width:P,height:f}))},_26O:function(r,K){var B,b,f,h,U,a=this.gv,P=this._data,H=this.s,Y=a[K](P);Y!=H1&&(B=H(r+".scale"),a=this[r+"Info"]={note:Y,scale:B,data:P,view:a,expanded:H(r+".expanded"),font:H(r+".font"),color:H(r+".color"),opacity:H(r+".opacity"),align:H(r+".align"),icon:H(r+".icon"),backgroundImage:H(r+".backgroundImage"),borderWidth:H(r+".border.width"),borderColor:H(r+".border.color"),background:a[K+"Background"](P)},b=(K=this.getPosition(H(r+".position"),H(r+".offset.x"),H(r+".offset.y"))).x,K=K.y,a.expanded?(f=H(r+".max"),(U=(U=H(r+".backgroundImage"))?(U=g(U),{width:DA(U,P),height:iA(U,P)}):WY(a,Y)).width+=6,U.height+=2,0<f&&f<U.width&&(a.labelWidth=U.width,U.width=f),f=U.width,h=U.height+8,a.clickRect={x:b-f*B/2,y:K-h*B,width:f*B,height:h*B*U.height/h}):(h=(Y=H(r+".icon"))?(Y=g(Y),f=DA(Y,P),iA(Y,P)):(f=12,18),a.clickRect={x:b-f*B/2,y:K-h*B,width:f*B,height:h*B}),a.rect={x:b-f/2,y:K-h*B/2-h/2,width:f,height:h},U=N1(a.borderWidth/2)*B,this._68o({x:b-f*B/2-U,y:K-h*B-U,width:f*B+2*U,height:h*B+2*U}))},_48O:function(){},_99O:function(r){var K=this._38o;if(K){var B,b=this.gv,f=this._data,h=K.icons,U=this.interactiveInfo;for(B in U&&(U._38o={}),h){var a=h[B],P=K.rects[B];if(P){U&&(U._38o[B]=[]);var H,Y=W(a.opacity,f,b),S=W(a.names,f,b),_=S?S.length:0,e=P.rotation;Y!=H1&&(H=r.globalAlpha,r.globalAlpha*=Y);for(var o=0;o<_;o++){var x,T,t=S[o],t=g(t),p=P[o],q=(e&&(x=p.x+p.width/2,T=p.y+p.height/2,r.save(),hN(r,x,T),UN(r,e),hN(r,-x,-T)),U&&U._38o[B].push(r.interactiveInfo={compInfos:[],matrix:e?new LH(e,x,T).appendTranslate(-x,-T):new LH}),xz);xz=B,p9(r,t,W(a.stretch,f,b),p.x,p.y,p.width,p.height,this._data,this.gv),xz=q,r.interactiveInfo=H1,e&&r.restore()}Y!=H1&&(r.globalAlpha=H)}}}}}),function(r,K){vY(Tz,this,[r,K])}),tz=(BA(Tz,oz,{_checkEmptyRect:!0,_40O:function(r,K){var B,b=this.s,f=r.rect,h=((r.borderColor=this.gv.getBorderColor(this._data))&&(r.borderType=b("border.type"),r.borderWidth=b("border.width"),r.borderPadding=b("border.padding"),K=B1(K,r.borderPadding+r.borderWidth/2)),this._data.getScale()),h=B1(1,B1(j1(h.x),j1(h.y)));(r.selectWidth=this.getSelectWidth())&&(B=this.gv._zoom,r.selectType=b("select.type"),r._97o=this.getSelectColor(),r.selectPadding=b("select.padding"),K=B1(K,(r.selectPadding+r.selectWidth/2/B)/h)),0<K&&(K*=h,f=v9(f),W9(f,K)),this._68o(f)},_39O:function(r,K){var B,b,f,h,U,a=K.rect;0<K.borderWidth&&(U=K.borderPadding,r.strokeStyle=K.borderColor,r.lineWidth=K.borderWidth,EN(r,K.borderType,{x:a.x-U,y:a.y-U,width:a.width+2*U,height:a.height+2*U}),r.stroke()),0<K.selectWidth&&(b=this.gv._zoom,U=K.selectPadding,r.strokeStyle=K._97o,r.lineWidth=K.selectWidth/b,K.rotation!=H1&&(r.save(),r.translate(K.position.x,K.position.y),r.rotate(K.rotation),B=(b=this._data).getWidth(),b=b.getHeight(),f=K.scale,h=K.anchor,a={x:f.x*(-B*h.x),y:f.y*(-b*h.y),width:f.x*B,height:f.y*b}),EN(r,K.selectType,{x:a.x-U,y:a.y-U,width:a.width+2*U,height:a.height+2*U}),K.rotation!=H1&&r.restore(),r.stroke())},dispose:function(){var r=this._htmlView;Tz.superClass.dispose.call(this),r&&(r.onHTMLRemoved&&r.onHTMLRemoved(),O9(r))},_3O:function(){var r,K=this,B=K.s,b=K._data,f=K.gv,h=f.getShape(b),U=K.getBodyColor(),a=B("shape.border.color"),P=((U=(a=K._83o=h?{shape:h,_53o:K.getBodyColor("shape.background"),_27Q:g(B("shape.repeat.image"),U),shapeRepeatImageStretch:B("shape.repeat.image.stretch"),shapeRepeatImageRotation:B("shape.repeat.image.rotation"),shapeGradientPack:B("shape.gradient.pack"),shapeBorderGradientPack:B("shape.border.gradient.pack"),_54o:B("shape.border.width"),_55o:a,shapeBorderRepeatImage:g(B("shape.border.repeat.image"),a),shapeBorderRepeatImageStretch:B("shape.border.repeat.image.stretch"),shapeBorderRepeatImageRotation:B("shape.border.repeat.image.rotation"),_56o:B("shape.border.3d"),_57o:B("shape.border.3d.color"),_58o:B("shape.border.3d.accuracy"),shapeGradient:B("shape.gradient"),_59o:B("shape.gradient.color"),_60o:B("shape.border.pattern"),_61o:B("shape.border.cap"),_62o:B("shape.border.join"),shapeForeground:B("shape.foreground"),bodyColor:U,gray:B("2d.gray")}:{img:g(f.getImage(b),U),bodyColor:U,gray:B("2d.gray"),stretch:B("image.stretch")}).img)&&U.renderHTML?(K._htmlInfo&&K._htmlInfo.img!==U&&(K._htmlInfo=H1),K._htmlInfo||(K._htmlInfo={img:U,cache:{}}),P=U.renderHTML(b,f,K._htmlInfo.cache)):K._htmlInfo=H1,K._htmlView&&K._htmlView!==P&&(K._htmlView.onHTMLRemoved&&K._htmlView.onHTMLRemoved(),O9(K._htmlView.getView?K._htmlView.getView():K._htmlView)),(K._htmlView=P)&&f.appendHTML(P)&&(P.onHTMLAddedSync&&P.onHTMLAddedSync(),P.onHTMLAdded&&y9(P.onHTMLAdded)),a.rect=b.getRect(),a.position=b.p(),a.scale=b.getScale(),a.anchor=b.getAnchor(),a.rotation=b.getRotation(),h===R&&(a._63o=B("shape.depth")),0);h?(P=iN(H1,a._54o/2,a._62o),K.s("shape.dash")&&(P=B1(P,(K.s("shape.dash.width")||a._54o)/2))):U&&U.boundExtend&&(P=W(U.boundExtend,b,f),U.boundExtendAbsolute?(r=b.getScale(),P/=f._zoom*B1(1,B1(j1(r.x),j1(r.y)))):W(U.fitSize,b,f)||(r=W(U.width,b,f),U=W(U.height,b,f),P*=B1(b.getWidth()/r,b.getHeight()/U))),K._40O(a,P),(f=B("clip.percentage"))!=P1&&(a.clipRect=dY(b.getAnchorRect(),B("clip.direction"),f)),h&&((r=B("shape.fill.clip.percentage"))!=P1&&(a.shapeClipRect=dY(b.getAnchorRect(),B("shape.fill.clip.direction"),r)),(U=B("shape.foreground.clip.percentage"))!=P1&&(a.shapeForegroundClipRect=dY(b.getAnchorRect(),B("shape.foreground.clip.direction"),U))),B("clip.host")&&b.getHost()&&(a.clipHost=!0)},getPosition:function(r,K,B,b){return(r=Ns(r,this._83o.rect,b)).x+=K,r.y+=B,r},clipHost:function(B){var K,b,r,f,h,U,a,P,H,Y,S,_,e=this._data.getHost();return e instanceof CO?(r=e.getPoints().toArray(),P=e.getSegments().toArray(),K=e.getMatrix(),b=e.p(),r=r.map(function(r){return(r=v9(r)).x-=b.x,r.y-=b.y,K.apply(r)}),$N(B,r,P)):(r=this.gv.getShape(e))?("roundRect"===r?f=e.s("shape.corner.radius"):"polygon"===r?(f=e.s("shape.polygon.side"),h=e.s("shape.corner.radius"),U=e.s("shape.regular")):"arc"===r&&(f=e.s("shape.arc.from"),h=e.s("shape.arc.to"),U=e.s("shape.arc.close"),a=e.s("shape.arc.oval")),P=e.p(),H=e.getRotation(),S=e.getAnchor(),_=e.getScale(),(Y=e.getSize()).x=-Y.width*S.x,Y.y=-Y.height*S.y,B.save(),hN(B,P.x,P.y),UN(B,H),aN(B,_.x,_.y),os[r](B,Y.x,Y.y,Y.width,Y.height,f,h,U,a),B.restore()):(S=e.s("host.clip.padding")||0,_=e.getScale(),e.getCorners(-S/Math.abs(_.x),-S/Math.abs(_.y)).forEach(function(r,K){K?B.lineTo(r.x,r.y):B.moveTo(r.x,r.y)})),!0},drawBody:function(r){var K,B,b,f,h,U,a,P,H,Y,S,_,e,o=this,x=o.s,T=o.gv,t=o._data,p=o._83o,q=p.rect,y=p.position,k=p.rotation,w=p.anchor,v=p.scale,z=p.shape,N=p.clipHost,u=p.clipRect;(!o._checkEmptyRect||0<q.width&&0<q.height)&&(N&&(r.save(),r.beginPath(),o.clipHost(r)&&r.clip()),(q=t.getSize()).x=-q.width*w.x,q.y=-q.height*w.y,r.save(),hN(r,y.x,y.y),UN(r,k),aN(r,v.x,v.y),u&&(r.beginPath(),r.rect(u.x,u.y,u.width,u.height),r.clip()),T._drawForChecking&&p.img&&!1===W(p.img.pixelPerfect,t,T)?QN(r,q.x,q.y,q.width,q.height,"#888888"):o.freeDraw?o.freeDraw(r,q,p):z?(w=p._60o,u=jA(r,w),S=p._27Q,K=p._54o,e=p.shapeGradientPack,B=p.gray,b=r.lineJoin,f=r.lineCap,H=function(r){return B?Y1.toGrayColor(r):r},"roundRect"===z?h=x("shape.corner.radius"):"polygon"===z?(h=x("shape.polygon.side"),U=x("shape.corner.radius"),a=x("shape.regular")):"arc"===z&&(h=x("shape.arc.from"),U=x("shape.arc.to"),a=x("shape.arc.close"),P=x("shape.arc.oval")),r.lineJoin=p._62o,r.lineCap=p._61o,(Y=H(p._53o))||S||e?((_=p.shapeClipRect)&&(r.save(),r.beginPath(),r.rect(_.x,_.y,_.width,_.height),r.clip()),EN(r,z,q,h,U,a,P),e?gN(r,e,function(r){return CN(r,p.bodyColor)},!1,q):S?Ks(r,S,H(p.bodyColor),null,t,T,p.shapeRepeatImageStretch,q,p.shapeRepeatImageRotation):rs(r,Y,p.shapeGradient,H(p._59o),q),r.fill(),e&&r.restore(),_&&r.restore(),r!==u&&EN(u,z,q,h,U,a,P)):EN(u,z,q,h,U,a,P),(S=p.shapeForeground)&&(r.save(),(e=p.shapeForegroundClipRect)&&(r.beginPath(),r.rect(e.x,e.y,e.width,e.height),r.clip()),EN(r,z,q,h,U,a,P),rs(r,S,x("shape.foreground.gradient"),H(x("shape.foreground.gradient.color")),q),r.fill(),r.restore()),0<K&&((_=x("shape.border.width.absolute"))&&(r.save(),r.setTransform(1,0,0,1,0,0)),r.lineWidth=K,e=H(p._55o),(S=p.shapeBorderGradientPack)?gN(r,S,H,!0,q):p.shapeBorderRepeatImage?Bs(r,p.shapeBorderRepeatImage,e,null,t,T,p.shapeBorderRepeatImageStretch,q,p.shapeBorderRepeatImageRotation):r.strokeStyle=e,r.stroke(),S&&r.restore(),_&&r.restore(),p._56o&&cN(r,e,H(p._57o),K,T._zoom,p._58o)),IA(r,w),x("shape.dash")&&0<(S=x("shape.dash.width")||K)&&(w=x("shape.dash.pattern"),(u=jA(r,w,o._2Q("shape.dash.offset")))!==r&&EN(u,z,q,h,U,a,P),o._1Q(r,"shape",S,w)),Ps(r,Y,p._63o,q),r.lineJoin=b,r.lineCap=f):((_=o.interactiveInfo)&&(r.interactiveInfo=_.bodyInfo={compInfos:[],matrix:new LH(k,y.x,y.y,v.x,v.y)}),p.gray&&(r.compGray=!0),(e=p.img)&&e.cacheRule!=H1&&(e=CP(r,e,p.stretch,q.width,q.height,t,T,p.bodyColor)),p9(r,e,p.stretch,q.x,q.y,q.width,q.height,t,T,p.bodyColor),r.compGray=!1,r.interactiveInfo=H1),r.restore(),N&&r.restore()),o._39O(r,p)},_48O:function(){},_47O:function(r){}}),function(r,K){vY(tz,this,[r,K])}),pz=function(r,K,B,b){var f=R9(r,K);return B=(b?b1:sP)(B,f),f?B/=f:B=0,{x:r.x+(K.x-r.x)*B,y:r.y+(K.y-r.y)*B}},qz=(BA(tz,oz,{_3O:function(){var r,K,B,b,f,h,U,a,P,H=this,Y=H._data,S=H.gv,_=H.s,e=_(Zu),o=Y.isLooped(),x=_("edge.width"),T=H.getBodyColor("edge.color"),t=_("edge.center"),p=_("edge.offset"),q=S.getBorderColor(Y),y=q?_("border.width"):0,k=H.getSelectWidth(),w=Y._40I,v=Y._41I;(T=H._78o=w&&v?{looped:o,type:e,width:x,center:t,color:T,repeatImage:g(_("edge.repeat.image"),T),borderColor:q,borderWidth:y,_97o:k?H.getSelectColor():H1,selectWidth:k,pattern:_("edge.pattern"),cap:_("edge.cap"),join:_("edge.join"),is3d:_("edge.3d"),_67o:_("edge.3d.color"),_66o:_("edge.3d.accuracy"),gray:_("2d.gray")}:H1)&&((q=Y1.getEdgeType(e))?(q=q(Y,VP(H,S,Y,o,e),S,H._19Q)).points&&1<q.points.size()?(T.edgeTypeInfo=q,r=l9(T.edgeTypeInfo.points)):q[Ou]&&q.rect&&(r=(T.edgeTypeInfo=q).rect):(q=_("edge.source.anchor.x"),h=_("edge.source.anchor.y"),b=_("edge.target.anchor.x"),f=_("edge.target.anchor.y"),K=IP(S,Y,"source"),B=IP(S,Y,"target"),e===Lu?(a=(U=T.points=_(iu)||UP).size(),T.segments=_("edge.segments"),q=q!==P1||h!==P1||_Y(w),h=b!==P1||f!==P1||_Y(v),t||(p?(q||(K=pz(K,a?U.get(0):B,p,a)),h||(B=pz(B,a?U.get(a-1):K,p,a))):(q||(P=LY(K,a?U.get(0):B,SP(S,w)))&&(K={x:P[0],y:P[1]}),h||(P=LY(a?U.get(a-1):K,B,SP(S,v)))&&(B={x:P[0],y:P[1]}))),r=C9(l9(T.points),l9(K,B))):(b=VP(H,S,Y,o,e),H._19Q||(b=-b),o?((K=v9(K)).x=S.getNodeRect(w).x,T.radius=b,r={x:K.x-b,y:K.y-b,width:2*b,height:2*b}):(f=R9(K,B),h={x:q=sP(p,f),y:b},U={x:f-q,y:b},a=d1(B.y-K.y,B.x-K.x),v=T.mat=new JH(a),T.orienAngle=a,T.angle=B.x<K.x?a+F:a,T.rect={x:h.x,y:h.y,width:U.x-h.x,height:0},T.origin=K,(h=v.tf(h)).x+=K.x,h.y+=K.y,(U=v.tf(U)).x+=K.x,U.y+=K.y,t?((P=v.tf(P={x:f,y:0})).x+=K.x,P.y+=K.y,r=l9([K,h,U,P]),T.c1=K,T.c2=P):r=l9(h,U),K=h,B=U)),T.sourcePoint=K,T.targetPoint=B,Y._lastSourcePoint=K,Y._lastTargetPoint=B),e=0,_("edge.dash")&&(e=_("edge.dash.width")||x),o="square"===T.cap?.71:.5,iN(r,B1(e*o,x*o+y+k),T.join),H._68o(r))},getRotation:function(r,K,B){r=r||0;var b=this._78o;if(b){var f,h=b.angle,U=b.points,a=b.edgeTypeInfo;if(h!=H1)return K?b.orienAngle+r:h+r;if(a&&a[Ou])return a.getRotation?a.getRotation(this,r,K,B):0;if(a&&a.points)return f=(h=a.points).size(),eP[B]?f&&f%2==0?nP(h.get(f/2-1),h.get(f/2),K,r):r:_P[B]?nP(h.get(0),h.get(1),K,r):nP(h.get(f-2),h.get(f-1),K,r);if(U)return f=U.size(),eP[B]?f&&f%2==0?nP(U.get(f/2-1),U.get(f/2),K,r):0===f?nP(b.sourcePoint,b.targetPoint,K,r):r:_P[B]?nP(b.sourcePoint,f?U.get(0):b.targetPoint,K,r):nP(f?U.get(f-1):b.sourcePoint,b.targetPoint,K,r)}return r},getPosition:function(r,K,B,b,f){var h=this._78o;if(h){var U=h.type,a=h.points,P=h.edgeTypeInfo,H=h.sourcePoint,Y=h.targetPoint;if(!U)return h.looped?{x:H.x-h.radius+K,y:H.y+B}:(f&&H&&Y&&(H.x>Y.x||H.x===Y.x&&H.y>Y.y)&&(r=zs[r],B=-B),(S=Ns(r,h.rect,b)).x+=K,S.y+=B,(S=h.mat.tf(S)).x+=h.origin.x,S.y+=h.origin.y,S);if(P&&P[Ou])return P.getPosition?P.getPosition(this,r,K,B,b,f):{x:(H.x+Y.x)/2,y:(H.y+Y.y)/2};if(a){var S,_,e=a.size();if(eP[r]){if(e){if(0==(_=e%2))return AP(a.get(e/2-1),a.get(e/2),r,K,B,b,f);S=a.get((e-_)/2)}else S={x:(H.x+Y.x)/2,y:(H.y+Y.y)/2};return(S=Ns(r,{x:S.x,y:S.y,width:0,height:0},b)).x+=K,S.y+=B,S}return _P[r]?AP(H,e?a.get(0):Y,r,K,B,b,f):AP(e?a.get(e-1):H,Y,r,K,B,b,f)}if(P)return e=(U=P.points).size(),eP[r]?0==(_=e%2)?AP(U.get(e/2-1),U.get(e/2),r,K,B,b,f):(S=U.get((e-_)/2),(S=Ns(r,{x:S.x,y:S.y,width:0,height:0},b)).x+=K,S.y+=B,S):_P[r]?AP(U.get(0),U.get(1),r,K,B,b,f):AP(U.get(e-2),U.get(e-1),r,K,B,b,f)}return DK},_42:function(r){this._78o&&tz.superClass._42.call(this,r)},drawPath:function(K,r){K.beginPath();var B,b,f,h,U=r.type,a=r.points,P=r.segments,H=r.edgeTypeInfo;!U||a?(B=(b=r.sourcePoint).x,b=b.y,f=(h=r.targetPoint).x,h=h.y,U?P?((U=new $({x:B,y:b})).addAll(a),U.add({x:f,y:h}),$N(K,U,P)):(K.moveTo(B,b),a.each(function(r){K.lineTo(r.x,r.y)}),K.lineTo(f,h)):r.looped?K.arc(B,b,r.radius,0,h1,!0):r.center?(K.moveTo(r.c1.x,r.c1.y),K.lineTo(B,b),K.lineTo(f,h),K.lineTo(r.c2.x,r.c2.y)):(K.moveTo(B,b),K.lineTo(f,h))):H&&(H.points?$N(K,H.points,H.segments):H[Ou]&&H[Ou](K,H))},drawBody:function(r){var K=this.s,B=this._78o,b=B.width,f=B.selectWidth,h=B.borderWidth,U=B.repeatImage,a=r.lineJoin,P=r.lineCap,H=B.gray,Y=B.pattern,S=(r.lineJoin=B.join,r.lineCap=B.cap,this.drawPath(jA(r,Y),B),K("edge.width.absolute")),f=(S&&(r.save(),r.setTransform(1,0,0,1,0,0)),f&&(r.strokeStyle=B._97o,r.lineWidth=b+2*(h+f),r.stroke()),h&&(r.strokeStyle=H?Y1.toGrayColor(B.borderColor):B.borderColor,r.lineWidth=b+2*h,r.stroke()),H?Y1.toGrayColor(B.color):B.color);U?Bs(r,U,f,null,this._data,this.gv):r.strokeStyle=f,r.lineWidth=b,r.stroke(),B.is3d&&(h=H?Y1.toGrayColor(B._67o):B._67o,cN(r,f,h,b,this.gv._zoom,B._66o)),K("edge.dash")&&(Y=K("edge.dash.pattern"),(U=jA(r,Y,this._2Q("edge.dash.offset")))!==r&&this.drawPath(U,B),this._1Q(r,"edge",K("edge.dash.width")||b,Y)),S&&r.restore(),IA(r,Y),r.lineJoin=a,r.lineCap=P},_48O:function(){},_47O:function(r){}}),function(r,K){vY(qz,this,[r,K])}),yz=(BA(qz,Tz,{_3O:function(){var K,B,r,b,f,h,U,a,P,H,Y,S,_,e,o,x,T=this.s,t=this._data,p=this.gv;this._88I=H1,t.isExpanded()&&t.eachChild(function(r){l(r)&&(r=p.getBoundsForGroup(r))&&((B=B||[]).push(r),K=C9(K,r))}),K?(h=p.getLabel(t),f=T("group.type"),b=(r=T("group.border.width")||0)/2,T("group.border.width.absolute")&&(r/=p._zoom),P=B,H=K,K="oval"===(a=f)?(Y=0,_=H.height/H.width,S=_*_,o=H.x+H.width/2,x=H.y+H.height/2,Ft(P).forEach(function(r){var K=r.x-o,r=r.y-x;Y<(K=K*K+r*r/S)&&(Y=K)}),_*=Y=u1(Y),{x:o-Y,y:x-_,width:2*Y,height:2*_}):"circle"===a?(e=0,o=H.x+H.width/2,x=H.y+H.height/2,Ft(P).forEach(function(r){var K=r.x-o,r=r.y-x;e<(K=K*K+r*r)&&(e=K)}),e=u1(e),{x:o-e,y:x-e,width:2*e,height:2*e}):("roundRect"===a&&W9(H,b1(H.width,H.height)/16),H),zP(K,t,"group.padding",1),W9(K,r),t=this._88I={type:f,rect:K,_64o:K},f||h==H1||(f=this.labelInfo={label:h,color:T("group.title.color"),font:T("group.title.font"),align:T("group.title.align")},_=(h=WY(f,h)).width+r,h=h.height+r,P=T("group.title.align"),(a=T("group.title.orientation"))===Bu||a===bu?(K.height+=r,_>K.width&&(K.width=_)):a!==ru&&a!==Ku||(K.width+=r,_>K.height&&(K.height=_)),P=P===ru?K.x:P===Ku?K.x+K.width-_:K.x+K.width/2-_/2,a===bu?(t.titleRect={x:K.x,y:K.y+K.height,width:K.width,height:h},t.rect={x:K.x,y:K.y,width:K.width,height:K.height+h},f.rect={x:P,y:K.y+K.height,width:_,height:h}):a===ru?(U=t.titleRect={x:K.x-h,y:K.y,width:h,height:K.height},t.rect={x:K.x-h,y:K.y,width:K.width+h,height:K.height},f.rect={x:U.x+h/2-K.height/2,y:U.y+K.height/2-h/2,width:K.height,height:h},f.rotation=-Math.PI/2):a===Ku?(U=t.titleRect={x:K.x+K.width,y:K.y,width:h,height:K.height},t.rect={x:K.x,y:K.y,width:K.width+h,height:K.height},f.rect={x:U.x+h/2-K.height/2,y:U.y+K.height/2-h/2,width:K.height,height:h},f.rotation=Math.PI/2):(t.titleRect={x:K.x,y:K.y-h,width:K.width,height:h},t.rect={x:K.x,y:K.y-h,width:K.width,height:K.height+h},f.rect={x:P,y:K.y-h-b,width:_,height:h+r})),this._40O(t,T("group.border.width")/2)):qz.superClass._3O.call(this)},getPosition:function(r,K,B,b){var f=this._88I;return f?((r=Ns(r,f.rect,b)).x+=K,r.y+=B,r):qz.superClass.getPosition.apply(this,arguments)},_24O:function(r,K){var B=this._88I;B&&!B.type&&"label2"!==r||qz.superClass._24O.call(this,r,K)},drawBody:function(r){var K=this._88I;if(K){var B=this._data,b=this.s,f=this.gv,h=K.type,U=K.rect,a=K._64o,P=K.titleRect,H=this.getBodyColor(),Y=g(b("group.image"),H),S=b("group.image.stretch"),_=this.getBodyColor("group.background"),e=g(b("group.repeat.image"),H),o=b("group.gradient.pack"),x=b("group.gradient"),T=b("group.gradient.color"),t=b("group.border.width"),p=b("group.border.color"),q=b("group.border.pattern"),y=b("group.title.orientation"),k=b("group.depth"),w=b("group.border.radius"),v=b("group.border.join"),z=b("group.border.cap"),N=(b("group.border.width.absolute")&&(t/=f._zoom),p),u=b("group.border.repeat.image");if((u=u&&g(u,p))&&(N=bs(r,u,p,null,B,f,b("group.border.repeat.image.stretch"),U)),h)u=r.lineJoin,p=r.lineCap,r.lineJoin=v,r.lineCap=z,Y?(r.save(),EN(r,h,U,w),r.clip(),p9(r,Y,S,U.x,U.y,U.width,U.height,B,f,H),r.restore(),0<t&&(j=jA(r,q),EN(j,h,U,w),r.lineWidth=t,r.strokeStyle=N,r.stroke(),IA(r,q))):(j=jA(r,q),_||e||o?(EN(r,h,U,w),o?gN(r,o,function(r){return CN(r,H)},!1,U):e?Ks(r,e,H,null,B,f,b("group.repeat.image.stretch"),U,b("group.repeat.image.rotation")):rs(r,_,x,T,U),r.fill(),o&&r.restore(),r!==j&&EN(j,h,U,w)):EN(j,h,U,w),0<t&&(r.lineWidth=t,r.strokeStyle=N,r.stroke()),IA(r,q),h===R&&Ps(r,_,k,U)),r.lineJoin=u,r.lineCap=p;else{var j,o=b("group.title.background");if((!w||w<0)&&(w=0),Y)p9(r,Y,S,a.x,a.y,a.width,a.height,B,f,this.getBodyColor());else if(_||e)if(e?Ks(r,e,H,null,B,f,b("group.repeat.image.stretch"),U,b("group.repeat.image.rotation")):rs(r,_,x,T,a),0===t)EN(r,R,a),r.fill(),Ps(r,_,k,a);else{switch(r.beginPath(),y){case bu:Us(r,a.x,a.y,a.width,a.height,w,w,0,0);break;case ru:Us(r,a.x,a.y,a.width,a.height,0,w,0,w);break;case Ku:Us(r,a.x,a.y,a.width,a.height,w,0,w,0);break;case Bu:Us(r,a.x,a.y,a.width,a.height,0,0,w,w)}r.fill()}if(P&&o)if(0===t)QN(r,P.x,P.y,P.width,P.height,o),Ps(r,o,k,P);else{switch(r.beginPath(),r.fillStyle=o,y){case bu:Us(r,P.x,P.y,P.width,P.height,0,0,w,w);break;case ru:Us(r,P.x,P.y,P.width,P.height,w,0,w,0);break;case Ku:Us(r,P.x,P.y,P.width,P.height,0,w,0,w);break;case Bu:Us(r,P.x,P.y,P.width,P.height,w,w,0,0)}r.fill()}0<t&&(j=jA(r,q),EN(j,"roundRect",U,w),r.save(),r.lineWidth=t,r.strokeStyle=N,r.lineJoin=v,r.lineCap=z,r.closePath(),r.stroke(),P&&b("group.splitLine")&&(h=P.x,u=P.y,p=P.width,Y=P.height,r.beginPath(),y===bu?(r.moveTo(h,u),r.lineTo(h+p,u)):y===ru?(r.moveTo(h+p,u),r.lineTo(h+p,u+Y)):y===Ku?(r.moveTo(h,u),r.lineTo(h,u+Y)):(r.moveTo(h,u+Y),r.lineTo(h+p,u+Y))),r.stroke(),r.restore(),IA(j,q))}this._39O(r,K)}else qz.superClass.drawBody.call(this,r)}}),function(r,K){vY(yz,this,[r,K])}),kz=(BA(yz,Tz,{drawBody:function(r){this._39O(r,this._83o)}}),function(r,K){vY(kz,this,[r,K])}),wz=(BA(kz,Tz,{_3O:function(){var r=this._data,K=this.s,B=this.gv,b=r.getPoints(),f=B.getBorderColor(r),h=f?K("border.width"):0,U=this.getSelectWidth(),a=K("shape.border.width"),P=r.getRect(),H=r.getAnchorRect(),B=B.getBodyColor(r),Y=K("shape.border.color");(b=this._99o=b.isEmpty()?H1:{rect:P,rotation:r.getRotation(),fillRule:K("shape.fill.rule"),scale:r.getScale(),position:r.p(),points:b,segments:r.getSegments(),bodyColor:B,borderColor:f,borderWidth:h,_94o:K("shape.border.3d"),_95o:K("shape.border.3d.color"),_96o:K("shape.border.3d.accuracy"),_97o:U?this.getSelectColor():H1,selectWidth:U,_53o:K("shape.background"),_27Q:g(K("shape.repeat.image"),B),shapeRepeatImageStretch:K("shape.repeat.image.stretch"),shapeRepeatImageRotation:K("shape.repeat.image.rotation"),shapeGradientPack:K("shape.gradient.pack"),shapeBorderGradientPack:K("shape.border.gradient.pack"),_54o:a,_55o:Y,shapeBorderRepeatImage:g(K("shape.border.repeat.image"),Y),shapeBorderRepeatImageStretch:K("shape.border.repeat.image.stretch"),shapeBorderRepeatImageRotation:K("shape.border.repeat.image.rotation"),shapeGradient:K("shape.gradient"),_59o:K("shape.gradient.color"),_60o:K("shape.border.pattern"),_61o:K("shape.border.cap"),_62o:K("shape.border.join"),shapeForeground:K("shape.foreground"),gray:K("2d.gray")})&&(H.x+=b.position.x,H.y+=b.position.y,b.gradientRect=H,f=r.getScale(),B=B1(1,B1(j1(f.x),j1(f.y))),K("shape.dash")&&K("shape.dash.width")>a&&(a=K("shape.dash.width")),(Y=K("shape.border.width.absolute")?(a+h+U)/this.gv._zoom/B:a*("square"===b._61o?.71:.5)+h+U/this.gv._zoom/B)&&(Y*=B,P=v9(P),iN(P,Y,b._62o)),this._68o(P),(H=K("clip.percentage"))!=P1&&(b.clipRect=dY(r.getAnchorRect(),K("clip.direction"),H)),(f=K("shape.fill.clip.percentage"))!=P1&&(b.shapeClipRect=dY(r.getAnchorRect(),K("shape.fill.clip.direction"),f)),(a=K("shape.foreground.clip.percentage"))!=P1&&(b.shapeForegroundClipRect=dY(r.getAnchorRect(),K("shape.foreground.clip.direction"),a)))},getPosition:function(r,K,B,b){var f=this._99o;return f?((r=Ns(r,f.rect,b)).x+=K,r.y+=B,r):DK},_42:function(r){this._99o&&kz.superClass._42.call(this,r)},drawBody:function(r){function K(r){return v?Y1.toGrayColor(r):r}var B,b,f,h=this,U=h.s,a=h._99o,P=a.position,H=a.scale,Y=a.rotation,S=a.borderWidth,_=h.gv._zoom,e=a.selectWidth/_,o=a._27Q,x=a.shapeGradientPack,T=a._54o,t=a.clipRect,p=a.shapeClipRect,q=a.points,y=a.segments,k=h._data.isClosePath(),w=a.fillRule,v=a.gray,z=K(a._53o),N=z||o||x,Y=(r.save(),hN(r,P.x,P.y),UN(r,Y),aN(r,H.x,H.y),t&&(r.beginPath(),r.rect(t.x,t.y,t.width,t.height),r.clip()),N&&p&&(r.save(),r.beginPath(),r.rect(p.x,p.y,p.width,p.height),r.clip()),M.Default.extractShapeTranslation?((q=v9(q)).forEach(function(r){r.x-=P.x,r.y-=P.y}),a.gradientRect.x-=P.x,a.gradientRect.y-=P.y):hN(r,-P.x,-P.y),U("shape.border.width.absolute")),H=a._60o,t=(Y&&H&&(H=H.map(function(r){return r*_})),jA(r,H)),u=r.lineJoin,j=r.lineCap,I=(r.lineJoin=a._62o,r.lineCap=a._61o,K(a.bodyColor));N?($N(r,q,y,k),x?gN(r,x,function(r){return CN(r,a.bodyColor)},!1,a.gradientRect):o?((f=a.shapeRepeatImageStretch)&&(B=l9(q)),Ks(r,o,I,null,h._data,h.gv,f,B,a.shapeRepeatImageRotation)):rs(r,b=I||z,a.shapeGradient,K(a._59o),a.gradientRect),r.fill(w),x&&r.restore(),p&&(r.restore(),hN(r,-P.x,-P.y)),t!==r&&$N(t,q,y,k)):$N(t,q,y,k),(N=a.shapeForeground)&&(r.save(),(o=a.shapeForegroundClipRect)&&(hN(r,P.x,P.y),r.beginPath(),r.rect(o.x,o.y,o.width,o.height),r.clip(),hN(r,-P.x,-P.y)),$N(r,q,y,k),rs(r,N,U("shape.foreground.gradient"),K(U("shape.foreground.gradient.color")),a.gradientRect),r.fill(w),r.restore()),Y&&(r.save(),r.setTransform(1,0,0,1,0,0)),e&&(r.strokeStyle=a._97o,r.lineWidth=T+2*(S+e),r.stroke()),S&&(r.strokeStyle=K(a.borderColor),r.lineWidth=T+2*S,r.stroke()),T&&(b=K(a._55o),(x=a.shapeBorderGradientPack)?gN(r,x,K,!0,a.gradientRect):a.shapeBorderRepeatImage?((f=a.shapeBorderRepeatImageStretch)&&!B&&(B=l9(q)),Bs(r,a.shapeBorderRepeatImage,b,null,h._data,h.gv,f,B,a.shapeBorderRepeatImageRotation)):r.strokeStyle=b=!z&&I?I:b,r.lineWidth=T,r.stroke(),x&&r.restore(),a._94o&&cN(r,b,K(a._95o),T,_,a._96o)),IA(r,H),U("shape.dash")&&0<(p=U("shape.dash.width")||T)&&(H=U("shape.dash.pattern"),Y&&(H=H.map(function(r){return r*_})),(t=jA(r,H,h._2Q("shape.dash.offset")))!==r&&$N(t,q,y,k),h._1Q(r,"shape",p,H)),Y&&r.restore(),r.lineJoin=u,r.lineCap=j,r.restore()},_48O:function(){},_47O:function(r){}}),function(r,K){vY(wz,this,[r,K])}),vz=(BA(wz,kz,{getRotation:(Hz=new i,Yz=new i,Sz=new LH,function(r,K,B){r=r||0;var b,f,h=this._data,U=h.getPoints(),a=U.size();return 1<a?(f=h.p(),h=h.getScale(),Sz.identity().translate(-f.x,-f.y).scale(h.x,h.y).translate(f.x,f.y),f=eP[B]?(b=U.get((h=(a-a%2)/2)-1),U.get(h)):_P[B]?(b=U.get(0),U.get(1)):(b=U.get(a-2),U.get(a-1)),Sz.apply(b,Hz),Sz.apply(f,Yz),nP(Hz,Yz,K,r)):r}),getPosition:(Uz=new i,az=new i,Pz=new i,function(r,K,B,b,f){var h=this._data,U=h.getPoints(),a=U.size();if(1<a){if(h=h.getPointsMatrix2d(),eP[r]){var P=a%2,H=(a-P)/2,Y=U.get(H-1),H=U.get(H);if(0!=P)return(P=Ns(r,DK,b)).x+=K,P.y+=B,h.apply(Y,Uz),h.apply(H,az),h.identity().rotate(Pz.copy(az).sub(Uz).angle()).apply(P,Uz).add(az)}else H=_P[r]?(Y=U.get(0),U.get(1)):(Y=U.get(a-2),U.get(a-1));return h.apply(Y,Uz),h.apply(H,az),AP(Uz,az,r,K,B,b,f)}return DK})}),function(r,K){vY(vz,this,[r,K])}),zz=(BA(vz,Tz,{_3O:function(){vz.superClass._3O.call(this);var r=this.s,K=this._83o;this._82o=K.img||K.shape?H1:{background:this.getBodyColor("grid.background"),depth:r("grid.depth"),rect:K.rect,_88o:r("grid.cell.depth"),cellBorderColor:r("grid.cell.border.color"),_89o:r("grid.row.count"),_90o:r("grid.column.count"),block:r("grid.block"),_91o:r("grid.block.color"),_92o:r("grid.block.padding"),_93o:r("grid.block.width")}},drawBody:function(r){var K=this._82o;if(K){var B,b,f=this._data,h=K.background,U=K.rect,a=K.block,P=K._91o,H=K._92o,Y=K._93o,S=K._88o,_=K.cellBorderColor,e=K._89o,o=K._90o;if(h)if(QN(r,U.x,U.y,U.width,U.height,h),Ps(r,h,K.depth,U),S)for(B=0;B<e;B++)for(b=0;b<o;b++)(U=f.getCellRect(B,b))&&Ps(r,h,S,U);else if(_){for(r.beginPath(),B=0;B<e;B++)for(b=0;b<o;b++)(U=f.getCellRect(B,b))&&r.rect(U.x,U.y,U.width,U.height);r.strokeStyle=_,r.lineWidth=1,r.stroke()}if("h"===a)for(B=0;B<e;B++)U=C9(f.getCellRect(B,0),f.getCellRect(B,o-1)),W9(U,H),as(r,P,U.x,U.y,U.width,U.height,Y);else if("v"===a)for(b=0;b<o;b++)U=C9(f.getCellRect(0,b),f.getCellRect(e-1,b)),W9(U,H),as(r,P,U.x,U.y,U.width,U.height,Y);this._39O(r,this._83o)}else vz.superClass.drawBody.call(this,r)}}),function(r,K){vY(zz,this,[r,K])}),Nz=_?mY().getContext("2d"):H1,b=(BA(zz,Tz,{_checkEmptyRect:!1,_81o:function(){var U,r,a,K,B,b,P,H,f,h,Y,S,_,e,o,x=this._data,T=zz.superClass._81o.call(this),t=x.s("text");return t!=H1&&(t+="",U=x.s("text.font"),e=x.s("text.align"),r=x.s("text.vAlign"),S=x.s("text.wrap"),Y=x.s("text.vertical"),a=x.s("text.vertical.gap"),o=x.s("text.letter.gap")||0,K=x.getWidth(),B=x.getHeight(),null==a&&(a=1),Y?(P=((_=S?$Y(t,B,U,o,Y,a):[t]).length-1)*o,H=0,Nz.textBaseline=Bu,Nz.font=U,_.forEach(function(r){for(var K=r.length,B=0,b=(K-1)*a,f=0;f<K;f++){var h=Nz.measureText(r[f]);b+=h.fontBoundingBoxDescent||L9(U,r[f]).height,B=B1(B,h.width)}P+=B,H=B1(b,H)}),_.length,_.forEach(function(r){}),b={width:P,height:H}):1<(S=(_=S?$Y(t,K,U,o,Y,a):t.split("\n")).length)?(Y=L9(U,t).height,P=0,H=Y*S+a*(S-1),_.forEach(function(r){P=B1(P,L9(U,r).width)}),b={width:P,height:H}):(b=L9(U,t),o&&(b.width+=(t.length-1)*o)),Y=b.width,S=b.height,_=x.getAnchor(),"left"===e?f=-K*_.x:"center"===e?f=-K*_.x+(K-Y)/2:"right"===e&&(f=K*(1-_.x)-b.width),"top"===r?h=-B*_.y:"middle"===r?h=-B*_.y+(B-S)/2:"bottom"===r&&(h=B*(1-_.y)-b.height),t=x.getMatrix(),o=l9([t.tf(f,h),t.tf(f+Y,h),t.tf(f+Y,h+S),t.tf(f,h+S)]),(T=C9(T,o))&&x.s("text.shadow")&&((e=v9(T)).x+=x.s("text.shadow.offset.x"),e.y+=x.s("text.shadow.offset.y"),W9(e,x.s("text.shadow.blur")),T=C9(T,e))),T}}),RP.Interactor=function(r){this.gv=this._graphView=r}),uz=(r("Interactor",A,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(r){this.gv.fi(r)},setCursor:function(r){$1||this.gv.setCursor(r)},startDragging:function(r){this._lastClientPoint=V9(r),this._lastLogicalPoint=this.gv.lp(r),c9(this,r)},clearDragging:function(r){this._lastClientPoint=this._lastLogicalPoint=this._logicalPoint=H1},autoScroll:function(r){return this.gv.autoScroll(r,this._lastClientPoint)}}),H1),jz=function(r){uz.handleWindowTouchMove(r)},Iz=function(r){uz.handleWindowTouchEnd(r),K1(V,bK,jz),K1(V,fK,Iz),uz=H1},Lz=function(r){uz.handleWindowMouseMove(r)},Jz=function(r){uz.handleWindowMouseUp(r),K1(V,En,Lz),K1(V,rK,Jz),uz=H1},Fz=function(r){var K=this;K.gv=r,K._is2d=r instanceof RP.GraphView,K._eventListeners={},["mousedown","mousemove","mouseleave","touchstart","touchmove","touchend","mouseup",aK,"wheel"].forEach(function(r){K.addListener(r)}),K.initImageResource()},Gz=(BA(Fz,b,{enableVR:function(r){!!this._vrEnable!==r&&((this._vrEnable=r)?this.gv.vr.mp(this.onVRControllerChange,this):this.gv.vr.ump(this.onVRControllerChange,this))},onVRControllerChange:function(r){var K=r.property,B=(r=r.newValue).id,b=this.gv.vr.getController(B).getRay();if(b)switch(b.controllerId=B,this.gv.vr.getRayEventType(b,K,r[un])){case"down":this.handle_mousedown(b);break;case"up":uz&&Jz(b);break;case"move":this.handle_mousemove(b),uz&&this.handleWindowMouseMove(b)}},setPreventEventDefault:function(r,K){var B=this._eventListeners[r];B?B._prevent=K:this._eventListeners[r]=B={_removal:P1,_prevent:K}},removeListener:function(r){(r=this._eventListeners[r])&&r._removal&&(r._removal(),r._removal=P1)},addListener:function(K){var r,B=this,b=B._eventListeners[K];b||(B._eventListeners[K]=b={_removal:P1,_prevent:!0}),b&&b._removal||(r=function(r){b._prevent&&Y1.preventDefault(r),B.disabled||B.gv._48Q||("wheel"===K?yY(B,r):B["handle_"+K](r))},r1(B.gv.getView(),K,r),b._removal=function(){K1(B.gv.getView(),K,r)})},handleWindowTouchMove:function(r){this.handleWindowMouseMove(r)},handleWindowMouseMove:function(r){!this.downInfo||eN(r)&&1!==d9(r)?this.isDragging&&(this.handleDownInfo("onEndDrag",r),this.isDragging=!1):this.isDragging?this.handleDownInfo("onDrag",r):(this.handleDownInfo("onBeginDrag",r),this.isDragging=!0)},handleWindowTouchEnd:function(r){this.handleWindowMouseUp(r)},handleWindowMouseUp:function(r){if(this.isDragging&&(this.handleDownInfo("onEndDrag",r),this.isDragging=!1),this.downInfo){var K=this.handle("onUp",r);if(K&&K.data===this.downInfo.data){this.handleMissingUp(r);var B=this,b=2===r.button?"onContextMenu":"onClick";if(K.data.s("disableDoubleClick")||!B._dbclickTimer)return void(B._dbclickTimer=R1(function(){delete B._dbclickTimer,B.handleClick(r,b,K),B.downInfo=H1},Y1.clickDelay));l1(B._dbclickTimer),delete B._dbclickTimer,b="onDoubleClick",B.handleClick(r,b,K)}else this.handleDownInfo("onUp",r);this.downInfo=H1,this.downComps=H1}},handle_mouseleave:function(r){var K=this,B=K.gv,b=(K._hoverTimer&&(l1(K._hoverTimer),delete K._hoverTimer),K.currentInfo?K.currentInfo.data:H1);if(b){if(b.s("onLeave")&&b.s("onLeave")(r,b,B),K.fire("data","onLeave",r,b),B=K.currentInfo?K.currentInfo.hits:H1)for(var f in B)K.handleLeave(r,f);K.currentInfo=H1}},handle_mousewheel:function(r){r.scrollDelta=r.wheelDelta/40,this.handle("onScroll",r)},handle_DOMMouseScroll:function(r){r.scrollDelta=2===r.axis?-r.detail:0,this.handle("onScroll",r)},handle_touchstart:function(r){this.handle_mousedown(r)},handle_touchmove:function(r){this.handle("onMove",r)},handle_mousedown:function(r){var K;this.isDragging&&(this.handleDownInfo("onEndDrag",r),this.isDragging=!1),this.downComps=[],this.downInfo=this.handle("onDown",r),this.downInfo&&this!==uz&&(K=eN(r),uz?K?uz.handleWindowTouchEnd(r):uz.handleWindowMouseUp(r):K?(r1(V,bK,jz),r1(V,fK,Iz)):(r1(V,En,Lz),r1(V,rK,Jz)),uz=this)},handle_touchend:function(r){this.handle_mouseup(r)},handle_mouseup:function(r){this.downInfo||this.isDragging||this.handle("onUp",r)},handle_mousemove:function(r){var K=this,B=K.gv;if(K._hoverTimer&&(l1(K._hoverTimer),delete K._hoverTimer),!B._panning&&!B._moving){var b,f,h,U=K.handle("onMove",r),a=this.currentInfo?this.currentInfo.data:H1,P=this.currentInfo?this.currentInfo.hits:H1;if(U&&(f=U.data,h=U.hits,K._hoverTimer=R1(function(){l1(K._hoverTimer),delete K._hoverTimer,K.handle("onHover",r,U)},B.getHoverDelay()||Y1.hoverDelay)),f!==a){if(a&&(a.s("onLeave")&&a.s("onLeave")(r,a,B),this.fire("data","onLeave",r,a)),f&&(f.s("onEnter")&&f.s("onEnter")(r,f,B),this.fire("data","onEnter",r,f)),P)for(b in P)this.handleLeave(r,b);if(h)for(b in h){var H,Y,S=h[b];(Y=(H=f._interactPrefix=S.prefix)&&f.a(H+"onEnter")||S.target.onEnter)&&Y.call(S.target,r,f,B,S.point,S.width,S.height),this.fire(S.type,"onEnter",S.event,S.data,S.image,S.comp,S.point,S),f._interactPrefix=null}}else{if(P)for(b in P)h&&h[b]||this.handleLeave(r,b);if(h)for(b in h)P&&P[b]||(S=h[b],(Y=(H=f._interactPrefix=S.prefix)&&f.a(H+"onEnter")||S.target.onEnter)&&Y.call(S.target,r,f,B,S.point,S.width,S.height),this.fire(S.type,"onEnter",S.event,S.data,S.image,S.comp,S.point,S),f._interactPrefix=null)}this.currentInfo=U}},handle:function(r,K,B){var b,f=this.gv;if(this._is2d){if((B=B||f.getDataInfoAt(K,K.__ht_propagation_filter))&&f.isInteractive(B.data))return b=B.ui.interactiveInfo,U=B.data,b&&(U.s(r)&&U.s(r)(K,U,f),this.fire("data",r,K,U),"body"===B.part&&b.bodyInfo?B.hits=this.handleImage(h="body",f.getImage(U),r,K,U,B.point,b.bodyInfo):"icons"===B.part&&b._38o&&(Y=b._38o[B.name])&&Y[B.index]&&(h="icons|"+B.name+"|"+B.index,B.hits=this.handleImage(h,B.icon,r,K,U,B.point,Y[B.index]))),K["ht.propagation.host"]&&U.getHost&&U.getHost()&&(K.__ht_propagation_filter=function(r){return r===U.getHost()},this.handle(r,K)),B}else{if(!B)if(K&&K instanceof M.Math.Ray&&f.isVREnabled()){var h=f.vr.intersectWorld(K),U=h.data,a=h.intersect;if(f.vr.renderRayDuringInteraction(K,U,a),!U)return;if(!(b=(P=f.getData3dUI(U)).interactiveInfo))return;B={data:U,part:a.part,ui:P}}else{if(!(B=f.getDataInfoDuringInteract(K)))return;B=B&&{data:B.data,part:B.part}}if(f.isInteractive(B.data)){if(!a){U=B.data;var P=f.getData3dUI(U);if(!(b=(B.ui=P).interactiveInfo))return B}if(U.s(r)&&U.s(r)(K,U,f),this.fire("data",r,K,U),!a&&!(a=f.intersectObject(K,U)))return B;var H,Y=a.part;return(H=(H="body"!==Y?U.s(Y+".image")||U.s("shape3d."+Y+".image"):H)||U.s("all.image")||U.s("shape3d.image"))&&(b="object"==typeof H?b[H.uuid]:b[H])&&b.bodyInfo&&(B.part="body",B.interactiveInfo=b,B.point=this._convertUVToPoint(a.uv,b,U,Y,H),B.image=H,B.hits=this.handleImage("body",H,r,K,U,B.point,b.bodyInfo)),B}}},_handleLeaveOrMissing:function(r,K,B){var b,f,h,U,a,P="leave"===r?this.currentInfo:this.downInfo;P&&(b=P.interactiveInfo||P.ui.interactiveInfo)&&(f=P.data,this._is2d?(U=this.gv.lp(K),"body"===P.part&&b.bodyInfo?(a="body","leave"===r?this.handleLeaveImage(B,a,this.gv.getImage(f),K,f,U,b.bodyInfo):this.handleMissingUpImage(a,this.gv.getImage(f),K,f,U,b.bodyInfo)):"icons"===P.part&&b._38o&&(h=b._38o[P.name])&&h[P.index]&&(a="icons|"+P.name+"|"+P.index,"leave"===r?this.handleLeaveImage(B,a,P.icon,K,f,U,h[P.index]):this.handleMissingUpImage(a,P.icon,K,f,U,h[P.index]))):b.bodyInfo&&(U=(a=this.gv.intersectObject(K,f))&&a.uv?this._convertUVToPoint(a.uv,b,f,a.part,P.image):{x:1/0,y:1/0},"leave"===r?this.handleLeaveImage(B,"body",P.image,K,f,U,b.bodyInfo):this.handleMissingUpImage("body",P.image,K,f,U,b.bodyInfo)))},handleClick:function(r,K,B){var b,f,h,U,a=this.downInfo;a&&B&&(b=B.interactiveInfo||B.ui.interactiveInfo,f=B.data,U=this.gv,f.s(K)&&f.s(K)(r,f,U),this.fire("data",K,r,f),b&&(this._is2d?a.part===B.part&&(h=U.lp(r),"body"===B.part&&b.bodyInfo&&this.handleClickImage("body",U.getImage(f),K,r,f,h,b.bodyInfo,B)):b.bodyInfo&&(U=U.intersectObject(r,f))&&(h=this._convertUVToPoint(U.uv,b,f,U.part,a.image),this.handleClickImage("body",a.image,K,r,f,h,b.bodyInfo,B))))},handleDownInfo:function(r,K){var B,b,f,h,U,a,P,H;this.downInfo&&(B=this.downInfo,b=this.gv,(f=B.interactiveInfo||B.ui.interactiveInfo)&&((U=B.data).s(r)&&U.s(r)(K,U,b),this.fire("data",r,K,U),this._is2d?(a=b.lp(K),"body"===B.part&&f.bodyInfo?this.handleDownInfoImage(h="body",b.getImage(U),r,K,U,a,f.bodyInfo):"icons"===B.part&&f._38o&&(P=f._38o[B.name])&&P[B.index]&&(h="icons|"+B.name+"|"+B.index,this.handleDownInfoImage(h,B.icon,r,K,U,a,P[B.index]))):f.bodyInfo&&("onBeginDrag"===r?(H=b._raycaster.intersectObjectAndRecordTriangle(K,U))&&(f.beginDragIntersectInfo=H.triangleInfo):H=b.intersectObject(K,U),(H=H||("onDrag"!==r&&"onEndDrag"!==r||!f.beginDragIntersectInfo?H:b._raycaster.intersectLastTriangle(K,f.beginDragIntersectInfo)))&&(a=this._convertUVToPoint(H.uv,f,U,H.part,B.image),this.handleDownInfoImage("body",B.image,r,K,U,a,f.bodyInfo)))))},fire:function(r,K,B,b,f,h,U,a){this.gv.fi({kind:K,type:r,event:B,data:b,image:f,comp:h,view:this.gv,point:U,width:a?a.width:P1,height:a?a.height:P1})},handleImage:function(r,K,B,b,f,h,U){var a={};if(K=K&&g(K))for(var P,H=this.gv,Y=U.rect,S=((o=this.convertPoint(h,U)).inRect&&(K[B]&&K[B](b,f,H,o,Y.width,Y.height),this.fire("image",B,b,f,K,P1,o,Y),a[r+"|image"]={target:K,type:"image",image:K,data:f,event:b,point:o,width:Y.width,height:Y.height}),U.compInfos),_=K,e=S.length-1;0<=e;e--){var o,x=(T=S[e]).comp;if((o=this.convertPoint(h,T,_,x,H,f)).inRect){var T,Y=T.rect,t=(T=f._interactPrefix=T.prefix)&&f.a(T+B)||x[B];if(t&&(P=t.call(x,b,f,H,o,Y.width,Y.height)),this.fire("comp",B,b,f,K,x,o,Y),!0!==P&&(K=Y.image)&&(K[B]&&(P=K[B](b,f,H,o,Y.width,Y.height)),this.fire("image",B,b,f,K,P1,o,Y)),f._interactPrefix=null,a[r+"|"+e]={target:x,type:"comp",comp:x,image:K,data:f,event:b,point:o,width:Y.width,height:Y.height,prefix:T},this.downComps&&this.downComps.push(x),K&&(a[r+"|"+e+"|image"]={target:K,type:"image",image:K,data:f,event:b,point:o,width:Y.width,height:Y.height,prefix:T}),!0===P)break}}return a},handleLeave:function(r,K){return this._handleLeaveOrMissing("leave",r,K)},handleMissingUp:function(r){return this._handleLeaveOrMissing("missing",r)},handleLeaveImage:function(r,K,B,b,f,h,U){if(B=B&&g(B))for(var a,P=this.gv,H=U.rect,Y=this.convertPoint(h,U),S=(r===K+"|image"&&(B.onLeave&&B.onLeave(b,f,P,Y,H.width,H.height),this.fire("image","onLeave",b,f,B,P1,Y,H)),U.compInfos),_=B,e=S.length-1;0<=e;e--){var o=(x=S[e]).comp,Y=this.convertPoint(h,x,_,o,P,f),H=x.rect,x=f._interactPrefix=x.prefix;if(r===K+"|"+e&&((x=x&&f.a(x+"onLeave")||o.onLeave)&&(a=x.call(o,b,f,P,Y,H.width,H.height)),this.fire("comp","onLeave",b,f,B,o,Y,H)),!0!==a&&(B=H.image)&&r===K+"|"+e+"|image"&&(B.onLeave&&(a=B.onLeave(b,f,P,Y,H.width,H.height)),this.fire("image","onLeave",b,f,B,P1,Y,H)),!(f._interactPrefix=null)===a)break}},handleMissingUpImage:function(r,K,B,b,f,h){var U="onUp",a=this.downInfo.hits;if(a&&K&&(K=g(K)))for(var P,H=this.gv,Y=h.rect,S=(!(o=this.convertPoint(f,h)).inRect&&a[r+"|image"]&&(K.onUp&&K.onUp(B,b,H,o,Y.width,Y.height),this.fire("image",U,B,b,K,P1,o,Y)),h.compInfos),_=K,e=S.length-1;0<=e;e--){var o,x=(T=S[e]).comp;if(!(o=this.convertPoint(f,T,_,x,H,b)).inRect){var Y=T.rect,T=b._interactPrefix=T.prefix;if(a[r+"|"+e]&&((T=T&&b.a(T+U)||x.onUp)&&(P=T.call(x,B,b,H,o,Y.width,Y.height)),this.fire("comp",U,B,b,K,x,o,Y)),!0!==P&&(K=Y.image)&&a[r+"|"+e+"|image"]&&(K.onUp&&(P=K.onUp(B,b,H,o,Y.width,Y.height)),this.fire("image",U,B,b,K,P1,o,Y)),!(b._interactPrefix=null)===P)break}}},handleDownInfoImage:function(r,K,B,b,f,h,U){var a=this.downInfo.hits;if(a&&K&&(K=g(K)))for(var P,H=this.gv,Y=U.rect,S=this.convertPoint(h,U),_=(a[r+"|image"]&&(K[B]&&K[B](b,f,H,S,Y.width,Y.height),this.fire("image",B,b,f,K,P1,S,Y)),U.compInfos),e=K,o=_.length-1;0<=o;o--){var x=(T=_[o]).comp,S=this.convertPoint(h,T,e,x,H,f),Y=T.rect,T=f._interactPrefix=T.prefix,t=0<=["onDrag","onEndDrag"].indexOf(B);if((!t&&a[r+"|"+o]||t&&this.downComps&&0<=this.downComps.indexOf(x))&&((t=T&&f.a(T+B)||x[B])&&(P=t.call(x,b,f,H,S,Y.width,Y.height)),this.fire("comp",B,b,f,K,x,S,Y)),!0!==P&&(K=Y.image)&&a[r+"|"+o+"|image"]&&(K[B]&&(P=K[B](b,f,H,S,Y.width,Y.height)),this.fire("image",B,b,f,K,P1,S,Y)),!(f._interactPrefix=null)===P)break}},handleClickImage:function(r,K,B,b,f,h,U,a){var P=this.downInfo.hits,H=a.hits;if(P&&K&&(K=g(K)))for(var Y,S=this.gv,_=U.rect,e=this.convertPoint(h,U),o=(P[r+"|image"]&&(K[B]&&K[B](b,f,S,e,_.width,_.height),this.fire("image",B,b,f,K,P1,e,_)),U.compInfos),x=K,T=o.length-1;0<=T;T--){var t=(p=o[T]).comp,e=this.convertPoint(h,p,x,t,S,f),_=p.rect,p=f._interactPrefix=p.prefix;if(P[r+"|"+T]&&H[r+"|"+T]&&((p=p&&f.a(p+B)||t[B])&&(Y=p.call(t,b,f,S,e,_.width,_.height)),this.fire("comp",B,b,f,K,t,e,_)),!0!==Y&&(K=_.image)&&P[r+"|"+T+"|image"]&&(K[B]&&(Y=K[B](b,f,S,e,_.width,_.height)),this.fire("image",B,b,f,K,P1,e,_)),!(f._interactPrefix=null)===Y)break}},initImageResource:function(){Y1.setImage("coreInteractorRayHitImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",opacity:.3,rotation:-1.593,rect:[.73315,.6933,14.5337,14.61341]},{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",rotation:-1.593,rect:[3.56695,3.75073,8.8661,8.49856]}]})},_convertUVToPoint:function(r,K,B,b,f){if(!r)return{x:1/0,y:1/0};var h,K=K.bodyInfo.rect,b=(B&&f&&(b="body"===b?(h=B.s("shape3d.uv.scale"),B.s("shape3d.uv.offset")):(h=B.s(b+".uv.scale")||B.s("all.uv.scale"),B.s(b+".uv.offset")||B.s("all.uv.offset")),(h||b)&&(f=Y1.getImage(f),B=D.isPOT(f.width)&&D.isPOT(f.height),f=r.x*(h?h[0]:1)+(b?b[0]:0),h=r.y*(h?h[1]:1)+(b?b[1]:0),B&&(f=f%1+(0<f?0:1),h=h%1+(0<h?0:1)),r.set(f,h))),r.clone());return(B=r.multiply({x:K.width,y:K.height})).local=b,B},convertPoint:function(r,K,B,b,f,h){var U=K.rect,a=K.matrix.applyInverse(r).sub(U);if(!(0<=a.x&&0<=a.y&&a.x<=U.width&&a.y<=U.height))return a;if(b&&W(b.pixelPerfect,h,f)){var P=1,H=!1,r=(U=this._is2d?(P=f.getZoom(),bY(r.x,r.y,P1,P)):bY(r.x,r.y)).x,Y=U.y,S=U.width,_=S*(U=U.height)*P*P,e=((e=Y1.hitMaxArea)<_&&(P*=Math.sqrt(e/_)),r*=P,Y*=P,lN(S=(S*=P)<2?2:S,U=(U*=P)<2?2:U)),r=((_=new LH(0,-r,-Y,P,P)).append(K.matrix),f._drawForChecking=!0,b.transform=_,B.fitSize),Y=(K.refRect&&K.refRect.fitSize?(b.refRect=K.refRect,B.fitSize=!0):B.fitSize=!1,B.comps);B.comps=[b],ZA(e,B,0,0,S,U,h,self),B.comps=Y,B.fitSize=r,delete b.refRect,delete b.unionRect,delete b.transform,f._drawForChecking=!1;try{for(var o=0,x=e.getImageData(0,0,S,U).data;o<x.length;o+=4)if(0!==x[o+3]){H=!0;break}e.restore()}catch(r){VN=H1,H=!1}a.inRect=H}else a.inRect=!0;return a}}),RP.DefaultInteractor=function(r){vY(Gz,this,[r])}),dz=(r("DefaultInteractor",b,{handle_mousedown:function(r){x9(r);var K,B=this.gv,b=B.getDataAt(r);!B.setFocus(r)||B._editing||B._scrolling||(s9(r)?B.handleDoubleClick(r,b):B.handleClick(r,b),K=F9(r),!GN()&&!K&&b&&(B.isMovable(b)||B._39Q(b))||!B.isPannable()||!J9(r)&&!K||A9(r)||(this._tx=B.tx(),this._ty=B.ty(),this.startDragging(r)))},handleWindowMouseUp:function(r){var K=this.gv;K._panning&&(delete K._panning,K.onPanEnded(),this.fi({kind:"endPan",event:r})),delete this._tx,delete this._ty,this.clearDragging()},handle_mousemove:function(r){var K=this,B=K.gv;K._hoverTimer&&(l1(K._hoverTimer),delete K._hoverTimer),K._hoverTimer=R1(function(){K.fi({kind:"hover",event:r}),l1(K._hoverTimer),delete K._hoverTimer},B.getHoverDelay()||Y1.hoverDelay)},handle_mouseleave:function(r){this._hoverTimer&&(l1(this._hoverTimer),delete this._hoverTimer)},handleWindowMouseMove:function(r){var K=this.gv,r=(this.fi({kind:K._panning?"betweenPan":"beginPan",event:r}),K._panning=1,FP(K,r,this._lastClientPoint));K.setTranslate(this._tx+r.x,this._ty+r.y)},handle_mousewheel:function(r){this.gv.handleScroll(r,r.wheelDelta)},handle_DOMMouseScroll:function(r){2===r.axis&&this.gv.handleScroll(r,-r.detail)},handle_keydown:function(r){this.gv.handleKeyDown(r)}}),RP.SelectInteractor=function(r){vY(dz,this,[r])}),sz=(r("SelectInteractor",b,{_42:function(){var r=this.gv,K=r.getZoom(),B=this.mark,b=this.div,f=(b||(b=this.div=CY(),gY(this.getView(),b)),{});f.x=B.x*K+r.tx(),f.y=B.y*K+r.ty(),f.width=B.width*K,f.height=B.height*K,L(b,f),this.intersects()?(b.style.border="",b.style.background=r.getRectSelectBackground()):(b.style.background="",b.style.border="1px solid "+r.getRectSelectBorderColor())},handle_mousedown:function(r){var K,B,b=this.gv;this._57I=H1,this.pendingClickThrough=H1,b._editing||b._scrolling||GN()||F9(r)||(K=b.getDataAt(r),B=b.sm(),K?A9(r)?B.co(K)?B.rs(K):B.as(K):B.co(K)?K instanceof RO&&K.isClickThroughEnabled()&&J9(r)&&(this.pendingClickThrough=V9(r)):B.ss(K):A9(r)||!b.isPannable()?J9(r)&&(A9(r)||B.cs(),b.isRectSelectable()&&(this.startDragging(r),b._77O=1)):J9(r)&&(this._57I=V9(r)))},handle_mouseup:function(r){var K,B=this.gv,b=this._57I;b&&(R9(b,V9(r))<=1&&B.sm().cs(),this._57I=H1),this.pendingClickThrough&&(R9(this.pendingClickThrough,V9(r))<=1&&(K=B.getDataAt(r))instanceof RO&&K.isClickThroughEnabled()&&(b=B.getDataAt(r,function(r){return r.getParent()===K&&B.isSelectable(r,!0)}))&&(r.clickThrough=!0,B.sm().ss(b)),this.pendingClickThrough=H1)},handleWindowMouseUp:function(r){this.clear(r)},handleWindowMouseMove:function(r){var K=this,B=K.gv;K._logicalPoint=B.lp(r),K.mark?(K.fi({kind:"betweenRectSelect",event:r}),B.isPannable()&&K.autoScroll(r),K.redraw()):K.fi({kind:"beginRectSelect",event:r}),K.mark=l9(K._lastLogicalPoint,K._logicalPoint),K.redraw()},intersects:function(){var r=this._lastLogicalPoint,K=this._logicalPoint;return r.x>K.x||r.y>K.y},clear:function(r){var K,B,b,f,h=this,U=h.gv,a=h.mark;h._57I=H1,h.pendingClickThrough=H1,h._lastLogicalPoint&&(a&&(0===a.width||0===a.height||(a=U.getDatasInRect(a,h.intersects())).isEmpty()||(K=U.sm(),B=K.toSelection(),b=n9(r),f=r.altKey,a.each(function(r){K.co(r)?b&&!f||B.remove(r):(!f||b&&f)&&B.add(r)}),K.ss(B)),O9(h.div),delete h.div,delete h.mark,h.redraw(),h.fi({kind:"endRectSelect",event:r}),U.onRectSelectEnded()),h.clearDragging(),delete U._77O)},redraw:function(){var r=this;r._draw||(r._draw=1,R1(function(){r.mark&&r._42(),delete r._draw},16))}}),RP.MoveInteractor=function(r){vY(sz,this,[r])}),nz=(r("MoveInteractor",b,{handle_mousedown:function(r){var K,B=this.gv;!J9(r)||B._editing||B._scrolling||GN()||(!(K=B.getSelectedDataAt(r))||B._39Q(K)&&!B.isMovable(K)?B._focusData=H1:(this._data=K,B.handleMouseDown&&B.handleMouseDown(r,K),this.startDragging(r),B.isMovable(K)&&(B._moving=1)))},handleWindowMouseUp:function(r){var K=this.gv;K.handleMouseUp&&K.handleMouseUp(r,this._data),this.clear(r)},handleWindowMouseMove:function(r){var K,B,b,f,h=this,U=h._data,a=h.gv;a._93O&&a._93O(r,U)||a._moving&&(h._logicalPoint||h.fi({kind:"prepareMove",event:r}),K={kind:f=h._logicalPoint?"betweenMove":"beginMove",event:r},B=h._logicalPoint=a.lp(r),"beginMove"!=f||h._alreadyBeginTransaction||(h._alreadyBeginTransaction=!0,a.getDataModel().beginTransaction()),b=(f=h._calcShift(f,r)).x,f=f.y,(U=h.gv.getMoveMode(r,U))&&("x"===U?f=0:"y"===U?b=0:"xy"!==U&&(b=f=0)),a.moveSelection(b,f),h._lastLogicalPoint=B,h.autoScroll(r),h.fi(K))},_calcShift:function(r,K){var B=this._logicalPoint,b=this._lastLogicalPoint;return{x:B.x-b.x,y:B.y-b.y}},clear:function(r){var K=this.gv;this._lastLogicalPoint&&(this._lastLogicalPoint=this._data=K._moving=H1,this._logicalPoint&&(this.fi({kind:"endMove",event:r}),K.onMoveEnded()),this.clearDragging()),this._alreadyBeginTransaction&&(this._alreadyBeginTransaction=!1,K.getDataModel().endTransaction())}}),RP.TextEditInteractor=function(r){vY(nz,this,[r]),this.init()}),Az=(r("TextEditInteractor",b,{setUp:function(){nz.superClass.setUp.call(this),this.gv.mp(this.handleGvPropertyChange,this)},teatDown:function(){nz.superClass.teatDown.call(this),this.gv.ump(this.handleGvPropertyChange,this)},handleGvPropertyChange:function(r){this._editTarget&&this.endTextEdit()},init:function(){function r(r){r.stopPropagation()}var B=this,K=this.input=_.createElement("input"),b=K.style,f=(K.text="text",b.border="1px solid #d8d8d8",b.position="absolute",b.padding="2px 3px",b.outline="none",b.marginLeft="-90px",b.marginTop="-16px",b.backgroundColor="rgba(255,255,255, 1)",b.fontSize="14px",b.width="180px",b.height="32px",b.boxShadow="0 0 13px rgba(16,142,233, 0.5)",b.textAlign="center",b.boxSizing="border-box",r1(K,"keyup",function(r){dN(r)&&B.endTextEdit(),sN(r)&&B.endTextEdit(!0)}),r1(K,"focus",function(r){K.select()}),this.textarea=_.createElement("textarea")),h=this.wrap=_.createElement("div");h.appendChild(f),(b=f.style).margin=0,b.padding="4px",b.overflow="hidden",b.boxSizing="border-box",b.position="absolute",b.outline="none",b.backgroundColor="transparent",b.resize="none",b.textAlign="center",b.fontSize="14px",b.borderWidth=0,b.width="100%",(b=h.style).boxSizing="border-box",b.margin=0,b.padding=0,b.position="absolute",b.boxShadow="0 0 13px rgba(16,142,233, 0.5)",b.border="1px solid #d8d8d8",b.backgroundColor="rgba(255,255,255, 1)",b.zIndex="10",r1(f,"keydown",function(r){(n9()||A9())&&dN(r)?B.endTextEdit():sN(r)?B.endTextEdit(!0):B._editTarget instanceof lO||B.calculateTextareaHeight(String.fromCharCode(r.keyCode))}),r1(f,"focus",function(r){f.select()}),r1(K,"mousedown",r),r1(K,"touchstart",r),r1(f,"mousedown",r),r1(f,"touchstart",r),r1(f,"click",r),B.SIZING_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],B.HIDDEN_TEXTAREA_STYLE="visibility:hidden; min-height:0 !important;max-height:none !important;height:0 !important;visibility:hidden !important;overflow:hidden !important;position:absolute !important;z-index:-1000 !important;top:0 !important;right:0 !important",B.handleWindowClick=function(r){var K=B._editingDOM;K&&(K=K.getBoundingClientRect(),r=V9(r),m9(K,r)||B.endTextEdit())}},handle_mousedown:function(r){var K,B=this.gv;s9(r)&&!B._editing&&(r=B.getDataAt(r))&&(K=B.getTextEditInfo(r))&&(this._editInfo=K,this._editTarget=r,B._editing=!0,K.isMultiline?this.handleMultilineEdit():this.handleTextEdit())},handleMultilineEdit:function(){var r=this,K=r.gv,B=r._editTarget,b=r.getTargetValue(),f=r.textarea,h=r.wrap,U=this._editInfo;this.hiddenTextarea||this.createHiddenTextarea(),f.value=b=null!==b&&b!==P1?b:"",U.font&&(f.style.font=U.font),r._editingDOM=f,K.appendHTML(h),this.layoutHTML(h,B),B instanceof lO?f.style.height="100%":(f.style.height="auto",this.calculateTextareaHeight()),R1(function(){f.focus(),r1(V,"mousedown",r.handleWindowClick),r1(V,"touchstart",r.handleWindowClick)},10)},handleTextEdit:function(){var r=this,K=r.gv,B=r._editTarget,b=r.getTargetValue(),f=r.input;f.value=b=null!==b&&b!==P1?b:"",r._editingDOM=f,K.getView().appendChild(f),this.layoutHTML(f,B),R1(function(){f.focus(),r1(V,"mousedown",r.handleWindowClick),r1(V,"touchstart",r.handleWindowClick)},10)},layoutHTML:function(r,K){var B,b,f,h,U=this.gv,a=U.getZoom();K instanceof lO?(h=(f=U.getDataUI(K))._6I,b=K.getScale(),B=r.style,r.style.left=h.x*a+U.tx()+"px",r.style.top=h.y*a+U.ty()+"px",r.style.width=f._6I.width+"px",r.style.height=f._6I.height+"px",KN(B,"transform","scale("+a*b.x+","+a*b.y+")"),KN(B,"transformOrigin","0px 0px")):K instanceof JO?(b=(h=K.getRect()).width*a,r.style.left=(h.x+h.width/2)*a+U.tx()+"px",r.style.top=(h.y+h.height/2)*a+U.ty()+"px",r.style.width=b+"px",r.style.marginLeft=-b/2+"px"):K instanceof M.Edge&&(h=(f=U.getDataUI(K))._6I,r.style.left=(h.x+h.width/2)*a+U.tx()+"px",r.style.top=(h.y+h.height/2)*a+U.ty()+"px")},endTextEdit:function(r){var K=this,B=K._editInfo.isMultiline?K.wrap:K.input,b=K._editInfo.isMultiline?K.textarea:K.input;r||K.setTargetValue(b.value),K.gv.getView().removeChild(B),K.gv._editing=!1,delete K._editingDOM,delete K._editTarget,K1(V,"mousedown",K.handleWindowClick),K1(V,"touchstart",K.handleWindowClick)},setTargetValue:function(r){var K=this._editTarget,B=this._editInfo,b=B.accessType;(B=B.name)&&b||(b="p",B="name"),"p"===b?K[M.Default.setter(B)](r):"a"===b?K.a(B,r):K.s(B,r)},getTargetValue:function(){var r=this._editTarget,K=this._editInfo,B=K.accessType;return(K=K.name)&&B||(B="p",K="name"),"p"===B?r[M.Default.getter(K)]():"a"===B?r.a(K):r.s(K)},createHiddenTextarea:function(){this.hiddenTextarea=_.createElement("textarea"),this.hiddenTextarea.setAttribute("style","margin:0; padding:0; position:absolute; overflowY:scroll; resize:none; box-sizing:border-box;pointer-events: none;opacity:0;"),this.hiddenTextarea.setAttribute("rows","1"),this.gv.getView().appendChild(this.hiddenTextarea)},calculateHTMLStyle:function(r,K){if(K&&this.computedStyleCache)return this.computedStyleCache;var B=V.getComputedStyle(r),r=B.getPropertyValue("box-sizing")||B.getPropertyValue("-moz-box-sizing")||B.getPropertyValue("-webkit-box-sizing"),b=parseFloat(B.getPropertyValue("padding-bottom"))+parseFloat(B.getPropertyValue("padding-top")),f=parseFloat(B.getPropertyValue("border-bottom-width"))+parseFloat(B.getPropertyValue("border-top-width")),b={sizingStyle:this.SIZING_STYLE.map(function(r){return r+":"+B.getPropertyValue(r)}).join(";"),paddingSize:b,borderSize:f,boxSizing:r};return K&&(this.computedStyleCache=b),b},calculateTextareaHeight:function(r){r=r||"";var K=this.textarea,B=this.hiddenTextarea,b=this.wrap,f=(a=this.calculateHTMLStyle(K,!1)).paddingSize,h=a.borderSize,U=a.boxSizing,a=a.sizingStyle,a=(B.setAttribute("style",a+";"+this.HIDDEN_TEXTAREA_STYLE),B.value=K.value+r,B.scrollHeight);"border-box"===U?a+=h:"content-box"===U&&(a-=f),K.style.height=a+"px",b.style.height=Math.max(a,32)+"px",b.style.marginTop=-.5*a+"px"}}),RP.ScrollBarInteractor=function(r){vY(Az,this,[r])}),Vz=(r("ScrollBarInteractor",b,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(r){var K=this.gv.getViewRect();return this._41o()&&(K.x+K.width-this.gv.lp(r).x)*this.gv.getZoom()<P9},isH:function(r){var K=this.gv.getViewRect();return this._40o()&&(K.y+K.height-this.gv.lp(r).y)*this.gv.getZoom()<P9},handle_mousemove:function(r){this.handle_touchmove(r)},handle_touchmove:function(r){var K;!xN&&J9(r)&&this.gv.isScrollBarVisible()&&(K=this.isV(r),r=this.isH(r),(K||r)&&this.gv.showScrollBar(),this.gv._scrolling=K||r)},handleWindowMouseUp:function(r){this.handleWindowTouchEnd(r)},handleWindowTouchEnd:function(r){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=H1,this.fi({kind:"endScroll",event:r})},handle_mousedown:function(r){this.handle_touchstart(r)},handle_touchstart:function(r){var K,B=this;B.gv.setFocus(r),x9(r),B.handle_touchmove(r),1<d9(r)||!B.gv._scrolling||!B.gv.isScrollBarVisible()||(B._cp=V9(r),B._tx=B.gv.tx(),B._ty=B.gv.ty(),K=B.isV(r),B._state=K?"vScroll":"hScroll",c9(B,r),B.fi({kind:"beginScroll",event:r}))},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowTouchMove:function(r){var K=V9(r),B=this.gv.getViewRect(),b=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-K.y)*b.height/B.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-K.x)*b.width/B.width),this.fi({kind:"betweenScroll",event:r})}}),RP.TouchInteractor=function(r,K){(K=K||{}).selectable===P1&&(K.selectable=!0),K.movable===P1&&(K.movable=!0),K.pannable===P1&&(K.pannable=!0),K.pinchable===P1&&(K.pinchable=!0),K.editable===P1&&(K.editable=!0),this.params=K,vY(Vz,this,[r])});r("TouchInteractor",b,{ms_edit:1,setUp:function(){Vz.superClass.setUp.call(this),$1&&this.params.editable&&this.gv.setEditInteractor(this)},tearDown:function(){Vz.superClass.tearDown.call(this),$1&&this.params.editable&&this.gv.setEditInteractor(H1)},clear:function(r){var K=this,B=K.gv;B._moving&&(K.fi({kind:"endMove",event:r}),delete B._moving,B.onMoveEnded(),B.dm().endTransaction()),B._panning&&(K.fi({kind:"endPan",event:r}),delete B._panning,B.onPanEnded()),B._pinching&&(K.fi({kind:"endPinch",event:r}),delete B._pinching,B.onPinchEnded()),B._editing&&(K._46O(r),K._77I=K._node=K._edge=K._shape=K._rect=K._89I=K._index=B._editing=H1),K.pendingClickThrough=K._moving=K._panning=K._pinching=K._editing=K._57I=K._data=K._beginHistory=H1,K.clearDragging()},handle_touchstart:function(r){var K,B,b,f,h,U=this;U.gv._editing||(x9(r),U._57I=H1,U.pendingClickThrough=H1,K=U.params,b=(B=U.gv).sm(),f=B.getDataAt(r),1===(h=d9(r))?s9(r)?B.handleDoubleClick(r,f):(B.handleClick(r,f),f&&(B.handleMouseDown&&B.handleMouseDown(r,f),U._data=f),(f=K.selectable?f:H1)&&(b.co(f)?f instanceof RO&&f.isClickThroughEnabled()&&(U.pendingClickThrough=V9(r)):b.ss(f),K.editable&&B.isEditable(f)&&U._79I(r,f,!0)?(U._editing=1,U.startDragging(r)):K.movable&&B.isMovable(f)&&(U._moving=1,U.startDragging(r))),f&&(B.isMovable(f)||B._39Q(f))||(U._57I=V9(r),K.pannable&&B.isPannable()&&(U._panning=1,U.startDragging(r),U._translate={x:B.tx(),y:B.ty()}))):!K.pinchable||2!==h||!B.getEditInteractor()&&f&&(b=g(B.getImage(f)))&&W(b.scrollable,f,this)||(U._pinching=1,U.startDragging(r),K=B.getView(),h=B.getZoom(),b=K.getBoundingClientRect(),f=r.touches[0],K=r.touches[1],(f={x:(f.clientX+K.clientX)/2-b.left,y:(f.clientY+K.clientY)/2-b.top}).x-=B.tx(),f.y-=B.ty(),f.x/=h,f.y/=h,U._p=f,U._d=Ts(r)))},handle_touchend:function(r){var K=this.gv,B=this._57I,b=this._data;B&&(R9(B,V9(r))<=1&&!K.getDataAt(r)&&K.sm().cs(),this._57I=H1),b&&K.handleMouseUp&&K.handleMouseUp(r,b),this.pendingClickThrough&&(R9(this.pendingClickThrough,V9(r))<=1&&(b=K.getDataAt(r))instanceof RO&&b.isClickThroughEnabled()&&(B=K.getDataAt(r,function(r){return r.getParent()===b&&K.isSelectable(r,!0)}))&&(r.clickThrough=!0,K.sm().ss(B)),this.pendingClickThrough=H1)},handleWindowTouchEnd:function(r){this.clear(r)},handleWindowTouchMove:function(r){var K,B,b=this,f=b.gv,h=d9(r);1===h?(K=V9(r),K=FP(f,K,b._lastClientPoint),B=R9({x:0,y:0},K),b._editing&&(b._beginHistory||(b._beginHistory=1,f.dm().beginTransaction()),f._editing=1,b._78I(r)),b._moving?!f._moving&&B<Y1.touchMoveThreshold||(b._beginHistory||(b._beginHistory=1,f.dm().beginTransaction()),b.handleMove(r)):!b._panning||!f._panning&&B<Y1.touchMoveThreshold||(f.setTranslate(b._translate.x+K.x,b._translate.y+K.y),b.fi({kind:f._panning?"betweenPan":"beginPan",event:r}),f._panning=1)):2===h&&b._pinching&&(B=Ts(r),f.handlePinch(b._p,B,b._d),b._d=B,b.fi({kind:f._pinching?"betweenPinch":"beginPinch",event:r}),f._pinching=1)},handleMove:function(r){var K=this.gv,B=K.lp(r);K._93O&&K._93O(r,this._data)||(K.moveSelection(B.x-this._lastLogicalPoint.x,B.y-this._lastLogicalPoint.y),this._lastLogicalPoint=B,this.autoScroll(r),this.fi({kind:K._moving?"betweenMove":"beginMove",event:r}),K._moving=1)}});var Mz,X=(M=V.ht).graph._editor={Math:M.Math,Guide:{},getStyle:function(r){var K=X.StyleMap;return K&&(K=K[r])!==P1?K:X.DefaultStyleMap[r]},setStyle:function(r,K){(X.StyleMap||(X.StyleMap={}))[r]=K},inEdit:function(r){return!0===r._inXEdit},startEdit:function(r){r._inXEdit=!0,X.Inject.doInject(r)},_46O:function(r){r._inXEdit=!1,X.Inject.undoInject(r)},toScreenPosition:function(r,K){var B=r.tx(),b=r.ty(),r=r._zoom;return new X.Math.Vector2(K.x*r+B,K.y*r+b)},checkHit:function(r,K,B){return r.distanceTo(K)<B},toWorldPosition:function(r,K){var B=r.tx(),b=r.ty(),r=r._zoom;return{x:(K.x-B)/r,y:(K.y-b)/r}},setAntialias:function(r,K){for(var B,b=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled"],f=0,h=b.length;f<h&&!((B=b[f])in r);f++);r[B],r[B]=K},getTargetCornersOnScreen:function(K,r){if(!r)return null;var B=[];if(oY(r,K))var b=[{x:(b=SP(K,r)).x,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width,y:b.y+b.height},{x:b.x,y:b.y+b.height}];else{if(!r.getCorners)return null;b=r.getCorners()}return b.forEach(function(r){r=X.toScreenPosition(K,r),B.push(r.x,r.y)}),B},log:function(){},updateTipInfo:function(r,K,B){Mz=B?((r=M.Default.getLogicalPoint(r,K._canvas)).x+=X.Icons.TipShiftX,r.y+=X.Icons.TipShiftY,{helperPos:r,text:B,size:B.length}):H1},drawTip:function(r,K){Mz&&X.Icons.DrawIcon(K,r,X.Icons.TipHelper,Mz)}},Rz=X.Inject={_modules:[],registAsModule:function(B,b){var r,f={},K={};for(r in B){var h=b.prototype[r];f[r]=h}B.getBackup=function(r){return f[r]},B.getBackups=function(){return f},K.doInject=function(r){for(var K in B)"getBackup"!==K&&(b.prototype[K]=B[K])},K.undoInject=function(r){for(var K in B)"getBackup"!==K&&(b.prototype[K]=f[K])},Rz._modules.push(K)},doInject:function(r){for(var K=Rz._modules,B=0,b=K.length;B<b;B++)K[B].doInject(r)},undoInject:function(r){for(var K=Rz._modules,B=0,b=K.length;B<b;B++)K[B].undoInject(r)}},lz=b=M.graph.EditInteractor=function(r){var K=this,B=_.createElement("canvas");B.className="editCanvas",B.style.position="absolute",K._uuid=M.Math.generateUUID(),K._styleMap={},K._canvas=B,K._context=B.getContext("2d"),b.superClass.constructor.call(K,r),this._editDetail=!1,X.setAntialias(K._context,!1),K._subModules=K.initSubModule(),K._gridGuide=new X.Guide.Grid(K),K._rectGuide=new X.Guide.Rect(K),K._hoverGuide=new X.Guide.Hover(K)};M.Default.def(b,M.graph.Interactor,{ms_edit:1,ms_fire:1}),A.defineProperties(b.prototype,{editDetail:{get:function(){return!!this._editDetail},set:function(r){var K=this._editDetail;K!==r&&(this._editDetail=r,this.gv._editing=r,this.fp("editDetail",K,r),this.fp("pointsEditingMode",K,r),this.fi({kind:r?"beginEditPoints":"endEditPoints"}))}},gvEditing:{get:function(){return this.gv._editing},set:function(r){this._editDetail&&!r||(this.gv._editing=r)||(this.editDetail=!1)}},editing:{get:function(){return this._editing},set:function(r){this._editing=r,this.gvEditing=r}},editingModule:{get:function(){return this._editMod}},pointsEditingMode:{get:function(){return this.editDetail},set:function(r){this.editDetail!==r&&(r?this._tryEnterEditDetailMode():this._tryQuitEditDetailMode())}},gridEnabled:{get:function(){return!!this._gridEnabled&&(this.gv,!0)},set:function(r){r!==this._gridEnabled&&(this._gridEnabled=r,this._42())}},alignmentGuideEnabled:{get:function(){return this._agEnabled},set:function(r){r!==this._agEnabled&&(this._agEnabled=r,this._42())}},gridGuide:{get:function(){return this._gridGuide}},rectGuide:{get:function(){return this._rectGuide}},hoverGuide:{get:function(){return this._hoverGuide}}}),b.prototype.initSubModule=function(){return[new X.Anchor(this),new X.RotateX(this),new X.MoveDummy(this),new X.Rect(this),new X.Curve(this),new X.MoveHelper(this)]},b.prototype.getSubModule=function(r){for(var K,B=this._subModules,b=0,f=B.length;b<f;b++)if((K=B[b]).catalog===r)return K},b.prototype.invokeSubModule=function(r,K){for(var B,b,f=this._subModules,h=Array.prototype.slice.call(arguments,2),U=0,a=f.length;U<a;U++)if((b=(B=f[U])[r])&&b.apply(B,h)!=P1&&K)return B},b.prototype.invokeSubModuleInverse=function(r,K){var B=this._subModules;if(B)for(var b,f,h=Array.prototype.slice.call(arguments,2),U=B.length-1;0<=U;U--)if((f=(b=B[U])[r])&&f.apply(b,h)!=P1&&K)return b},b.prototype.setUp=function(){X.log("setUp");var r=this.gv,K=r.getView(),B=this._canvas;b.superClass.setUp.call(this),r.setEditInteractor(this),r._79O?K.insertBefore(B,r._79O):K.appendChild(B),X.startEdit(r),this.invokeSubModule("setUp"),r.dm().mm(this._onDataModelChanged,this),r.dm().md(this._onDataPropertyChanged,this)},b.prototype.tearDown=function(){X.log("tearDown");var r=this,K=r.gv,B=K.getView();r._resetCustomCursorStyle(),b.superClass.tearDown.call(r),K.dm().umm(r._onDataModelChanged,r),K.dm().umd(r._onDataPropertyChanged,r),K.setEditInteractor(null),B.removeChild(r._canvas),r._drawTimer&&(l1(r._drawTimer),r._drawTimer=null),X._46O(K),r.invokeSubModule("tearDown")},b.prototype._onDataModelChanged=function(r){("clear"===r.kind||"remove"===r.kind&&this.editDetail&&r.data===this.getSubModule("Curve").target)&&(this.editDetail=!1,this._42())},b.prototype._onDataPropertyChanged=function(r){var K,B;this.editDetail&&(K=this.getSubModule("Curve"),(B=r.data)!==K.target||B._writing||K._handleDataChanged(r))},b.prototype.clear=function(){X.log("clear")},b.prototype.redraw=function(){this._42()},b.prototype._42=function(){var r=this;r._drawTimer||(r._drawTimer=R1(function(){r._drawTimer=null,r.drawImpl()},0))},b.prototype.drawImpl=function(){for(var a in{_42:!0})break;return function(){var r=this._canvas,K=this.gv,B=K.getWidth(),b=K.getHeight(),f=this._context,h=M.Default.getInternal(),U=Y1.devicePixelRatio,h=(r.width===B&&r.height===b||h.setCanvas(r,B,b,U),f.clearRect(0,0,r.width,r.height),this._getValidSelection());f.save(),f.scale(U,U),this._gridGuide._42(),this.invokeSubModuleInverse(a,!1,f,K,h),this._rectGuide._42(),this._hoverGuide._42(),f.restore()}}(),b.prototype._getValidSelection=function(){var K=this.gv,r=K.sm().getSelection(),B=[];return r.each(function(r){K.isVisible(r)&&K.isEditable(r)&&B.push(r)}),B},b.prototype.handle_touchmove=function(r){return this.handle_mousemove(r)},b.prototype.handle_mousemove=function(r){if(!M.Default.isDragging()&&(this.editDetail||!GN()&&!F9(r))&&!this.gv._externalEditing){if(this.gvEditing=!1,this._checkEdit(r))this.gvEditing=!0;else{if(!this.getStyle("hoverGuideVisible"))return;this.hoverData=this.gv.getDataAt(r)}this._42()}},b.prototype.handle_touchstart=function(r){return this.handle_mousedown(r)},b.prototype.handle_mousedown=function(r){x9(r);var K=this;if((K.editDetail||!GN()&&!F9(r))&&!K.gv._externalEditing){if(s9(r)&&!r.clickThrough){if(K.editDetail){if(K._tryQuitEditDetailMode(r))return}else if(K._tryEnterEditDetailMode())return;K.gv.dm().beginTransaction();var B=K.invokeSubModule("handleDoubleClick",!0,r);if(K.gv.dm().endTransaction(),B)return}(B=K._checkEdit(r))&&(K._downPosition=K._getLogicalPoint(r),K.gv.dm().beginTransaction(),B.startEdit(K,r),K.editing=!0)}},b.prototype._checkEdit=function(r){var K=this.gv,B=this._getLogicalPoint(r),K=this.invokeSubModule("check",!0,K,r,B)||null;return this._editMod=K},b.prototype.handleWindowTouchMove=function(r){return this.handleWindowMouseMove(r)},b.prototype.handleWindowMouseMove=function(r){var K=this._downPosition;if(K){if(this._getLogicalPoint(r).distanceTo(K)<this.getStyle("moveSensitivity"))return;delete this._downPosition}(K=this._editMod)&&K.handleEdit(this.gv,r),this.redraw()},b.prototype._getLogicalPoint=function(r){return r=M.Default.getLogicalPoint(r,this._canvas),new X.Math.Vector2(r)},b.prototype.handleWindowTouchEnd=function(r){return this.handleWindowMouseUp(r)},b.prototype.handleWindowMouseUp=function(){for(var K in{_46O:!0})break;return function(r){this.editing=!1,this.setCursor("default"),this.invokeSubModule(K,!1,r),this._42(),this.gv.dm().endTransaction()}}(),b.prototype.handle_mousewheel=function(r){x9(r),this.invokeSubModule("preHandleScroll",!0)||this.gv.handleScroll(r,r.wheelDelta)},b.prototype.handleDelete=function(){var r;if(!this.editDetail)return this.gv.dm().beginTransaction(),r=this.invokeSubModule("handleNormalStateDelete",!0),this.gv.dm().endTransaction(),void(r||this.gv.removeSelection());this.gv.dm().beginTransaction(),this.invokeSubModule("handleDelete",!0),this.gv.dm().endTransaction(),this._42()},b.prototype.handle_keydown=function(r){var K,B=this;return(r.metaKey||r.ctrlKey)&&B._42(),GN(r)&&!B.editing?(B.gvEditing=!1,B.setCursor("default"),void B._42()):(K=dN(r),B.editDetail?((K||sN(r))&&(B.editDetail=!1,B._42()),B.gv.dm().beginTransaction(),B.invokeSubModule("handle_keydown",!0,r),void B.gv.dm().endTransaction()):(B.gv.dm().beginTransaction(),B.invokeSubModule("handleNormalStateKeyDown",!0,r),B.gv.dm().endTransaction(),void(K&&B._tryEnterEditDetailMode())))},b.prototype.handle_keyup=function(r){this.gv.dm().beginTransaction(),this.invokeSubModule("handle_keyup",!0,r),this.gv.dm().endTransaction()},b.prototype._tryEnterEditDetailMode=function(){if(!this.editDetail&&this.invokeSubModule("canEnterEditDetailMode",!0)&&1===this._getValidSelection().length)return this.editDetail=!0,this._42(),!0},b.prototype._tryQuitEditDetailMode=function(r){return!(!this.editDetail||r&&!this.invokeSubModule("canQuitEditDetailMode",!0,r)||(this.editDetail=!1,this._42(),0))},b.prototype.setStyle=function(r,K,B){B?X.setStyle(r,K):this._styleMap[r]=K,"baseColor"===r&&(iz=K),this.fp("styleChanged",null,{key:r,value:K,base:B}),this._42()},b.prototype.getStyle=function(r,K){var B=this._styleMap[r];return B!==P1?B:X.getStyle(r)},b.prototype.setCursor=function(r){this._resetCustomCursorStyle(),M.graph.EditInteractor.superClass.setCursor.call(this,r)},b.prototype._drawHostGuide=function(r){var K=this._context,B=this.gv,b=(X.Icons.DrawIcon(this,K,X.Icons.NodeHoverGuide,r.corners),r.host);if(b){var f=B.getAttachPoints(b);if(f&&f.length)for(var h=0,U=f.length;h<U;h++){var a=f[h],a=LP(B,b,0,a.offsetX||0,a.offsetY||0,a.x,a.y);(a=X.toScreenPosition(B,a)).isAttach=r.attach===h,X.Icons.DrawIcon(this,K,X.Icons.AttachPoint,a)}}},b.prototype._resetCustomCursorStyle=function(){var r;this._customStyle&&((r=this.gv.getView()).classList&&r.classList.remove&&r.classList.remove(this._customStyle),this._customStyle=null)},b.prototype._setRotateCursor=function(r){var r=(this._cursorFactory||(this._cursorFactory=new X.CursorFactory(this))).getRotateCursor(r),K=this.gv.getView();this._resetCustomCursorStyle(),this._customStyle=r,K.classList&&K.classList.add&&K.classList.add(r)};((h=X.Group=function(r){this._entities=r,this._64O=0,this._position={x:0,y:0},this._scale={x:1,y:1},this._anchor={x:.5,y:.5},this._anchor2={x:.5,y:.5}}).prototype={}).constructor=h;var Cz=null,mz=null;h.findOrCreateGroup=function(r,K){return mz===K&&Cz&&Cz.checkIsMe(r)?Cz:(mz=K,(K=new X.Group(r)).getKeyOb()?Cz=K:void 0)},h.prototype.checkIsMe=function(r){var K=this._entities;if(K.length!==r.length)return!1;for(var B={},b=r.length,f=0;f<b;f++)B[r[f]._id]=!0;for(f=0;f<b;f++)if(!B[K[f]._id])return!1;return!0},h.prototype.getRotation=function(){return this._64O},h.prototype.getPosition=function(){return this._position},h.prototype.getAnchor=function(){return this._anchor},h.prototype.getWidth=function(){return this._width},h.prototype.getScale=function(){return this._scale},h.prototype.getSize=function(){return{width:this._width,height:this._height}},h.prototype.getHeight=function(){return this._height},h.prototype.getKeyOb=function(){for(var r=this._entities,K=r.length-1;0<=K;K--){var B=r[K];if(this.isNode(B))return B}},h.prototype.getAnchor2=function(){var r=this.rotateCenter;if(r)return r;if(!(r=this.getKeyOb()))return this._anchor;var K=this._anchor2;return r.getMatrix().tf({x:r.getWidth()*(K.x-r.getAnchor().x),y:r.getHeight()*(K.y-r.getAnchor().y)})},h.prototype.setAnchor2=function(r,K){var B=this.getKeyOb();B&&(K="number"==typeof r?{x:r,y:K}:r,r=B.getMatrix().tfi(K),this._anchor2={x:B.getAnchor().x+r.x/B.getWidth(),y:B.getAnchor().y+r.y/B.getHeight()})},h.prototype.setRotation=function(r){},h.prototype.beginRotate=function(r){this.rotateCenter=r.pos,this.rotateMode=r.groupRotateMode},h.prototype.endRotate=function(){delete this.rotateCenter,delete this.rotateMode},h.prototype.addRotation=function(r,K,B){return"batch"===K?this._addRotationInBatchMode(r,B):"block"===K?this._addRotationInBlockMode(r,B):void 0},h.prototype._addRotationInBlockMode=function(b,f){var h=this,U=h.rotateCenter||h.getPosition();h._entities.forEach(function(r){var K,B;!h.isNode(r)||f&&!f(r)||((K=r.getMatrix()).translate(-U.x,-U.y),K.rotate(b),K.translate(U.x,U.y),B=Math.sign(r.getScale().x),r.setRotation(d1(K.b*B,K.a*B)),r.setPosition(K.tx,K.ty))})},h.prototype._addRotationInBatchMode=function(f,h){var U=this,a=U._anchor2;U._entities.forEach(function(r){var K,B,b;!U.isNode(r)||h&&!h(r)||(K=r.getAnchor(),K=(b=r.getMatrix()).tf({x:r.getWidth()*(a.x-K.x),y:r.getHeight()*(a.y-K.y)}),(B=new X.Math.Matrix2d).set(b.a,b.b,b.c,b.d,b.tx,b.ty),B.translate(-K.x,-K.y),B.rotate(f),B.translate(K.x,K.y),b=Math.sign(r.getScale().x),r.setRotation(d1(B.b*b,B.a*b)),r.setPosition(B.tx,B.ty))})},h.prototype.setPosition=function(r){for(var K,B,b=this._position,f=r.x-b.x,h=r.y-b.y,U=this._entities,a=0,P=U.length;a<P;a++)K=U[a],l(K)&&(B=K.getPosition(),K.setPosition(B.x+f,B.y+h));this._position=r},h.prototype.setScale=function(r,K){var B=r/this._scale.x,b=K/this._scale.y;this._adjustChildScaleOrSize(B,b,"size"),this._scale={x:r,y:K}},h.prototype.getRect=function(){var r=this._position,K=this._width,B=this._height;return{x:r.x-K/2,y:r.y-B/2,width:K,height:B}},h.prototype.setSize=function(r,K){var r=Math.max(1,r),K=Math.max(1,K),B=r/this._width,b=K/this._height;this._adjustChildScaleOrSize(B,b,"size"),this._width=r,this._height=K},h.prototype._adjustChildScaleOrSize=function(r,K,B){for(var b,f=this._position,h=this._entities,U=new X.Math.Matrix2d,a=0,P=h.length;a<P;a++){var H,Y,S,_,e,o,x,T=h[a];this.isNode(T)&&(H=T.getPosition(),Y=T.getRotation(),S=T.getWidth(),_=T.getHeight(),o=(e=T.getScale()).x*S,x=e.y*_,U.identity().scale(o,x).rotate(Y).translate(H.x,H.y).translate(-f.x,-f.y).rotate(-this._64O),Y=d1(U.b*Math.sign(o),U.a*Math.sign(o)),U.scale(r,K),x=Math.cos(Y),H=Math.sin(Y),o=Math.abs(x)<.001?(b=U.b/H,-U.c/H):(b=U.a/x,U.d/x),"scale"===B?T.setScale(b/S,o/_):"size"===B&&(Y=b/e.x,H=o/e.y,T.setScale(IY(b)*Math.abs(e.x),IY(o)*Math.abs(e.y)),T.setSize(Math.max(.1,Math.abs(Y)),Math.max(.1,Math.abs(H)))),U.rotate(this._64O).translate(f.x,f.y),T.setPosition(U.tx,U.ty))}},h.prototype.getMatrix=function(){var r=this._position,K=M.Default.getInternal(),B=this._scale;return new K.Mat(this._64O,r.x,r.y,B.x,B.y)},h.prototype.toGlobal=function(r){return this.getMatrix().tf(r)},h.prototype.getCorners=function(){var r=this._width,K=this._height,B=-r*(b=this._anchor).x,b=-K*b.y,f=this.getMatrix();return[f.tf(B,b),f.tf(B,b+K),f.tf(B+r,b+K),f.tf(B+r,b)]},h.prototype.calcInfo=function(){for(var r,K,B=[],b=this._entities,f=this._64O,h=0,U=b.length;h<U;h++)K=b[h],this.isNode(K)&&K.getCorners&&B.push.apply(B,K.getCorners());if(B.length){for(var a=Math.cos(-f),P=Math.sin(-f),H=1/0,Y=-1/0,S=1/0,_=-1/0,h=0,U=B.length;h<U;h++)e=(r=B[h]).x,o=r.y,r.x=a*e-P*o,r.y=P*e+a*o,H=Math.min(H,r.x),Y=Math.max(Y,r.x),S=Math.min(S,r.y),_=Math.max(_,r.y);this._width=(Y-H)/this._scale.x,this._height=(_-S)/this._scale.y;var a=Math.cos(f),P=Math.sin(f),e=H+(Y-H)*(f=this._anchor).x,o=S+(_-S)*f.y;this._position={x:a*e-P*o,y:P*e+a*o}}},h.prototype.isNode=function(r){return!(!l(r)||oY(r)&&r.size())},h.prototype._42=function(r,K,B){var b,f,h,U,a,P=this._entities;for("batch"===this.rotateMode&&(a=this.getKeyOb()),b=0,f=P.length;b<f;b++)h=P[b],this.isNode(h)&&(U=h.getRect(),U={min:X.toScreenPosition(B,{x:U.x,y:U.y}),max:X.toScreenPosition(B,{x:U.x+U.width,y:U.y+U.height})},h===a&&(U.isKeyOb=!0),X.Icons.DrawIcon(r,K,X.Icons.GroupSubEntityRect,U))},((K=X.CurveActiving=function(r,K){for(var B in this._curve=r,this._interactor=r._interactor,this.silent=!0,K)this[B]=K[B];delete this.silent}).prototype={}).constructor=K,A.defineProperties(K.prototype,{point:{get:function(){return this._point},set:function(r){this._point=r,this.editingCtrl||this.silent||this._firePointChange()}},pairs:{get:function(){return this._pairs},set:function(r){this._pairs=r,this.editingCtrl&&!this.silent&&this._firePointChange()}}}),K.prototype._firePointChange=function(){var r,K,B=this.getCurrentEditingPoint(),b=this._interactor;B?(K=this._curve.target)&&(K=X.getDataMatrix(K).invert(),r=B.e,(B=K.apply(X.toWorldPosition(b.gv,B))).e=r,(K=this._lastFirePoint)&&Math.abs(B.x-K.x)<1e-5&&Math.abs(B.y-K.y)<1e-5&&(B.e==P1&&K.e==P1||Math.abs(B.e-K.e)<1e-5)||(this._lastFirePoint=B,b.fi({kind:"selectPoint",x:B.x,y:B.y,e:B.e}))):b.fi({kind:"selectPoint"})},K.prototype.dispose=function(){this._interactor.fi({kind:"selectPoint"})},K.prototype.getCurrentEditingPoint=function(){var r=this.editingCtrl;if(r){var K=this.pairs;if(K=(K=K&&K[r.pairId])&&K[r.type])return K}return this._point},(((r=X.CursorFactory=function(r){this._interactor=r,this._rotateCursorStyles={}}).prototype={}).constructor=r).prototype.getRotateCursor=function(r){r<0&&(r+=2*Math.PI);var K=(B=this._interactor).getStyle("rotateCursorSize"),B=B.getStyle("rotateCursorRound"),r=Math.round(r/Math.PI*180/B),b=this._rotateCursorStyles,f="htCustomRotateStyle_"+K+"_"+B+"_"+(r=360<=r*B?0:r);return b[f]||(this._produceRotateCursor(f,K,B,r),b[f]=!0),f},r.prototype._produceRotateCursor=function(r,K,B,b){this._interactor;var f=(f=this._canvas)||(this._canvas=_.createElement("canvas")),h=Y1.devicePixelRatio,U=(f.width=f.height=K*h,f.style.width=f.style.height=K+" px",f.getContext("2d"));X.setAntialias(U,!1),U.scale(h,h);var a=(a=Math.round(K/2))+" "+a+",auto !important;",b=Math.PI/180*b*B;U.clearRect(0,0,K,K),U.save(),U.scale(K/32,K/32),U.translate(16,15),U.rotate(b+Math.PI/2),U.beginPath(),U.moveTo(-8,0),U.lineTo(-8,4),U.lineTo(-4,4),U.moveTo(8,0),U.lineTo(8,4),U.lineTo(4,4),U.moveTo(-8,4),U.quadraticCurveTo(0,-6,8,4),U.restore(),U.lineCap="round",U.lineJoin="miter",U.strokeStyle="white",U.lineWidth=4,U.stroke(),U.strokeStyle="black",U.lineWidth=2,U.stroke(),b="cursor:url("+(B=JSON.stringify(f.toDataURL()))+")"+a,1!==h&&(b=b+("cursor:url(data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+K+'px" height="'+K+'px"><image xlink:href='+B+' width="'+K+'" height="'+K+'"/></svg>'))+")"+a+"cursor:-webkit-image-set(url("+B+")"+h+"x,url("+B+")1x)"+a),(U=_.createElement("style")).textContent="body."+r+" *, ."+r+"{"+b+"}",_.head.appendChild(U)},((B=X.Guide.Grid=function(r){this._interactor=r,this._alignmentGuideId=0,this._xAlignmentGuide=[],this._yAlignmentGuide=[]}).prototype={}).constructor=B,A.defineProperties(B.prototype,{gridBlockSize:{get:function(){return this._gridBlockSize||this._interactor.getStyle("gridBlockSize")},set:function(r){this._gridBlockSize=r,this._interactor._42()}},gridThickLinesEvery:{get:function(){return this._gridThickLinesEvery||this._interactor.getStyle("gridThickLinesEvery")},set:function(r){this._gridThickLinesEvery=r,this._interactor._42()}},gridEnabled:{get:function(){return this._interactor.gridEnabled&&this.isValidGrid()}}}),B.prototype._42=function(){var r=this._interactor;this.gridEnabled&&this.drawGrid(),r.alignmentGuideEnabled&&this.drawAlignmentGuide()},B.prototype.makeMatrix=function(){var r=this._interactor.getStyle("gridAngle"),K=this._interactor.getStyle("gridRotation"),B=new X.Math.Matrix2d,b=Math.sin(r),r=Math.cos(r);return B.set(1,0,r,b,0,0),B.rotate(K),B},B.prototype.isValidGrid=function(){var r=Math.PI,K=this._interactor;return!(K.gv._zoom<K.getStyle("gridZoomThreshold"))&&(K=K.getStyle("gridAngle"),!((K=Math.abs(K%r/r*180))<1-1e-8||179.00000001<K))},B.prototype.drawAlignmentGuide=function(){var r=this._interactor,K=r.gv,B=r._canvas,b=r._context,f=B.width,h=B.height,U=K.tx(),a=K.ty(),P=K._zoom;b.beginPath(),b.strokeStyle=r.getStyle("gridAlignmentGuideColor"),b.lineWidth=1,this._xAlignmentGuide.forEach(function(r){r=r.p*P+U,b.moveTo(r,0),b.lineTo(r,h)}),this._yAlignmentGuide.forEach(function(r){r=r.p*P+a,b.moveTo(0,r),b.lineTo(f,r)}),b.stroke()},B.prototype.drawGrid=function(){var r,K,B,b=this._interactor,f=this.gridBlockSize,h=this.gridThickLinesEvery,U=b.getStyle("gridThickColor"),a=b.getStyle("gridLightColor"),P=b.gv,H=b._canvas,Y=b._context,b=H.width,H=H.height,S=this.makeMatrix(),_=S.applyInverse(X.toWorldPosition(P,{x:0,y:0})),e=S.applyInverse(X.toWorldPosition(P,{x:b,y:0})),o=S.applyInverse(X.toWorldPosition(P,{x:0,y:H})),b=S.applyInverse(X.toWorldPosition(P,{x:b,y:H})),x=Math.min(_.x,e.x,o.x,b.x),T=Math.max(_.x,e.x,o.x,b.x),t=Math.min(_.y,e.y,o.y,b.y),p=Math.max(_.y,e.y,o.y,b.y),H=Math.ceil(x/f),q=Math.floor(T/f),_=Math.ceil(t/f),y=Math.floor(p/f);function k(r,K,B,b){r=X.toScreenPosition(P,S.apply({x:r,y:K})),K=X.toScreenPosition(P,S.apply({x:B,y:b})),Y.moveTo(r.x,r.y),Y.lineTo(K.x,K.y)}for(P.tx(),P.ty(),P._zoom,Y.save(),Y.lineWidth=1,Y.beginPath(),Y.strokeStyle=U,B=Math.ceil(H/h)*h;B<=q;B+=h)k(r=B*f,t,r,p);for(B=Math.ceil(_/h)*h;B<=y;B+=h)k(x,K=B*f,T,K);for(Y.stroke(),Y.beginPath(),Y.strokeStyle=a,B=H;B<=q;B++)B%h!=0&&k(r=B*f,t,r,p);for(B=_;B<=y;B++)B%h!=0&&k(x,K=B*f,T,K);Y.stroke(),Y.restore()},B.prototype.getAlignmentGuides=function(){return{x:this._xAlignmentGuide,y:this._yAlignmentGuide}},B.prototype.addAlignmentGuide=function(r,K,B){var b,r="x"===r?this._xAlignmentGuide:this._yAlignmentGuide,K={p:K,id:B=B||++this._alignmentGuideId};return r.length?(b=this._findClosestAlignmentGuide(K.p,r)).dis<0?r.splice(b.index+1,0,K):r.splice(b.index,0,K):r.push(K),this._interactor._42(),B},B.prototype.findClosest=function(r,K,B){var b=this._interactor,f=b.gv,h=1/0,U=1/0,a=(r=B?X.toWorldPosition(f,r):r).x,P=r.y;if(this.gridEnabled&&(Y=this.gridBlockSize,r=(H=this.makeMatrix()).applyInverse(r),h=(r=H.apply({x:Math.round(r.x/Y)*Y,y:Math.round(r.y/Y)*Y})).x-a,U=r.y-P,H=!0),b.alignmentGuideEnabled&&(Y=this._findClosestAlignmentGuide(a,this._xAlignmentGuide).dis,r=this._findClosestAlignmentGuide(P,this._yAlignmentGuide).dis,Math.abs(Y)<Math.abs(h)&&(h=Y,H=!0),Math.abs(r)<Math.abs(U)&&(U=r,H=!0)),H){var H=!1,a=f._zoom,P=b.getStyle("smartGuideThreshold")/a,Y={};if(Math.abs(h)<P&&"y"!==K&&(Y.x=B?h*a:h,H=!0),Math.abs(U)<P&&"x"!==K&&(Y.y=B?U*a:U,H=!0),H)return Y}},B.prototype._findClosestAlignmentGuide=function(r,K){if(!K.length)return{dis:1/0};for(var B,b=0,f=K.length-1;1<f-b;)K[B=Math.floor((b+f)/2)].p<r?b=B:f=B;var h=K[b].p-r,U=K[f].p-r;return Math.abs(h)<=Math.abs(U)?{line:K[b],dis:h,index:b}:{line:K[f],dis:U,index:f}},B.prototype.removeAllAlignmentGuide=function(r){"y"!==r&&(this._xAlignmentGuide=[]),"x"!==r&&(this._yAlignmentGuide=[]),this._interactor._42()},B.prototype.removeAlignmentGuide=function(r){for(var K,B,b,f=this._xAlignmentGuide,h=0;h<2;h++)for(B=(f=(K=0)===h?this._xAlignmentGuide:this._yAlignmentGuide).length;K<B;K++)if((b=f[K]).id===r)return f.splice(K,1),this._interactor._42(),{axis:0===h?"x":"y",position:b.p};return!1},B.prototype.adjustAlignmentGuide=function(r,K){var B=this.removeAlignmentGuide(r);return!!B&&(this.addAlignmentGuide(B.axis,K,r),!0)},(((h=X.Guide.Rect=function(r){this._interactor=r}).prototype={}).constructor=h).prototype.gatherRects=function(){var b,f,h,U,a=this._interactor.gv,P=[],H=[],r={x:P,y:H},Y={},K=a.getDataModel(),B=K.a("width"),S=K.a("height");B&&S&&(f=b=0,h=B,U=S,P.push({node:K,type:0,p:b},{node:K,type:1,p:b+h/2},{node:K,type:2,p:b+h}),H.push({node:K,type:0,p:f},{node:K,type:1,p:f+U/2},{node:K,type:2,p:f+U}),Y[K._id||0]={x:b,y:f,width:h,height:U}),K.each(function(K){var B,r;l(K)&&!a.isSelected(K)&&a.isVisible(K)&&a.isValidGuideLineSource(K)&&(B=!1,a.sm().getSelection().each(function(r){B||(K.isHostOn(r)||K.isDescendantOf(r))&&(B=!0)}),B||(r=K.getRect(),b=r.x,f=r.y,h=r.width,U=r.height,P.push({node:K,type:0,p:b},{node:K,type:1,p:b+h/2},{node:K,type:2,p:b+h}),H.push({node:K,type:0,p:f},{node:K,type:1,p:f+U/2},{node:K,type:2,p:f+U}),Y[K._id]=r))}),P.sort(function(r,K){return r.p-K.p}),H.sort(function(r,K){return r.p-K.p}),this._grid=r,this._87I=Y},h.prototype.gatherLines=function(r,K,B){var b,f,h,U,a,P,H,Y,S,_=[this.findClosest({x:r.x,y:r.y},K),this.findClosest({x:r.x+r.w/2,y:r.y+r.h/2},K),this.findClosest({x:r.x+r.w,y:r.y+r.h},K)],e={},o=this._87I;for(B=B||255,this._guideLine=[],b=0;b<2;b++)for(e={},H=0===b?(U="y",(P=r.x)+r.w):(U="x",(P=r.y)+r.h),f=0;f<3;f++)(a=_[f])&&isFinite(a[U])&&B&1<<3*b+f&&(e[S=(a=a[U+"Line"]).node._id||0]||(e[S]=!0,S=o[S],S="y"===U?(Y=S.x,S.x+S.width):(Y=S.y,S.y+S.height),h=a.p,this._guideLine.push({type:U,a:P,b:H,c:Y,d:S,p:h,center:1===a.type})))},h.prototype._binarySearchClosest=function(r,K){if(!K.length)return{dis:1/0};for(var B,b=0,f=K.length-1;1<f-b;)K[B=Math.floor((b+f)/2)].p<r?b=B:f=B;var h=K[b].p-r,U=K[f].p-r;return Math.abs(h)<=Math.abs(U)?{line:K[b],dis:h}:{line:K[f],dis:U}},h.prototype.findClosest=function(r,K,B){var b,f=(P=this._interactor).gv,h=this._grid,U=(B&&(r=X.toWorldPosition(f,r)),this._binarySearchClosest(r.x,h.x)),r=this._binarySearchClosest(r.y,h.y),h=U.dis,a=r.dis,f=f._zoom,P=P.getStyle("smartGuideThreshold")/f,H={};if(Math.abs(h)<P&&"y"!==K&&(H.x=B?h*f:h,H.xLine=U.line,b=!0),Math.abs(a)<P&&"x"!==K&&(H.y=B?a*f:a,H.yLine=r.line,b=!0),b)return H},h.prototype._42=function(){var r=this._guideLine;if(r&&!M.Default.isCtrlDown()){var K=this._interactor;if(K.getStyle("guideLineVisible"))for(var B,b,f,h,U,a,P,H,Y,S,_,e,o,x=K.gv,T=K._context,t=x.tx(),p=x.ty(),q=x._zoom,y=K.getStyle("guideLineTextSpacing"),k=0,w=r.length;k<w;k++)U=(B=r[k]).type,a=B.p,P=B.a,H=B.b,Y=B.c,S=B.d,_=Math.min(P,Y),e=Math.max(H,S),a="x"===U?(f=_*q+p,h=b=a*q+t,e*q+p):(b=_*q+t,h=e*q+t,f=a*q+p),X.Icons.DrawIcon(K,T,X.Icons.MoveLineGuide,{rect:[b,f,h,a],center:B.center}),P<=S&&Y<=H||(_=S<P?S:H,e=S<P?P:Y,"x"===U?(B.center2center||(h=b-=y),f=_*q+p,a=e*q+p,o=X.Icons.MoveLineGuideDistanceV):"y"===U&&(B.center2center||(a=f-=y),b=_*q+t,h=e*q+t,o=X.Icons.MoveLineGuideDistanceH),X.Icons.DrawIcon(K,T,o,{x0:b,y0:f,x1:h,y1:a,dis:e-_}))}},h.prototype.clear=function(){this._guideLine=null};((K=X.Guide.Hover=function(r){this._interactor=r}).prototype={}).constructor=K,A.defineProperties(K.prototype,{}),K.prototype._42=function(){var r,K,B,b=this._interactor;b.getStyle("hoverGuideVisible")&&!b.gvEditing&&(r=b.hoverData,B=b.gv,!l(r)||B.isSelected(r)?b.hoverData=null:(r=SP(B,r),K=X.toScreenPosition(B,{x:r.x,y:r.y}),B=X.toScreenPosition(B,{x:r.x+r.width,y:r.y+r.height}),X.Icons.DrawIcon(b,b._context,X.Icons.HoverDataRect,{min:K,max:B,color:b.getStyle("hoverGuideColor")||b.getStyle("baseColor"),borderWidth:b.getStyle("hoverGuideBorderWidth")||1,borderPattern:b.getStyle("hoverGuideBorderPattern")||[1,4]})))},X.DefaultStyleMap={baseColor:"rgb(51,153,255)",pointSize:[24,9],checkSize:7,rotateCheckSize:10,moveSensitivity:10,moveDummyThreshold:32,moveDummyPosition:[0,0,-16,-16],moveDummyLineExtraShift:[-32,0],moveDummySensitivity:16,keepAspectRatio:!1,rotateRound:Math.PI/2,shiftRotateRound:Math.PI/12,rotateSensitivity:Math.PI/60,rotateAsClock:!1,rotateTipVisible:!0,shiftLineRotateRound:Math.PI/4,anchorMovable:!0,anchorVisible:!0,anchorHideThreshold:25,anchorOutsideVisibleThreshold:.25,anchorRound:.25,anchorSensitivity:.02,smartGuideThreshold:8,curveIntersectSize:5,curvePointIntersectSize:8,edgeHostDetectPerFrame:!0,edgeHostEdgeMaxDistance:12,edgeHostEdgeHighlighColor:"#5d5d5d",edgeHostPointHighlighColor:"red",edgeHostHighlighPeriod:1500,edgeElevationEditable:!1,attachThreshold:25,guideLineVisible:!0,guideLineTextSpacing:0,hoverGuideVisible:!1,hoverGuideColor:null,gridBlockSize:40,gridThickLinesEvery:10,gridThickColor:"#5d5d5d",gridLightColor:"#d0d0d0",gridZoomThreshold:.25,gridAlignmentGuideColor:"#ff0000",gridAngle:Math.PI/2,gridRotation:0,groupRotateModeDefault:"block",groupRotateModeKey:["ctrlKey","metaKey"],rotateCursorSize:32,rotateCursorRound:45,tipTextColor:"#ffffff",tipBackground:"#333333",curveHighlightColor:"#30599e",rectPointBackground:"white",rectPointBorderColor:"#666666",rectPointShadowColor:"rgba(0,0,0,0.35)",shapeCtrlPointBackground:"white",shapeCtrlPointBorderColor:null,shapeCtrlPointHighlightBorder:null,shapeHighlighPointBackground:"#30599e",curveElevationVisible:!0,curveElevationIntersectSize:8,curveElevationGuideShift:[20,0],curveTipVisible:!0,connectGuideVisible:!0,connectGuideShift:[1,.25,8,0],connectGuideIntersectSize:8,connectGuideGarbageIntersectsize:25,connectGuideGarbageShift:[1,1,-48,-48]};var f=X.Icons={},Dz=null,iz=X.DefaultStyleMap.baseColor,Zz="rgb(255,204,153)",gz=(M.Default.setImage("Icons.RectPoint",{width:6,height:6,comps:[{type:"rect",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return iz}},rect:[0,0,6,6]}]}),f.GroupSubEntityRect={comps:[{type:"shape",points:{func:function(){if(!(K=f.GroupSubEntityRect.data))return[];var r=K.min,K=K.max;return[r.x,r.y,r.x,K.y,K.x,K.y,K.x,r.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return f.GroupSubEntityRect.data.isKeyOb,iz}}}]},f.HoverDataRect={comps:[{type:"shape",points:{func:function(){if(!(K=f.HoverDataRect.data))return[];var r=K.min,K=K.max;return r.x-=4,r.y-=4,K.x+=4,K.y+=4,[r.x,r.y,r.x,K.y,K.x,K.y,K.x,r.y]}},segments:[1,2,2,2,5],background:null,borderWidth:{func:function(){return f.HoverDataRect.data.borderWidth}},borderColor:{func:function(){return f.HoverDataRect.data.color}},borderCap:"butt",borderPattern:{func:function(){return f.HoverDataRect.data.borderPattern}}}]},f.Line={comps:[{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[f.Line.data.P1.x,f.Line.data.P1.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[f.Line.data.P2.x,f.Line.data.P2.y],6,6]}}}]},f.NodeHoverGuide={comps:[{type:"shape",points:{func:function(){return f.NodeHoverGuide.data}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#3399FF"}]},f.Rect={comps:[{type:"shape",points:{func:function(){if(!(b=f.Rect.data))return[];var r=b.LT,K=b.LB,B=b.RB,b=b.RT;return[r.x,r.y,K.x,K.y,B.x,B.y,b.x,b.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return iz}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},rect:{func:function(){return[[f.Rect.data.LT.x,f.Rect.data.LT.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},rect:{func:function(){return[[f.Rect.data.LB.x,f.Rect.data.LB.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},rect:{func:function(){return[[f.Rect.data.RB.x,f.Rect.data.RB.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},rect:{func:function(){return[[f.Rect.data.RT.x,f.Rect.data.RT.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},visible:{func:function(){return!!f.Rect.data.L}},rect:{func:function(){return[[f.Rect.data.L.x,f.Rect.data.L.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},visible:{func:function(){return!!f.Rect.data.R}},rect:{func:function(){return[[f.Rect.data.R.x,f.Rect.data.R.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},visible:{func:function(){return!!f.Rect.data.T}},rect:{func:function(){return[[f.Rect.data.T.x,f.Rect.data.T.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},visible:{func:function(){return!!f.Rect.data.B}},rect:{func:function(){return[[f.Rect.data.B.x,f.Rect.data.B.y],6,6]}}}]},M.Default.setImage("Icons.Anchor",{width:12,height:12,comps:[{type:"shape",borderWidth:1,borderColor:{func:function(){return iz}},borderCap:"round",shadowColor:"#1ABC9C",points:[.50928,6,11.49072,6,6,6,6,.50928,6,11.49072]},{type:"circle",borderWidth:1,borderColor:{func:function(){return iz}},shadowColor:"#1ABC9C",rect:[2.84391,2.84391,6.53697,6.53697]}]}),f.Anchor={comps:[{type:"image",name:"Icons.Anchor",rect:{func:function(){return[[f.Anchor.data.POS.x,f.Anchor.data.POS.y],16,16]}}}]},f.TipShiftX=12,f.TipShiftY=12,[8,28]);f.TipHelper={comps:[{type:"roundRect",rect:{func:function(){return[f.TipHelper.data.helperPos.x,f.TipHelper.data.helperPos.y,gz[0]*f.TipHelper.data.size,gz[1]]}},background:{func:function(){return Dz.getStyle("tipBackground")}},opacity:.6},{type:"text",text:{func:function(){return f.TipHelper.data.text}},rect:{func:function(){return[f.TipHelper.data.helperPos.x,f.TipHelper.data.helperPos.y,gz[0]*f.TipHelper.data.size,gz[1]]}},color:{func:function(){return Dz.getStyle("tipTextColor")}},font:"bold 12px Arial",align:"center"}]},f.ShapePoint={comps:[{type:"circle",visible:{func:function(){return!!f.ShapePoint.data.dynamicVisible}},rect:{func:function(){var r=f.ShapePoint.data.point,K=f.ShapePoint.data.size||7;return[r,K+10,K+10]}},background:{func:function(){var r=Date.now(),K=f.ShapePoint.data.dynamicPeriod||1500;return"rgba(27,124,22,"+.5*Math.sin(r%K/K*Math.PI)+")"}},borderWidth:0},{type:"circle",rect:{func:function(){var r=f.ShapePoint.data.point,K=f.ShapePoint.data.size||7;return[r,K,K]}},background:{func:function(){return f.ShapePoint.data.isEnd?"rgba(27,124,222,0.7)":"#ffffff"}},borderWidth:1,borderColor:{func:function(){return f.ShapePoint.data.color||iz}}},{type:"rect",visible:{func:function(){return!!f.ShapePoint.data.dynamicVisible}},background:"red",borderWidth:0,rotation:Math.PI/4,borderColor:{func:function(){return iz}},rect:{func:function(){return[f.ShapePoint.data.point,5,5]}}}]},f.ShapeBgCurve={comps:[{type:"shape",visible:{func:function(){return!!f.ShapeBgCurve.data.dynamicVisible}},points:{func:function(){return f.ShapeBgCurve.data.P}},segments:{func:function(){return f.ShapeBgCurve.data.S}},background:null,borderWidth:6,borderColor:{func:function(){var r=Date.now(),K=f.ShapeBgCurve.data.dynamicPeriod||1500;return"rgba(27,124,22,"+.3*Math.sin(r%K/K*Math.PI)+")"}}},{type:"shape",points:{func:function(){return f.ShapeBgCurve.data.P}},segments:{func:function(){return f.ShapeBgCurve.data.S}},background:null,borderWidth:1,borderColor:{func:function(){return f.ShapeBgCurve.data.color||iz}}}]},f.ShapeHighlighPoint={comps:[{type:"circle",rect:{func:function(){var r=f.ShapeHighlighPoint.data;return[[r.x,r.y],8,8]}},background:{func:function(){return Dz.getStyle("shapeHighlighPointBackground")}},borderWidth:0}]},f.ShapeHighlighRealPoint={comps:[{type:"circle",rect:{func:function(){var r=f.ShapeHighlighRealPoint.data;return[[r.x,r.y],10,10]}},background:"#ffffff",borderWidth:2,borderColor:{func:function(){return iz}}}]},f.ShapeHighlighCtrlPoint={comps:[{type:"shape",points:{func:function(){var r=f.ShapeHighlighCtrlPoint.data,K=r.x;return[K-4,(r=r.y)-4,K-4,r+4,K+4,r+4,K+4,r-4]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Dz.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return Dz.getStyle("shapeCtrlPointBorderColor")||iz}}}]},f.ShapeHighlightCurve={comps:[{type:"shape",points:{func:function(){return f.ShapeHighlightCurve.data}},segments:[1,4],background:null,borderWidth:3,borderColor:{func:function(){return Dz.getStyle("curveHighlightColor")}}}]},f.ShapeGuideLine={comps:[{type:"shape",points:{func:function(){return f.ShapeGuideLine.data}},background:null,borderWidth:1,borderColor:"rgb(255,204,153)"}]},f.MoveLineGuide={comps:[{type:"shape",points:{func:function(){return f.MoveLineGuide.data.rect}},background:null,borderWidth:1,borderColor:{func:function(){return f.MoveLineGuide.data.center?"rgb(183,232,135)":Zz}}}]},f.MoveLineGuideDistanceH={comps:[{type:"shape",points:{func:function(){var r=f.MoveLineGuideDistanceH.data,K=r.x0;return[K,(r=r.y0)-5,K,r+5]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:Zz},{type:"shape",points:{func:function(){var r=f.MoveLineGuideDistanceH.data,K=r.x1;return[K,(r=r.y1)-5,K,r+5]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:Zz},{type:"text",text:{func:function(){return Math.round(f.MoveLineGuideDistanceH.data.dis)}},rect:{func:function(){var r=f.MoveLineGuideDistanceH.data;return[[(r.x0+r.x1)/2,r.y0-10],20,20]}},color:Zz,font:"12px Arial",align:"center"}]},f.MoveLineGuideDistanceV={comps:[{type:"shape",points:{func:function(){var r=f.MoveLineGuideDistanceV.data,K=r.x0;return[K-5,r=r.y0,K+5,r]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:Zz},{type:"shape",points:{func:function(){var r=f.MoveLineGuideDistanceV.data,K=r.x1;return[K-5,r=r.y1,K+5,r]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:Zz},{type:"text",text:{func:function(){return Math.round(f.MoveLineGuideDistanceV.data.dis)}},rect:{func:function(){var r=f.MoveLineGuideDistanceV.data;return[[r.x0-10,(r.y0+r.y1)/2],20,20]}},color:Zz,font:"12px Arial",align:"center"}]},M.Default.setImage("Icons.EdgeElevationGuideImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[.5,.5,15,15]},{type:"shape",borderWidth:2,borderColor:"rgb(44,44,44)",borderCap:"round",points:[4,8,8,4,12,8,8,4,8,13],segments:[1,2,2,1,2]}]}),f.EdgeElevationGuide={comps:[{type:"image",name:"Icons.EdgeElevationGuideImage",rect:{func:function(){var r=(K=f.EdgeElevationGuide.data).x,K=K.y,B=Dz.getStyle("curveElevationIntersectSize"),b=Dz.getStyle("curveElevationGuideShift");return[(r+=b[0])-B,(K+=b[1])-B,2*B,2*B]}}}]},M.Default.setImage("Icons.ConnectGuideBgImage",{width:12,height:12,comps:[{type:"shape",background:"#3399ff",fillRule:"evenodd",shadowColor:"#1ABC9C",rotation:3.14159,points:[6.00001,11.99999,6.00001,11.99999,2.6863,11.99999,1e-5,9.30695,1e-5,5.99999,1e-5,5.99999,1e-5,2.68628,2.69305,-1e-5,6.00001,-1e-5,12.00001,-1e-5,11.99998,12.00001,6.00001,11.99999],segments:[1,2,4,2,4,2,2,2]}]}),M.Default.setImage("Icons.ConnectGuideHeaderImage",{width:12,height:12,comps:[{type:"oval",background:"#3399FF",borderColor:"#3399FF",shadowColor:"#1ABC9C",rect:[0,0,12,12]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.76,2.56,8.2,5.98,4.76,9.44]}]}),f.ConnectGuide={comps:[{type:"image",name:"Icons.ConnectGuideBgImage",rotation:{func:function(){return f.ConnectGuide.data.rotation}},rect:{func:function(){var r=f.ConnectGuide.data.connect,K=(r.x,r.y,Dz.getStyle("connectGuideIntersectSize"));return[[r.x,r.y],2*K,2*K]}}},{type:"image",name:"Icons.ConnectGuideHeaderImage",rect:{func:function(){var r=f.ConnectGuide.data.cursorPos||f.ConnectGuide.data.connect,K=Dz.getStyle("connectGuideIntersectSize");return[[r.x,r.y],2*K-2,2*K-2]}}},{type:"shape",background:null,borderColor:"#3399ff",borderWidth:2,segments:[1,4],points:{func:function(){var r=f.ConnectGuide.data.connect,K=f.ConnectGuide.data.cursorPos||r;return[r.x,r.y,r.x+.5*(K.x-r.x),r.y,K.x+.5*(r.x-K.x),K.y,K.x,K.y]}}}]},M.Default.setImage("Icons.ConnectGuideGarbageImage",{width:48,height:48,comps:[{type:"oval",background:"rgba(0,0,0,0.1)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,48,48]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[19.84721,19.69091,19.84721,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[24.10371,19.69091,24.10371,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[28.15279,19.69091,28.15279,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[11.23055,15.22377,36.76945,15.189,19.12302,15.17121,20.94722,11.5228,26.41985,11.5228,28.24406,15.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[15.48702,15.22377,17.02595,21.25344]}]}),M.Default.setImage("Icons.ConnectGuideDeletingImage",{width:56,height:56,comps:[{type:"oval",background:"rgba(232,0,0,0.75)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,56,56]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[22.67939,27.69091,22.67939,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[26.93588,27.69091,26.93588,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[30.98497,27.69091,30.98497,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",anchorX:0,anchorY:1,rotation:5.65062,points:[14.06272,23.22377,39.60163,23.189,21.9552,23.17121,23.7794,19.5228,29.25203,19.5228,31.07623,23.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[18.3192,23.22377,17.02595,21.25344]}]}),f.ConnectGuideGarbage={comps:[{type:"image",name:{func:function(){return f.ConnectGuideGarbage.data.hover?"Icons.ConnectGuideDeletingImage":"Icons.ConnectGuideGarbageImage"}},rect:{func:function(){var r=f.ConnectGuideGarbage.data,K=Dz.getStyle("connectGuideGarbageIntersectsize");return r.hover&&(K+=5),[[r.x,r.y],2*K,2*K]}}}]},f.ShapeActivingCtrl={comps:[{type:"shape",visible:{func:function(){return!!f.ShapeActivingCtrl.data.c1}},points:{func:function(){var r=f.ShapeActivingCtrl.data;return[r.point.x,r.point.y,r.c1.x,r.c1.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return iz}}},{type:"shape",visible:{func:function(){return!!f.ShapeActivingCtrl.data.c2}},points:{func:function(){var r=f.ShapeActivingCtrl.data;return[r.point.x,r.point.y,r.c2.x,r.c2.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return iz}}},{type:"shape",visible:{func:function(){return!!f.ShapeActivingCtrl.data.c1}},points:{func:function(){var r=(K=f.ShapeActivingCtrl.data.c1).x,K=K.y,B=3;return"c1"===f.ShapeActivingCtrl.data.hl&&(B+=.5),[r-B,K-B,r-B,K+B,r+B,K+B,r+B,K-B]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Dz.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c1"===f.ShapeActivingCtrl.data.hl?Dz.getStyle("shapeCtrlPointHighlightBorder")||iz:Dz.getStyle("shapeCtrlPointBorderColor")||iz}}},{type:"shape",visible:{func:function(){return!!f.ShapeActivingCtrl.data.c2}},points:{func:function(){var r=(K=f.ShapeActivingCtrl.data.c2).x,K=K.y,B=3;return"c2"===f.ShapeActivingCtrl.data.hl&&(B+=.5),[r-B,K-B,r-B,K+B,r+B,K+B,r+B,K-B]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Dz.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c2"===f.ShapeActivingCtrl.data.hl?Dz.getStyle("shapeCtrlPointHighlightBorder")||iz:Dz.getStyle("shapeCtrlPointBorderColor")||iz}}}]},f.RoundPoint={comps:[{type:"circle",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return iz}},rect:{func:function(){return[[f.RoundPoint.data.x,f.RoundPoint.data.y],6,6]}}}]},f.AttachPoint={comps:[{type:"rect",background:{func:function(){return f.AttachPoint.data.isAttach?"rgb(51,153,255)":"rgb(247,247,247)"}},borderWidth:1,rotation:Math.PI/4,borderColor:{func:function(){return iz}},rect:{func:function(){var r=f.AttachPoint.data.isAttach?10:6;return[[f.AttachPoint.data.x,f.AttachPoint.data.y],r,r]}}}]},f.SimpleRect={comps:[{type:"rect",background:null,borderWidth:{func:function(){return f.SimpleRect.data.borderWidth||1}},borderColor:{func:function(){return f.SimpleRect.data.color||iz}},rect:{func:function(){var r=f.SimpleRect.data;return[r.x,r.y,r.width,r.height]}}}]},M.Default.setImage("Icons.MoveDummyImage",{width:32,height:32,boundExtend:12,attachStyle:"close",comps:[{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",shadow:!0,shadowColor:"rgba(0,0,0,0.25)",shadowOffsetX:0,rect:[0,0,32,32]},{type:"shape",background:"rgb(51,153,255)",pixelPerfect:!0,points:[8.65079,11.90713,9.05502,11.46921,9.70629,11.46921,10.11052,11.90713,10.51476,12.28891,10.51476,12.92895,10.11052,13.34441,8.49359,14.97258,12.2889,14.97258,12.85034,14.97258,13.29949,15.42172,13.29949,15.99439,13.29949,16.57828,12.85034,17.0162,12.2889,17.0162,8.49359,17.0162,10.11052,18.6556,10.51476,19.0486,10.51476,19.7111,10.11052,20.09288,9.70629,20.50834,9.05502,20.50834,8.65079,20.09288,5.32709,16.76917,5.28217,16.71303,4.87794,16.32002,4.87794,15.67998,5.28217,15.26452,8.65079,11.90713,8.65079,11.90713,8.65079,11.90713,13.3444,10.09931,13.3444,10.09931,12.94017,10.50354,12.2889,10.50354,11.88467,10.09931,11.48043,9.69507,11.48043,9.0438,11.88467,8.63957,15.27574,5.25973,15.66874,4.86672,16.32001,4.86672,16.73547,5.25973,16.76917,5.31586,20.10409,8.63957,20.50832,9.0438,20.50832,9.68385,20.10409,10.09931,19.69986,10.49231,19.07105,10.50354,18.64436,10.09931,17.02742,8.45991,17.02742,12.26646,17.02742,12.83912,16.55581,13.31072,15.99438,13.31072,15.43295,13.31072,14.98379,12.83912,14.98379,12.26646,14.96134,8.45991,13.3444,10.09931,13.3444,10.09931,13.3444,10.09931,21.90069,13.33318,21.90069,13.33318,21.49646,12.91771,21.49646,12.27768,21.90069,11.89591,22.31615,11.45798,22.94497,11.45798,23.36043,11.89591,26.72904,15.2533,27.12205,15.66876,27.12205,16.3088,26.72904,16.7018,26.6729,16.75794,23.36043,20.08165,22.94497,20.49711,22.31615,20.49711,21.90069,20.08165,21.49646,19.69987,21.49646,19.03737,21.90069,18.64437,23.51763,17.00498,19.72231,17.00498,19.14965,17.00498,18.71173,16.56705,18.71173,15.98316,18.71173,15.41049,19.14965,14.96135,19.72231,14.96135,23.51763,14.96135,21.90069,13.33318,21.90069,13.33318,21.90069,13.33318,11.88467,23.32675,11.88467,23.32675,11.48043,22.94498,11.48043,22.27125,11.88467,21.88948,12.2889,21.48523,12.94017,21.48523,13.3444,21.88948,14.96134,23.52887,14.98379,19.7111,14.98379,19.14966,15.43295,18.67805,15.99438,18.67805,16.55581,18.67805,17.02742,19.14966,17.02742,19.7111,17.02742,23.52887,18.64436,21.88948,19.07105,21.48523,19.69986,21.48523,20.10409,21.88948,20.50832,22.27125,20.50832,22.94498,20.10409,23.32675,16.76917,26.65045,16.73547,26.72905,16.32001,27.13329,15.66874,27.13329,15.27574,26.72905,11.88467,23.32675,11.88467,23.32675,11.88467,23.32675],segments:[1,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2]}]}),f.MoveDummy={comps:[{type:"image",name:"Icons.MoveDummyImage",rect:{func:function(){var r=f.MoveDummy.data;return[[r.pos.x,r.pos.y],2*r.size,2*r.size]}}}]},X.Icons.DrawIcon=function(r,K,B,b){B.width=B.height=1e4,B.data=b,Dz=r,M.Default.drawImage(K,B,0,0,1e4,1e4),Dz=P1},X.Icons.MapPoints=function(r,K){for(var B=0,b=r.length;B<b;B++)r[B]/=K},X.roundTo=function(r,K,B){var b=Math.abs(r%K);return b<B||K-b<B?K*Math.round(r/K):r},X.toFixed=function(r){return Math.round(100*r)/100},X.getDataMatrix=function(r){var K,B;return r instanceof M.Shape?(K=new M.Math.Matrix2d,B=r.getPosition(),K.translate(-B.x,-B.y).scale(r.getScale().x,r.getScale().y).rotate(r.getRotation()).translate(B.x,B.y),K):r.getMatrix?r.getMatrix():new M.Math.Matrix2d},(((r=X.Math.Curve=function(){this._curves=[]}).prototype={}).constructor=r).prototype.createFromHtShape=function(K,r,B){r instanceof M.List&&(r=r.toArray());for(var b,f,h,U,a=null,P=null,H=0,Y=X.Math.Vector2,S=X.Math.CubicBezier,_=function(r){return new Y(K[r],K[r+1],B?B[r/2]:P1)},e=0,o=r.length;e<o;e++){switch(f=null,r[e]){case 1:a=P=_(H),H+=2;break;case 2:b=_(H),H+=2,f=new S(P,P.clone(),b.clone(),b),P=b;break;case 3:h=_(H),b=_(H+2),H+=4,f=new S(P,h.clone().sub(P).multiplyScalar(2/3).add(P),h.clone().sub(b).multiplyScalar(2/3).add(b),b),P=b;break;case 4:h=_(H),U=_(H+2),b=_(H+4),H+=6,f=new S(P,h,U,b),P=b;break;case 5:if(!a)break;f=new S(P,P.clone(),a.clone(),a),a=P=null}f&&(f._index=this._curves.length,this._curves.push(f))}},r.prototype.checkPoint=function(r,K){for(var B,b,f,h=this._curves,U=0,a=h.length;U<a;U++)if((f=(b=h[U]).intersectRect(r,K,K)).length)return B=0,f.forEach(function(r){B+=r.t}),B/=f.length,(r=b.getPointAt(B)).t=B,{bezier:b,intersection:r}},r.prototype.insertKnot=function(r,K){K=r.insertKnot(K),this._curves.splice(r._index,1,K[0],K[1])},r.prototype._isCloseEnough=function(r,K){return Math.abs(r.x-K.x)<1e-6&&Math.abs(r.y-K.y)<1e-6},r.prototype._isSamePoint=function(r,K){return r===K},r.prototype.moveRealPoint=function(b,f){var h=this,r=h._curves,U=f.clone().sub(b);r.forEach(function(r){var K=r._p1,B=(r._p2,r._p3,r._p4);h._isSamePoint(K,b)&&(r._p2.add(U),r._p1=f),h._isSamePoint(B,b)&&(r._p3.add(U),r._p4=f)})},r.prototype.moveCtrlDueToRealPointMovement=function(b,K){function f(r){r.add(K),r.e&&K.e&&(r.e+=K.e)}var h=this;h._curves.forEach(function(r){var K=r._p1,B=(r._p2,r._p3,r._p4);h._isSamePoint(K,b)&&f(r._p2),h._isSamePoint(B,b)&&f(r._p3)})},r.prototype.moveCtrlPoint=function(r,B,b){var f,K,h=r[b];h&&(h.e!==P1&&(B.e=h.e),K=(f=this)._curves,B.clone().sub(h),K.forEach(function(r){var K;"c2"===b?K="_p2":"c1"===b&&(K="_p3"),f._isSamePoint(r[K],h)&&(r[K]=B)}),r[b]=B)},r.prototype.deleteRealPoint=function(r,K){for(var B,b,f,h,U=this._curves,a={},P=[],H=X.Math.CubicBezier,Y=0,S=U.length;Y<S;Y++)b=(B=U[Y])._p1,f=B._p2,B._p3,h=B._p4,!a[Y]&&this._isSamePoint(b,r)||(this._isSamePoint(h,r)?Y+1<S&&this._isSamePoint(U[Y+1]._p1,r)&&(K||P.push(new H(b,f,U[Y+1]._p3,U[Y+1]._p4))):P.push(B));this._curves=P},r.prototype.findPairs=function(r,K){for(var B,b,f,h,U=this._curves,a={},P=[],H=0,Y=U.length;H<Y;H++)B=(f=U[H])._p1,h=f._p2,b=f._p3,f=f._p4,!a[H]&&this._isSamePoint(B,r)&&(K?P.push({point:B,r2:f}):P.push({point:B,c2:h})),this._isSamePoint(f,r)&&(h=K?{point:f,r1:B}:{point:f,c1:b},H+1<Y&&this._isSamePoint(U[H+1]._p1,r)&&(K?h.r2=U[H+1]._p4:h.c2=U[H+1]._p2,a[H+1]=!0),P.push(h));return P},r.prototype.toHtShape=function(){var f=this,r=f._curves,h=[],U=[],a={x:1/0,y:1/0};return r.forEach(function(r){var K=r._p1,B=r._p2,b=r._p3,r=r._p4;if(f._isCloseEnough(K,a)||(h.push(1),U.push(K.clone())),a=r,f._isCloseEnough(K,B)&&f._isCloseEnough(b,r))return h.push(2),void U.push(r.clone());h.push(4),U.push(B.clone(),b.clone(),r.clone())}),{segments:h,points:U}};(B=X.Math.CubicBezier=function(r,K,B,b){this._id=X.Math.CubicBezier._globalId++,this._p1=r,this._p2=K,this._p3=B,this._p4=b})._globalId=1,((B.prototype={}).constructor=B).prototype.toString=function(){return this._id},B.prototype.intersectRect=function(r,K,B){var K=K/2,B=B/2,b=r.x,r=r.y,f=new(h=X.Math.Vector2)(-K+b,-B+r),K=new h(K+b,B+r),b=new h(K.x,f.y),B=new h(f.x,K.y),r=this.intersectLine(f,b),h=this.intersectLine(b,K),b=this.intersectLine(K,B),K=this.intersectLine(B,f);return r.concat(h).concat(b).concat(K)},B.prototype.intersectLine=function(r,K){var B=r.clone().min(K),b=r.clone().max(K),f=this._p1,h=this._p2,U=this._p3,a=this._p4,P=f.clone().multiplyScalar(-1),H=h.clone().multiplyScalar(3),Y=U.clone().multiplyScalar(-3),a=P.add(H).add(Y).add(a);P=f.clone().multiplyScalar(3),H=h.clone().multiplyScalar(-6),Y=U.clone().multiplyScalar(3),U=P.add(H).add(Y),P=f.clone().multiplyScalar(-3),H=h.clone().multiplyScalar(3);for(var Y=P.add(H),h=f.clone(),P=new X.Math.Vector2(r.y-K.y,K.x-r.x),H=r.x*K.y-K.x*r.y,S=this.getRoots(P.dot(a),P.dot(U),P.dot(Y),P.dot(h)+H),_=new Array,e=0,o=S.length;e<o;e++){var x,T=S[e];T<0||1<T||((x=this.getPointAt(T)).t=T,r.x==K.x?B.y<=x.y&&x.y<=b.y&&_.push(x):r.y==K.y?B.x<=x.x&&x.x<=b.x&&_.push(x):x.x>=B.x&&x.y>=B.y&&x.x<=b.x&&x.y<=b.y&&_.push(x))}return _},B.prototype.solveTForPoint=function(r){for(var K=this._p1.x-r.x,B=this._p2.x-r.x,b=this._p3.x-r.x,f=this._p4.x-r.x,h=this.getRoots(f-3*b+3*B-K,3*b-6*B+3*K,3*B-3*K,K),U=P1,a=1/0,P=0,H=h.length;P<H;P++){var Y,S=h[P];S<0||1<S||((Y=this.getPointAt(S)).t=S,(S=Math.abs(Y.y-r.y))<a&&(a=S,U=Y))}return U},B.prototype.getPointAt=function(r){var K=this._p1,B=this._p2,b=this._p3,f=this._p4,K=K.clone().lerp(B,r),B=B.clone().lerp(b,r),b=b.clone().lerp(f,r),f=K.lerp(B,r),K=B.lerp(b,r);return f.lerp(K,r)},B.prototype.getPointByPercentage=function(r){var K=this.length*r,B=this._cacheLength,b=B.length;if(0==K)return B[0].point;if(1<=r)return B[b-1].point;for(var f=0;f<b;f++){var h,U=B[f];if(!(U.len<K))return h=B[f-1],U.point.clone().sub(h.point).setLength(K-h.len).add(h.point)}},B.prototype.getTByPercentage=function(r){var K=this.length*r,B=this._cacheLength,b=B.length;if(0==K||r<=0)return B[0].t;if(1<=r)return B[b-1].t;for(var f=0;f<b;f++){var h,U=B[f];if(!(U.len<K))return(K-(h=B[f-1]).len)/(U.len-h.len)*(U.t-h.t)+h.t}},B.prototype.getRoots=function(r,K,B,b){var f,h,U,a,P=new Array,H=(Math.abs(r)<1e-6&&(0<(H=(f=B/(U=K))*f-b/U*4)?(h=Math.sqrt(H),P.push(.5*(-f+h)),P.push(.5*(-f-h))):0==H&&P.push(.5*-f)),(K/=r)/3),r=(f=(2*K*K*K-9*(B/=r)*K+27*(b/=r))/27)*f/4+(U=(3*B-K*K)/3)*U*U/27,b=f/2;return 0<(r=Math.abs(r)<=1e-6?0:r)?(B=0<=(a=-b+(h=Math.sqrt(r)))?Math.pow(a,1/3):-Math.pow(-a,1/3),0<=(a=-b-h)?B+=Math.pow(a,1/3):B-=Math.pow(-a,1/3),P.push(B-H)):r<0?(K=Math.sqrt(-U/3),f=Math.atan2(Math.sqrt(-r),-b)/3,h=Math.cos(f),B=Math.sin(f),U=Math.sqrt(3),P.push(2*K*h-H),P.push(-K*(h+U*B)-H),P.push(-K*(h-U*B)-H)):(a=0<=b?-Math.pow(b,1/3):Math.pow(-b,1/3),P.push(2*a-H),P.push(-a-H)),P},B.prototype._70I=function(){return this._p1.distanceToSquared(this._p2)<1e-10&&this._p3.distanceToSquared(this._p4)<1e-10},B.prototype.insertKnot=function(r){var K=this._p1,B=this._p2,b=this._p3,f=this._p4,h=K.clone().lerp(B,r),B=B.clone().lerp(b,r),b=b.clone().lerp(f,r),U=h.clone().lerp(B,r),B=B.clone().lerp(b,r),a=U.clone().lerp(B,r);return this._70I()?(K.clone().lerp(f,r),[new X.Math.CubicBezier(K,K.clone(),a.clone(),a),new X.Math.CubicBezier(a,a.clone(),f.clone(),f)]):[new X.Math.CubicBezier(K,h,U,a),new X.Math.CubicBezier(a,B,b,f)]},A.defineProperties(B.prototype,{length:{get:function(){if(!(r=this._cacheLength))for(var r=this._cacheLength=[],K=this._p1,B=0,b=0;B<=1;){var f=this.getPointAt(B+=.001);b+=f.clone().sub(K).length(),r.push({len:b,t:B,point:(K=f).clone()})}return r[r.length-1].len}},p1:{get:function(){return this._p1},set:function(r){this._p1=r,this._cacheLength=P1}},p2:{get:function(){return this._p2},set:function(r){this._p2=r,this._cacheLength=P1}},p3:{get:function(){return this._p3},set:function(r){this._p3=r,this._cacheLength=P1}},p4:{get:function(){return this._p4},set:function(r){this._p4=r,this._cacheLength=P1}}});var Wz,$z,Xz,cz,tz=M.Default.getInternal().ui().EdgeUI,Oz={_47O:function(r){var K=Oz.getBackups()._47O;X.inEdit(this.gv)||K.call(this,r)}},Tz=(X.Inject.registAsModule(Oz,tz),M.Default.getInternal().ui().NodeUI),Qz={_47O:function(r){var K=Qz.getBackups()._47O;X.inEdit(this.gv)||K.call(this,r)},getSelectWidth:function(){var r=this.gv,K=this._data;return r.isEditable(K)&&X.inEdit(r)?0:Qz.getBackup("getSelectWidth").call(this)}},Ez=(X.Inject.registAsModule(Qz,Tz),M.graph.GraphView),rU={_editPointSize:(K=M.Default.isTouchable,X.getStyle("pointSize")[K?0:1]),isPointEditable:function(r){if(X.inEdit(this))return!this._pointEditableFunc||this._pointEditableFunc(r);rU.getBackup("isPointEditable").call(this,r)},isEditable:function(r){var K=rU.getBackup("isEditable"),K=r instanceof X.Group||K.call(this,r);return X.inEdit(this)&&r instanceof M.Edge?!!r.s("2d.editable")&&(!(K=this.getEditableFunc())||K(r)):K},_42:function(r,K){rU.getBackups()._42.call(this,r,K),X.inEdit(this)&&this.getEditInteractor().drawImpl()}},kz=(X.Inject.registAsModule(rU,Ez),M.Default.getInternal().ui().ShapeUI),KU={_47O:function(r){var K=KU.getBackups()._47O;X.inEdit(this.gv)||K.call(this,r)}},Gz=(X.Inject.registAsModule(KU,kz),M.graph.DefaultInteractor),BU={handle_mousewheel:function(r){var K=BU.getBackup("handle_mousewheel");X.inEdit(this.gv)||K.call(this,r)}},sz=(X.Inject.registAsModule(BU,Gz),M.graph.MoveInteractor),bU={_calcShift:function(r,K){var B=bU.getBackup("_calcShift"),b=this.gv;return X.inEdit(b)&&b.getEditInteractor().getSubModule("Move").calcShift(r,K,this)||B.call(this,r,K)},clear:function(r){bU.getBackup("clear").call(this,r);var K=this.gv;X.inEdit(K)&&K.getEditInteractor().getSubModule("Move").clear(r)}};X.Inject.registAsModule(bU,sz),(((h=X.Rect=function(r){this.catalog="Rect",this._interactor=r}).prototype={}).constructor=h).prototype.gatherInfo=function(r,K){var B;return 1===K.length?(B=K[0])instanceof M.Shape&&B._70I()?this.gatherLine(r,B):!oY(B,r)&&this.gatherSingleTarget(r,B):1<K.length&&this.gatherMultiTargets(r,K)},h.prototype.gatherSingleTarget=function(r,K){if(K.getCorners){var B,b,f=this.info,h=(this.target=K,B=this.screenInfo={},K.getCorners());for(b in f.LT=new X.Math.Vector2(h[0]),f.LB=new X.Math.Vector2(h[1]),f.RB=new X.Math.Vector2(h[2]),f.RT=new X.Math.Vector2(h[3]),f.T=f.LT.clone().add(f.RT).divideScalar(2),f.B=f.LB.clone().add(f.RB).divideScalar(2),f.L=f.LT.clone().add(f.LB).divideScalar(2),f.R=f.RT.clone().add(f.RB).divideScalar(2),f)B[b]=X.toScreenPosition(r,f[b]);var U=this._interactor.getStyle("checkSize");return B.rotLT=(h=function(r,K,B){return K=K.clone().sub(r).setLength(-U),B=B.clone().sub(r).setLength(-U),K.add(B).add(r)})(B.LT,B.RT,B.LB),B.rotLB=h(B.LB,B.LT,B.RB),B.rotRB=h(B.RB,B.LB,B.RT),B.rotRT=h(B.RT,B.LT,B.RB),B.rotT=B.rotLT.clone().add(B.rotRT).divideScalar(2),B.rotB=B.rotLB.clone().add(B.rotRB).divideScalar(2),B.rotL=B.rotLT.clone().add(B.rotLB).divideScalar(2),B.rotR=B.rotRT.clone().add(B.rotRB).divideScalar(2),B.rotation=K.getRotation(),this.gatherConnectInfo(),!0}},h.prototype.gatherConnectInfo=function(){var r,K,B=this.target,b=this._interactor,f=this.screenInfo,h=b.gv;h.isConnectActionVisible(B)&&b.getStyle("connectGuideVisible")&&(r=(r=B.s?B.s("connectGuideShift"):r)||b.getStyle("connectGuideShift"),b=B.getAnchor(),K=B.getSize(),B=B.toGlobal({x:K.width*(r[0]-b.x),y:K.height*(r[1]-b.y)}),B=X.toScreenPosition(h,B),f.P1?B.add(f.P2.clone().sub(f.P1).setLength(r[2])):(B.add(f.RT.clone().sub(f.LT).setLength(r[2])),B.add(f.LB.clone().sub(f.LT).setLength(r[3]))),f.connect=B)},h.prototype.gatherMultiTargets=function(r,K){return!!(K=X.Group.findOrCreateGroup(K,this._interactor._uuid))&&(this.editing&&"rotate"!==this.editing.mode||K.calcInfo(),this.gatherSingleTarget(r,K))},h.prototype.gatherLine=function(r,K){this.target=K;var B=this.screenInfo={},b=K.getPoints(),K=X.getDataMatrix(K);return B.P1=X.toScreenPosition(r,K.apply(b.get(0))),B.P2=X.toScreenPosition(r,K.apply(b.get(1))),this.gatherConnectInfo(),!0},h.ResizeKeys=["LT","RB","LB","RT","L","R","B","T"],h.ResizeDirection=[{x:-1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],h.RotateKeys=["rotLT","rotRB","rotLB","rotRT","rotL","rotR","rotB","rotT"],h.prototype.check=function(r,K,B){if(M.Default.isLeftButton(K)){var b=this;if(b.editing=null,b.tipInfo=null,b.screenInfo){var f=b.target,h=r.isEditable(f),U=b.screenInfo;if(h&&U.connect)if(H=b._checkConnect(B))return H;if(U.P1)return b._checkLine(B);var a,P,H,Y=null,S=(H=b._interactor).getStyle("checkSize");if(h&&r.isRectEditable(f))for(e=0;e<X.Rect.ResizeKeys.length;e++)if(P=X.Rect.ResizeKeys[e],X.checkHit(B,U[P],S)){Y=P,a="resize";break}if(!Y&&h&&r.isRotationEditable(f)&&!H.getStyle("rotateAsClock"))for(var _=H.getStyle("rotateCheckSize"),e=0;e<X.Rect.RotateKeys.length;e++)if(P=X.Rect.RotateKeys[e],X.checkHit(B,U[P],_)){Y=P,a="rotate";break}if(Y){if("rotate"===a){if(h=r.lp(K),f instanceof X.Group){for(var o=H.getStyle("groupRotateModeKey"),x=!1,T=0,t=(o="string"==typeof o?[o]:o).length;T<t;T++)if(K[o[T]]){x=!0;break}var r=H.getStyle("groupRotateModeDefault"),p=x?"batch"===r?"block":"batch":r}r="batch"===p?f.getAnchor2():f.getPosition(),h=Math.atan2(h.y-r.y,h.x-r.x),H._setRotateCursor(h),b.editing={mode:a,key:Y,pos:r,flipY:f.getScale().y<0,rotation:f.getRotation(),hitRot:h},p&&(b.editing.groupRotateMode=p)}else{var r=X.Rect.ResizeKeys.indexOf(Y),h=X.Rect.ResizeDirection[r],p=Math.cos(f.getRotation()),r=Math.sin(f.getRotation()),q=h.x*Math.sign(f.getScale().x),h=h.y*Math.sign(f.getScale().y),p=Math.atan2(-r*q-p*h,p*q-r*h),q=(Math.round(p/(Math.PI/4))+8)%8,r=(this._interactor.setCursor(["ew-resize","nesw-resize","ns-resize","nwse-resize","ew-resize","nesw-resize","ns-resize","nwse-resize"][q]),f.getWidth()),h=f.getHeight(),p=f.getAnchor();b.editing={mode:a,key:Y,rect:{x:-r*p.x,y:-h*p.y,width:r,height:h},anchor:p,matrix:f.getMatrix()}}return Y}H.setCursor("default")}}},h.prototype._checkLine=function(r){this.screenInfo;var K,B=this._interactor.getStyle("checkSize");if(X.checkHit(r,this.screenInfo.P1,B))K="P1";else{if(!X.checkHit(r,this.screenInfo.P2,B))return void this._interactor.setCursor("default");K="P2"}return this.editing={mode:"line",key:K},K},h.prototype._checkConnect=function(r){var K,B,b=this.screenInfo,f=this._interactor,h=f.getStyle("connectGuideIntersectSize"),b=b.connect,U=r.x,a=b.x;if(U<a&&a-U<h&&Math.abs(b.y-r.y)<h||a<=U&&X.checkHit(r,b,h))return K=Y1.getConnectAction(f.gv),this.editing={mode:"connect"},K&&K.delete&&(this.target instanceof X.Group?(B=!0,f.gv.sm().getSelection().each(function(r){K.delete.visible.call(null,f.gv,r)||(B=!1)}),this.editing.hasDeleteAction=B):K.delete.visible.call(null,f.gv,this.target)&&(this.editing.hasDeleteAction=!0)),f.setCursor("default"),"connect"},h.prototype._fireEditEvent=function(r,K){var B=this._interactor,b=this.editing;b&&(b="rotate"===(b=b.mode)?"Rotation":"connect"===b?"Connection":"resize"===b?"Rect":b[0].toUpperCase()+b.slice(1),B.fi({kind:r+"Edit"+b,event:K}))},h.prototype.startEdit=function(r,K){r.startDragging(K),this._interactor.fi({kind:"prepareEdit",event:K});var B,b=this.editing,f=this.target;if(b){if(this._fireEditEvent("begin",K),b.started=!0,"rotate"===b.mode)return b.groupRotateMode&&f.beginRotate(b),void r._42();"connect"===b.mode?b.hasDeleteAction&&(K=r.gv,B=this._interactor.getStyle("connectGuideGarbageShift"),b.garbageInfo={x:K.getWidth()*B[0]+B[2],y:K.getHeight()*B[1]+B[3],size:this._interactor.getStyle("connectGuideGarbageIntersectsize")},r._42()):("line"===b.mode||f&&0===f.getRotation())&&(this._inSmartGuide=!0,this._interactor.rectGuide.gatherRects())}},h.prototype._46O=function(r){var K,B,b=this,f=b.editing,h=b.target;if(f){if("connect"===f.mode&&!f.canceled&&!f.deleted)try{f.garbageInfo&&f.garbageInfo.hover?Y1.doDeleteConnectionAction(b._interactor.gv,h):Y1.doConnectAction(b._interactor.gv,h,f.target)}catch(r){console.error(r)}B=f.freezeFlag,K=b.editing.groupRotateMode,b._fireEditEvent("end",r),b.editing=null}b.tipInfo=null,b._inSmartGuide&&(b._interactor.rectGuide.clear(),b._inSmartGuide=!1),K&&h&&h.endRotate(),h instanceof M.Block&&(B===P1?delete h._freezeSyncFromChildren:h._freezeSyncFromChildren=B,h.updateFromChildren())},h.prototype.handleNormalStateDelete=function(){var r=this.editing;if(r&&"connect"===r.mode&&!r.canceled&&!r.deleted){if(r.garbageInfo){try{Y1.doDeleteConnectionAction(this._interactor.gv,this.target)}catch(r){console.error(r)}r.garbageInfo=null}return r.cursorPos=null,r.targetCorners=null,r.deleted=!0,this._interactor._42(),!0}},h.prototype.handleNormalStateKeyDown=function(r){var K=this.editing;if(K&&"connect"===K.mode&&!K.canceled&&!K.deleted)return M.Default.isEsc(r)?(K.cursorPos=null,K.targetCorners=null,K.canceled=!0,this._interactor._42(),!0):void 0},h.prototype.handleEdit=function(K,r){var B=this,b=B.editing;if(b){var f,h,U=B.target,a=b.key,P=b.mode,H=K.lp(r),Y=B._interactor;if("connect"===P)return b.canceled?void 0:b.deleted?void 0:(b.cursorPos=Y._getLogicalPoint(r),(p=b.garbageInfo)&&X.checkHit(b.cursorPos,p,p.size)?(p.hover=!0,b.target=null,b.targetCorners=null):(p&&(p.hover=!1),b.target=K.getDataAt(H,function(r){return!!K.isSelectable(r)&&!!l(r)})||null,b.targetCorners=X.getTargetCornersOnScreen(K,b.target)),void Y._42());if("rotate"===P){p=b.pos,p=Math.atan2(H.y-p.y,H.x-p.x),q=b.groupRotateMode?p-b.hitRot:(t=p-b.hitRot,b.rotation+t),(q%=2*Math.PI)<0&&(q+=2*Math.PI),M.Default.isCtrlDown(r)||(o=n9(r)?(S=Y.getStyle("shiftRotateRound"))/2:(S=Y.getStyle("rotateRound"),Y.getStyle("rotateSensitivity")),q=X.roundTo(q,S,o)),b.groupRotateMode?0!=(t=q-(b.lastRotation||0))&&(U.addRotation(t,b.groupRotateMode,function(r){return K.isRotationEditable(r)}),b.lastRotation=q):U.setRotation(q),Y._setRotateCursor(p),q>Math.PI&&(q-=2*Math.PI);var S=(q/Math.PI*180).toFixed(2)+""}else if("resize"===P){var _,e,o=b.rect,x=o.x,T=o.y,t=o.width,p=o.height,q=b.anchor,y=b.matrix,k=U.s&&U.s("keepAspectRatio")||Y.getStyle("keepAspectRatio"),w=(n9(r)&&(k=!k),B._unionPointMode1),v=B._unionPointMode2,v=(!B._inSmartGuide||M.Default.isCtrlDown(r)||k||("L"===a||"R"===a?_="x":"T"!==a&&"B"!==a||(_="y"),B._adsorbedToClosest(H,_),h=!0),z=y.tfi(H),"LT"===a?(o=w(z,{x:x+t,y:T+p},t,p,k),e=9):"T"===a?(o=v({x:x,y:z.y},{x:x+t,y:T+p},t,p,k,"v"),e=1):"RT"===a?(o=w(z,{x:x,y:T+p},t,p,k),e=33):"L"===a?(o=v({x:z.x,y:T},{x:x+t,y:T+p},t,p,k,"h"),e=8):"R"===a?(o=v({x:x,y:T},{x:z.x,y:T+p},t,p,k,"h"),e=32):"LB"===a?(o=w(z,{x:x+t,y:T},t,p,k),e=12):"B"===a?(o=v({x:x,y:T},{x:x+t,y:z.y},t,p,k,"v"),e=4):"RB"===a&&(o=w(z,{x:x,y:T},t,p,k),e=36),y.tf(o.x+o.width*q.x,o.y+o.height*q.y));U instanceof M.Block&&(b.hasOwnProperty("freezeFlag")||(b.freezeFlag=U._freezeSyncFromChildren,U._freezeSyncFromChildren=!0)),U.setPosition(v),U.setSize(o.width,o.height),h&&(f=U.getRect(),Y.rectGuide.gatherLines({node:U,x:f.x,y:f.y,w:f.width,h:f.height},_,e)),S=Math.round(o.width)+" * "+Math.round(o.height)}else if("line"===P){if(n9(r)){var w=U.getPoints(),z="P1"===a?w.get(1):w.get(0),N=H.x-z.x,u=H.y-z.y,j=Y.getStyle("shiftLineRotateRound"),I=B._shiftDirList;if(!I||B._shiftRotateRound!==j){B._shiftRotateRound=j,B._shiftDirList=I=[];for(var L=0;L<Math.PI;L+=j)I.push({x:f1(L),y:S1(L)})}for(var J,F=0,G=0,d=I.length;G<d;G++){var s=I[G],n=s.x*N+s.y*u;Math.abs(n)>Math.abs(F)&&(F=n,J=s)}H={x:z.x+J.x*F,y:z.y+J.y*F},Y.rectGuide.clear()}else B._inSmartGuide&&!M.Default.isCtrlDown(r)&&(B._adsorbedToClosest(H),h=!0);t=X.getDataMatrix(U).applyInverse(H),U.setPoint("P1"===a?0:1,t,!0),k=(p=U.getPoints()).get(0),y=p.get(1),x=k.x-y.x,T=k.y-y.y,S=" "+Math.round(Math.sqrt(x*x+T*T))+" ",h&&(f=U.getRect(),Y.rectGuide.gatherLines({node:U,x:f.x,y:f.y,w:f.width,h:f.height}))}S&&((q=M.Default.getLogicalPoint(r,Y._canvas)).x+=X.Icons.TipShiftX,q.y+=X.Icons.TipShiftY,B.tipInfo={helperPos:q,text:S,size:S.length}),B._fireEditEvent("between",r)}},h.prototype._unionPointMode1=function(r,K,B,b,f){var h;return f&&B&&b&&(f=r.x-K.x,h=r.y-K.y,Math.abs(f*b)<Math.abs(h*B)?(h=Math.sign(h)*Math.abs(f*b/B),r.y=K.y+h):(f=Math.sign(f)*Math.abs(h*B/b),r.x=K.x+f)),M.Default.unionPoint(r,K)},h.prototype._unionPointMode2=function(r,K,B,b,f,h){var U,r=M.Default.unionPoint(r,K);return f&&B&&b&&("v"===h?(U=r.x+r.width/2,r.width=B*r.height/b,r.x=U-r.width/2):(U=r.y+r.height/2,r.height=b*r.width/B,r.y=U-r.height/2)),r},h.prototype._adsorbedToClosest=function(r,K){var B=(b=this._interactor).rectGuide.findClosest(r,K),b=b.gridGuide.findClosest(r,K),K=1/0,f=1/0;B&&(isFinite(B.x)&&(K=B.x),isFinite(B.y)&&(f=B.y)),b&&(isFinite(b.x)&&Math.abs(b.x)<Math.abs(K)&&(K=b.x),isFinite(b.y)&&Math.abs(b.y)<Math.abs(f)&&(f=b.y)),isFinite(K)&&(r.x+=K),isFinite(f)&&(r.y+=f)},h.prototype._42=function(r,K,B){var b=this,f=(b.info={},b.screenInfo=null,b._interactor);if(!f.editDetail&&b.gatherInfo(K,B)){var h=b.editing,B=h?h.groupRotateMode:null,U=b.screenInfo;if("block"!==B||!h||!h.started){if(U.P1?X.Icons.DrawIcon(f,r,X.Icons.Line,U):X.Icons.DrawIcon(f,r,X.Icons.Rect,U),U.connect&&(X.Icons.DrawIcon(f,r,X.Icons.ConnectGuide,{rotation:U.rotation,connect:U.connect,cursorPos:h?h.cursorPos:null}),h)){if(h.targetCorners){for(var a={x:1/0,y:1/0},P={x:-1/0,y:-1/0},H=0,Y=h.targetCorners.length;H<Y;H+=2)a.x=Math.min(a.x,h.targetCorners[H]),P.x=Math.max(P.x,h.targetCorners[H]),a.y=Math.min(a.y,h.targetCorners[H+1]),P.y=Math.max(P.y,h.targetCorners[H+1]);X.Icons.DrawIcon(f,r,X.Icons.HoverDataRect,{min:a,max:P,color:f.getStyle("hoverGuideColor")||f.getStyle("baseColor")})}h.garbageInfo&&X.Icons.DrawIcon(f,r,X.Icons.ConnectGuideGarbage,h.garbageInfo)}f.getStyle("rotateTipVisible")&&b.tipInfo&&X.Icons.DrawIcon(f,r,X.Icons.TipHelper,b.tipInfo)}b.target instanceof X.Group&&b.target._42(f,r,K)}},(((B=X.Anchor=function(r){this.catalog="Anchor",this._interactor=r}).prototype={}).constructor=B).prototype.gatherInfo=function(r,K){if(1!==K.length)return 1<K.length&&this.gatherMultiTargets(r,K);var B=K[0];return B.getAnchor&&!(B instanceof M.Shape&&B._70I()||oY(B,r))?this.gatherSingleTarget(r,K[0]):void 0},B.prototype.gatherSingleTarget=function(r,K){return this.info.POS=K.getPosition(),this.screenInfo.POS=X.toScreenPosition(r,this.info.POS),this.target=K,!0},B.prototype.gatherMultiTargets=function(r,K){return!!(K=X.Group.findOrCreateGroup(K,this._interactor._uuid))&&(this.screenInfo.POS=X.toScreenPosition(r,K.getAnchor2()),this.target=K,!0)},B.prototype.isVisible=function(){var r=this._interactor;if(!1===r.getStyle("anchorVisible"))return!1;var K=this.target;if(K){if(this.editing)return!0;var B=K.getAnchor(),b=r.getStyle("anchorOutsideVisibleThreshold");if(B.x<-b||B.x>1+b||B.y<-b||B.y>1+b)return!0;if(B=K.getSize(),b=K.getScale(),Math.min(Math.abs(B.width*b.x),Math.abs(B.height*b.y))*r.gv._zoom<r.getStyle("anchorHideThreshold"))return!1}return!0},B.prototype.check=function(r,K,B){if(M.Default.isLeftButton(K)&&(K=this._interactor,this.isVisible()&&!1!==K.getStyle("anchorMovable"))){this.editing=null,this.tipInfo=null;var b=this.target;if(b&&r.isAnchorEditable(b)&&r.isEditable(b)&&this.screenInfo&&(r=this.screenInfo.POS)&&X.checkHit(B,new X.Math.Vector2(r),K.getStyle("checkSize")))return b instanceof X.Group?this.editing={}:(B=b.getWidth(),r=b.getHeight(),K=b.getAnchor(),this.editing={rect:{x:-B*K.x,y:-r*K.y,width:B,height:r},anchor:K,matrix:b.getMatrix()}),!0}},B.prototype.startEdit=function(r,K){r.startDragging(K),r.fi({kind:"beginEditAnchor",event:K})},B.prototype._46O=function(r){this.editing&&(this.editing=null,this._interactor.fi({kind:"endEditAnchor",event:r})),this.tipInfo=null},B.prototype.handleEdit=function(r,K){var B=this.target;if(B&&(f=this.editing)){var r=r.lp(K),b=this._interactor;if(B instanceof X.Group)return B.setAnchor2(r),void b._42();var r=f.matrix.tfi(r),f=f.rect,h=(r.x-f.x)/f.width,r=(r.y-f.y)/f.height;M.Default.isCtrlDown(K)||(f=b.getStyle("anchorRound"),U=b.getStyle("anchorSensitivity"),h=X.roundTo(h,f,U),r=X.roundTo(r,f,U)),B.setAnchor(h,r,!0);(f=M.Default.getLogicalPoint(K,b._canvas)).x+=X.Icons.TipShiftX,f.y+=X.Icons.TipShiftY;var U=h.toFixed(2)+", "+r.toFixed(2);this.tipInfo={helperPos:f,text:U,size:U.length},b.fi({kind:"betweenEditAnchor",event:K})}},B.prototype._42=function(r,K,B){this.info={},this.screenInfo={};var b=this._interactor;b.editDetail||this.gatherInfo(K,B)&&this.isVisible()&&(X.Icons.DrawIcon(b,r,X.Icons.Anchor,this.screenInfo),this.tipInfo&&X.Icons.DrawIcon(b,r,X.Icons.TipHelper,this.tipInfo))},(((K=X.MoveDummy=function(r){this.catalog="MoveDummy",this._interactor=r}).prototype={}).constructor=K).prototype.gatherInfo=function(r,K){var B=this._interactor.getSubModule("Rect");if(B&&(P=B.screenInfo)){var b=this._interactor;if(this.getMovableTarget(B.target)&&!1!==(B=b.getStyle("moveDummyThreshold"))){var f=P.LT||P.P1,h=P.RT||P.P2,U=P.LB||f;if(f){var a,P=P.P1,H=Math.min(f.distanceTo(U),f.distanceTo(h));if(!(!0!==B&&B<H))return B=b.getStyle("moveDummyPosition"),H=h.clone().sub(f),h=U.clone().sub(f),U=B[2],a=B[3],(P=P&&b.getStyle("moveDummyLineExtraShift"))&&(U+=P[0],a+=P[1]),P=f.clone().add(H.clone().multiplyScalar(B[0])).add(H.setLength(U)).add(h.clone().multiplyScalar(B[1])).add(h.setLength(a)),this.screenInfo.pos=P,this.screenInfo.size=b.getStyle("moveDummySensitivity"),!0}}}},K.prototype.getMovableTarget=function(r){var K=this._interactor.gv;if(l(r)){if(K.isMovable(r))return r}else if(r instanceof X.Group)for(var B=r._entities,b=B.length-1;0<=b;b--){var f=B[b];if(l(f)&&K.isMovable(f))return f}return null},K.prototype.getMoveInteractor=function(){for(var r,K=this._interactor.gv.getInteractors(),B=0,b=K.length;B<b;B++)if((r=K.get(B))instanceof sz)return r},K.prototype.startEdit=function(r,K){r.startDragging(K);var B,b=this.getMoveInteractor();b&&(B=this.selectedTarget,(r=r.gv)._moving=1,b._data=B,r.handleMouseDown&&r.handleMouseDown(K,B))},K.prototype._46O=function(r){var K=this.getMoveInteractor();K&&(K.handleWindowMouseUp(r),this.selectedTarget=null)},K.prototype.handleEdit=function(r,K){var B=this.getMoveInteractor();B&&B.handleWindowMouseMove(K)},K.prototype.check=function(r,K,B){if(this.selectedTarget=null,M.Default.isLeftButton(K)&&!r._scrolling&&!GN()&&this.screenInfo&&(K=this.screenInfo.pos)&&!(B.distanceTo(K)>this.screenInfo.size))return r=this._interactor,this.selectedTarget=this.getMovableTarget(r.getSubModule("Rect").target),r.setCursor("default"),!0},K.prototype._42=function(r,K,B){this.screenInfo={};var b=this._interactor;b.editDetail||!this.gatherInfo(K,B)||b.editing&&!this.selectedTarget||X.Icons.DrawIcon(b,r,X.Icons.MoveDummy,this.screenInfo)},(((h=X.RotateX=function(r){this.catalog="RotateX",this._interactor=r}).prototype={}).constructor=h).prototype.gatherInfo=function(r,K){var B;return 1===K.length?!((B=K[0])instanceof M.Shape&&B._70I()||oY(B,r))&&this.gatherSingleTarget(r,B):1<K.length&&this.gatherMultiTargets(r,K)},h.prototype.gatherSingleTarget=(Wz=new M.Math.Vector2,$z=new M.Math.Vector2,Xz=new M.Math.Vector2,cz=new M.Math.Vector2,function(r,K){var B,b;if(K.getCorners)return b=K.getCorners(),B=K.getPosition(),Wz.copy(b[0]),Xz.copy(b[1]),cz.copy(b[3]),$z.copy(Wz).add(cz).divideScalar(2).add(Wz.sub(Xz).setLength(15/r.getZoom())),b=Math.max(Ct(B,b[0]),Ct(B,b[1]),Ct(B,b[2]),Ct(B,b[3])),this.info.POS=$z.clone(),this.screenInfo.POS=X.toScreenPosition(r,this.info.POS),this.screenInfo.LEN=Math.sqrt(b)*r.getZoom()+15,this.screenInfo.CENTER=X.toScreenPosition(r,B),this.target=K,!0}),h.prototype.gatherMultiTargets=function(r,K){return!!(K=X.Group.findOrCreateGroup(K,this._interactor._uuid))&&this.gatherSingleTarget(r,K)},h.prototype.isVisible=function(){var r=this._interactor;if(!r.getStyle("rotateAsClock"))return!1;var K=this.target;return!K||!(!(r=r.gv).isEditable(K)||!r.isRotationEditable(K))},h.prototype.check=function(r,K,B){return((r=this._checkImpl(r,K,B))||this._clockPainted)&&this._interactor._42(),r},h.prototype._checkImpl=function(r,K,B){if(M.Default.isLeftButton(K)){var b=this;if(b.editing=null,b.tipInfo=null,b.screenInfo&&(f=b.screenInfo.POS)&&b.isVisible()){var f,h=b._interactor;if(X.checkHit(B,f,h.getStyle("checkSize")))return B=b.target,f=r.lp(K),r=B.getPosition(),K=Math.atan2(f.y-r.y,f.x-r.x),h._setRotateCursor(K),b.editing={pos:r,rotation:B.getRotation(),hitRot:K,groupRotateMode:"block",screenInfo:{CENTER:b.screenInfo.CENTER,LEN:b.screenInfo.LEN}},!0}}},h.prototype.startEdit=function(r,K){r.startDragging(K),r.fi({kind:"beginEditRotation",event:K}),this.target instanceof X.Group&&this.target.beginRotate(this.editing)},h.prototype._46O=function(r){this.editing&&(this.editing=null,this._interactor.fi({kind:"endEditRotation",event:r})),this.target instanceof X.Group&&this.target.endRotate(),this.tipInfo=null},h.prototype.handleEdit=function(K,r){var B,b,f,h,U,a,P,H,Y=this.editing;Y&&(B=this.target,f=K.lp(r),b=this._interactor,U=Y.pos,f=Math.atan2(f.y-U.y,f.x-U.x),a=(U=B instanceof X.Group)?f-Y.hitRot:(h=f-Y.hitRot,Y.rotation+h),(a%=2*Math.PI)<0&&(a+=2*Math.PI),M.Default.isCtrlDown(r)||(H=n9(r)?(P=b.getStyle("shiftRotateRound"))/2:(P=b.getStyle("rotateRound"),b.getStyle("rotateSensitivity")),a=X.roundTo(a,P,H)),U?0!=(h=a-(Y.lastRotation||0))&&(B.addRotation(h,Y.groupRotateMode,function(r){return K.isRotationEditable(r)}),Y.lastRotation=a):B.setRotation(a),b._setRotateCursor(f),a>Math.PI&&(a-=2*Math.PI),P=(a/Math.PI*180).toFixed(2)+"",(H=M.Default.getLogicalPoint(r,b._canvas)).x+=X.Icons.TipShiftX,H.y+=X.Icons.TipShiftY,this.tipInfo={helperPos:H,text:P,size:P.length},b.fi({kind:"betweenEditRotation",event:r}))},h.prototype._42=function(r,K,B){var b=this,f=(b._clockPainted=!1,b.info={},b.screenInfo={},b._interactor);f.editDetail||b.gatherInfo(K,B)&&b.isVisible()&&(X.Icons.DrawIcon(f,r,X.Icons.RoundPoint,b.screenInfo.POS),f.getStyle("rotateTipVisible")&&b.tipInfo&&X.Icons.DrawIcon(f,r,X.Icons.TipHelper,b.tipInfo),b.editing&&b.drawClock(r))},h.prototype.drawClock=function(r){r.save(),this._clockPainted=!0;var K,B,b,f,h,U=this.editing||{},a=U.screenInfo||this.screenInfo,P=a.LEN,H=P+8,Y=P+18;r.save(),r.translate(a.CENTER.x,a.CENTER.y),r.beginPath(),r.strokeStyle="rgb(150, 150, 150)";for(var S=0;S<360;S++)K=S*Math.PI/180,S%5==0&&(B=S1(K)*P,b=f1(K)*P,f=S1(K)*H,h=f1(K)*H,r.moveTo(B,b),r.lineTo(f,h)),S%45==0&&(B=S1(K)*P,b=f1(K)*P,f=S1(K)*Y,h=f1(K)*Y,r.moveTo(B,b),r.lineTo(f,h));r.stroke(),r.rotate(-F1),a=U.lastRotation||this.target.getRotation(),r.beginPath(),r.fillStyle="rgba(255, 0, 0, 0.1)",r.strokeStyle="rgb(157, 157, 157)",r.moveTo(0,0),r.arc(0,0,Y,0,a,!1),r.fill(),r.beginPath(),r.moveTo(0+Y,0),r.arc(0,0,Y,0,a,!1),r.stroke(),r.restore()},((r=X.Curve=function(r){this.catalog="Curve",this._interactor=r}).prototype={}).constructor=r,A.defineProperties(r.prototype,{activing:{get:function(){return this._activing},set:function(r){r?(this._activing=new X.CurveActiving(this,r),this.gatherSingleTarget(this._interactor.gv,this.target)):((r=this._activing)&&r.dispose(),this._activing=null)}}}),r.PointType={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3},r.prototype.setUp=function(){var r=this._interactor;r&&r.gv.mp(this._onGraphviewPropertyChanged,this)},r.prototype._onGraphviewPropertyChanged=function(r){"zoom"!==r.property&&"translateX"!==r.property&&"translateY"!==r.property||this._handleDataChanged()},r.prototype.tearDown=function(){var r=this._interactor;r&&r.gv.ump(this._onGraphviewPropertyChanged,this)},r.prototype.canEnterEditDetailMode=function(){var r=MP(this._interactor);if(r)return this.target=r},r.prototype.canQuitEditDetailMode=function(r){var K=this._interactor._getLogicalPoint(r);if(!this._checkEditRealPoint(K))return this._interactor.gv.getDataAt(r)!==this.target||void 0},r.prototype.preHandleScroll=function(r){var K=this.editing;if(K&&K.inEdit)return!0},r.prototype.getCurrentSelectintStatus=function(){var B=this;if(B.activing&&!B.activing.selections){if(B.activing.status!=P1)return B.activing.status;var r=function(r){var K=B.activing.status;B.activing.status=r,B._interactor.fp("shapePointStatus",K,r)},K=X.Curve.PointType,b=B.activing.point,f=B.activing.pairs;if(!f||1!==f.length)return r(K.Mirrored);var h=(f=f[0]).c1&&f.c1.isNearEnough(b),U=f.c2&&f.c2.isNearEnough(b);return f.c1&&f.c2?h&&U?r(K.Straight):h||U?r(K.Asymmetric):(h=f.c1.clone().sub(b),U=f.c2.clone().sub(b),1e-5<Math.abs(h.x*U.y-h.y*U.x)||0<h.x*U.x?r(K.Disconnected):1e-5<Math.abs(h.length()-U.length())?r(K.Asymmetric):r(K.Mirrored)):r(h||U?K.Straight:K.Disconnected)}},r.prototype.handle_keydown=function(r){var K;this._interactor.editDetail&&(K=X.Curve.PointType,"1"===r.key?this._setCurrentSelectionStatus(K.Straight):"2"===r.key?this._setCurrentSelectionStatus(K.Mirrored):"3"===r.key?this._setCurrentSelectionStatus(K.Disconnected):"4"===r.key&&this._setCurrentSelectionStatus(K.Asymmetric))},r.prototype.setCurrentSelectionStatus=function(r){var K=this._interactor;K&&((K=K.gv).dm().beginTransaction(),this._setCurrentSelectionStatus(r),K.dm().endTransaction())},r.prototype._setCurrentSelectionStatus=function(r){var K=this,B=K.activing;if(B){var b=K.getCurrentSelectintStatus();if(null!==b&&b!==r){B.status=r;var f=K.activing.point;if((h=K.activing.pairs)&&1===h.length){var h=h[0],U=K.screenInfo.curve,a=X.Curve.PointType,P=K._interactor,H=function(){K._writeToHt(),P.fp("shapePointStatus",b,r),K.check(P.gv,null,new X.Math.Vector2(P._lastLogicalPoint))};if(r===a.Straight)return U.moveCtrlPoint(h,f,"c1"),U.moveCtrlPoint(h,f,"c2"),void H();if(b===a.Straight)return S=(Y=U.findPairs(f,!0)[0]).r1||f,Y=(Y.r2||f).clone().sub(S).multiplyScalar(.25),U.moveCtrlPoint(h,f.clone().sub(Y),"c1"),U.moveCtrlPoint(h,f.clone().add(Y),"c2"),void H();var Y,S=h.c1,_=h.c2;if(S&&_){if(r===a.Mirrored)return U.moveCtrlPoint(h,f.clone().multiplyScalar(2).sub(_),"c1"),void H();if(r===a.Asymmetric&&b===a.Disconnected)return a=S.clone().sub(f).length(),Y=f.clone().sub(_).setLength(a).add(f),U.moveCtrlPoint(h,Y,"c1"),void H()}B._firePointChange(),P.fp("shapePointStatus",b,r),K.check(P.gv,null,new X.Math.Vector2(P._lastLogicalPoint))}}}},r.prototype._handleDataChanged=(fU="s:edge.points,s:edge.segments,points,segments,shape,position,rotation,scale".split(","),function(r){this.screenInfo&&this.target&&(r&&fU.indexOf(r.property)<0||(r=this._interactor,this.gatherSingleTarget(r.gv,this.target,!0),this.check(r.gv,null,new X.Math.Vector2(r._lastLogicalPoint)),r._42()))}),r.prototype.gatherSingleTarget=function(K,r,B){var b,f,h,U,a=this,P=(a.screenInfo&&a.screenInfo.curve&&(b=a.screenInfo.curve._curves),a.editing),H=P?a.screenInfo:a.screenInfo={},Y=r instanceof M.Edge,S=Y?(U=r.s("edge.segments"),r.s("edge.points")||new M.List):(U=r._58O,r._59O),_=(H.S=U,H.P=[]),e=X.getDataMatrix(r);if(r instanceof M.Polyline||r instanceof M.Edge&&a._interactor.getStyle("edgeElevationEditable")?(f=r.getElevation&&r.getElevation()||0,H.E=[]):(h=!1,S.each(function(r){r.e!==P1&&(h=!0)}),h&&(H.E=[])),S.each(function(r){H.E&&H.E.push(r.e!=P1?r.e:f),r=e.apply(r),r=X.toScreenPosition(K,r),_.push(r.x,r.y)}),Y&&(U=_.length,S=X.toScreenPosition(K,r._lastSourcePoint||(U?{x:_[0],y:_[1]}:{x:0,y:0})),Y=X.toScreenPosition(K,r._lastTargetPoint||(U?{x:_[U-2],y:_[U-1]}:{x:0,y:0})),_.splice(0,0,S.x,S.y),_.push(Y.x,Y.y),H.E&&((U=r.getSourceAgent())instanceof M.Edge?H.E.splice(0,0,r.s("edge.source.offset.elevation")):H.E.splice(0,0,((r.s("edge.source.anchor.elevation")||.5)-.5)*U.getTall()*U.getScaleTall()+U.getElevation()+r.s("edge.source.offset.elevation")),(S=r.getTargetAgent())instanceof M.Edge?H.E.push(r.s("edge.target.offset.elevation")):H.E.push(((r.s("edge.target.anchor.elevation")||.5)-.5)*S.getTall()*S.getScaleTall()+S.getElevation()+r.s("edge.target.offset.elevation")))),!H.S||!H.S.size()){H.S=new M.List,H.S.add(1);for(var o=0;o<_.length/2-1;o++)H.S.add(2)}P&&!B||a.convertToCubicBezier(b),!a.activing||!B&&a.editing&&"realPoint"!==a.editing.type||(Y=H.curve.findPairs(a.activing.point),a.activing.pairs=Y)},r.prototype._convertToNewPoint=function(r,K,B,b){for(var f,h=0,U=K.length;h<U;h++){if((f=K[h])._p1.isNearEnough(r)&&(!b||b.indexOf(f._p1)<0))return f._p1;if(f._p4.isNearEnough(r)&&(!b||b.indexOf(f._p4)<0))return f._p4}if(B)for(h=0,U=Math.min(B.length,U);h<U;h++){if((f=B[h])._p1===r&&(!b||b.indexOf(K[h]._p1)<0))return K[h]._p1;if(f._p4===r&&(!b||b.indexOf(K[h]._p4)<0))return K[h]._p4}},r.prototype.convertToCubicBezier=function(K){var B,b,f,h,U,a=this,r=new X.Math.Curve,P=a.screenInfo;r.createFromHtShape(P.P,P.S,P.E),P.curve=r,a.activing&&(B=r._curves,P=a.activing.point,b=a._convertToNewPoint(P,B,K),f=[],b&&(a.activing.point=b,f.push(b)),a.activing.selections&&(h=-1,(U=a.activing.selections).forEach(function(r){h++,(b=a._convertToNewPoint(r,B,K,f))&&(U[h]=b,f.push(b))})))},r.prototype.check=function(r,K,B){if(!K||J9(K)||F9(K)){var b=this;if(b._interactor.setCursor("default"),b.editing=null,b.highlight=null,b.tipInfo=null,b.edgeEditResult=null,b.screenInfo)return GN()||K&&F9(K)||b._checkEditCtrlPoint(B)||b._checkEditRealPoint(B)||b._checkEditElevation(B)||(K=b.screenInfo.curve.checkPoint(B,b._interactor.getStyle("curveIntersectSize")))&&((B=b.highlight={type:"insertKnot"}).bezier=K.bezier,B.point=K.intersection),b._interactor._42(),!0}},r.prototype.getAdjacentBeziers=function(r){var K=this.screenInfo;if(K){for(var B,b=K.curve._curves,f=[],h=P1,U=0,a=b.length;U<a;U++)if(B=b[U],h===P1){if(B._p4.isNearEnough(r))f.push(B),h=U;else if(B._p1.isNearEnough(r))return f.push(B),f}else{if(B._p1.isNearEnough(r))return f.push(B),f;B._p4.isNearEnough(r)&&(f[0]=B,h=U)}return f}},r.prototype.roundCorner=function(r){if(this.activing&&this.screenInfo){var K=this.screenInfo.curve._curves,B=(Y=this.activing).point,b=this.getAdjacentBeziers(B);if(b&&2===b.length)var f=(h=b[1])._index,h=h.insertKnot(h.getTByPercentage(r/h.length))[1],U=(K[f]=h).p1,a=(P=b[0])._index,P=P.insertKnot(P.getTByPercentage(1-r/P.length))[0],H=(K[a]=P).p4;else{var Y=Y.pairs[0],S=K.length;if(Y.c1){if(Y.c2)return;var a=(P=b[0])._index,H=(P=P.insertKnot(P.getTByPercentage(1-r/P.length))[0]).p4,U=(U=(h=K[(a+1)%S]).p1).clone().sub(B).setLength(r).add(B),f=a+1;if(1-Math.abs(H.clone().sub(B).normalize().dot(U.clone().sub(B).normalize()))<1e-8)return;K[a]=P}else{if(f=(h=b[0])._index,U=(h=h.insertKnot(h.getTByPercentage(r/h.length))[1]).p1,H=(H=(P=K[(f-1+S)%S]).p4).clone().sub(B).setLength(r).add(B),1-Math.abs(H.clone().sub(B).normalize().dot(U.clone().sub(B).normalize()))<1e-8)return;K[f]=h}}a=new X.Math.CubicBezier(H,(Y=B).clone().sub(H).multiplyScalar(2/3).add(H),Y.clone().sub(U).multiplyScalar(2/3).add(U),U),K.splice(f,0,a),this._writeToHt(),this.activing=null,this._interactor._42()}},r.prototype._checkEditRealPoint=function(r){var K,B,b,f,h,U,a=this.screenInfo.curve._curves,P=this._interactor.getStyle("curvePointIntersectSize"),H=1/0;for(P*=P,b=0,f=a.length;b<f;b++)h=(K=a[b])._p1,(U=r.distanceToSquared(h))<H&&(H=U,B=h),h=K._p4,(U=r.distanceToSquared(h))<H&&(H=U,B=h);return!(P<H)&&((P=this.highlight={type:"changeRealPoint"}).point=B,this.editing={type:"realPoint",point:B,shiftGuide:{point:B.clone(),dir:"x",limit:0}},this._interactor.setCursor("crosshair"),!0)},r.prototype._checkEditElevation=function(r){if(!this._interactor.getStyle("curveElevationVisible"))return!1;if(this.target instanceof M.Edge&&!this._interactor.getStyle("edgeElevationEditable"))return!1;var K=this.activing;if(!K)return!1;if(!(K=K.getCurrentEditingPoint()))return!1;var B=this._interactor,b=B.getStyle("curveElevationGuideShift");return(B=B.getStyle("curveElevationIntersectSize"))*B<r.distanceToSquared({x:K.x+b[0],y:K.y+b[1]})?void 0:(this.highlight={type:"elevation"},B=new X.Math.Vector2(r.x,r.y,K.e),this.editing={type:"elevation",startPoint:B},this._interactor.setCursor("crosshair"),!0)},r.prototype._checkEditCtrlPoint=function(r){var K=this;if(K.activing&&!K.activing.selections&&(P=K.getCurrentSelectintStatus())!==X.Curve.PointType.Straight){var B=K.activing.pairs;if(B){var b,f,h,U,a,P=K._interactor.getStyle("curvePointIntersectSize");P*=P;for(var H,Y,S=1/0,_=0,e=B.length;_<e;_++)for(U=B[_],Y=0;Y<2;Y++)U[a=0===Y?"c1":"c2"]&&(H=r.distanceToSquared(U[a]))<S&&(S=H,b=U,f=_,h=a);return P<S?!1:(K.activing.hlpair=b,K.activing.hltype=h,(P=K.highlight={type:"changeCtrlPoint"}).point=b[h],K.editing={type:"ctrlPoint",pair:b,pairId:f,ctrlType:h,direction:b[h].clone().sub(K.activing.point).normalize()},K._interactor.setCursor("crosshair"),!0)}}},r.prototype.startEdit=function(r,K){r.startDragging(K);var B,b,f,h,U=this;U.highlight&&"insertKnot"===U.highlight.type&&(U.insertKnot(),U.gatherSingleTarget(U._interactor.gv,U.target),U.activing=null,U._checkEditRealPoint(U._interactor._getLogicalPoint(K)));(P=U._activing)&&("ctrlPoint"===(a=U.editing?U.editing.type:null)?P.editingCtrl={pairId:U.editing.pairId,type:P.hltype}:"realPoint"===a&&(P.editingCtrl=!1));var a=U.highlight,P=M.Default.isCtrlDown(K);if(!a||GN()||F9(K))return!(B=U._interactor.gv).setFocus(K)||B._scrolling?void 0:void(P?U._multiSelect={startPoint:B.lp(K)}:B.isPannable()&&(J9(K)||F9(K))&&(U._pan={tx:B.tx(),ty:B.ty()},r.fi({kind:"beginPan",event:K})));"changeRealPoint"===a.type&&(B=U.activing?U.activing.point:null,b=U.activing?U.activing.selections:null,P&&U.activing?B===a.point?(b?(U.activing={point:b[0]},1<b.length&&(b.splice(0,1),U.activing.selections=b)):U.activing=null,U.editing=null):b&&0<=(f=b.indexOf(a.point))?(1<b.length?b.splice(f,1):delete U.activing.selections,U.editing=null):b?(b.push(B),U.activing={point:a.point,selections:b}):U.activing={point:a.point,selections:[B]}:b?B!==a.point&&(0<=(f=b.indexOf(a.point))?(b.splice(f,1,B),U.activing={point:a.point,selections:b}):U.activing={point:a.point}):(B===a.point&&(h=U.activing.status),U.activing={point:a.point},h&&(U.activing.status=h)),r.fi({kind:"beginEditPoint",event:K}))},r.prototype.insertKnot=function(){var r=this.highlight;this.screenInfo.curve.insertKnot(r.bezier,r.point.t),this._writeToHt()},r.prototype._writeToHt=function(){var r,K,B,b=(h=this.screenInfo.curve.toHtShape()).points,f=[],h=h.segments,U=this._interactor.gv,a=(U.dm().beginTransaction(),this.target),P=a instanceof M.Edge,H=X.getDataMatrix(a).invert();(a instanceof M.Polyline||P&&this._interactor.getStyle("edgeElevationEditable"))&&(B=a.getElevation&&a.getElevation()||0);for(var Y=0,S=b.length;Y<S;Y++)r=b[Y],K=X.toWorldPosition(U,r),K=H.apply(K),isFinite(r.e)&&r.e!==B&&(K.e=r.e),f.push(K);a._writing=!0,P?(a.s("edge.type","points"),a.setStyle("edge.segments",h),a.setStyle("edge.points",f.slice(1,f.length-1)),a.setStyle("edge.source.offset.x",0),a.setStyle("edge.source.offset.y",0),a.setStyle("edge.target.offset.x",0),a.setStyle("edge.target.offset.y",0),P=this._nextChangeEdgeHost,delete this._nextChangeEdgeHost,P&&("source"===P.type?a.setSource(P.host):a.setTarget(P.host)),this._writeEdgeHostAnchor("source",f[0]),this._writeEdgeHostAnchor("target",f[f.length-1])):f.length?(a.setSegments(h),a.setPoints(f,!0)):a.removeFromDataModel(),U.dm().endTransaction(),delete a._writing},r.prototype._writeEdgeHostAnchor=function(r,K){var B=this.target,b=this._calcHostAnchor(B,r,K);b.index!==P1?(B.setStyle("edge."+r+".index",b.index),B.setStyle("edge."+r+".percent",P1),B.setStyle("edge."+r+".anchor.x",P1),B.setStyle("edge."+r+".anchor.y",P1),B.setStyle("edge."+r+".anchor.elevation",P1),B.setStyle("edge."+r+".offset.elevation",K.e)):b.percent!==P1?(B.setStyle("edge."+r+".percent",b.percent),B.setStyle("edge."+r+".index",P1),B.setStyle("edge."+r+".anchor.x",P1),B.setStyle("edge."+r+".anchor.y",P1),B.setStyle("edge."+r+".anchor.elevation",P1),B.setStyle("edge."+r+".offset.elevation",K.e)):(B.s("edge."+r+".anchor.x",b.x),B.s("edge."+r+".anchor.y",b.y),B.s("edge."+r+".anchor.elevation",b.e),b.offsetX||b.offsetY||b.offsetElevation?(B.s("edge."+r+".offset.x",b.offsetX),B.s("edge."+r+".offset.y",b.offsetY),B.s("edge."+r+".offset.elevation",b.offsetElevation)):(B.s("edge."+r+".offset.x",0),B.s("edge."+r+".offset.y",0),B.s("edge."+r+".offset.elevation",0)))},r.prototype._calcHostAnchor=function(r,K,B,b){b=b||("source"===K?r.getSource():r.getTarget());var f=this._interactor.gv;if(h=f.calculateAttachPoint(b,B))return h.info;if(_Y(b))return f.calculateEdgePosition(b,B);var h=b.getRotation(),U=b.getAnchor(),a=(oY(b,f)&&(h=0),b.getElevation()),P=b.getTall()*b.getScaleTall(),a=((B.e||0)-r.s("edge."+K+".offset.elevation")-a)/P+.5,r=b.getScale();return h||r.x<0||r.y<0?(K=b.getMatrix().tfi(B),P=b.getSize(),{x:K.x/P.width+U.x,y:K.y/P.height+U.y,e:a}):(h=SP(f,b),{x:(B.x-h.x)/h.width,y:(B.y-h.y)/h.height,e:a})},r.prototype._handlePanning=function(r){var K,B,b,f,h=this._pan;h&&(h.started=!0,B=(K=this._interactor).gv,b=K._lastClientPoint,f=V9(r),f=FP(B,f,b),B.setTranslate(h.tx+f.x,h.ty+f.y),this.gatherSingleTarget(K.gv,this.target),K._42(),K.fi({kind:"betweenPan",event:r}))},r.prototype.handleEdit=function(r,K){var B,b,f,h,U,a,P,H,Y,S,_,e,o,x,T,t,p,q,y=this,k=y.editing;if(y._pan)y._handlePanning(K);else{if(y._multiSelect)return y._multiSelect.endPoint=r.lp(K),void y._interactor.redraw();k&&(k.inEdit=!0,b=y._interactor._getLogicalPoint(K),x=M.Default.isCtrlDown(K),H=M.Default.isShiftDown(K),T=k.type,B=y.activing,y._guideInfo=null,"ctrlPoint"===T&&H?(Y=y.editing.direction.clone(),_=B.point,o=Y.dot(b.clone().sub(_)),b=Y.setLength(o).add(_)):"ctrlPoint"!==T&&"realPoint"!==T||("realPoint"===T&&H&&(f=(H=y.editing.shiftGuide).point,e=Math.abs(b.x-f.x),(t=Math.abs(b.y-f.y))<e&&e>H.limit&&"y"===H.dir&&(H.dir="x"),e<t&&t>H.limit&&"x"===H.dir&&(H.dir="y"),"x"===(Y=H.dir)?(b.y=f.y,H.limit=Math.max(H.limit,e)):"y"===Y&&(b.x=f.x,H.limit=Math.max(H.limit,t))),x||((e=y._isEditEdgeSourceTarget())&&(S=b.clone()),H=y._guidingToEdit(b,Y),p=t=1/0,(T="realPoint"===T?y._interactor.gridGuide.findClosest(b,Y,!0):null)&&(T.x&&(t=T.x),T.y&&(p=T.y)),Y=!1,H&&(H.xList&&(Math.abs(H.x)<=Math.abs(t)?(Y=!0,t=H.x):delete H.xList),H.yList&&(Math.abs(H.y)<=Math.abs(p)?(Y=!0,p=H.y):delete H.yList),Y&&(y._guideInfo=H)),isFinite(t)&&(b.x+=t),isFinite(p)&&(b.y+=p),Y&&(H.v=b),e&&(T=Y?b.clone():null,b.copy(S),(t=y._editEdgeSourceTarget(e,b,x,T))&&(q=(y.edgeEditResult=t).tipText,t.isFixed&&(y._guideInfo=null))))),h=y.screenInfo.curve,"realPoint"===k.type?((_=k.point).e!==P1&&(b.e=_.e),h.moveRealPoint(_,b),k.point=b,y.highlight.point=b,p=B.status,U=B.selections,y.activing={point:b,status:p},U&&(a=b.clone().sub(_),P=0,U.forEach(function(r){var K=r.clone().add(a);h.moveRealPoint(r,K),U[P++]=K}),y.activing.selections=U)):"ctrlPoint"===k.type?(H=B.pairs[k.pairId],h.moveCtrlPoint(H,b,k.ctrlType),((Y=B.status)===(S=X.Curve.PointType).Mirrored||Y===S.Asymmetric)&&H.c1&&H.c2&&(_=new X.Math.Vector2(B.point),e="c1"===k.ctrlType?"c2":"c1",Y===X.Curve.PointType.Mirrored?h.moveCtrlPoint(H,_.clone().multiplyScalar(2).sub(b),e):Y===S.Asymmetric&&(o=H[e].clone().sub(_).length(),x=_.clone().sub(H[k.ctrlType]).setLength(o).add(_),isNaN(x.x)||h.moveCtrlPoint(H,x,e))),B._firePointChange()):"elevation"===k.type&&(T=(f=k.startPoint).e+(f.y-b.y)/r._zoom,y._setCurrentPointImpl("e",T),B._firePointChange(),q="E: "+X.toFixed(T)),(t=M.Default.getLogicalPoint(K,y._interactor._canvas)).x+=X.Icons.TipShiftX,t.y+=X.Icons.TipShiftY,q||(p=X.toWorldPosition(r,b),q=X.toFixed(p.x)+", "+X.toFixed(p.y)),y.tipInfo={helperPos:t,text:q,size:q.length},y._writeToHt(),y._interactor.fi({kind:"betweenEditPoint",event:K}))}},r.prototype._setCurrentPointImpl=function(r,K){var B=this._activing;if(!B)return!1;var b=this.target;if(!b)return!1;var f=B.getCurrentEditingPoint();if(!f)return!1;var h,U,a,P,H,Y,S=B.editingCtrl;return S||(h=f.clone()),"e"===r?f.e=K:("x"===r||"y"===r?(U=B._lastFirePoint,U="x"===r?{x:K,y:U?U.y:0}:{x:U?U.x:0,y:K}):"object"==typeof r?(U=r).e!==P1&&(f.e=r.e):(U={x:r,y:K},arguments[2]!==P1&&(f.e=arguments[2])),r=X.getDataMatrix(b),U=X.toScreenPosition(this._interactor.gv,r.apply(U)),f.x=U.x,f.y=U.y),S||(a=h.multiplyScalar(-1).add(f),UY(f.e)&&UY(h.e)&&(a.e=f.e-h.e),(P=this.screenInfo.curve).moveCtrlDueToRealPointMovement(f,a),(H=B.selections)&&(Y=0,H.forEach(function(r){var K=r.clone().add(a);isFinite(a.e)&&(K.e=(isFinite(r.e)?r.e:b.getElevation()||0)+a.e),P.moveRealPoint(r,K),H[Y++]=K}),B.selections=H)),!0},r.prototype.setCurrentPoint=function(r,K){return!!this._setCurrentPointImpl(r,K)&&(this._writeToHt(),!0)},r.prototype._isEditEdgeSourceTarget=function(){if(!(this.target instanceof M.Edge))return!1;var r=this.editing.point,K=this.screenInfo.curve._curves;return r===K[0]._p1?"source":r===K[K.length-1]._p4&&"target"},r.prototype._editEdgeSourceTarget=function(K,r,B,b){var f,h,U,a,P,H,Y,S,_,e=this,o=e.target;if(U="source"===K?o.getSource():o.getTarget())return f=e._interactor.gv,P=X.toWorldPosition(f,r),(H=(H=(h=e._calcHostAnchor(o,K,P,U)).index!==P1||h.percent!==P1?h.distance*f.getZoom()>e._interactor.getStyle("edgeHostEdgeMaxDistance"):!!e._interactor.getStyle("edgeHostDetectPerFrame")||h.x<0||1<h.x||h.y<0||1<h.y)&&f.getDataAt(P,function(r){return!!f.isSelectable(r)&&!!f.isSourceTargetEditable(o,r,K)&&!!o.canSetSourceTarget(r,K)}))&&(Y=e._calcHostAnchor(o,K,P,H),e._nextChangeEdgeHost={type:K,host:U=H},h=Y),H=!1,B||h.x===P1?h.percent===P1&&h.index===P1||(H=!0,a=h.point):(Y=e._interactor.getStyle("anchorRound"),B=e._interactor.getStyle("anchorSensitivity"),(S=f.calculateAttachPoint(U,P))?(h=S.info,H=!0):((h=b?e._calcHostAnchor(o,K,X.toWorldPosition(f,b),U):h).x=X.roundTo(h.x,Y,B),h.y=X.roundTo(h.y,Y,B)),a=LP(f,U,0,h.offsetX||0,h.offsetY||0,h.x,h.y)),a&&(P=X.toScreenPosition(f,a),r.x=P.x,r.y=P.y),e._edgeHostGuideInfo={corners:X.getTargetCornersOnScreen(f,U),attach:S?S.index:-1,host:U},h.percent!==P1?_="percent: "+h.percent.toFixed(2):h.index!==P1?_="index: "+h.index:(_=h.x.toFixed(2)+", "+h.y.toFixed(2),(h.offsetX||h.offsetY)&&(_+=" offset: "+h.offsetX.toFixed(2)+", "+h.offsetY.toFixed(2))),{host:U,anchor:h,tipText:_,isFixed:H}},r.prototype._guidingToEdit=function(r,K){if(o=this.screenInfo.curve){var B,b,f,h,U,a,P,H,Y=o._curves,S=1/0,_=1/0,e=[];for(this.editing&&"realPoint"===this.editing.type&&(H=this.editing.point),U=0,a=2*Y.length;U<a;U++)P=Y[Math.floor(U/2)][U%2?"_p4":"_p1"],0<=e.indexOf(P)||(e.push(P),H&&H===P||(f=P.x-r.x,h=P.y-r.y,Math.abs(f)<Math.abs(S)?(S=f,B=[P]):f===S&&B.push(P),Math.abs(h)<Math.abs(_)?(_=h,b=[P]):h===_&&b.push(P)));var o=this._interactor.getStyle("smartGuideThreshold");if((Math.abs(S)>o||"y"===K)&&(B=null),(Math.abs(_)>o||"x"===K)&&(b=null),(B||b)&&(o=!1,K={},B&&(o=!0,K.xList=B,K.x=S),b&&(o=!0,K.yList=b,K.y=_),o))return K}},r.prototype._46O=function(r){var K=this;K.editing&&(K.editing=null,K._interactor.fi({kind:"endEditPoint",event:r})),K._guideInfo=null,K._edgeHostGuideInfo=null,K._pan&&(K._pan=null,K._interactor.fi({kind:"endPan",event:r})),K._multiSelect&&(K._handleMultiSelect(K._multiSelect,r),K._multiSelect=null),K.tipInfo=null,K.edgeEditResult=null},r.prototype._handleMultiSelect=function(r,K){if(r.startPoint&&r.endPoint){for(var B,b,f,h,U=this._interactor,a=U.gv,P=X.toScreenPosition(a,r.startPoint),a=X.toScreenPosition(a,r.endPoint),H=M.Default.unionPoint(P,a),Y=this.screenInfo.curve._curves,S=[],_=function(r){r.x>=H.x&&r.y>=H.y&&r.x<=H.x+H.width&&r.y<=H.y+H.height&&S.indexOf(r)<0&&S.push(r)},e=0,o=Y.length;e<o;e++)_((f=Y[e])._p1),_(f._p4);if(S.length){var x=(r=this.activing||{}).selections||[],T=(r.point&&x.push(r.point),M.Default.isShiftDown(K)),t=K.altKey;if(t&&!T)for(h=S,S=[],e=0,o=h.length;e<o;e++)B=h[e],0<=(b=x.indexOf(B))&&S.push(B);for(e=0,o=x.length;e<o;e++)B=x[e],0<=(b=S.indexOf(B))?T&&!t||(S[b]=P1):S.push(B);for(h=S,S=[],e=0,o=h.length;e<o;e++)h[e]&&S.push(h[e]);0===(o=S.length)?this.activing=null:1===o?this.activing={point:S[0]}:(B=S[o-1],this.activing={point:B,selections:S.splice(0,o-1)}),U.redraw()}}},r.prototype._canDeletePoint=function(r,K){if(!(this.target instanceof M.Edge))return!0;var B=r._curves[0],r=r._curves[r._curves.length-1];return B._p1!==K&&r._p4!==K},r.prototype.handleDelete=function(){var K,B,b=this;b.activing&&b.screenInfo&&(K=M.Default.isShiftDown(),B=b.screenInfo.curve,b._canDeletePoint(B,b.activing.point)&&B.deleteRealPoint(b.activing.point,K),b.activing.selections&&b.activing.selections.forEach(function(r){b._canDeletePoint(B,r)&&B.deleteRealPoint(r,K)}),b.activing=null,delete b.editing,delete b.tipInfo,delete b.edgeEditResult,delete b._pan,delete b._multiSelect,b._writeToHt(),b._interactor.fp("deleteShapePoint",!1,!0))},r.prototype.handleDoubleClick=function(r){var K,r=this._interactor._getLogicalPoint(r);if(this.screenInfo&&this._checkEditRealPoint(r))return r=(r=this.getCurrentSelectintStatus())===(K=X.Curve.PointType).Mirrored?K.Straight:K.Mirrored,this._setCurrentSelectionStatus(r),this._interactor._42(),!0},r.prototype._drawHighlight=function(r){var K,B,b=this.highlight;b&&(B=b.bezier,K=this._interactor,B&&X.Icons.DrawIcon(K,r,X.Icons.ShapeHighlightCurve,[B._p1.x,B._p1.y,B._p2.x,B._p2.y,B._p3.x,B._p3.y,B._p4.x,B._p4.y]),(B=b.point)&&"insertKnot"===b.type&&X.Icons.DrawIcon(K,r,X.Icons.ShapeHighlighPoint,B))},r.prototype._drawGuide=function(r){var K=this._guideInfo;if(K)for(var B,b,f,h=K.v,U=0;U<2;U++)if(f=0===U?K.xList:K.yList)for(B=0,b=f.length;B<b;B++)X.Icons.DrawIcon(this._interactor,r,X.Icons.ShapeGuideLine,[h.x,h.y,f[B].x,f[B].y])},r.prototype._drawCurrentPoint=function(K){if(this.activing){var r=this.activing,B=this.getCurrentSelectintStatus(),b=this._interactor;if(B!==X.Curve.PointType.Straight){var f=r.pairs,h=(r.hlpair,r.hltype,r.selections),U=r.editingCtrl;if(f&&!h)for(var a,P=0,H=f.length;P<H;P++)a=f[P],U&&P===U.pairId&&a[U.type]?X.Icons.DrawIcon(b,K,X.Icons.ShapeActivingCtrl,{point:a.point,c1:a.c1,c2:a.c2,hl:U.type}):X.Icons.DrawIcon(b,K,X.Icons.ShapeActivingCtrl,a)}X.Icons.DrawIcon(b,K,X.Icons.ShapeHighlighRealPoint,this.activing.point),h&&h.forEach(function(r){X.Icons.DrawIcon(b,K,X.Icons.ShapeHighlighRealPoint,r)})}},r.prototype.clear=function(){this.editing=null,this._guideInfo=null,this.activing=null,this.highlight=null},r.prototype._42=function(K){var r=this,B=(r.info={},r.editing||(r.screenInfo=null),r._interactor);if(B.editDetail){var b,f,h=B.gv;if(!r.target||!h.isSelected(r.target)||!h.isVisible(r.target))return B.editDetail=!1,void r.clear();r.gatherSingleTarget(h,r.target),X.Icons.DrawIcon(B,K,X.Icons.ShapeBgCurve,r.screenInfo),r._interactor.getStyle("curveElevationVisible")&&(r.target instanceof M.Polyline||r.target instanceof M.Edge&&r._interactor.getStyle("edgeElevationEditable"))&&r.activing&&(b=r.activing.getCurrentEditingPoint())&&"string"!=typeof b.e&&X.Icons.DrawIcon(B,K,X.Icons.EdgeElevationGuide,b),r._drawHighlight(K),r._drawCurrentPoint(K),r._getRealPoint().forEach(function(r){X.Icons.DrawIcon(B,K,X.Icons.ShapePoint,r)}),r._drawGuide(K),r.tipInfo&&r._interactor.getStyle("curveTipVisible")&&X.Icons.DrawIcon(B,K,X.Icons.TipHelper,r.tipInfo),r._edgeHostGuideInfo&&B._drawHostGuide(r._edgeHostGuideInfo),r.edgeEditResult&&r._drawEdgeHostHighlight(K,r.edgeEditResult.host,r.edgeEditResult.anchor),r._multiSelect&&r._multiSelect.endPoint&&((b=M.Default.unionPoint(X.toScreenPosition(h,r._multiSelect.startPoint),X.toScreenPosition(h,r._multiSelect.endPoint))).color=h.getRectSelectBorderColor(),K.save(),K.setTransform(1,0,0,1,0,0),h=Y1.devicePixelRatio,f=b.borderWidth=Math.round(h),f/=2,b.x=Math.round(b.x*h)+f,b.y=Math.round(b.y*h)+f,b.width=Math.round(b.width*h),b.height=Math.round(b.height*h),X.Icons.DrawIcon(B,K,X.Icons.SimpleRect,b),K.restore())}else r.clear()},r.prototype._drawEdgeHostHighlight=function(r,K,B){this.drawEdgeHostHighlight(r,K,B),this._interactor.redraw()},r.prototype.drawEdgeHostHighlight=function(r,K,B){if(_Y(K)){for(var b,f,h=this._interactor,U=h.gv,K=U.getDataUI(K),a=DP(K),P=[],H=0,Y=a.points.length;H<Y;H++)f=X.toScreenPosition(U,a.points.get(H)),P.push(f.x,f.y);a.segments&&(b=a.segments.toArray());for(var S=h.getStyle("edgeHostHighlighPeriod"),_=h.getStyle("edgeHostEdgeHighlighColor"),e=(X.Icons.DrawIcon(h,r,X.Icons.ShapeBgCurve,{P:P,S:b,color:_,dynamicVisible:B.index===P1,dynamicPeriod:S}),_=h.getStyle("edgeHostPointHighlighColor"),XP(K)),H=0,Y=e.length;H<Y;H++){var o=e[H],o=X.toScreenPosition(U,o);X.Icons.DrawIcon(h,r,X.Icons.ShapePoint,{point:{x:o.x,y:o.y},color:_,size:12,dynamicVisible:H===B.index,dynamicPeriod:S})}}},r.prototype._getRealPoint=function(){var B,r=this.screenInfo,b=r.P,f=r.S,h=-1,U=[],a=-1,P=f.length;return f.each(function(r){a++;var K=1;if(3===r)K=2;else if(4===r)K=3;else if(5===r)return;h+=K,B=P<=a+1||1===f.get(a+1),U.push({point:{x:b[2*h],y:b[2*h+1]},segmentIndex:a,pointIndex:h,isEnd:B})}),U},r.prototype.getEditingPointsInfo=function(r){var K=this,B=K.activing;if(!B)return!1;var b=B.point;if(!b)return!1;var f=this._getRealPoint(),h=[{screen:b}];B.selections&&B.selections.forEach(function(r){h.push({screen:r})});var U,a,P=f.length;return h.forEach(function(r){for(U=0;U<P;U++)if(a=f[U],r.screen.isNearEnough(a.point)){r.segmentIndex=a.segmentIndex,r.pointIndex=a.pointIndex,r.point=K.target.getPoints().get(a.pointIndex);break}}),r&&h.sort(function(r,K){return r.segmentIndex-K.segmentIndex}),h};(((B=X.MoveHelper=function(r){this.catalog="Move",this._interactor=r}).prototype={}).constructor=B).prototype.calcShift=function(r,K,B){var b,f=this,h=f._interactor.gv,U=h.lp(K);if("beginMove"===r&&f._gatherGridInfo(B._lastLogicalPoint||U),r=f._target){if(B=r.downPosition){var a=f._interactor.getStyle("moveSensitivity")/h._zoom;if(B.distanceTo(U)<a)return{x:0,y:0};delete r.downPosition}M.Default.isShiftDown(K)&&(U=f._dealShiftDown(U),b=r.shiftGuide.dir);var P,B=r.rawPos={x:r.pos.x+U.x-r.lp.x,y:r.pos.y+U.y-r.lp.y};if(M.Default.isCtrlDown(K))return P=f._calcShiftByAddon(),f._target.node instanceof X.Group&&((Y=f._target.node)._position.x+=P.x,Y._position.y+=P.y),P;if(a=f._interactor.rectGuide,r.node instanceof M.Data&&r.node.s("2d.attachable")&&(U=f._calcAttachNodeShift(r.node,B),a.clear(),U))return U;for(var H,Y,S=r.x+B.x,_=r.y+B.y,K={x:S,y:_},U={x:S+r.w/2,y:_+r.h/2},e={x:S+r.w,y:_+r.h},o=f._interactor.gridGuide,x=[a.findClosest(K,b),a.findClosest(U,b),a.findClosest(e,b),o.findClosest(K,b),o.findClosest(U,b),o.findClosest(e,b)],T=1/0,t=1/0,p=0,q=x.length;p<q;p++)(H=x[p])&&(S=H.x,_=H.y,isFinite(S)&&Math.abs(S)<Math.abs(T)&&(T=S),isFinite(_)&&Math.abs(_)<Math.abs(t)&&(t=_));return isFinite(T)||(T=0),isFinite(t)||(t=0),P=f._calcShiftByAddon(T,t),f._target.node instanceof X.Group&&((Y=f._target.node)._position.x+=P.x,Y._position.y+=P.y),a=r.node,oY(a,h)||f._interactor.rectGuide.gatherLines({node:a,x:r.x+(B.x+T),y:r.y+(B.y+t),w:r.w,h:r.h},b),P}},B.prototype._calcShiftByAddon=function(r,K){var B=(b=this._target).rawPos,b=b.node.getPosition();return{x:B.x-b.x+(r=r||0),y:B.y-b.y+(K=K||0)}},B.prototype._dealShiftDown=function(r){var K=this._target.shiftGuide,B=this._target.lp,b=Math.abs(r.x-B.x),f=Math.abs(r.y-B.y),h=(f<b&&b>K.limit&&"y"===K.dir&&(K.dir="x"),b<f&&f>K.limit&&"x"===K.dir&&(K.dir="y"),K.dir);return"x"===h?(r.y=B.y,K.limit=Math.max(K.limit,b)):"y"===h&&(r.x=B.x,K.limit=Math.max(K.limit,f)),r},B.prototype._isAttachableLineShape=function(r){if(!r.getSegments)return!1;var K=r.getSegments();if(!K)return!0;for(var B=1,b=(K=K instanceof M.List?K.getArray():K).length;B<b;B++)if(2!==K[B])return!1;return!0},B.prototype._calcAttachNodeShift=(hU=new i,UU=new i,aU=new i,PU=new i,function(r,K){var B=this._interactor.gv,b=r.getHost(),f=B.getDataAt(K,function(r){return!!r.s("2d.hostable")});if(f&&b!==f&&r.setHost(f),!f)return this._edgeHostGuideInfo=null,r.setHost(null);var h,U,b=this._edgeHostGuideInfo={corners:X.getTargetCornersOnScreen(B,f),host:f,attach:-1};if(!this._isAttachableLineShape(f))return(h=B.calculateAttachPoint(f,K))?(U=h.point,b.attach=h.index,this._calcShiftByAddon(U.x-K.x,U.y-K.y)):void 0;for(var a,P,H,Y,S,_,e=f.getPoints(),o=e.size(),x=f.getPointsMatrix2d(),T=1/0,t=0;t<o&&(t!==o-1||f.isClosePath());t++)0!==t?UU.copy(aU):x.apply(e.get(t),UU),x.apply(t===o-1?e.get(0):e.get(t+1),aU),hU.copy(K).sub(UU),PU.copy(aU).sub(UU),a=PU.length(),PU.divideScalar(a),(P=hU.dot(PU))<0?P=0:a<P&&(P=a),PU.multiplyScalar(P).add(UU),(H=hU.copy(K).sub(PU).lengthSq())<T&&(T=H,_=t,Y=P,S=a);return Math.sqrt(T)*B.getZoom()>this._interactor.getStyle("attachThreshold")?(r.s({"attach.index":-1}),void r.setHost(null)):(r.s("attach.offset.opposite")&&(Y=S-Y),r.s({"attach.index":_,"attach.offset":r.s("attach.offset.relative")?Y/S:Y}),{x:0,y:0})}),B.prototype._gatherGridInfo=function(r){var K,B,b=this._interactor;if((f=b._getValidSelection()).length){if(1===f.length){if(!(K=f[0]).getRect)return void(this._target=null)}else if(!(K=X.Group.findOrCreateGroup(f,b._uuid)))return void(this._target=null)}else{var f=b.gv.sm().getSelection();if(f.length&&!(K=f.get(0)).getRect)return void(this._target=null)}K&&(f=K.getPosition(),B=K.getRect(),this._target={node:K,x:B.x-f.x,y:B.y-f.y,w:B.width,h:B.height,lp:{x:r.x,y:r.y},pos:{x:f.x,y:f.y},shiftGuide:{dir:"x",limit:0},downPosition:new X.Math.Vector2(r)},b.rectGuide.gatherRects())},B.prototype.clear=function(){this._edgeHostGuideInfo=null,this._interactor.rectGuide.clear(),this._interactor._42()},B.prototype._42=function(){var r=this._edgeHostGuideInfo;r&&this._interactor._drawHostGuide(r)};var fU,hU,UU,aU,PU,HU,YU,SU,_U,eU,oU,xU,TU,tU,pU,qU,yU,kU,wU,vU,zU,NU,uU,jU,IU,LU,JU,FU,GU,dU,sU,nU,AU,VU,MU,RU,lU,CU,mU,DU,o1,iU,ZU,gU,WU,$U,XU,cU,OU,QU,EU,r5,K5,B5,b5,f5,h5,U5,a5,P5,H5,Y5,S5,_5,e5,o5,x5,T5,t5,p5,q5,y5,k5,w5,v5,z5,N5,u5,j5,I5,L5,J5,F5,G5,d5,s5,n5,A5,V5,M5,R5,l5,C5,m5,D5,i5,Z5,g5,W5,$5,X5,c5,O5,Q5,E5,rQ,KQ,BQ,bQ,fQ,hQ,UQ,aQ,PQ,HQ,YQ,SQ,_Q,eQ,oQ,xQ,TQ,tQ,pQ,qQ,yQ,kQ,wQ,vQ,zQ,NQ,uQ,jQ,IQ,LQ,JQ,FQ,GQ,dQ,sQ,nQ,AQ,VQ,MQ,RQ,lQ,CQ,mQ,DQ,iQ,ZQ,gQ=M.WebGLConstants=A.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),WQ=(HU="undefined"!=typeof WebGL2RenderingContext,YU={aliasedLineWidthRange:33902,aliasedPointSizeRange:33901,maxCombinedTextureImageUnits:35661,maxCubeMapTextureSize:34076,maxFragmentUniformVectors:36349,maxRenderBufferSize:34024,maxTextureImageUnits:34930,maxTextureSize:3379,maxVaryingVectors:36348,maxVertexAttribs:34921,maxVertexTextureImageUnits:35660,maxVertexUniformVectors:36347,maxViewportDIMs:3386},SU={max3DTextureSize:32883,maxArrayTextureLayers:35071,maxColorAttachments:36063,maxCombinedFragmentUniformComponents:35379,maxCombinedUniformBlocks:35374,maxCombinedVertexUniformComponents:35377,maxDrawBuffers:34852,maxElementIndex:36203,maxElementsIndices:33001,maxElementsVertices:33e3,maxFragmentInpuComponents:37157,maxFragmentUniformBlocks:35373,maxFragmentUniformComponents:35657,maxProgramTexelOffset:35077,maxSamples:36183,maxTextureLODBias:34045,maxTransformFeedbackInterleavedComponents:35978,maxTransformFeedbackSeparateAttribs:35979,maxTransformFeedbackSeparateComponents:35968,maxUniformBlockSize:35376,maxUniformBufferBindings:35375,maxVaryingComponents:35659,maxVertexOutputComponents:37154,maxVertexUniformBlocks:35371,maxVertexUniformComponents:35658,minProgramTexelOffset:35076},{for:function(r){var K=r._info;return K||(r._info=K=function(b,r){(r=r==P1?{}:r).version=HU&&(b instanceof WebGL2RenderingContext||"[object WebGL2RenderingContext]"===A.prototype.toString.call(b))?2:1,r.extensions=function(){for(var r={},K=b.getSupportedExtensions(),B=K.length;B--;)r[K[B]]=function(r,K){var B=P1;return function(){return B=B||r.getExtension(K)}}(b,K[B]);return r}();for(var K=A.keys(YU),B=0,f=K.length;B<f;++B)r[h=K[B]]=b.getParameter(YU[h]);if(1<r.version)for(var h,B=0,f=(K=A.keys(SU)).length;B<f;++B)r[h=K[B]]=b.getParameter(SU[h]);return r}(r,K)),K}}),$Q=(_U="undefined"!=typeof Float32Array&&new Float32Array(4),K={viewport:{def:[0,0,NaN,NaN],getter:function(r){return r.getParameter(2978)},setter:function(r,K){var B=K[2]!=K[2]?r.drawingBufferWidth-K[0]:K[2],b=K[3]!=K[3]?r.drawingBufferHeight-K[1]:K[3];r.viewport(K[0],K[1],B,b)}},dither:{def:!1,getter:function(r){return r.isEnabled(3024)},setter:function(r,K){K?r.enable(3024):r.disable(3024)}},rasterizerDiscard:{def:!1,getter:function(r){return 1<WQ.for(r).version&&r.isEnabled(35977)},setter:function(r,K){1!==WQ.for(r).version&&(K?r.enable(35977):r.disable(35977))}},lineWidth:{def:1,getter:function(r){return r.lineWidth?r.getParameter(2849):1},setter:function(r,K){r.lineWidth&&r.lineWidth(K)}},color:{clear:{def:[0,0,0,0],getter:function(r){return r.getParameter(3106)},setter:function(r,K){r.clearColor(K[0],K[1],K[2],K[3])},parse:Dt},mask:{def:[!0,!0,!0,!0],getter:function(r){return r.getParameter(3107)},setter:function(r,K){r.colorMask(K[0],K[1],K[2],K[3])}}},blend:{enabled:{def:!1,getter:function(r){return r.isEnabled(3042)},setter:function(r,K){K?r.enable(3042):r.disable(3042)}},color:{def:[0,0,0,0],getter:function(r){return r.getParameter(32773)},setter:function(r,K){r.blendColor(K[0],K[1],K[2],K[3])},parse:Dt},equation:{def:[32774,32774],getter:function(r){return[r.getParameter(32777),r.getParameter(34877)]},setter:function(r,K){r.blendEquationSeparate(K[0],K[1])},parse:function(r){var K=r.length;return 1<K?r:(_U[1]=_U[0]=1===K?r[0]:r,_U)}},func:{def:[1,gQ.ZERO,1,gQ.ZERO],getter:function(r){return[r.getParameter(32969),r.getParameter(32968),r.getParameter(32971),r.getParameter(32970)]},setter:function(r,K){r.blendFuncSeparate(K[0],K[1],K[2],K[3])},parse:function(r){return 3<r.length?r:(_U[2]=_U[0]=r[0],_U[3]=_U[1]=r[1],_U)}}},cullFace:{enabled:{def:!1,getter:function(r){return r.isEnabled(2884)},setter:function(r,K){K?r.enable(2884):r.disable(2884)}},mode:{def:1029,getter:function(r){return r.getParameter(2885)},setter:function(r,K){r.cullFace(K)}},frontFace:{def:2305,getter:function(r){return r.getParameter(2886)},setter:function(r,K){r.frontFace(K)}}},scissor:{enabled:{def:!1,getter:function(r){return r.isEnabled(3089)},setter:function(r,K){K?r.enable(3089):r.disable(3089)}},box:{def:[0,0,NaN,NaN],getter:function(r){return r.getParameter(3088)},setter:function(r,K){var B=K[2]!=K[2]?r.drawingBufferWidth-K[0]:K[2],b=K[3]!=K[3]?r.drawingBufferHeight-K[1]:K[3];r.scissor(K[0],K[1],B,b)}}},depth:{enabled:{def:!1,getter:function(r){return r.isEnabled(2929)},setter:function(r,K){K?r.enable(2929):r.disable(2929)}},clear:{def:1,getter:function(r){return r.getParameter(2931)},setter:function(r,K){r.clearDepth(K)}},mask:{def:!0,getter:function(r){return r.getParameter(2930)},setter:function(r,K){r.depthMask(K)}},range:{def:[0,1],getter:function(r){return r.getParameter(2928)},setter:function(r,K){r.depthRange(K[0],K[1])}},func:{def:513,getter:function(r){return r.getParameter(2932)},setter:function(r,K){r.depthFunc(K)}}},stencil:{enabled:{def:!1,getter:function(r){return r.isEnabled(2960)},setter:function(r,K){K?r.enable(2960):r.disable(2960)}},clear:{def:0,getter:function(r){return r.getParameter(2961)},setter:function(r,K){r.clearStencil(K)}},frontMask:{def:255,getter:function(r){return r.getParameter(2968)},setter:function(r,K){r.stencilMaskSeparate(1028,K)}},frontOp:{def:[7680,7680,7680],getter:function(r){return[r.getParameter(2964),r.getParameter(2965),r.getParameter(2966)]},setter:function(r,K){r.stencilOpSeparate(1028,K[0],K[1],K[2])}},frontFunc:{def:[519,0,255],getter:function(r){return[r.getParameter(2962),r.getParameter(2967),r.getParameter(2963)]},setter:function(r,K){r.stencilFuncSeparate(1028,K[0],K[1],K[2])}},backMask:{def:255,getter:function(r){return r.getParameter(36005)},setter:function(r,K){r.stencilMaskSeparate(1029,K)}},backOp:{def:[7680,7680,7680],getter:function(r){return[r.getParameter(34817),r.getParameter(34818),r.getParameter(34819)]},setter:function(r,K){r.stencilOpSeparate(1029,K[0],K[1],K[2])}},backFunc:{def:[519,0,255],getter:function(r){return[r.getParameter(34816),r.getParameter(36003),r.getParameter(36004)]},setter:function(r,K){r.stencilFuncSeparate(1029,K[0],K[1],K[2])}}},hint:{generateMipmap:{def:4352,getter:function(r){return r.getParameter(33170)},setter:function(r,K){r.hint(33170,K)}},fragmentShaderDerivative:{def:4352,getter:function(r){var K=WQ.for(r);return 1!==K.version||K.extensions.OES_standard_derivatives?r.getParameter(35723):4352},setter:function(r,K){var B=WQ.for(r);(1<B.version||B.extensions.OES_standard_derivatives)&&r.hint(35723,K)}}},pixelStore:{packAlignment:mt(4,3333,!1),unpackAlignment:mt(4,3317,!1),unpackFlipY:mt(!1,37440,!1),unpackPremultiplyAlpha:mt(!1,37441,!1),unpackColorspaceConversion:mt(37444,37443,!1),packRowLength:mt(0,3330,!0),packSkipPixels:mt(0,3332,!0),packSkipRows:mt(0,3331,!0),unpackRowLength:mt(0,3314,!0),unpackImageHeight:mt(0,32878,!0),unpackSkipPixels:mt(0,3316,!0),unpackSkipRows:mt(0,3315,!0),unpackSkipImages:mt(0,32877,!0)},polygonOffset:{enabled:{def:!1,getter:function(r){return r.isEnabled(32823)},setter:function(r,K){K?r.enable(32823):r.disable(32823)}},value:{def:[0,0],getter:function(r){return[r.getParameter(32824),r.getParameter(10752)]},setter:function(r,K){r.polygonOffset(K[0],K[1])}}},sampleCoverage:{enabled:{def:!1,getter:function(r){return r.isEnabled(32928)},setter:function(r,K){K?r.enable(32928):r.disable(32928)}},alpha:{def:!1,getter:function(r){return r.isEnabled(32926)},setter:function(r,K){K?r.enable(32926):r.disable(32926)}},value:{def:[1,!1],getter:function(r){return[r.getParameter(32938),r.getParameter(32939)]},setter:function(r,K){r.sampleCoverage(K[0],K[1])}}}},K=XA.create(K,function(r){return"def"in r}),Zt.prototype.reset=function(){for(var r=this._struct.children,K=r.length;K--;){var B=r[K],b=B.name;B.isLeaf?this[b]=B.desc.def:this._branches[b].reset()}},Zt.prototype.save=function(r){r==P1&&(r={});for(var K=this._struct.children,B=K.length;B--;){var b=K[B],f=b.name;b.isLeaf?r[f]=it(this._record[f]):((b=r[f])==P1&&(r[f]=b={}),this._branches[f].save(b))}return r},Zt.prototype.sync=function(r,K){for(var B=this._struct.children,b=B.length;b--;){var f=B[b],h=f.name;f.isLeaf?!K&&this._leafSync[h]||(r?this._record[h]=f.desc.getter(this.gl):f.desc.setter(this.gl,this._record[h]),this._leafSync[h]=!0):this._branches[h].sync(r,K)}},Zt.prototype.syncLoss=function(){for(var r=this._struct.children,K=r.length;K--;){var B=r[K];B.isLeaf?this._leafSync[B.name]=!1:this._branches[B.name].syncLoss()}},Zt.prototype.apply=function(r){for(var K=this._struct.children,B=K.length;B--;){var b=K[B],f=b.name;f in r&&(b.isLeaf?this[f]=r[f]:this._branches[f].apply(r[f]))}},Zt.prototype.append=function(r){var K,B=this._struct.childMap;for(K in r){var b=B[K];b&&(b.isLeaf?this[K]=r[K]:this._branches[K].append(r[K]))}},eU=function a(f){var P=[];function r(r,K){Zt.call(this,f,r,K);for(var B=P.length;B--;){var b=P[B];this._branches[b._name]=new b._type(r,this._record[b._name])}}return Nt(r,Zt),f.forEach(function(r,K){var B,b,f=r.name,h=ut(r.desc.def),U=h&&r.desc.def.length;r.isLeaf?(B=r.desc.setter,b=r.desc.parse,A.defineProperty(K,f,{configurable:!1,enumerable:!0,get:function(){return this._record[f]},set:h?function(r){b&&(r=b(r)),!function(r,K){for(var B=U,b=!1;B--;)r[B]!==K[B]&&(r[B]=K[B],b=!0);return b}(this._record[f],r)&&this._leafSync[f]||(B(this.gl,this._record[f]),this._leafSync[f]=!0)}:function(r){this._record[f]===r&&this._leafSync[f]||(B(this.gl,r),this._record[f]=r,this._leafSync[f]=!0)}})):(P.push({_name:f,_type:a(r)}),A.defineProperty(K,f,{configurable:!1,enumerable:!0,get:function(){return this._branches[f]},set:function(r){this._branches[f].apply(r)}}))},r.prototype),r}(K),function(){var P=[];if("function"==typeof Float32Array)for(var r=1;r<17;++r)P[r]=new Float32Array(r);function H(r,K,B,b){if(r)if(r.length!=P1)for(f=0;f<b;++f)K[B+f]=r[f];else r.toArray&&r.toArray(K,B);else for(var f=0;f<b;++f)K[B+f]=0}function B(r,K,B){var b=r[0];if(b<=0||0<b)return r;var f=K*B,h=P[f];if(h==P1&&(P[f]=h=new Float32Array(f)),0!==K){H(b,h,0,B);for(var U=1,a=0;U!==K;++U)H(r[U],h,a+=B,B)}return h}function K(r,K){r.uniform1iv(this.addr,K)}function b(r,K){r.uniform2iv(this.addr,K)}function f(r,K){r.uniform3iv(this.addr,K)}function h(r,K){r.uniform4iv(this.addr,K)}var U=[0,1],a=[];function Y(r,K,B){a[r]=[K,B]}Y(5126,function(r,K){var B=this.cache;B[0]!==K&&(r.uniform1f(this.addr,K),B[0]=K)},function(r,K){r.uniform1fv(this.addr,K)}),Y(35664,function(r,K){var B,K=K.x!=P1?(B=K.x,K.y):(B=K[0],K[1]),b=this.cache;b[0]===B&&b[1]===K||(r.uniform2f(this.addr,B,K),b[0]=B,b[1]=K)},function(r,K){K=B(K,this.size,2),r.uniform2fv(this.addr,K)}),Y(35665,function(r,K){K=(K="string"==typeof K?DN(K):K).x!=P1?(B=K.x,b=K.y,K.z):K.r!=P1?(B=K.r,b=K.g,K.b):K.red!=P1?(B=K.red,b=K.green,K.blue):(B=K[0],b=K[1],K[2]);var B,b,f=this.cache;f[0]===B&&f[1]===b&&f[2]===K||(r.uniform3f(this.addr,B,b,K),f[0]=B,f[1]=b,f[2]=K)},function(r,K){K=B(K,this.size,3),r.uniform3fv(this.addr,K)}),Y(35666,function(r,K){K=(K="string"==typeof K?DN(K):K).x!=P1?(B=K.x,b=K.y,f=K.z,K.w):K.r!=P1?(B=K.r,b=K.g,f=K.b,K.a):K.red!=P1?(B=K.red,b=K.green,f=K.blue,K.alpha):(B=K[0],b=K[1],f=K[2],K[3]==H1?1:K[3]);var B,b,f,h=this.cache;h[0]===B&&h[1]===b&&h[2]===f&&h[3]===K||(r.uniform4f(this.addr,B,b,f,K),h[0]=B,h[1]=b,h[2]=f,h[3]=K)},function(r,K){K=B(K,this.size,4),r.uniform4fv(this.addr,K)}),Y(5124,function(r,K){var B=this.cache;B[0]!==K&&(r.uniform1i(this.addr,K),B[0]=K)},K),Y(35667,b,b),Y(35668,f,f),Y(35669,h,h),Y(35670,function(r,K){var B=this.cache;B[0]!==(K=U[K?1:0])&&(r.uniform1i(this.addr,K),B[0]=K)},K),Y(35671,b,b),Y(35672,f,f),Y(35673,h,h),Y(35674,function(r,K){var B=P[4];B.set(K,0),r.uniformMatrix2fv(this.addr,!1,B)},function(r,K){r.uniformMatrix2fv(this.addr,!1,B(K,this.size,4))}),Y(35675,function(r,K){var B=P[9];B.set(K,0),r.uniformMatrix3fv(this.addr,!1,B)},function(r,K){r.uniformMatrix3fv(this.addr,!1,B(K,this.size,9))}),Y(35676,function(r,K){var B=P[16];B.set(K,0),r.uniformMatrix4fv(this.addr,!1,B)},function(r,K){r.uniformMatrix4fv(this.addr,!1,B(K,this.size,16))}),Y(35678,function(r,K){r.uniform1i(this.addr,this.slots[0]),r.activeTexture(33984+this.slots[0]),r.bindTexture(3553,K||r._emptyTexture)},function(r,K){r.uniform1iv(this.addr,this.slots);for(var B=this.slots.length;B--;)r.activeTexture(33984+this.slots[B]),r.bindTexture(3553,K[B]||r._emptyTexture)}),Y(35680,function(r,K){r.uniform1i(this.addr,this.slots[0]),r.activeTexture(33984+this.slots[0]),r.bindTexture(34067,K||r._emptyCubeTexture)},function(r,K){r.uniform1iv(this.addr,this.slots);for(var B=this.slots.length;B--;)r.activeTexture(33984+this.slots[B]),r.bindTexture(34067,K[B]||r._emptyCubeTexture)});var p=/([\w\d_]+)(\])?(\[|\.)?/g;function q(r,K,B,b,f){this.name=r,this.addr=K,this.cache=[],this.size=b?B.size:0,this.activeInfo=B,this.setter=a[B.type][b?1:0],this.slots=function(r,K,B){switch(r.type){case 35678:case 35680:if("uSampler"===B)return[0];if("uBlendSampler"===B)return[1];for(var b=r.size,f=new Int32Array(b),h=0;h<b;++h)f[h]=K.usedTextureSlot++;return f}return P1}(B,f,r),$A(this)}function y(r,K,B){this.gl=K,this._program=B,this._leaves={},this._branches={},this._struct=r}function S(r,K){for(var B=r.getProgramParameter(K,35718),b={},f={usedTextureSlot:2};B--;){var h=r.getActiveUniform(K,B),U=h.name,a=(T=e=x=H=void 0,h),P=r.getUniformLocation(K,U),H=b,Y=f,S=a.name,_=S.length;for(p.lastIndex=0;;){var e=p.exec(S),o=p.lastIndex,x=e[1],T="]"===e[2];if(T&&(x|=0),(e=e[3])===P1||"["===e&&o+2===_){H[x]=new q(x,P,a,e!==P1,Y);break}(T=H[x])==P1&&(H[x]=T={}),H=T}}var t=function f(h){var U=[];function r(r,K){y.call(this,h,r,K);for(var B=U.length;B--;){var b=U[B];this._branches[b._name]=new b._type(r,K)}this.uuid=D.generateUUID()}return Nt(r,y),h.forEach(function(r,K){var B,b=r.name;r.isLeaf?(B=jt("d.setter(this.gl, v);",["v"],["d"],[r.desc]),A.defineProperty(K,b,{configurable:!1,enumerable:!0,get:function(){return B},set:B})):(U.push({_name:b,_type:f(r)}),A.defineProperty(K,b,{configurable:!1,enumerable:!0,get:function(){return this._branches[b]},set:function(r){this._branches[b].apply(r)}}))},r.prototype),r}(XA.create(b,function(r){return"addr"in r}));return A.defineProperty(t.prototype,"textureCount",{configurable:!1,enumerable:!1,writable:!1,value:f.usedTextureSlot}),new t(r,K)}return y.prototype.apply=function(r,K){for(var B=this._struct.children,b=B.length;b--;){var f,h=B[b],U=h.name,a=h.desc.activeInfo;if(K){if((f=K(r,U,a?a.type:null))===P1)continue}else{if(!(U in r))continue;f=r[U]}h.isLeaf?this[U]=f:this._branches[U].apply(f)}},y.prototype.append=function(r){var K,B=this._struct.childMap;for(K in r){var b=B[K];b&&(b.isLeaf?this[K]=r[K]:this._branches[K].append(r[K]))}},function(r,K){var B=K._uniforms;return B||(K._uniforms=B=S(r,K)),B}}()),XQ=function(){for(var f=[],r=1;r<17;++r)f[r]=new aA(r);function H(r,K,B,b){for(var f=B?1:0,h=K.addr,U=r._4MQ,a=0;a<b;a++)(U[h+a]||0)!==f&&(U[h+a]=f,r.vertexAttribDivisor(h+a,f))}var b=[],Y="undefined"!=typeof WebGLBuffer&&WebGLBuffer.prototype;function K(r,U,a,P){b[r]=function(r,K,B,b,f,h){this.addr==P1||this.addr<0||(K==P1||!1===K?P(r,this.addr):WA(K)===Y?a(this,r,K,K.glType,b,f,h):(P(r,this.addr),U(this,r,K)))}}function B(r,K){r.disableVertexAttribArray(K)}function a(r,K,B){this.name=r,this.addr=K,this.activeInfo=B,this.setter=b[B.type],$A(this)}function P(r,K,B){this.gl=K,this.program=B,this._branches={},this._struct=r}return K(5126,function(r,K,B){K.vertexAttrib1f(r.addr,B)},function(r,K,B,b,f,h,U){K.bindBuffer(34962,B);var a=r.addr;K.enableVertexAttribArray(a),H(K,r,B.instanced,1),K.vertexAttribPointer(a,1,b||5126,!!f,h||0,U||0),K.bindBuffer(34962,null)},B),K(35664,function(r,K,B){var b;B.x!=P1?K.vertexAttrib2f(r.addr,B.x,B.y):((b=f[2]).set(B,0),K.vertexAttrib2fv(r.addr,b))},function(r,K,B,b,f,h,U){K.bindBuffer(34962,B);var a=r.addr;K.enableVertexAttribArray(a),H(K,r,B.instanced,1),K.vertexAttribPointer(a,2,b||5126,!!f,h||0,U||0),K.bindBuffer(34962,null)},B),K(35665,function(r,K,B){var b;B.x!=P1?K.vertexAttrib3f(r.addr,B.x,B.y,B.z):B.r!=P1?K.vertexAttrib3f(r.addr,B.r,B.g,B.b):B.red!=P1?K.vertexAttrib3f(r.addr,B.red,B.green,B.blue):((b=f[3]).set(B,0),K.vertexAttrib3fv(r.addr,b))},function(r,K,B,b,f,h,U){K.bindBuffer(34962,B);var a=r.addr;K.enableVertexAttribArray(a),H(K,r,B.instanced,1),K.vertexAttribPointer(a,3,b||5126,!!f,h||0,U||0),K.bindBuffer(34962,null)},B),K(35666,function(r,K,B){var b;(B="string"==typeof B?DN(B):B).x!=P1?K.vertexAttrib4f(r.addr,B.x,B.y,B.z,B.w):B.r!=P1?K.vertexAttrib4f(r.addr,B.r,B.g,B.b,B.a):B.red!=P1?K.vertexAttrib4f(r.addr,B.red,B.green,B.blue,B.alpha):((b=f[4]).set(B,0),K.vertexAttrib4fv(r.addr,b))},function(r,K,B,b,f,h,U){K.bindBuffer(34962,B);var a=r.addr;K.enableVertexAttribArray(a),H(K,r,B.instanced,1),K.vertexAttribPointer(a,4,b||5126,!!f,h||0,U||0),K.bindBuffer(34962,null)},B),K(35674,function(r,K,B){B=B.el||B;for(var b=0,f=0;b<2;++b)K.vertexAttrib2f(r.addr,B[f++],B[f++])},function(r,K,B,b,f,h,U){var h=h||16,U=U||0,a=r.addr;K.bindBuffer(34962,B),K.enableVertexAttribArray(a),K.vertexAttribPointer(a,2,b||5126,!!f,h,U),K.enableVertexAttribArray(a+1),K.vertexAttribPointer(a+1,2,b||5126,!!f,h,U+8),H(K,r,B.instanced,2),K.bindBuffer(34962,null)},function(r,K){r.disableVertexAttribArray(K),r.disableVertexAttribArray(K+1)}),K(35675,function(r,K,B){B=B.el||B;for(var b=0,f=0;b<3;++b)K.vertexAttrib3f(r.addr,B[f++],B[f++],B[f++])},function(r,K,B,b,f,h,U){var h=h||36,U=U||0,a=r.addr;K.bindBuffer(34962,B);for(var P=0;P<3;P++)K.enableVertexAttribArray(a+P),K.vertexAttribPointer(a+P,3,b||5126,!!f,h,U+12*P);H(K,r,B.instanced,3),K.bindBuffer(34962,null)},function(r,K){r.disableVertexAttribArray(K),r.disableVertexAttribArray(K+1),r.disableVertexAttribArray(K+2)}),K(35676,function(r,K,B){B=B.el||B;for(var b=0,f=0;b<4;++b)K.vertexAttrib4f(r.addr,B[f++],B[f++],B[f++],B[f++])},function(r,K,B,b,f,h,U){var h=h||64,U=U||0,a=r.addr;K.bindBuffer(34962,B);for(var P=0;P<4;P++)K.enableVertexAttribArray(a+P),K.vertexAttribPointer(a+P,4,b||5126,!!f,h,U+16*P);H(K,r,B.instanced,4),K.bindBuffer(34962,null)},function(r,K){r.disableVertexAttribArray(K),r.disableVertexAttribArray(K+1),r.disableVertexAttribArray(K+2),r.disableVertexAttribArray(K+3)}),P.prototype.disable=function(){for(var r=this._struct.children,K=r.length;K--;){var B=r[K],b=B.name;B.isLeaf?this[b]=P1:this._branches[b].disable()}},P.prototype.apply=function(r,K){for(var B=this._struct.children,b=B.length;b--;){var f,h=B[b],U=h.name;if(K){if((f=K(r,U,h))===P1)continue}else{if(!(U in r))continue;f=r[U]}h.isLeaf?this[U]=f:this._branches[U].apply(f)}},P.prototype.append=function(r){var K,B=this._struct.childMap;for(K in r){var b=B[K];b&&(b.isLeaf?this[K]=r[K]:this._branches[K].append(r[K]))}},function(r,K){var B=K._attribs;return B||(K._attribs=B=function(r,K){for(var B=r.getProgramParameter(K,35721),b={};B--;){var f=r.getActiveAttrib(K,B),h=f.name,U=r.getAttribLocation(K,h);0<=U&&(b[h]=new a(h,U,f))}return new(function f(h){var U=[];function r(r,K){P.call(this,h,r,K);for(var B=U.length;B--;){var b=U[B];this._branches[b._name]=new b._type(r,K)}}return Nt(r,P),h.forEach(function(r,K){var B,b=r.name;r.isLeaf?(B=jt("d.setter(this.gl, v);",["v"],["d"],[r.desc]),A.defineProperty(K,b,{configurable:!1,enumerable:!0,get:function(){return B},set:B})):(U.push({_name:b,_type:f(r)}),A.defineProperty(K,b,{configurable:!1,enumerable:!0,get:function(){return this._branches[b]},set:function(r){this._branches[b].apply(r)}}))},r.prototype),r}(XA.create(b,function(r){return"addr"in r})))(r,K)}(r,K)),B}}(),x1=function(r){var K;A.defineProperties(this,{gl:{configurable:!1,enumerable:!1,value:r,writable:!1},glState:{configurable:!1,enumerable:!1,value:((K=(r=r)._state)||(r._state=K=new eU(r)),K),writable:!1}}),this._currProgram=P1,this._currUniforms=P1,this._currAttribs=P1,this._sync=!0},cQ=(A.defineProperties(x1.prototype,{program:{configurable:!1,enumerable:!1,get:function(){return this._currProgram},set:function(r){this._sync&&r===this._currProgram||(this.gl.useProgram(r),this._currProgram=r,this._currUniforms=$Q(this.gl,r),this._currAttribs=XQ(this.gl,r),this._sync=!0)}},uniforms:{configurable:!1,enumerable:!1,get:function(){return this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currUniforms},set:function(r){this._currUniforms&&(this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currUniforms.apply(r))}},attribs:{configurable:!1,enumerable:!1,get:function(){return this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currAttribs},set:function(r){this._currUniforms&&(this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currAttribs.apply(r))}}}),x1.prototype.useProgram=function(r){this._sync&&r===this._currProgram||(this.gl.useProgram(r),this._currProgram=r,this._currUniforms=$Q(this.gl,r),this._currAttribs=XQ(this.gl,r),this._sync=!0)},x1.prototype.directState=function(){return this.glState},x1.prototype.directUniforms=function(){return this._currUniforms},x1.prototype.directAttribs=function(){return this._currAttribs},x1.prototype.syncLoss=function(){this._sync=!1,this.glState.syncLoss()},x1.for=function(r){var K=r._renderState;return K||(r._renderState=K=new x1(r)),K},"light.color"),OQ=4294967295,QQ=0,EQ={},r6={},K6=function(r){var K;if(r=Y1.convertShape3dModelName(r),PY(r)){if(r.modelType){if(r.uuid){if(K=jK[r.uuid])return K}else r.uuid=M.Math.generateUUID();return K!==P1||_m&&_m[r.uuid]||Tm(r.uuid,r),P1}return r}return K=jK[r],r&&K===P1&&nK.test(r)&&(_m&&_m[r]||(xm(r,r),K=jK[r])),K},B6="undefined"!=typeof WebGLTexture&&WebGLTexture.prototype,b6=function(r){return r&&WA(r)===B6},f6=function(r,K){r.frameStack?r.frameStack.push(K):r.frameStack=[K],r.bindFramebuffer(36160,K)},h6=function(r){var K=r.frameStack;if(K){if(K.pop(),K.length)return void r.bindFramebuffer(36160,K[K.length-1]);r.frameStack=null}r.bindFramebuffer(36160,null)},U6=(qY(Y1,{graph3dViewAttributes:H1,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:F/60,graph3dViewSortable:!1,graph3dViewOpaqueSortable:!1,graph3dViewBlockSelectable:!0,graph3dViewEditHelperDisabled:!1,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:KK,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewRotateMaxPhi:F,graph3dViewRotateMinPhi:0,graph3dViewShadowDisabled:!0,graph3dViewShadowQuality:"high",graph3dViewShadowIntensity:.3,graph3dViewShadowBias:-.005,graph3dViewShadowRadius:.1,graph3dViewShadowType:"hard",graph3dViewShadowDegreeX:30,graph3dViewShadowDegreeZ:-10,graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewSyncEyeWithOrthoWidth:!1,graph3dViewFovy:F/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewDataNumWarningLine:1e4,graph3dViewHeadlightDirection:"camera",graph3dViewHeadlightRange:0,graph3dViewHeadlightGroup:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewHeadlightAmbientIntensity:.7,graph3dViewHeadlightRatioForPhysicalMaterial:.5,graph3dViewFogDisabled:!0,graph3dViewFogMode:"linear",graph3dViewFogDensity:5e-4,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewPickerResolution:.5,graph3dViewDashDisabled:!0,graph3dViewUvClipEnabled:!1,graph3dViewTransmissionEnabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,graph3dViewBatchInstancedDisabled:!0,graph3dViewFlowBlendMode:"addRGB",graph3dViewEnvmapType:"legacy",graph3dMaxVectorCacheTime:50,graph3dEnvmapCapabilityRequire:8,setShape3dModel:function(r,K){_1(K)&&nK.test(K)?xm(r,K):PY(K)&&K.modelType?Tm(r,K):K===P1?delete jK[r]:jK[r]=K},getShape3dModel:K6,convertShape3dModelName:function(r){return r},getShape3dModelMap:function(){return jK},getCachedShape3dModelMap:function(){return IK},createMatrix:function(r,K){for(var B=(r=YY(r)?r:[r]).length-1;0<=B;B--){var b=r[B];K=vA(b.mat,b.s3,b.r3,b.rotationMode,b.t3,K)}return K},transformVec:xA,glBindFrame:f6,glUnbindFrame:h6,createBoxModel:function(){return{vs:km,ns:zm,uv:vm,is:wm}},createRoundRectModel:function(r,K){return Am.roundRect(r,K)},createStarModel:function(r,K){return Am.star(r,K)},createRectModel:function(r,K){return Am.rect(r,K)},createTriangleModel:function(r,K){return Am.triangle(r,K)},createRightTriangleModel:function(r,K){return Am.rightTriangle(r,K)},createParallelogramModel:function(r,K){return Am.parallelogram(r,K)},createTrapezoidModel:function(r,K){return Am.trapezoid(r,K)},createSmoothSphereModel:function(r,K,B,b,f,h,U){return OP(new zO(r,K,B,b,f,h,U))},createSphereModel:function(r,K,B,b,f,h,U){return r?Im(r,K,B,b,f,h,U):Y1.createSmoothSphereModel()},createSmoothConeModel:function(r,K,B,b,f){return dm(r,K,B,b,f)},createConeModel:function(r,K,B,b,f,h,U,a){return r?sm(r,K,B,b,f,h,U,a):dm(h)},createSmoothCylinderModel:function(r,K,B,b,f,h,U,a){return OP(new vO(r,K,B,b,f,h,U,a))},createCylinderModel:function(r,K,B,b,f,h,U,a){return r?Gm(r,K,B,b,f,h,U,a):Fm(h,U)},createSmoothTorusModel:function(r,K,B,b,f,h){return OP(new NO(r,K,B,b,f,h))},createTorusModel:function(r,K,B,b,f,h,U,a){return r?Jm(r,K,B,b,f,h,U,a):Lm(h,U)},createExtrusionModel:function(r,K,B,b,f,h,U,a){return nm(r,K,B,b,f,h,U,a)},createSmoothRingModel:function(r,K,B,b,f,h){for(var U=[],a=0;a<r.length-1;a+=2)U.push({x:r[a],y:r[a+1]});for(r=XN(U,K,B)[0],U=[],a=0;a<r.length;a++){var P=r[a];U.push(new e1(P.x,0,P.y))}return OP(new IO(U,h,b,f))},createTextGeometry:function(r,K){var B=OP(new LO(r,K));if(K.cube)for(var K=(r=function(r){for(var K,B,b,f,h,U,a=YY(r)?r:[r],P=1/0,H=1/0,Y=1/0,S=-1/0,_=-1/0,e=-1/0,o=["vs","top_vs","bottom_vs"],x=0,T=a.length;x<T;x++)for(U=a[x],K=0,B=o.length;K<B;K++)if(h=U[o[K]])for(b=0,f=h.length;b<f;b+=3)P=b1(P,h[b]),H=b1(H,h[b+1]),Y=b1(Y,h[b+2]),S=B1(S,h[b]),_=B1(_,h[b+1]),e=B1(e,h[b+2]);return r.boundingBox={min:{x:P,y:H,z:Y},max:{x:S,y:_,z:e}}}(B)).min,r=r.max,b=K.x,f=K.y,h=K.z,U=r.x-b||1,a=r.y-f||1,P=r.z-h||1,H=["vs","top_vs","bottom_vs"],Y=0,S=H.length;Y<S;Y++){var _=B[H[Y]];if(_)for(var e=0,o=_.length;e<o;e+=3)_[e]=(_[e]-b)/U-.5,_[e+1]=(_[e+1]-f)/a-.5,_[e+2]=(_[e+2]-h)/P-.5}return B},loadFontFace:function(r,b){Y1.xhrLoad(r,function(K){if(!K)return b();var B;try{B=JSON.parse(K)}catch(r){B=JSON.parse(K.substring(65,K.length-2))}xO.loadFace(B),b&&b(B.familyName.toLowerCase())},b?null:{sync:!0})},createRingModel:function(r,A,V,K,B,b,f,h,U,a){for(var P=[],H=0;H<r.length-1;H+=2)P.push({x:r[H],y:r[H+1]});b=b||Y1.shapeSide,f=f||0,h=h||b;var Y,S,_,e,o,x,T,t,p,q,y,k,w,v,z,N,u,j=[],I=[],L=U?[]:H1,J=U?[]:H1,F=a?[]:H1,G=a?[]:H1,d=K?[]:H1,M=K?[]:H1,R=B?[]:H1,l=B?[]:H1,r=XN(P,A,V),C=VY(r),s=0,n=2*Math.PI/b;return r.forEach(function(r){if(1<(_=r.length)){if(e=r[0],K)for(x=e.x,t=e.y,H=f;H<h;H++)w=(y=H+1)*n,v=S1(k=H*n),z=f1(k),N=S1(w),u=f1(w),d.push(v*x,t,-z*x,N*x,t,-u*x,0,t,0),M.push(.5-.5*v,.5-.5*z,.5-.5*N,.5-.5*u,.5,.5);for(q=0;q<_;q++){for(o=r[q],x=e.x,T=o.x,t=e.y,p=o.y,Y=s/C,s+=R9(e,o),S=s/C,H=f;H<h;H++)w=(y=H+1)*n,v=S1(k=H*n),z=f1(k),N=S1(w),u=f1(w),j.push(v*T,p,-z*T,N*T,p,-u*T,v*x,t,-z*x,N*T,p,-u*T,N*x,t,-u*x,v*x,t,-z*x),I.push(H/b,S,y/b,S,H/b,Y,y/b,S,y/b,Y,H/b,Y),U&&H===f&&(L.push(0,t,0,0,p,0,v*T,p,-z*T,v*T,p,-z*T,v*x,t,-z*x,0,t,0),J.push(0,.5-t,0,.5-p,2*T,.5-p,2*T,.5-p,2*x,.5-t,0,.5-t)),a&&y===h&&(F.push(0,t,0,N*T,p,-u*T,0,p,0,N*T,p,-u*T,0,t,0,N*x,t,-u*x),G.push(1,.5-t,1-2*T,.5-p,1,.5-p,1-2*T,.5-p,1,.5-t,1-2*x,.5-t));e=o}if(B)for(x=e.x,t=e.y,H=f;H<h;H++)w=(y=H+1)*n,v=S1(k=H*n),z=f1(k),N=S1(w),u=f1(w),R.push(N*x,t,-u*x,v*x,t,-z*x,0,t,0),l.push(.5-.5*N,.5+.5*u,.5-.5*v,.5+.5*z,.5,.5)}}),{vs:j,uv:I,bottom_vs:R,bottom_uv:l,top_vs:d,top_uv:M,from_vs:L,from_uv:J,to_vs:F,to_uv:G}}},!0),qY(T1,{"3d.move.mode":P1,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"3d.clip.direction":null,"3d.clip.percentage":1,"3d.reflectable":!0,"shape.border.gradient.color":P1,"edge.gradient.color":P1,"edge.source.t3":P1,"edge.target.t3":P1,"light.type":"point","light.group":0,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":F/4,"light.range":0,"light.exponent":1,"light.intensity":1,"light.rotation.enable":!1,"light.size":[100,100],"light.specular.disable":!1,"light.mask":OQ,"headlight.ambientIntensity":P1,"wf.visible":!1,"wf.width":1,"wf.fog":!0,"wf.group":0,"wf.color":Ms,"wf.short":!1,"wf.mat":P1,"wf.boundingBox":!1,"wf.material":null,"wf.geometry":!1,"wf.loadQuadWireframe":!1,"wf.combineTriangle":!0,"wf.normEpsilon":P1,batch:P1,static:P1,"static.group":0,"transparent.mask":!1,"transparent.separate":!1,brightness:P1,"select.brightness":.7,"repeat.uv.length":P1,"rotate.uv.length":P1,"rotate.vs.length":P1,"shadow.cast":!0,"shadow.receive":!0,"3d.clipbox":P1,"3d.clipbox.mask":OQ,"3d.clipbox.group":0,"3d.clipbox.shape":"cube","effect.flow":!1,"effect.flow.gradient":"spread.horizontal","effect.flow.uvshape":"rect","effect.flow.size":512,"effect.flow.group":0,"effect.flow.intensity":1,"effect.flow.blend":P1,"effect.flow.mask":OQ,bloom:!1,envmap:0,"envmap.probe":0,roughness:0,renderTextureSamples:4,alphaTest:.4,autorotate:!1,fixSizeOnScreen:!1,"texture.cache":!1,"hide.overlapping.group":P1,"vector.dynamic":!1,"vector.dynamic.maxsize":2048,"texture.scale":1,"geometry.cache":!1,"highlight.mode":!1,"highlight.type":"hard","highlight.visible":!0,"highlight.width":.8,"highlight.color":"rgba(190, 210, 250, 1)","highlight.glow":.8,"highlight.strength":2,"color.empty":[0,0,0,0],matDef:P1,"shape3d.material":P1,"shape3d.top.material":P1,"shape3d.bottom.material":P1,"shape3d.from.material":P1,"shape3d.to.material":P1,"label.face":Q1,"label.t3":P1,"label.r3":P1,"label.texture.scale":2,"label.rotationMode":UO,"label.light":!1,"label.blend":P1,"label.reverse.flip":!1,"label.reverse.color":us,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":Q1,"label2.t3":P1,"label2.r3":P1,"label2.texture.scale":2,"label2.rotationMode":UO,"label2.light":!1,"label2.blend":P1,"label2.reverse.flip":!1,"label2.reverse.color":us,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":Q1,"note.t3":P1,"note.r3":P1,"note.texture.scale":2,"note.rotationMode":UO,"note.light":!1,"note.blend":P1,"note.reverse.flip":!1,"note.reverse.color":us,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":Q1,"note2.t3":P1,"note2.r3":P1,"note2.texture.scale":2,"note2.rotationMode":UO,"note2.light":!1,"note2.blend":P1,"note2.reverse.flip":!1,"note2.reverse.color":us,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,"part.boundingBox":!1,shape3d:P1,"shape3d.color":o,"shape3d.top.color":P1,"shape3d.bottom.color":P1,"shape3d.from.color":P1,"shape3d.to.color":P1,"shape3d.image":P1,"shape3d.image.projection":P1,"shape3d.top.image":P1,"shape3d.bottom.image":P1,"shape3d.from.image":P1,"shape3d.to.image":P1,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":P1,"shape3d.side.to":P1,"shape3d.smooth":P1,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":P1,"shape3d.opacity":P1,"shape3d.reverse.flip":!1,"shape3d.reverse.color":us,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":P1,"shape3d.uv.scale":P1,"shape3d.uv.rotation":P1,"shape3d.uv.anchor":P1,"shape3d.uv.union":P1,"shape3d.top.uv.offset":P1,"shape3d.top.uv.scale":P1,"shape3d.top.uv.rotation":P1,"shape3d.top.uv.anchor":P1,"shape3d.bottom.uv.offset":P1,"shape3d.bottom.uv.scale":P1,"shape3d.bottom.uv.rotation":P1,"shape3d.bottom.uv.anchor":P1,"shape3d.from.uv.offset":P1,"shape3d.from.uv.scale":P1,"shape3d.from.uv.rotation":P1,"shape3d.from.uv.anchor":P1,"shape3d.to.uv.offset":P1,"shape3d.to.uv.scale":P1,"shape3d.to.uv.rotation":P1,"shape3d.to.uv.anchor":P1,"shape3d.top.cap":P1,"shape3d.bottom.cap":P1,"shape3d.start.angle":0,"shape3d.sweep.angle":h1,"shape3d.point.epsilon":1e-6,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"shape3d.transmission":P1,"shape3d.reflector":!1,"shape3d.reflector.color":"rgb(128,128,128)","shape3d.reflector.blur":0,"shape3d.reflector.blur.iterations":1,"shape3d.reflector.background":null,"shape3d.reflector.clip":.003,"shape3d.reflector.shadow":"scene","shape3d.reflector.visible":!0,"shape3d.reflector.ratio":1,"camera.type":"perspective","camera.aspect":1,"camera.fovy":P1,"camera.ortho.width":P1,"camera.near":P1,"camera.far":P1,"camera.background":0,"camera.clear":!0,"camera.renderSky":!0,"camera.renderShadowMap":!0,"camera.renderAxis":!1,"camera.renderGrid":!1,"camera.renderEdit":!1,"camera.onlySky":!1,"camera.skybox.blur":P1,"skybox.blur.size":0,"skybox.blur.resolution":0,"texture.mipmap.max":P1,"texture.filter":P1,"texture.filter.min":P1,"texture.filter.mag":P1,"texture.wrap":P1,"texture.flipY":!1,"points.image":"rect","points.color":"white","points.transparent":!1,"points.size":20,"points.opacity":1,"points.uv.scale":[1,1],"points.uv.offset":[0,0],"points.discard.selectable":!1,"all.light":!0,"all.visible":!0,"all.color":o,"all.image":P1,"all.blend":P1,"all.opacity":P1,"all.reverse.flip":!1,"all.reverse.color":us,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":P1,"all.uv.offset":P1,"all.uv.scale":P1,"all.uv.rotation":P1,"all.uv.anchor":P1,"all.uv.union":P1,"all.discard.selectable":!0,"all.material":P1,mat:P1,"left.mat":P1,"right.mat":P1,"top.mat":P1,"bottom.mat":P1,"front.mat":P1,"back.mat":P1,"edge.source.anchor.elevation":P1,"edge.target.anchor.elevation":P1,"edge.source.offset.elevation":0,"edge.target.offset.elevation":0,"3d.bone.visible":!1},!0),[0,0,0,0]),a6=function(r){return r instanceof Sq},P6=function(r){return[r.x,r.e||0,r.y]},H6=function(r,K,B){for(var b=(K=DN(K||0))[0],f=K[1],h=K[2];B--;)r.push(b,f,h)},Y6=function(r,K,B){for(var b=(K=DN(K||0))[0],f=K[1],h=K[2],U=K[3];B--;)r.push(b,f,h,U)},S6=function(r,K,B){if(K)for(var b,f,h,U=K[0],a=K[1],P=K[2],H=K[4],Y=K[5],S=K[6],_=K[8],e=K[9],o=K[10],x=K[12],T=K[13],t=K[14],p=B.length,q=0,q=0;q<p;q+=3)b=B[q],f=B[q+1],h=B[q+2],r.push(U*b+H*f+_*h+x,a*b+Y*f+e*h+T,P*b+S*f+o*h+t);else tY(r,B);return r},_6=function(r,K,B){var b=K.s("light.intensity"),f=(U=DN(K.s(cQ)))[0],h=U[1],U=U[2],b=(1!==b&&(f*=b,h*=b,U*=b),K.s("light.disabled"));r.push(f,h,U,b?1:0),B.c.push(f,h,U),B.g.push(b?-1:K.s("light.group")),B.e.push(b?1:0)},e6=(GU=new e1,dU=new lH,function(r,K){return GU.copy(r).applyEuler(K.getEuler(dU)),[GU.x,GU.y,GU.z]}),o6=function(r,K,B,b){if((b=b===P1?r._headlightAmbientIntensity:b)!==K._lastHeadlightAmbientIntensity&&(K.uHeadlightAmbientIntensity=K._lastHeadlightAmbientIntensity=b),B!==K._lastLightMask&&(K._lastLightMask=B,b=r._lastLightUploadInfo)){for(var f,h=b.g,U=b.e,a=h.length,P=new Array(a),H=!1,Y=0;Y<a;Y++)f=h[Y],(P[Y]=!(f<0||32<=f)&&B&1<<f?0:1)!==U[Y]&&(H=!0);if(H){b.e=U=P;var S,_=b.c,b=(K.uHeadlightColor=[_[0],_[1],_[2],U[0]],r._59O),e=r._spots,r=r._dirs,o=3,x=1;if(a=b.length){for(Y=0,S=[];Y<a;Y++)S.push(_[o++],_[o++],_[o++],U[x++]);K.uPointColor=S}if(a=e.length){for(Y=0,S=[];Y<a;Y++)S.push(_[o++],_[o++],_[o++],U[x++]);K.uSpotColor=S}if(a=r.length){for(Y=0,S=[];Y<a;Y++)S.push(_[o++],_[o++],_[o++],U[x++]);K.uDirColor=S}}}},x6=function(r,K){return Math.max(r.getRotateMinPhi()+fA,Math.min(r.getRotateMaxPhi()-fA,K))},T6=function(){return.05+s1()/2},t6=function(r,K,B,b){var f=r.getEye(),r=(r.isOrtho()?((h=PA(r.getCenter(),f))[0]+=b[0],h[1]+=b[1],h[2]+=b[2]):h=f,K),f=B,K=b,B=h,b=YA(r,f),h=PA(B,K,!0),r=YA(h,f);return j1(r)<fA?H1:(B=(b-YA(K,f))/r,[K[0]+h[0]*B,K[1]+h[1]*B,K[2]+h[2]*B])},p6=function(r,K){return{x:2*r.x-K.x,y:2*r.y-K.y}},q6=function(r,K,B,b){if(!r)return h=d1(K.y-B.y,B.x-K.x),{x:K.x+b*f1(h),y:K.y+b*S1(h)};if(!B)return h=d1(r.y-K.y,K.x-r.x),{x:K.x+b*f1(h),y:K.y+b*S1(h)};var f,h,U,a,P=PA([r.x,r.y,0],[K.x,K.y,0],!0),H=PA([B.x,B.y,0],[K.x,K.y,0],!0),Y=-(P[0]+H[0])/2,S=-(P[1]+H[1])/2,_=u1(Y*Y+S*S);return _<fA?(h=d1(r.y-K.y,K.x-r.x),{x:K.x+b*f1(h),y:K.y+b*S1(h)}):(f=r.x-K.x,r=r.y-K.y,U=B.x-K.x,a=B.y-K.y,f=u1(f*f+r*r),r=u1(U*U+a*a),h=I1(YA(P,H))/2,U=0<P[1]*H[0]-P[0]*H[1]?-1:1,Y/=_,S/=_,a=b/f1(h),P=B1(f,r)/S1(h),_=Math.min(a,P),H={x:K.x+U*_*Y,y:K.y+U*_*S},B.b&&a>r/S1(h)&&(H.adjust=!0),H)},y6=function(r){var K=r[0],B=r[1],b=r[2],f=r[3],h=r[4],U=r[5],a=r[6],P=r[7],H=r[8],Y=r[9],S=r[10],_=r[11],e=r[12],o=r[13],x=r[14],T=r[15],t=K*U-B*h,p=K*a-b*h,q=K*P-f*h,y=B*a-b*U,k=B*P-f*U,w=b*P-f*a,v=H*o-Y*e,z=H*x-S*e,N=H*T-_*e,u=Y*x-S*o,j=Y*T-_*o,I=S*T-_*x,L=t*I-p*j+q*u+y*N-k*z+w*v;if(!L)return H1;r[0]=(U*I-a*j+P*u)*(L=1/L),r[1]=(b*j-B*I-f*u)*L,r[2]=(o*w-x*k+T*y)*L,r[3]=(S*k-Y*w-_*y)*L,r[4]=(a*N-h*I-P*z)*L,r[5]=(K*I-b*N+f*z)*L,r[6]=(x*q-e*w-T*p)*L,r[7]=(H*w-S*q+_*p)*L,r[8]=(h*j-U*N+P*v)*L,r[9]=(B*N-K*j-f*v)*L,r[10]=(e*k-o*q+T*t)*L,r[11]=(Y*q-H*k-_*t)*L,r[12]=(U*z-h*u-a*v)*L,r[13]=(K*u-B*z+b*v)*L,r[14]=(o*p-e*y-x*t)*L,r[15]=(H*y-Y*p+S*t)*L},k6=function(r,K){var B,b;K&&(B=K[0],b=K[1],K=K[2],r[12]=r[0]*B+r[4]*b+r[8]*K+r[12],r[13]=r[1]*B+r[5]*b+r[9]*K+r[13],r[14]=r[2]*B+r[6]*b+r[10]*K+r[14],r[15]=r[3]*B+r[7]*b+r[11]*K+r[15])},w6=function(r,K){var B,b;K&&(B=K[0],b=K[1],K=K[2],r[0]=r[0]*B,r[1]=r[1]*B,r[2]=r[2]*B,r[3]=r[3]*B,r[4]=r[4]*b,r[5]=r[5]*b,r[6]=r[6]*b,r[7]=r[7]*b,r[8]=r[8]*K,r[9]=r[9]*K,r[10]=r[10]*K,r[11]=r[11]*K)},v6=function(r,K,B){var b=K[0],f=K[1],h=K[2],U=K[3],a=K[4],P=K[5],H=K[6],Y=K[7],S=K[8],_=K[9],e=K[10],o=K[11],x=K[12],T=K[13],t=K[14],K=K[15],p=B[0],q=B[1],y=B[2],k=B[3];return r[0]=p*b+q*a+y*S+k*x,r[1]=p*f+q*P+y*_+k*T,r[2]=p*h+q*H+y*e+k*t,r[3]=p*U+q*Y+y*o+k*K,p=B[4],q=B[5],y=B[6],k=B[7],r[4]=p*b+q*a+y*S+k*x,r[5]=p*f+q*P+y*_+k*T,r[6]=p*h+q*H+y*e+k*t,r[7]=p*U+q*Y+y*o+k*K,p=B[8],q=B[9],y=B[10],k=B[11],r[8]=p*b+q*a+y*S+k*x,r[9]=p*f+q*P+y*_+k*T,r[10]=p*h+q*H+y*e+k*t,r[11]=p*U+q*Y+y*o+k*K,p=B[12],q=B[13],y=B[14],k=B[15],r[12]=p*b+q*a+y*S+k*x,r[13]=p*f+q*P+y*_+k*T,r[14]=p*h+q*H+y*e+k*t,r[15]=p*U+q*Y+y*o+k*K,r},z6=function(r,K,B,b){var f,h,U,a,P=K[0],H=K[1],K=K[2],Y=b[0],S=b[1],b=b[2],_=B[0],e=B[1],B=B[2];return j1(P-_)<fA&&j1(H-e)<fA&&j1(K-B)<fA?oA(r):(a=1/u1((_=P-_)*_+(e=H-e)*e+(B=K-B)*B),(a=u1((f=S*(B*=a)-b*(e*=a))*f+(b=b*(_*=a)-Y*B)*b+(Y=Y*e-S*_)*Y))?(f*=a=1/a,b*=a,Y*=a):Y=b=f=0,(a=u1((S=e*Y-B*b)*S+(h=B*f-_*Y)*h+(U=_*b-e*f)*U))?(S*=a=1/a,h*=a,U*=a):U=h=S=0,r[0]=f,r[1]=S,r[2]=_,r[3]=0,r[4]=b,r[5]=h,r[6]=e,r[7]=0,r[8]=Y,r[9]=U,r[10]=B,r[11]=0,r[12]=-(f*P+b*H+Y*K),r[13]=-(S*P+h*H+U*K),r[14]=-(_*P+e*H+B*K),r[15]=1,r)},N6=function(r,K,B,b,f){var K=1/G1(K/2),h=1/(b-f);return r[0]=K/B,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=K,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(f+b)*h,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*f*b*h,r[15]=0,r},u6=function(r,K,B,b,f,h,U){var a=1/(K-B),P=1/(b-f),H=1/(h-U);return r[0]=-2*a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*P,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*H,r[11]=0,r[12]=(K+B)*a,r[13]=(f+b)*P,r[14]=(U+h)*H,r[15]=1,r},j6=function(r,K){var B=K[0],b=K[1],f=K[2],h=(h=B*B+b*b+f*f+(K=K[3])*K)?1/h:0;return r[0]=-B*h,r[1]=-b*h,r[2]=-f*h,r[3]=K*h,r},I6=function(r,K){var B=K[0]+K[5]+K[10],b=0;return 0<B?(b=2*Math.sqrt(B+1),r[3]=.25*b,r[0]=(K[6]-K[9])/b,r[1]=(K[8]-K[2])/b,r[2]=(K[1]-K[4])/b):K[0]>K[5]&K[0]>K[10]?(b=2*Math.sqrt(1+K[0]-K[5]-K[10]),r[3]=(K[6]-K[9])/b,r[0]=.25*b,r[1]=(K[1]+K[4])/b,r[2]=(K[8]+K[2])/b):K[5]>K[10]?(b=2*Math.sqrt(1+K[5]-K[0]-K[10]),r[3]=(K[8]-K[2])/b,r[0]=(K[1]+K[4])/b,r[1]=.25*b,r[2]=(K[6]+K[9])/b):(b=2*Math.sqrt(1+K[10]-K[0]-K[5]),r[3]=(K[1]-K[4])/b,r[0]=(K[8]+K[2])/b,r[1]=(K[6]+K[9])/b,r[2]=.25*b),r},L6=function(r,K,B){var b=K[0],f=K[1],h=K[2],U=h+h,a=b*(Y=b+b),P=b*(S=f+f),b=b*U,H=f*S,f=f*U,Y=(K=K[3])*Y,S=K*S,K=K*U;return r[0]=1-(H+(h=h*U)),r[1]=P+K,r[2]=b-S,r[3]=0,r[4]=P-K,r[5]=1-(a+h),r[6]=f+Y,r[7]=0,r[8]=b+S,r[9]=f-Y,r[10]=1-(a+H),r[11]=0,r[12]=B[0],r[13]=B[1],r[14]=B[2],r[15]=1,r},J6=function(r,K){if(r.isVREnabled()){var B=r.vr.getViewMatrix(K);if(B)return B}return r._camera?r._camera.getViewMatrix(K):z6(K||SA(),r._eye,r._center,r._up)},F6=function(r,K){if(r.isVREnabled()&&(b=r.vr.getProjectMatrix()))return b;if(r._camera)return r._camera.getProjectMatrix();if(!K&&r._computedProjectMatrix)return eA(r._computedProjectMatrix);var B,b=r.getAspect(),K=r._near,f=r._far,h=SA();return r._ortho?(B=r._orthoWidth/2,u6(h,-B,B,-(B/=b),B,K,f)):N6(h,r._fovy,b,K,f),h},G6=function(r,K){if(!r)return H1;var B=[],b=0,f=r.length,h=f/3;if(K){for(;b<f;b++)B[b]=0;for(b=0;b<K.length;b+=3){var U=[],a=[];(H=[])[0]=r[3*K[b+1]+0]-r[3*K[b]+0],H[1]=r[3*K[b+1]+1]-r[3*K[b]+1],H[2]=r[3*K[b+1]+2]-r[3*K[b]+2],U[0]=r[3*K[b+2]+0]-r[3*K[b+1]+0],U[1]=r[3*K[b+2]+1]-r[3*K[b+1]+1],U[2]=r[3*K[b+2]+2]-r[3*K[b+1]+2],a[0]=H[1]*U[2]-H[2]*U[1],a[1]=H[2]*U[0]-H[0]*U[2],a[2]=H[0]*U[1]-H[1]*U[0];for(var P=0;P<3;P++)B[3*K[b+P]+0]+=a[0],B[3*K[b+P]+1]+=a[1],B[3*K[b+P]+2]+=a[2]}}else for(b=0;b<h;b+=3){var H,U=[],a=[];for((H=[])[0]=r[3*(b+1)+0]-r[3*b+0],H[1]=r[3*(b+1)+1]-r[3*b+1],H[2]=r[3*(b+1)+2]-r[3*b+2],U[0]=r[3*(b+2)+0]-r[3*(b+1)+0],U[1]=r[3*(b+2)+1]-r[3*(b+1)+1],U[2]=r[3*(b+2)+2]-r[3*(b+1)+2],a[0]=H[1]*U[2]-H[2]*U[1],a[1]=H[2]*U[0]-H[0]*U[2],a[2]=H[0]*U[1]-H[1]*U[0],P=0;P<3;P++)B[3*(b+P)+0]=a[0],B[3*(b+P)+1]=a[1],B[3*(b+P)+2]=a[2]}for(b=0;b<f;b+=3){var Y=[],S=(Y[0]=B[b+0],Y[1]=B[b+1],Y[2]=B[b+2],u1(Y[0]*Y[0]+Y[1]*Y[1]+Y[2]*Y[2]));0===S&&(S=fA),Y[0]=Y[0]/S,Y[1]=Y[1]/S,Y[2]=Y[2]/S,B[b+0]=Y[0],B[b+1]=Y[1],B[b+2]=Y[2]}return new aA(B)},d6=function(r,K,B,b,f){return b=b||K.createTexture(),B&&(f?(f.image=B,r.createTexture(f,b)):r.createTexture({image:B},b)),b},s6=function(r,K,B){return B=new Uint8Array(B||4),K=K||r.createTexture(),r.activeTexture(33984),A6(r,K),V6(r,10241,9729),r.texImage2D(3553,0,6408,1,1,0,6408,5121,B),K},n6=function(r){return r.createBuffer()},A6=function(r,K){r.bindTexture(3553,K||r._emptyTexture)},V6=function(r,K,B){r.texParameteri(3553,K,B)},M6=function(r,K){(r=x1.for(r).directState()).polygonOffset.enabled=!0,r.polygonOffset.value=K},R6=function(r){x1.for(r).directState().polygonOffset.enabled=!1},l6=function(r,K){return r=x1.for(r).directState().color.clear,K&&r?r.slice(0):r},C6=function(r,K){K&&(x1.for(r).directState().color.clear=DN(K))},m6=function(r){if(r){var K=r.getGL();if(K)for(var B=1,b=arguments.length;B<b;B++){var f=arguments[B];if(YY(f))for(var h=0,U=f.length;h<U;h++)gt(K,f[h]);else gt(K,f)}}},D6=function(r,K,B){if(K._lastClipboxVersion!==r._boxClipperVersion)K._lastClipboxVersion=r._boxClipperVersion;else if(B===K._lastClipboxEnabled)return;var b=r._boxClipperGroups,f=r._boxClipperShapes,h=b?b.length:0,U=new Array(h);if(B)for(var a=0;a<h;a++)U[a]=B&1<<b[a]?f[a]:0;K._lastClipboxEnabled=B,K.uClipperShape=U},i6=D6,Z6=function(r){var K=(r=x1.for(r)).directUniforms(),r=r.directAttribs();K.uFix=!0,r.aNormal=!1},g6=function(r){x1.for(r).directUniforms().uFix=!1},W6=function(r,K,B,b,f,h,U){var a=(P=x1.for(r)).directState(),P=P.directUniforms();r._picking||(K?(P.uBlend=!0,P.uBlendColor=K):P.uBlend=!1,P.uLight=P.uFog=B==H1||B,UY(b)&&1!==b&&(P.uPartOpacity=b),P.uReverseFlip=f!=H1&&f,P.uFixPickReverseColor=h||us),a.cullFace.enabled=!!U},$6=function(r){r._picking||(x1.for(r).directUniforms().uPartOpacity=1)},X6=(FU=[1,0,0,0,1,0,0,0,0],function(r,K,B,b,f,h,U,a,P,H){var Y=(S=x1.for(r)).directUniforms(),S=S.directAttribs();if(!K)return Y.uSampler=r._emptyTexture,void(Y.uBlendSampler=r._emptyBlendTexture);Y.uTexture=!0,Y.uDiscardSelectable=!aY(B)||B,S.aUv=fr(r,b,f,H1,2),H?(Y.uBlendTexture=!0,Y.uBlendSampler=H):(Y.uBlendTexture=!1,Y.uBlendSampler=r._emptyBlendTexture),Y.uSampler=K,Y.uUvMatrix=h||U||a||P?ur(a,h,U,P):FU}),c6=function(r,K){var B=(b=x1.for(r)).directUniforms(),b=b.directAttribs();r.activeTexture(33984),A6(r,H1),r.activeTexture(33985),A6(r,H1),K&&(b.aUv=!1,B.uTexture=!1,B.uSampler=r._emptyTexture,B.uBlendTexture=!1,B.uBlendSampler=r._emptyBlendTexture)},O6=function(r,K,B,b){var f=K.getBrightness(B),h=B.s("alphaTest"),U=x1.for(r),a=U.directUniforms(),P=K._picking,H=!0;return f!=H1&&1!==f&&(a.uBrightness=f),a.uAlphaTest=h,a.shadowReceive=!P&&B.s("shadow.receive"),a.shadowCull=!P&&!!B.s("shadow.cull"),i6(K,a,B.s("3d.clipbox")?QQ:B.s("3d.clipbox.mask")),(f=B.s("3d.clip.direction"))?(0===(h=B.s("3d.clip.percentage"))&&(H=!1),f=K.getData3dUI(B)._formatClipUniforms(f,h,B),a.uClipPercent=f[1],a.uClipDirection=f[0]):a.uClipDirection=0,a.blackout=!(!r._blooming||B.s("bloom")),P||(K._flowObjects.length&&K.flowMap.resetDataFlowEnabld(B,a),b||(h=B.s("envmap"),a.uUseEnvMap=!!h,a.roughness=B.s("roughness"),K._setEnvmapByProbeId(a,B.s("envmap.probe"),h||.01),o6(K,a,B.s("light.mask"),B.s("headlight.ambientIntensity"))),a.uFog=B.s("shape3d.light")!=H1),b||!!B._flipSide!=(2===B._forceSingleFace)&&(U.directState().cullFace.frontFace=2304),H},Q6=function(r,K,B,b,f){var h=(U=x1.for(r)).directUniforms(),U=U.directAttribs();!K||D1||Z1||r.lineWidth(K),B&&!r._picking&&(h.uFixPickReverseColor=B),b&&(U.aPosition=fr(r,b,f,H1))},E6=function(r,K,B,b){r&&(b&&(B*=b),r.calls++,r.vertices+=B,K==H1||4===K?r.faces+=B/3:1===K?r.lines+=B/2:K===gQ.POINTS?r.points+=B:5===K||6===K?r.faces+=B-2:3===K?r.lines+=B-1:2===K&&(r.lines+=B))},rr=function(r,K,B,b,f){oU&&(b=r[oU]),f?r.drawArraysInstanced(b==H1?4:b,K,B,f):r.drawArrays(b==H1?4:b,K,B),E6(r._renderInfo,b,B,f)},Kr=function(r,K,B,b,f,h){oU&&(b=r[oU]),h?r.drawElementsInstanced(b==H1?4:b,B,f==H1?5123:f,K==H1?0:2*K,h):r.drawElements(b==H1?4:b,B,f==H1?5123:f,K==H1?0:2*K),E6(r._renderInfo,b,B,h)},Br=function(r,K,B,b,f){return r.bindBuffer(34962,K),B&&r.bufferData(34962,B,35044),K},br=function(r,K,B,b,f){return(K=fr(r,K,B,b,f)).instanced=!0,K},fr=function(r,K,B,b,f){return B?ar(r,34962,K,B):Br(r,K,B)},hr=function(r,K,B){r.bindBuffer(34963,K),B&&r.bufferData(34963,B,35044)},Ur=function(r,K,B){ar(r,34963,K,B)},ar=function(r,K,B,b){var f,h=b._bufId||(b._bufId=M.Math.generateIncreasingID()),U=r._4NQ;return(B=U[h])&&B._buf?r.bindBuffer(K,B._buf):(f=n6(r),B=U[h]={_buf:f},r.bindBuffer(K,f),r.bufferData(K,b,35044),U=5126,b instanceof Uint16Array?U=5123:b instanceof Int16Array?U=5122:b instanceof Uint32Array?U=5125:b instanceof Int32Array?U=5124:b instanceof Int8Array?U=5120:(b instanceof Uint8Array||b instanceof Uint8ClampedArray)&&(U=5121),f.glType=U),B._fid=r._renderInfo.frame,B._buf},Pr=function(r,K){K!=H1&&0<=K&&r.disableVertexAttribArray(K)},Hr=function(r,K){var B=r.getGL(),B=x1.for(B).directUniforms();r._7O=r._8O.pop(),r._modelMatrix=r._modelMatrixStack.pop(),K&&(B.uModelViewMatrix=r._7O,r._6O=K,B.uNormalMatrix=K)},Yr=function(r,K){var B,b,f,h,U,a;return(B=K=K||SA())[0]=r[0],B[1]=r[1],B[2]=r[2],B[3]=r[3],B[4]=r[4],B[5]=r[5],B[6]=r[6],B[7]=r[7],B[8]=r[8],B[9]=r[9],B[10]=r[10],B[11]=r[11],B[12]=r[12],B[13]=r[13],B[14]=r[14],B[15]=r[15],y6(K),r=(B=K)[1],b=B[2],f=B[3],h=B[6],U=B[7],a=B[11],B[1]=B[4],B[2]=B[8],B[3]=B[12],B[4]=r,B[6]=B[9],B[7]=B[13],B[8]=b,B[9]=h,B[11]=B[14],B[12]=f,B[13]=U,B[14]=a,K},Sr=function(r,K){var B=r.getGL(),b=r._7O,B=x1.for(B).directUniforms();K?(r._8O.push(eA(b)),r._modelMatrixStack.push(eA(r._modelMatrix)),B.uModelMatrix=v6(r._modelMatrix,r._modelMatrix,K),r._7O=v6(b,b,K)):B.uModelMatrix=r._modelMatrix=eA(_A),B.uModelViewMatrix=b,B.uNormalMatrix=Yr(b,r._6O)},_r={body:0,label:1,label2:2,note:3,note2:4,symbol:5},er=function(r,K,B,b,f,h){var U,a=B?((B=b._pickId)||(B=b._pickId=K._pickIdUsed,K._pickIdUsed+=10),null!=(a=_r[f])?U=B+a:(U=(B=(B=b._pickExtraPartMap)||(b._pickExtraPartMap={}))[f])||(U=B[f]=K._pickIdUsed++),K[U]||(K[U]={data:b.data,part:f}),jq(U)):U6;return h||(x1.for(r).directUniforms().uFixPickReverseColor=a),a},or=er,xr=function(r,K,B){var b,f="target"===(B="target"!==B?"source":B)?K.getTargetAgent():K.getSourceAgent(),B="edge."+B+".";if(l(f))return p=K.s(B+"anchor.x"),U=K.s(B+"anchor.elevation"),T=K.s(B+"anchor.y"),b=wA(f,r.getMat(f)),q=f.getAnchor3d(),(p=xA([(p===P1?.5:p)-q.x,(U===P1?.5:U)-q.y,(T===P1?.5:T)-q.z],b))[1]+=K.s(B+"offset.elevation"),p;var h=K.s(B+"index"),U=r.getData3dUI(f);if(!U.info||!U.info.list)return!1;if(0<=h){for(var a,P,H,Y=(t=U.info._lastPointsSegments).points,S=t.segments,_=-1,e=-1,o=0,x=(S||Y).length;o<x;o++){if(3===(P=S?S.get(o):1))H=2;else if(4===P)H=3;else{if(5===P)continue;H=1}if(_+=H,++e===h){a=Y.get(_);break}}return[(a=a||Y.get(Y.length-1)).x,(a.e||0)+K.s(B+"offset.elevation"),a.y]}var T=K.s(B+"percent")||0,T=Math.max(0,Math.min(T,1));if(!U||!U.getCache)return!1;var t,p,q=U.getCache(),x=q[q.length-1].length;return[(p=(t=r.getLineOffset(f,T*x)).point).x,p.y+K.s(B+"offset.elevation"),p.z]},Tr=(JU={center:function(r,K,B,b,f){var h=-K[1]/2,h={x:-K[0]/2,y:h,width:K[0],height:K[1]};return[(K=Ns(r,h,B)).x+b,-K.y-f,Y1.getPosition3dGap()]},front:function(r,K,B,b,f){var h=-K[1]/2,h={x:-K[0]/2,y:h,width:K[0],height:K[1]};return[(r=Ns(r,h,B)).x+b,-r.y-f,K[2]/2+Y1.getPosition3dGap()]},back:function(r,K,B,b,f){var h={x:-K[0]/2,y:-K[1]/2,width:K[0],height:K[1]};return[-(r=Ns(r,h,B)).x-b,-r.y-f,-K[2]/2-Y1.getPosition3dGap()]},left:function(r,K,B,b,f){var h=-K[1]/2,h={x:-K[2]/2,y:h,width:K[2],height:K[1]},r=Ns(r,h,B);return[-K[0]/2-Y1.getPosition3dGap(),-r.y-f,r.x+b]},right:function(r,K,B,b,f){var h={x:-K[2]/2,y:-K[1]/2,width:K[2],height:K[1]},r=Ns(r,h,B);return[K[0]/2+Y1.getPosition3dGap(),-r.y-f,-r.x-b]},top:function(r,K,B,b,f){var h={x:-K[0]/2,y:-K[2]/2,width:K[0],height:K[2]};return[(r=Ns(r,h,B)).x+b,K[1]/2+Y1.getPosition3dGap(),r.y+f]},bottom:function(r,K,B,b,f){var h=-K[2]/2,h={x:-K[0]/2,y:h,width:K[0],height:K[2]};return[(r=Ns(r,h,B)).x+b,-K[1]/2-Y1.getPosition3dGap(),-r.y-f]}},function(r,K,B,b,f,h){return JU[b](r,K,B,f||0,h||0)}),tr=function(r,K,B,b,f,h,U,a,P,H){return f&&(K[0]+=f[0],K[1]+=f[1],K[2]+=f[2]),k6(r,B),a?(f=SA(),nO(f,P,H),xA(K,f),k6(r,K),r.auto=a,r.pos=xA([0,0,0],r),h&&(B=r.mat2=SA(),nO(B,h,U))):(nO(r,P,H),k6(r,K),b===ru?yA(r,-F1):b===Ku?yA(r,F1):b===Bu?qA(r,-F1):b===bu?qA(r,F1):b===E1&&yA(r,F),nO(r,h,U)),r},pr=function(r,K){var B,b,f=K.auto,h=K.mat2,r=r.gv;f?(B=SA(),b=[0,0,0,0],f="string"==typeof f?[(f.indexOf("x")<0?r._eye:r._center)[0],(f.indexOf("y")<0?r._eye:r._center)[1],(f.indexOf("z")<0?r._eye:r._center)[2]]:r._eye,I6(b,z6(SA(),f,r._center,r._up)),L6(B,j6(b,b),K.pos),h&&v6(B,B,h),Sr(r,B)):Sr(r,K)},qr=function(r,K,B,b,f){var h=r.s,U=r.gv,a=U.getGL(),P=U._buffer,H=U._1O,Y=x1.for(a).directAttribs();d6(U,a,VN,H),pr(r,B),W6(a,h(K+".blend"),h(K+".light"),h(K+".opacity"),h(K+".reverse.flip"),h(K+".reverse.color"),r.data._forceSingleFace||h(K+".reverse.cull")),X6(a,H,f,P.uv,pm),Y.aPosition=fr(a,P.vs,b,H1),Y.aNormal=fr(a,P.ns,qm,H1),Ur(a,P.is,ym),Kr(a,0,ym.length),c6(a,H),$6(a),Hr(U)},yr=function(r,K,B){var b=r.gv,f=r.data,h=b.getFaceMaterial(f,K),r=r[K]={blend:b.getBodyColor(f)||b.getFaceBlend(f,K),light:b.getFaceLight(f,K),color:b.getFaceColor(f,K),opacity:b.getFaceOpacity(f,K),transparent:h?wr(h):b.getFaceTransparent(f,K),reverseFlip:b.getFaceReverseFlip(f,K),reverseColor:b.getFaceReverseColor(f,K),reverseCull:b.getFaceReverseCull(f,K),texture:b.getFaceImage(f,K),blendTexture:b.getFaceBlendImage(f,K),discardSelectable:b.getFaceDiscardSelectable(f,K),material:h};return"csg"!==K&&(r.uv=b.getFaceUv(f,K)||B&&B[K+"Uv"],r.uvScale=b.getFaceUvScale(f,K)||B&&B[K+"UvScale"],r.uvOffset=b.getFaceUvOffset(f,K)||B&&B[K+"UvOffset"],r.uvRotation=b.getFaceUvRotation(f,K)||B&&B[K+"uvRotation"],r.uvAnchor=b.getFaceUvAnchor(f,K)||B&&B[K+"uvAnchor"],(h=b.getFaceMat(f,K))&&(B=wA(f,h),f.appendAnchorMatrix3d(B),r.mat=B)),r},kr=function(r,K,B,b,f){var h,U,a,P,H=r[b];H&&(h=r.data,!(r=r.gv)._picking&&H.material?Dm(K,r,h,H.material,[H.vs,H.tuv,H.ns]):f(H.transparent)&&(f=r._buffer,b=r.getTexture(H.texture,h,b),U=r.getTexture(H.blendTexture,h),a=(P=x1.for(K)).directUniforms(),P=P.directAttribs(),X6(K,b,H.discardSelectable,f.uv,H.tuv,H.uvOffset,H.uvScale,H.uvRotation,H.uvAnchor,U),W6(K,H.blend,H.light,H.opacity,H.reverseFlip,H.reverseColor,h._forceSingleFace||H.reverseCull),H.cs&&!r._batchColorDisabled?(a.uBatchColor=!0,P.aBatchColor=fr(K,f.batchColor,H.cs,B.aBatchColor,4)):a.uDiffuse=H.color||T1["color.empty"],P.aPosition=fr(K,f.vs,H.vs,H1),P.aNormal=fr(K,f.ns,H.ns,H1),rr(K,0,H.vs.length/3),H.cs&&!r._batchColorDisabled&&(a.uBatchColor=!1,Pr(K,B.aBatchColor)),$6(K),c6(K,b)))},wr=function(r){return!!r&&!(!(r="string"==typeof r?Y1.getMaterial(r):r)||!r.transparent)},vr=(uU=new e1,jU=new e1,IU=new e1,LU=new FH,function(r,K,B,b,f){r.identity();var h=K.rotationOffset,U=K.rotationPivot,a=K.scalingOffset,P=K.scalingPivot,B=(uU.fromArray(B||K.translation),h&&uU.add(jU.fromArray(h)),U&&uU.add(jU.fromArray(U)),r.makeRotationFromQuaternion(LU.fromArray(b||K.rotation)).setPosition(uU),uU.set(0,0,0),U&&uU.sub(jU.fromArray(U)),a&&uU.add(jU.fromArray(a)),P&&uU.add(jU.fromArray(P)),0===uU.x&&0===uU.y&&0===uU.z||r.translate(uU),f||K.scale);return 2!==K.inheritType&&B&&(IU.fromArray(B),1===IU.x&&1===IU.y&&1===IU.z||r.scale(IU)),P&&r.translate(jU.multiplyScalar(-1)),r}),zr=function(r,K,b){var f,h,U,a;YY(r)?r.forEach(function(r){zr(r,K,b)}):_1(r)?zr(Zm(K,r),K,b):PY(r)?r.model3d?Y1.traverse(r,function(r,K){f=r.position,h=r.scale,(U=r.quaternion)||(U=r.euler)&&(a=a||[0,0,0],U=D.eulerArrayToQuaternionArray(U,a));var B=r._matrixWorld;(B=B||(r._matrixWorld=new Z)).composeFromArray(f,U,h),K&&B.premultiply(K._matrixWorld),(K=r.mesh)&&("string"==typeof K&&(K=Y1.getMesh(K)),b.push({matrix:B,mesh:K}))},null,"comps"):r.shape3d?zr(r.shape3d,K,b):b.push({mesh:r}):b.push({mesh:r})},Nr=(NU=new D.Matrix2d,function(r,K,B,b,f){return(f=f||NU).identity(),b&&f.translate(-b[0],-b[1]),B&&f.scale(B[0],B[1]),r&&f.rotate(r),b&&f.translate(b[0],b[1]),K&&f.translate(K[0],K[1]),f}),ur=(vU=[1,0,0,0,1,0,0,0,1],zU=[1,0,0,0,1,0,0,0,1],function(r,K,B,b){return r||K||B||b?(wU=r?(kU=f1(r),S1(r)):(kU=0,1),yU=B?(qU=B[0],B[1]):qU=1,xU=wU*qU,TU=kU*qU,tU=-kU*yU,wU*=yU,yU=b?(pU=b[0]-(xU*b[0]+tU*b[1]),b[1]-(TU*b[0]+wU*b[1])):pU=0,K&&(pU+=K[0],yU+=K[1]),zU[0]=xU,zU[1]=TU,zU[3]=tU,zU[4]=wU,zU[6]=pU,zU[7]=yU,zU):vU}),jr=function(r,K,B,b){r.uUseSkinning=!0,r.bindMatrix=K.skeleton.bindMatrix,r.bindMatrixInverse=b.bindMatrixInverse,r.boneTexture=B,r.boneTextureSize=K.boneTextureSize},Ir=function(r,K,B,b){var f,h,U,a,P,H;b?(r.center=K.max.clone().add(K.min).multiplyScalar(.5).toArray(),f=r.center[0],h=r.center[1],U=r.center[2]):f=h=U=0,B?(H=b?(a=(B=K.max.clone().sub(K.min).toArray())[0],P=B[1],B[2]):(a=2*Math.max(Math.abs(K.min.x),Math.abs(K.max.x)),P=2*Math.max(Math.abs(K.min.y),Math.abs(K.max.y)),2*Math.max(Math.abs(K.min.z),Math.abs(K.max.z))),0===a&&(a=Math.min(P,H)/1e3||.001),0===P&&(P=Math.min(a,H)/1e3||.001),0===H&&(H=Math.min(a,P)/1e3||.001),r.rawS3=[a,P,H],r.scale=[1/a,1/P,1/H]):a=P=H=1,b&&(r.position=[-f/a,-h/P,-U/H])},Lr=function(r,K,B,b,f,h){for(var U,a,P,H,Y,S,_,e,o,x=[b-K,f-B],T=r?r.length:0,t=0;t<T;t++){for(a=2,P=(U=r[t])[0],H=U[1];a+1<U.length;){if(Y=U[a],S=U[a+1],JY(K,B,b,f,P,H,Y,S,!0)){e=R9(_=[Y-P,S-H]),_[0]/=e,_[1]/=e,e=YA(x,_),o=[_[0]*(e=0<e?h:-h),_[1]*e];break}P=Y,H=S,a+=2}if(o)break}if(o)for(b=K+o[0],f=B+o[1],t=0;t<T;t++)for(a=2,P=(U=r[t])[0],H=U[1];a+1<U.length;){if(Y=U[a],S=U[a+1],JY(K,B,b,f,P,H,Y,S,!0))return[0,0];P=Y,H=S,a+=2}return o||[b-K,f-B]},Jr=function(r){return"nearest"===r?9728:"linear"===r?9729:r},Fr=M.graph3d={WebGLConstants:gQ},h=function(r,K,B){BA("ht.graph3d."+r,K,B)},Gr="~!<yfusfw!+!yjsubNudfkpsQv!>!opjujtpQ`mh!\v?zepc/tw/qbNxpmg=!fevmdoj$\v!\v?zepc/tw/qbNxpebit=!fevmdoj$\v!\vgjeof$\v!~!<fdobutjEfojMb!>!fdobutjEfojMw!|!*itbEv)!gj!\vITBE!gfegj$\v!\vgjeof$\v!~!<ttfouihjsCidubCb!>!ttfouihjsCidubCw!|!*ttfouihjsCidubCv)!gj!\vTTFOUIHJSCIDUBC!gfegj$\v!\vgjeof$\v!~!<eofmCidubCb!>!eofmCidubCw!|!*eofmCidubCv)!gj!\vEOFMCIDUBC!gfegj$\v!\vgjeof$\v!~!<spmpDidubCb!>!spmpDidubCw!|!*spmpDidubCv)!gj!\vSPMPDIDUBC!gfegj$\v!\vgjeof$\v!~!<**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw!>!wVw!|!*fsvuyfUv)!gj!\vftmf$\v!<*y/wVb!-**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw)4dfw!>!wVw!\vQJMD`WV!gfegj$\v!<*efnspgtobsu!+!yjsubNmfepNv)4dfw!>!opjujtpQemspXw!<*yfusfw)4dfw!>!opjujtpQwNw!\vgjeof$\v!<**1/2!-mbnspOudfkcp)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!\vftmf$\v!<**1/2!-mbnspOudfkcp)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!ftmf!~!<**1/2!-mbnspOw!+!n)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!<**^3]n!-^3]n)upe!-*^2]n!-^2]n)upe!-*^1]n!-^1]n)upe)4dfw!0!mbnspOudfkcp!>!mbnspOw!<*!efdobutoJyjsubNb!)4ubn!>!n!4ubn!|!*fdobutoJftVv)!gj!\vFDOBUTOJIDUBC!gfegj$\v!<efnspgtobsu!+!yjsubNxfjWmfepNv!>!yfusfw!5dfw!\vgjeof$\v!~!<efnspgtobsu!+!efdobutoJyjsubNb!>!efnspgtobsu!|!*fdobutoJftVv)!gj!\vFDOBUTOJIDUBC!gfegj$\v!<*mbnspOb)4dfw!>!mbnspOudfkcp!4dfw!<*opjujtpQb)4dfw!>!opjujtpQmbdpMw!<*1/2!-opjujtpQb)5dfw!>!efnspgtobsu!5dfw!|!*)ojbn!ejpw!\v?ebfi/tw/qbNxpmg=!fevmdoj$\v!\v?ebfi/tw/qbNxpebit=!fevmdoj$\v!\vgjeof$\v!<fdobutjEfojMw!ubpmg!hojzsbw!<fdobutjEfojMb!ubpmg!fuvcjsuub!<itbEv!mppc!nspgjov!\vITBE!gfegj$\v!\vgjeof$\v!<^TUIHJM`UPQT`NVO]opjudfsjEupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]opjujtpQupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]spmpDupqTv!5dfw!nspgjov!\v1!?!TUIHJM`UPQT`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`UOJPQ`NVO]opjujtpQuojpQv!4dfw!nspgjov!<^TUIHJM`UOJPQ`NVO]spmpDuojpQv!5dfw!nspgjov!\v1!?!TUIHJM`UOJPQ`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`SJE`NVO]opjudfsjEsjEv!4dfw!nspgjov!<^TUIHJM`SJE`NVO]spmpDsjEv!5dfw!nspgjov!\v1!?!TUIHJM`SJE`NVO!gj$\v!<opjujtpQmbdpMw!4dfw!hojzsbw!<opjujtpQemspXw!4dfw!hojzsbw!<opjujtpQwNw!4dfw!hojzsbw!<mbnspOw!4dfw!hojzsbw!<yjGv!mppc!nspgjov!\vgjeof$\v!\v?ebfi/tw/hojdobutoj=!fevmdoj$\v!\vHOJDOBUTOJ`FTV!fojgfe$\v!<fdobutoJftVv!mppc!nspgjov!\vFDOBUTOJIDUBC!gfegj$\v!\vgjeof$\v!<wVw!3dfw!hojzsbw!\vftmf$\v!<wVw!4dfw!hojzsbw!\vQJMD`WV!gfegj$\v!\vgjeof$\v!<eofmCidubCw!4dfw!hojzsbw!<eofmCidubCb!4dfw!fuvcjsuub!<eofmCidubCv!mppc!nspgjov!\vEOFMCIDUBC!gfegj$\v!\vgjeof$\v!<ttfouihjsCidubCw!ubpmg!hojzsbw!<ttfouihjsCidubCb!ubpmg!fuvcjsuub!<ttfouihjsCidubCv!mppc!nspgjov!\vTTFOUIHJSCIDUBC!gfegj$\v!\vgjeof$\v!<spmpDidubCw!5dfw!hojzsbw!<spmpDidubCb!5dfw!fuvcjsuub!<spmpDidubCv!mppc!nspgjov!\vSPMPDIDUBC!gfegj$\v!<wVb!3dfw!fuvcjsuub!<opjujtpQb!4dfw!fuvcjsuub!<mbnspOb!4dfw!fuvcjsuub!<yjsubNmbnspOv!5ubn!nspgjov!<yjsubNxfjWmfepNv!5ubn!nspgjov!<yjsubNmfepNv!5ubn!nspgjov!<yjsubNxfjWv!5ubn!nspgjov!<yjsubNudfkpsQv!5ubn!nspgjov!<yjsubNwVv!4ubn!nspgjov!<fsvuyfUeofmCv!mppc!nspgjov!<fsvuyfUv!mppc!nspgjov!\vYJGFSQ$!00^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",dr=(qY(Y1,{setBatchInfo:function(r,K){uK[r]=K},getBatchInfo:function(r){return uK[r]},getBatchInfoMap:function(){return uK},setBatchInfoMap:function(r){uK=r}},!0),[1,1,1]),sr=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],nr=[1,0,0,0,0,1,0,1,1,1,1,0],Ar=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],Vr=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],Mr=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Rr=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],lr=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],Cr=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],mr=function(r,K){r._40Q.each(function(r){r.ivBatch(K)})},Dr=function(r,K,B,b){var f=K[B=B._id];if(f){var h=(t=r[P=f.batch]).ds,U=f.index;if(t.invalidate=!0,delete K[B],h.splice(U,1),NY(h))return!1!==(B=b.getBatchInfo(P)||MK).keepData&&t.ms&&t.ms.length&&B.instanced&&!b.isBatchInstancedDisabled()?(t.ms=[],t.ics&&(t.ics=[]),void(t.ps&&(t.ps=[]))):void delete r[P];for(var B=U,b=f.begin,a=f.size;U<h.length;U++)(f=K[h[U]._id]).index--,f.begin-=a;if(t.ms&&t.ms.length)return t.ms.splice(16*B,16),t.ics&&t.ics.splice(4*B,4),void(t.ps&&(t.ps.splice(4*B,4),t.ps._invalidateThisFrame=!0));var r=3*b,P=3*a,B=4*b,H=4*a,Y=t.vs,S=t.ps,_=t.uv,e=t.cs,o=t.bs,x=t.rs,T=t.ns,t=t.ls;Y.splice(r,P),S.splice(B,H),S._invalidateThisFrame=!0,_&&_.splice(2*b,2*a),e&&e.splice(B,H),o&&o.splice(r,P),x&&x.splice(b,a),T&&T.splice(r,P),t&&t.splice(b,a)}},ir=function(r,K,B,b,f){if(!b)return H1;var h,U,a=K[b];return a||(U=(h=f.getBatchInfo(b)||MK).image||h.material?[]:H1,f=h.instanced&&!f.isBatchInstancedDisabled(),a=K[b]={vs:[],ns:[],uv:U,cs:U||h.color?H1:[],bs:h.blend?[]:H1,ps:[],rs:h.brightness?[]:H1,ds:[],ms:f?[]:H1,ics:U||h.color||!f?H1:[]}),a.invalidate=!0,r[B._id]={index:a.ds.length,begin:a.vs.length/3,batch:b},a.ds.push(B),a},Zr=function(r,K){return K!=H1&&1!==K?[r[0]*K,r[1]*K,r[2]*K,r[3]]:r},gr=function(r){r&&(r._ctlineModel=[],r._lineModel=P1)},Wr=function(r,K,B){var k=r.getData3dUI(K);if((a=(a=k.shapeModel)||Zm(k))||!k.shapeName){var b,f=K.s("wf.combineTriangle");if(B.geometry){if(!a&&!(a=K instanceof M.Node&&!(K instanceof M.Shape)?AU=AU||{vs:km,is:wm,uv:vm}:[k.left,k.front,k.right,k.back,k.top,k.bottom]))return P1;if(!(b=f?(b=K.s("wf.normEpsilon"),isNaN(b)&&(b=2),f=0|Math.min(3,Math.max(1,isNaN(f)?1:f)),EP[f-1](a,k,180/(Math.PI*b))):function(r){var K,B,b,f,h;if(Y=r._lineModel)return Y;for(var U,a,P,H=["","top_","bottom_"],Y=[],S=[],_=(zr(r,k,S),D.requestVector3()),e=D.requestVector3(),o=D.requestVector3(),x=0,T=S.length;x<T;x++)if((f=S[x])&&(h=f.mesh))for(K=0,B=H.length;K<B;K++)if(b=h[H[K]+"vs"])for(var t=h[H[K]+"is"],p=f.matrix,q=t?t.length:b.length/3,y=0;y<q;y+=3)P=t?(U=t[y],a=t[y+1],t[y+2]):(a=(U=y)+1,y+2),U*=3,a*=3,P*=3,p?(_.fromArray(b,U).applyMatrix4(p),e.fromArray(b,a).applyMatrix4(p),o.fromArray(b,P).applyMatrix4(p),Y.push(_.x,_.y,_.z,e.x,e.y,e.z,e.x,e.y,e.z,o.x,o.y,o.z,o.x,o.y,o.z,_.x,_.y,_.z)):Y.push(b[U],b[U+1],b[U+2],b[a],b[a+1],b[a+2],b[a],b[a+1],b[a+2],b[P],b[1+P],b[2+P],b[P],b[1+P],b[2+P],b[U],b[U+1],b[U+2]);return D.releaseVector3(_),D.releaseVector3(e),D.releaseVector3(o),r._lineModel=Y}(a))||0===b.length)return}else b=B.short?jm:um,K.s("wf.boundingBox")&&(f=k.getBoundingBox(!0))&&(a=(new Z).scale(f.max.clone().sub(f.min)).setPosition(f.max.clone().add(f.min).divideScalar(2)).toArray(),b=S6([],a,b));var h,U,f=r.getBrightness(K),a=K.s("bloom"),P=K.s("3d.reflectable"),H=DN(B.color||"white"),Y=H[3]<1,S=Math.ceil(B.width)||1,_=K.s("3d.clipbox")?QQ:K.s("3d.clipbox.mask"),e=K.s("wf.fog"),o=K.s("wf.group"),x=K.getRenderLayer(),r=r._40Q.get(x),x=K.s("wf.material"),T=r.wireframeIndexMap,r=r.wireframeModelMap,t=K.s("batch"),p=K.s("3d.clip.direction");if(x||p){if(p){if(0===(U=K.s("3d.clip.percentage")))return;U=k._formatClipUniforms(p,U,K)}h="_"+K._id}else h=t?(Y?"T":"O")+o+"_"+t:(Y?"T":"O")+o+(a?"_1":"_0")+(P?"1_":"0_")+_+"_"+S+(e?"1_":"0_");p=(p=r[h])||(r[h]={vs:[],cs:[],ps:[],ds:[],T:Y,B:a,clipboxMask:_,reflectable:!!P,W:S,batch:t,fog:e}),x&&(p.material=x),p.invalidate=!0,o=p.vs,r=p.cs,Y=p.ds,a=T[K._id]={index:Y.length,begin:o.length/3,batch:h},Y.push(K),_=k.mat,B.geometry&&K instanceof M.Shape&&(Y1.extractShapeTranslation||Y1.extractPolylineTranslation||Y1.extractVerticesTranslation)&&(P=k._vsTranslation)&&_&&(_=(new D.Matrix4).fromArray(_).multiply(P).toArray()),K instanceof M.Edge||!(!_||!B.geometry&&K instanceof M.Shape)||(_=wA(K,B.mat),K.appendAnchorMatrix3d(_)),U?(p.mat=eA(_),p.clipDirection=U[0],p.clipPercent=U[1],S6(o,null,b)):S6(o,_,b),S=a.size=o.length/3-a.begin,Y6(r,Zr(H,f),S)}},$r=function(r,K,B,b){if(K){var f=(B=B[K.batch]).ps,h=(B=B.ms&&B.ms.length)?4*K.index:4*K.begin,U=B?1:K.size;if(f[h]!==r[0]||f[h+1]!==r[1]||f[h+2]!==r[2]||f[h+3]!==r[3]){for(var a=0;a<U;a++)f[h++]=r[0],f[h++]=r[1],f[h++]=r[2],f[h++]=r[3];f._invalidateThisFrame=!0}}},Xr=(sU=new M.Math.Vector3,nU=new M.Math.Vector3,function(r,K){var B=K+["32"],b=r[K],f=r[B];if(b){if(Y1.extractBatchTranslation||Y1.extractVerticesTranslation)if("vs"!==K||r.ms&&r.ms.length){if("ms"===K&&r.ms&&r.ms.length){for(nU.set(0,0,0),U=b.length,a=12;a<U;a+=16)nU.add(sU.fromArray(b,a));for(nU.divideScalar(U/16),P=nU.x,H=nU.y,Y=nU.z,S=new Array(U),a=0;a<U;a+=16){for(var h=0;h<12;h++)S[a+h]=b[a+h];S[a+12]=b[a+12]-P,S[a+13]=b[a+13]-H,S[a+14]=b[a+14]-Y,S[a+15]=b[a+15]}b=S,r.translate=[P,H,Y]}}else{nU.set(0,0,0);for(var U=b.length,a=0;a<U;a+=3)nU.add(sU.fromArray(b,a));nU.divideScalar(U/3);for(var P=nU.x,H=nU.y,Y=nU.z,S=new Array(U),a=0;a<U;a+=3)S[a]=b[a]-P,S[a+1]=b[a+1]-H,S[a+2]=b[a+2]-Y;b=S,r.translate=[P,H,Y]}f&&f.length===b.length?(f.set(b),f._bufId=null):r[B]=new aA(b)}else delete r[B]}),cr=function(r,K,B,b,f,h,U,a){var P,H,Y=K instanceof M.Shape,S=h[0],_=h.length;if(1<_)for(var S=eA(S),e=1;e<_;e++)v6(S,S,h[e]);Y&&(P=K.p3(),k6(S,P)),tY(U.ms,S),U.ics&&Y6(U.ics,K.s("shape3d.color")||o,1),U.vs.length||(H=eA(sr),Y&&k6(H,HA(P)),Or(r,K,B,b,f,[H],U,a))},Or=function(K,B,r,b,f,h,U,a){if(YY(r))r.forEach(function(r){Or(K,B,r,b,f,h,U,a)});else if(_1(r))Or(K,B,Zm(b,r),b,f,h,U,a);else if(PY(r)){var P,H=W(r.mat,B,K),Y=W(r.s3,B,K),S=W(r.t3,B,K),_=W(r.r3,B,K);if((Y||_||S||H)&&(P=vA(H,Y,_,W(r.rotationMode,B,K),S),h.push(P)),r.shape3d)Or(K,B,r.shape3d,b,f,h,U,r);else{var H=b.s,e=(a=a||MK,h[0]),o=h.length,Y=H("shape3d.color",r.color,a.color);if(f=f||H("shape3d.blend",r.blend,a.blend),1<o)for(var e=eA(e),x=1;x<o;x++)v6(e,e,h[x]);_=e?Yr(e):H1,r.vs&&H(Jn,r.visible,a.visible)&&Qr(e,U,r.vs,r.uv,r.is,r.ns,_,f,Y),r.top_vs&&H(dn,r.topVisible,a.topVisible)&&Qr(e,U,r.top_vs,r.top_uv,r.top_is,r.top_ns,_,f,H("shape3d.top.color",r.topColor,a.topColor)||Y),r.bottom_vs&&H(sn,r.bottomVisible,a.bottomVisible)&&Qr(e,U,r.bottom_vs,r.bottom_uv,r.bottom_is,r.bottom_ns,_,f,H("shape3d.bottom.color",r.bottomColor,a.bottomColor)||Y),r.from_vs&&H(Fn,r.fromVisible,a.fromVisible)&&Qr(e,U,r.from_vs,r.from_uv,r.from_is,r.from_ns,_,f,H("shape3d.from.color",r.fromColor,a.fromColor)||Y),r.to_vs&&H(Gn,r.toVisible,a.toVisible)&&Qr(e,U,r.to_vs,r.to_uv,r.to_is,r.to_ns,_,f,H("shape3d.to.color",r.toColor,a.toColor)||Y)}P&&h.pop()}},Qr=function(B,r,b,f,K,h,U,a,P){var H,Y=r.cs,S=r.uv,_=r.bs,e=r.ns,o=r.vs,r=(h&&0!==h.length||(h=G6(b,K)),Z.determinantOfArray(B)<0);K||r?(H=K?K.length:b.length/3,tA(K||H,r,function(r){var K=3*r;S6(o,B,[b[K],b[1+K],b[2+K]]),S6(e,U,[h[K],h[1+K],h[2+K]]),S&&tY(S,[f[2*r],f[2*r+1]])})):(H=b.length/3,S6(o,B,b),S6(e,U,h),S&&tY(S,f)),Y&&Y6(Y,P,H),_&&(a?H6(_,a,H):tY(_,dr,H))},Er=function(r,K,B){var b=r.data.p3();K=eA(K),k6(K,b),tY(B.ms,K),B.ics&&Y6(B.ics,r.data.s("shape3d.color")||o,1),B.vs.length||(K=eA(sr),k6(K,HA(b)),rm(r,K,B))},rm=function(r,K,B){fm(r,ru,K,B),fm(r,Ku,K,B),fm(r,Q1,K,B),fm(r,E1,K,B),fm(r,Bu,K,B),fm(r,bu,K,B),fm(r,"csg",K,B)},Km=function(r,K,B,b,f,h){tY(B.ms,f),B.ics&&Y6(B.ics,K.s("all.color")||o,1),B.vs.length||Bm(r,K,B,b,eA(sr),h)},Bm=function(r,K,B,b,f,h){hm(r,K,B,b,f,h,ru,Ar),hm(r,K,B,b,f,h,Ku,Vr),hm(r,K,B,b,f,h,Bu,Mr),hm(r,K,B,b,f,h,bu,Rr),hm(r,K,B,b,f,h,Q1,lr),hm(r,K,B,b,f,h,E1,Cr)},bm=function(r,K,B,b,f){b?f.instanced?r.gv.batchInstancedModel(r.data,b,r,r.getBodyColor(),[K],B):Or(r.gv,r.data,b,r,r.getBodyColor(),[K],B):f.instanced?r.gv.batchInstancedShapeFace(r,K,B):rm(r,K,B)},fm=function(r,K,B,b){if(r=r[K]){var f=r.tuv;if(f){var K=r.uvScale,h=r.uvOffset,U=r.uvRotation,a=r.uvAnchor;if(K||h||U)for(var P,H,Y=(U=Nr(U,h,K,a)).a,S=U.b,_=U.c,e=U.d,o=U.tx,x=U.ty,T=f.length,t=0;t<T;t+=2)P=f[t],H=f[t+1],f[t]=Y*P+_*H+o,f[t+1]=S*P+e*H+x}Qr(B,b,r.vs,f,H1,H1,B?Yr(B):H1,r.blend,r.color)}},hm=function(r,K,B,b,f,h,U,a){var P,H,Y,S,_,e,o,x,T,t,p,q,y,k,w,v=B.cs,z=B.uv,N=B.bs,u=B.vs,j=B.ns,I=G6(a);r.getFaceVisible(K,U)&&((B=r.getFaceMat(K,U))&&(f=wA(K,B),h=Yr(f)),Z.determinantOfArray(f)<0?(B=a.length/3,tA(B,!0,function(r){S6(u,f,[a[r*=3],a[1+r],a[2+r]]),S6(j,h,[I[r],I[1+r],I[2+r]])})):(S6(u,f,a),S6(j,h,I)),v&&Y6(v,r.getFaceColor(K,U),6),z&&(B=r.getFaceUv(K,U)||b[U+"Uv"],v=r.getFaceUvScale(K,U)||b[U+"UvScale"],P=r.getFaceUvOffset(K,U)||b[U+"UvOffset"],S=r.getFaceUvRotation(K,U)||b[U+"UvRotation"],b=r.getFaceUvAnchor(K,U)||b[U+"UvAnchor"],_=(B=B?[B[6],B[7],B[0],B[1],B[2],B[3],B[2],B[3],B[4],B[5],B[6],B[7]]:nr)[0],e=B[1],o=B[2],x=B[3],T=B[4],t=B[5],p=B[6],q=B[7],y=B[8],k=B[9],w=B[10],B=B[11],(v||P||S||b)&&(P=(S=Nr(S,P,v,b)).a,v=S.b,b=S.c,H=S.d,e=v*(_=P*_+b*e+(Y=S.tx))+H*e+(S=S.ty),x=v*(o=P*o+b*x+Y)+H*x+S,t=v*(T=P*T+b*t+Y)+H*t+S,q=v*(p=P*p+b*q+Y)+H*q+S,k=v*(y=P*y+b*k+Y)+H*k+S,B=v*(w=P*w+b*B+Y)+H*B+S),z.push(_,e,o,x,T,t,p,q,y,k,w,B)),N&&((v=r.getBodyColor(K)||r.getFaceBlend(K,U))?H6(N,v,6):tY(N,dr,6)))},Um=function(r,K,B,b){var f,h,U,a,B=r._picking?r.pickColorMap:null,P=r.getGL(),H=r._buffer;if(!zY(K)){for(a in Sr(r,sr),Z6(P),K){var Y,S,_,e,o,x,T,t,p,q=K[a],y=(e=q.batch?(Y=(e=r.getBatchInfo(q.batch)||MK).wfBloom===P1?e.bloom:e.wfBloom,S=e.wfReflectable===P1?e.reflectable:e.wfReflectable,_=e.wfClipboxMask===P1?e.clipboxMask:e.wfClipboxMask,e.width):(Y=q.B,S=q.reflectable,_=q.clipboxMask,q.W),!B&&q.material);!y&&(b&&!q.T||!b&&q.T||r.isReflecting(P)&&!1===S)||(T=B&&!r.drawFilter,q.invalidate?(q.invalidate=!1,Xr(q,"vs"),Xr(q,"cs"),Xr(q,"ls"),T&&Xr(q,"ps")):T&&q.ps&&q.ps._invalidateThisFrame&&(q.ps._invalidateThisFrame=!1,Xr(q,"ps")),T=q.translate,f=q.clipDirection,y?("lines"!==(o=(y=q.material).renderMode)?y.renderMode="lines":o=null,r._prefabRenderer.render(P,{position:T,mesh:{vs:q.vs32,aLineDistance:q.ls32,aBatchColor:q.cs32,_complete_:!0},mat:y},q),o&&(y.renderMode=o)):(T||f?(h=f?eA(q.mat):[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T&&k6(h,T),U=eA(r._6O),Sr(r,h)):h=null,y=q.vs32,o=B?q.ps32:q.cs32,Q6(P,e,H1,H.vs,y),x=(T=x1.for(P)).directUniforms(),T=T.directAttribs(),p=q.D,t=!r._dashDisabled&&p,x.uAlphaTest=T1.alphaTest,P._blooming&&!Y&&(x.blackout=!0),f&&(x.uClipPercent=q.clipPercent,x.uClipDirection=f),i6(r,x,_===P1?OQ:_),t&&(x.uDash=!0,x.uDashDistance=p,x.uDashGapDistance=q.G,x.uDiffuse=q.A||T1["color.empty"],T.aLineDistance=fr(P,H.lineDistance,q.ls32,H1,1)),(p=!r._batchColorDisabled)&&o&&o.length?(x.uBatchColor=!0,T.aBatchColor=fr(P,H.batchColor,o,H1,4)):(x.uBatchColor=!1,T.aBatchColor=!1),(q=!1!==q.fog)||(x.uFog=!1),X6(P),rr(P,0,y.length/3,1),c6(P),q||(x.uFog=!0),p&&(x.uBatchColor=!1,T.aBatchColor=!1),t&&(x.uDash=!1,T.aLineDistance=!1),P._blooming&&!Y&&(x.blackout=!1),h&&(f&&(x.uClipDirection=0),Hr(r,U),x.uModelMatrix=_A)))}g6(P),Hr(r)}},am=function(r,K){r.invalidate=!1,Xr(r,"vs"),Xr(r,"ns"),Xr(r,"cs"),Xr(r,"rs"),K&&Xr(r,"ps"),Xr(r,"bs"),Xr(r,"uv"),Xr(r,"ms"),Xr(r,"ics")},Pm=function(r,K,A,B,b,f){var h,U,a,P,H,Y,S,B=r._picking?r.pickColorMap:null,_=r.getGL(),e=x1.for(_),o=e.directUniforms(),x=e.directAttribs(),T=r._buffer;if(!zY(K)){var t,p,q,y=r._flowObjects.length?r.flowMap:null,k=r.drawFilter;for(h in Sr(r,sr),K)if(!1!==(U=r.getBatchInfo(h)||MK).visible)if((L=!B&&U.material)||!(b&&!U.transparent||!b&&U.transparent||r.isReflecting(_)&&!1===U.reflectable)){var w=U.renderLayerMask;if(BP(f=f==H1?EA:f,w=w==H1?EA:w)&&(w=K[h],B||!U.transparentMask)){if(p=!1,k){if(!1===U.highlight)continue;if(t=w.ds){for(var v=0,z=t.length;v<z;v++)if(!k(t[v])){p=!0;break}if(!p)continue}}var N,u=b&&!0===U.autoSort&&(r._33Q||w.invalidate)&&!p,j=B&&!p,I=(w.invalidate?am(w,j):j&&w.ps&&w.ps._invalidateThisFrame&&(w.ps._invalidateThisFrame=!1,Xr(w,"ps")),w.ms32);if(I){if(!I.length)continue;q=!0}else q=!1;if(j=w.vs32,a=B?w.ps32:q?w.ics32:w.cs32,H=w.uv32,G=w.bs32,P=w.rs32,S=j.length/3,u&&((N=Ym(j,r.getEye(),r,I))?(w.is=N.is,w.elementTypeUint=N.useUint32):(w.is=null,w.elementTypeUint=null)),S){if((N=U.polygonOffset)&&M6(_,N),L&&!p){var L={vs:j,uv:H,ns:w.ns32,is:w.is,_complete_:!0},L={position:w.translate,mesh:L,mat:U.material};q&&(L.instances={aMatrixInstanced:w.ms32}),r._prefabRenderer.render(_,L,U)}else{(L=w.translate)&&Sr(r,[1,0,0,0,0,1,0,0,0,0,1,0,L[0],L[1],L[2],1]),U.light,Y=r.getTexture(U.image),W6(_,H1,U.light,U.opacity,U.reverseFlip,U.reverseColor,U.reverseCull),a?r._batchColorDisabled?(o.uBatchColor=!1,x.aBatchColor=!1):(o.uBatchColor=!0,x.aBatchColor=p?[0,1,1,1]:q?br(_,T.instancedBatchColor,a,H1,4):fr(_,T.batchColor,a,H1,4)):(o.uBatchColor=!1,o.uDiffuse=U.color||T1["color.empty"]);var J,F=U.alphaTest;o.uAlphaTest=F===P1?T1.alphaTest:F,o.shadowReceive=!B&&!1!==U.shadowReceive,i6(r,o,U.clipboxMask===P1?OQ:U.clipboxMask),o6(r,o,U.lightMask===P1?OQ:U.lightMask,U.headlightAmbientIntensity),y&&y.resetFlowUniform(U.effectFlowMask===P1?OQ:U.effectFlowMask,o),_._blooming&&!U.bloom&&(o.blackout=!0),U.envmap!==P1?(o.uUseEnvMap=!0,o.roughness=U.roughness||0,r._setEnvmapByProbeId(o,U.envmapProbe||0,U.envmap)):(o.uUseEnvMap=!1,o.envMapIntensity=0);(F=G&&!r._batchBlendDisabled)&&(o.uBatchBlend=!0,x.aBatchBlend=fr(_,T.batchBlend,G,H1));var G=P&&!r._batchBrightnessDisabled;if(G&&(o.uBatchBrightness=!0,x.aBatchBrightness=fr(_,T.batchBrightness,P,H1,1)),H?X6(_,Y,U.discardSelectable,T.uv,H,U.uvOffset,U.uvScale,U.uvRotation,U.uvAnchor):X6(_),x.aPosition=fr(_,T.vs,j,H1),x.aNormal=fr(_,T.ns,w.ns32,H1),q&&(o.uUseInstance=!0),p){for(q&&!(J=r._highlightInstancedFloatArray)&&(J=r._highlightInstancedFloatArray=new aA(16)),v=0,z=t.length;v<z;v++)if(!k(t[v])){var d=A[t[v]._id];if(q){for(var s=0;s<16;s++)J[s]=I[16*d.index+s];n=br(_,T.ms,J,H1),_.bufferSubData(34962,0,J),x.aMatrixInstanced=n,rr(_,0,S,null,1)}else{var n=d.begin,V=d.size;rr(_,n,V)}}}else q&&(u&&(I=Hm(I,r.getEye())),x.aMatrixInstanced=br(_,T.ms,I,H1)),w.is?(hr(_,T.is,w.is),Kr(_,0,S,null,w.elementTypeUint?5125:null,q?w.ms32.length/16:0)):rr(_,0,S,null,q?w.ms32.length/16:0);H?c6(_,Y):c6(_),a&&!r._batchColorDisabled&&(o.uBatchColor=!1,x.aBatchColor=!1),F&&(o.uBatchBlend=!1,x.aBatchBlend=!1),G&&(o.uBatchBrightness=!1,x.aBatchBrightness=!1),_._blooming&&!U.bloom&&(o.blackout=!1),q&&(o.uUseInstance=!1,x.aMatrixInstanced=P1),$6(_),L&&(Hr(r),o.uModelMatrix=_A)}N&&R6(_)}}}Hr(r)}},Hm=function(B,b){for(var r,K,f,h=B.length/16,U=new Array(h),a=0;a<h;a++)U[a]=a;U.sort(function(r,K){return r=[B[16*r+12],B[16*r+13],B[16*r+14]],K=[B[16*K+12],B[16*K+13],B[16*K+14]],R9(b,K)-R9(b,r)});var P=B._sortedByEye;for(P&&P.length===B.length||(P=B._sortedByEye=new aA(16*h)),a=0;a<h;a++)for(K=16*a,f=16*U[a],r=0;r<16;r++)P[K+r]=B[f+r];return P._bufId=null,P},Ym=function(b,f,r,K){var B=b.length/3,h=65535<B;if(!(r=r._glCapabilities.elementTypeUint&&h)&&h)return null;K&&K.length&&((h=D.requestMatrix4()).fromArray(K).invert(),f=dH(f).applyMatrix4(h).toArray(),D.releaseMatrix4(h));for(var U=new Array(B),a=B/3,P=new Array(a),H=0;H<a;H++)P[H]=H;for(P.sort(function(r,K){var B=[(b[r=9*r]+b[3+r]+2*b[6+r])/4,(b[1+r]+b[4+r]+2*b[7+r])/4,(b[2+r]+b[5+r]+2*b[8+r])/4],K=[(b[r=9*K]+b[3+r]+2*b[6+r])/4,(b[1+r]+b[4+r]+2*b[7+r])/4,(b[2+r]+b[5+r]+2*b[8+r])/4];return 0<(r=R9(f,B)-R9(f,K))?-1:r<0?1:0}),H=0;H<a;H++){var Y=3*H,S=3*P[H];U[Y]=S,U[1+Y]=1+S,U[2+Y]=2+S}return{useUint32:r,is:new(r?Uint32Array:hA)(U)}},Sm={obj:function(h,U){var r={mat:h.mat,model3d:h.model3d,matDef:h.matDef,s3:h.s3,r3:h.r3,rotationMode:h.rotationMode,t3:h.t3,cube:h.cube==H1||h.cube,center:h.center==H1||h.center,ignoreMtls:h.ignoreMtls,ignoreTransparent:h.ignoreTransparent,ignoreColor:h.ignoreColor,ignoreImage:h.ignoreImage,ignoreNormal:h.ignoreNormal,prefix:h.prefix,flipY:h.flipY,flipFace:h.flipFace,reverseFlipMtls:h.reverseFlipMtls,finishFunc:function(r,K,B){if(r){if(r.model3d)return r.json=h,void U(r);var b,K=[];for(b in r){var f=r[b];K.rawS3=f.rawS3,f.center&&(K.center=f.center),K.push(f),h.eachModel&&h.eachModel(b,f)}K.json=h,U(K)}else U()}};Y1.loadObj(h.obj,h.mtl,r)},bin:function(r,b){Y1.loadBin(r.url,{finishFunc:function(r,K,B){r?b(r):b()}})},fbx:function(B,b){var r={matDef:B.matDef,flipY:B.flipY,cube:B.cube,center:B.center,shape3d:B.shape3d,playAutomatically:B.playAutomatically,animations:!1!==B.animations,rotationInterpolation:B.rotationInterpolation,finishFunc:function(K){var r;K?(r=(K.json=B).animationSources)&&r.length?Y1.asyncEach(r,function(r,B){xm(r,r,function(r,K){y9(function(){B(null,K)})})},function(r){b(Y1.completeFbxAnimation(B.url,K,B.animations,r))}):b(Y1.completeFbxAnimation(B.url,K,B.animations)):b()}};Y1.loadFbx(B.url,r)},gltf:function(K,B){var r={matDef:K.matDef,flipY:K.flipY,cube:K.cube,center:K.center,shape3d:K.shape3d,path:K.path,assetsURIMap:K.assetsURIMap,playAutomatically:K.playAutomatically,finishFunc:function(r){r?(r.json=K,B(r)):B()}};Y1.loadGltf(K.url,r)}},_m=(Y1.getModelTypeHandlers=function(){return Sm},Y1.setModelTypeHandler=function(r,K){Sm[r]=K},Y1.getModelTypeHandler=function(r){return Sm[r]},Y1.handleModelLoaded=function(r,K){},Y1.handleUnfoundModel=function(r,K,B){},H1),em=H1,om=function(r){_m&&!r._loadingModelView_&&((em=em||{})[r._loadingModelView_=q9()]=r)},xm=function(B,b,f){var h,r=(_m=_m||{})[B];if(r){if(r.url===b)return;r.request.onload=lK,r.request.onerror=lK}return b.indexOf(".bin")===b.length-4?Tm(B,{modelType:"bin",url:b},b,f):b.indexOf(".fbx")===b.length-4?Tm(B,{modelType:"fbx",url:b},b,f):b.indexOf(".gltf")===b.length-5||b.indexOf(".glb")===b.length-4?Tm(B,{modelType:"gltf",url:b},b,f):void((b=Y1.beforeLoadURL(b)).data?(r=Y1.parse(b.data),Tm(B,r,b,f)):(h=new $O,_m[B]={request:h,url:b},h.onload=function(r){var K;200===this.status||0===this.status?(delete _m[B],K=Y1.parse(h.getResponseText()),Tm(B,K,b,f)):tm(B,Y1.handleUnfoundModel(B,b)||H1,f)},h.onerror=function(r){tm(B,Y1.handleUnfoundModel(B,b)||H1,f)},(r={}).url=encodeURI(b),r.sync=!1,h.send(r)))},Tm=function(K,B,b,f){var r=B.modelType;if(!r)return tm(K,B,f),void Y1.handleModelLoaded(K,B);(r=Y1.getModelTypeHandler(r))?(_m=_m||{})[K]||(_m[K]=!0,r(B,function(r){r?(tm(K,r,f),Y1.handleModelLoaded(K,r)):tm(K,Y1.handleUnfoundModel(K,b,B)||H1,f)})):tm(K,Y1.handleUnfoundModel(K,b,B)||H1,f)},tm=function(r,K,B){if(delete _m[r],_1(K)&&nK.test(K))xm(r,K,B);else{if(jK[r]=K,B&&B(r,K),zY(_m)&&(_m=H1,em)){for(var b in em)(f=em[b]).invalidateAll&&f.invalidateAll(P1,"modelLoaded",r),f.redraw&&f.redraw(),f.iv(),delete f._loadingModelView_;em=H1}if(K&&em)for(var b in em){var f;(f=em[b]).invalidateAll&&f.invalidateAll(P1,"modelLoading",r),f.redraw&&f.redraw(),f.iv()}}},pm=new aA([0,0,0,1,1,1,1,0]),qm=new aA([0,0,1,0,0,1,0,0,1,0,0,1]),ym=new hA([0,1,2,2,3,0]),km=new aA([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),wm=new hA([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),vm=new aA([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),zm=G6(km,wm),Nm=(new aA([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new hA([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[ru,Q1,Ku,E1,Bu,bu]),um=[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5],jm=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Im=function(r,K,B,b,f,h,U){r=r||16,K=K||0,B=B||r;var a,P,H,Y,S,_,e=[],o=[],x=h1/r,T=F/(h=h||16);for(p=0;p<h;p++)for(P=p*T,_=(H=p+1)*T,a=K;a<B;a++)w=a*x,S=(Y=a+1)*x,e.push(.5*f1(P)*S1(w),.5*S1(P),-.5*f1(P)*f1(w),.5*f1(_)*S1(S),.5*S1(_),-.5*f1(_)*f1(S),.5*f1(P)*S1(S),.5*S1(P),-.5*f1(P)*f1(S),.5*f1(P)*S1(w),.5*S1(P),-.5*f1(P)*f1(w),.5*f1(_)*S1(w),.5*S1(_),-.5*f1(_)*f1(w),.5*f1(_)*S1(S),.5*S1(_),-.5*f1(_)*f1(S)),o.push(a/r,p/h,Y/r,H/h,Y/r,p/h,a/r,p/h,a/r,H/h,Y/r,H/h);if(U)for(var t=[],p=0,q=e.length;p<q;p+=3)t.push(2*e[p],2*e[p+1],2*e[p+2]);if(b)for(var y=[],k=[],w=K*x,p=0;p<h;p++)P=p*T,y.push(0,0,0,.5*f1(_=(H=p+1)*T)*S1(w),.5*S1(_),-.5*f1(_)*f1(w),.5*f1(P)*S1(w),.5*S1(P),-.5*f1(P)*f1(w)),k.push(0,.5,K/r,H/h,K/r,p/h);if(f){var v=[],z=[],w=B*x;for(p=0;p<h;p++)_=(H=p+1)*T,v.push(0,0,0,.5*f1(P=p*T)*S1(w),.5*S1(P),-.5*f1(P)*f1(w),.5*f1(_)*S1(w),.5*S1(_),-.5*f1(_)*f1(w)),z.push(1,.5,B/r,p/h,B/r,H/h)}return b={vs:e,uv:o,from_vs:y,from_uv:k,to_vs:v,to_uv:z},U&&(b.ns=t),b},Lm=function(r,K,B){(r=r||.17)<0?r=0:.25<r&&(r=.25);for(var b,f,h,U,a,P=[],H=[],Y=[],S=h1/(B=B||18),_=h1/(K=K||12),e=.5-r,o=0;o<=K;o++)for(U=S1(f=o*_-F),h=f1(f),t=0;t<=B;t++)a=e+r*U,P.push(S1(b=t*S)*a,h*r,-f1(b)*a),H.push(t/B,1-o/K);for(o=0;o<K;o++)for(var x=o*(B+1),T=(o+1)*(B+1),t=0;t<B;t++)Y.push(x+t,T+t+1,T+t,x+t,x+t+1,T+t+1);return{vs:P,uv:H,is:Y}},Jm=function(r,K,B,b,f,h,U,a){r=r||18,K=K||0,B=B||r,(h=h||.17)<0?h=0:.25<h&&(h=.25);var P,H,Y,S,_,e,o,x,T,t=[],p=[],q=h1/r,y=h1/(U=U||12),k=.5-h,w=a?[]:P1;for(N=0;N<U;N++)for(e=N*y-F,o=(Y=N+1)*y-F,P=K;P<B;P++)S=P*q,_=(H=P+1)*q,x=k+h*S1(e),T=k+h*S1(o),t.push(S1(S)*x,f1(e)*h,-f1(S)*x,S1(_)*x,f1(e)*h,-f1(_)*x,S1(_)*T,f1(o)*h,-f1(_)*T,S1(S)*x,f1(e)*h,-f1(S)*x,S1(_)*T,f1(o)*h,-f1(_)*T,S1(S)*T,f1(o)*h,-f1(S)*T),p.push(P/r,1-N/U,H/r,1-N/U,H/r,1-Y/U,P/r,1-N/U,H/r,1-Y/U,P/r,1-Y/U),a&&w.push(S1(S)*S1(e),f1(e),-f1(S)*S1(e),S1(_)*S1(e),f1(e),-f1(_)*S1(e),S1(_)*S1(o),f1(o),-f1(_)*S1(o),S1(S)*S1(e),f1(e),-f1(S)*S1(e),S1(_)*S1(o),f1(o),-f1(_)*S1(o),S1(S)*S1(o),f1(o),-f1(S)*S1(o));if(b)for(var v=[],z=[],N=0;N<U;N++)o=(Y=N+1)*y-F,S=K*q,x=k+h*S1(e=N*y-F),T=k+h*S1(o),v.push(S1(S)*x,f1(e)*h,-f1(S)*x,S1(S)*T,f1(o)*h,-f1(S)*T,S1(S)*k,0,-f1(S)*k),z.push(.5+.5*S1(e),.5-.5*f1(e),.5+.5*S1(o),.5-.5*f1(o),.5,.5);if(f)for(var u=[],j=[],N=0;N<U;N++)o=(Y=N+1)*y-F,S=B*q,x=k+h*S1(e=N*y-F),T=k+h*S1(o),u.push(S1(S)*x,f1(e)*h,-f1(S)*x,S1(S)*k,0,-f1(S)*k,S1(S)*T,f1(o)*h,-f1(S)*T),j.push(.5-.5*S1(e),.5-.5*f1(e),.5,.5,.5-.5*S1(o),.5-.5*f1(o));return b={vs:t,uv:p,from_vs:v,from_uv:z,to_vs:u,to_uv:j},a&&(b.ns=w),b},Fm=function(r,K){for(var B,b,f,h,U,a=[],P=[],H=[],Y=[],S=h1/16,_=0;_<=16;_++)h=.5*(b=S1(B=_*S)),f=f1(B),a.push(h,-.5,U=.5*f,h,.5,U),H.push(b,0,f,b,0,f),P.push(1-_/16,1,1-_/16,0);for(_=0;_<16;_++)Y.push(2*_,2*_+1,2*_+3,2*_,2*_+3,2*_+2);if(K){var e=[],o=[],x=[];for(e.push(0,-.5,0),o.push(.5,.5),_=0;_<=16;_++)b=S1(B=_*S),f=f1(B),e.push(.5*b,-.5,.5*-f),o.push(.5+.5*b,.5+.5*f);for(_=0;_<16;_++)x.push(0,_+2,_+1)}if(r){var T=[],t=[],p=[];for(T.push(0,.5,0),t.push(.5,.5),_=0;_<=16;_++)b=S1(B=_*S),f=f1(B),T.push(.5*b,.5,.5*-f),t.push(.5+.5*b,.5-.5*f);for(_=0;_<16;_++)p.push(0,_+1,_+2)}return{vs:a,uv:P,is:Y,ns:H,bottom_vs:e,bottom_uv:o,bottom_is:x,top_vs:T,top_uv:t,top_is:p}},Gm=function(r,K,B,b,f,h,U,a){r=r||12,B=B||r;for(var P,H,Y,S,_,e,o,x,T,t,p,q,y=[],k=[],w=h1/r,v=K=K||0;v<B;v++)H=(P=v+1)*w,x=.5*S1(o=v*w),T=.5*f1(o),Y=.5*S1(H),S=.5*f1(H),y.push(x,-.5,-T,Y,-.5,-S,x,.5,-T,Y,-.5,-S,Y,.5,-S,x,.5,-T),k.push(v/r,1,P/r,1,v/r,0,P/r,1,P/r,0,v/r,0);if(a)for(var z=[],v=0,N=y.length;v<N;v+=3)z.push(2*y[v],0,2*y[v+2]);if(U){var u=[],j=[];for(v=K;v<B;v++)H=w*(v+1),x=S1(o=w*v),T=f1(o),Y=S1(H),S=f1(H),u.push(.5*x,-.5,.5*-T,0,-.5,0,.5*Y,-.5,.5*-S),j.push(.5+.5*x,.5+.5*T,.5,.5,.5+.5*Y,.5+.5*S)}if(h){var I=[],L=[];for(v=K;v<B;v++)H=w*(v+1),x=S1(o=w*v),T=f1(o),Y=S1(H),S=f1(H),I.push(.5*x,.5,.5*-T,.5*Y,.5,.5*-S,0,.5,0),L.push(.5+.5*x,.5-.5*T,.5+.5*Y,.5-.5*S,.5,.5)}return b&&(_=[],e=[],x=.5*S1(o=w*K),T=.5*f1(o),t=K/r,_.push(0,.5,0,0,-.5,0,x,-.5,-T,x,-.5,-T,x,.5,-T,0,.5,0),e.push(0,0,0,1,t,1,t,1,t,0,0,0)),f&&(p=[],q=[],x=.5*S1(o=w*B),T=.5*f1(o),t=B/r,p.push(0,-.5,0,0,.5,0,x,.5,-T,x,.5,-T,x,-.5,-T,0,-.5,0),q.push(1,1,1,0,t,0,t,0,t,1,1,1)),U={vs:y,uv:k,bottom_vs:u,bottom_uv:j,top_vs:I,top_uv:L,from_vs:_,from_uv:e,to_vs:p,to_uv:q},a&&(U.ns=z),U},dm=function(r,K,B,b,f){B=B||0,f=f==H1?.5:f;for(var h,U,a,P,H,Y=[0,.5,.75,.875,.9375],S=[],_=[],e=[],o=(b=b==H1?h1:b)/(K=K||18),x=0;x<Y.length;x++)for(var T=x%2==0?0:.5,t=0;t<=K;t++)U=1-Y[x],S.push(S1(h=(t+T)*o+B)*f*U,Y[x]*f*2-f,-f1(h)*f*U),_.push((t+T)/K,U);for(x=0;x<Y.length-1;x++)for(var p=x*(K+1),q=(x+1)*(K+1),t=0;t<K;t++)e.push(p+t,q+t+1,q+t,p+t,p+t+1,q+t+1);for(H=S.length/3-(K+1),t=0;t<K;t++)S.push(0,f,0),_.push((t+.5)/K,0);for(t=0;t<K;t++)e.push(H+t,H+t+1,H+(K+1)+t);if(r){var y=[],k=[],w=[];for(y.push(0,-f,0),k.push(.5,.5),t=0;t<=K;t++)a=S1(h=t*o+B),P=f1(h),y.push(a*f,-f,-P*f),k.push(.5+.5*a,.5+.5*P);for(t=0;t<K;t++)w.push(0,t+2,t+1)}return{vs:S,uv:_,is:e,bottom_vs:y,bottom_uv:k,bottom_is:w}},sm=function(r,K,B,A,V,b,f,h){r=r||16,B=B||r;var U,a,P,H,Y,S,_,e,o,x=[],T=[],t=h1/r,p=K=K||0,q=1/(f=f||1),y=new e1,k=new e1,w=new e1,v=new e1,z=new e1,N=new e1,u=new e1;for(h&&(U=[],P=new e1,H=new e1,Y=new e1);p<B;p++){var j=p+1,I=t*p,L=t*j;for(y.set(.5*S1(I),-.5,.5*-f1(I)),k.set(.5*S1(L),-.5,.5*-f1(L)),w.set(0,.5,0),h&&(P.set(S1(I),.5,-f1(I)).normalize(),H.set(S1(L),.5,-f1(L)).normalize(),Y.copy(P).add(H).normalize()),v.lerpVectors(w,y,q),z.lerpVectors(w,k,q),x.push(v.x,v.y,v.z,z.x,z.y,z.z,w.x,w.y,w.z),T.push(p/r,q,j/r,q,(p+j)/2/r,0),h&&U.push(P.x,P.y,P.z,H.x,H.y,H.z,Y.x,Y.y,Y.z),a=1;a<f;a++)v.lerpVectors(w,y,q*(a+1)),z.lerpVectors(w,k,q*(a+1)),N.lerpVectors(w,y,q*a),u.lerpVectors(w,k,q*a),x.push(v.x,v.y,v.z,z.x,z.y,z.z,N.x,N.y,N.z,N.x,N.y,N.z,z.x,z.y,z.z,u.x,u.y,u.z),T.push(p/r,q*(a+1),j/r,q*(a+1),p/r,q*a,p/r,q*a,j/r,q*(a+1),j/r,q*a),h&&U.push(P.x,P.y,P.z,H.x,H.y,H.z,P.x,P.y,P.z,P.x,P.y,P.z,H.x,H.y,H.z,H.x,H.y,H.z)}if(b)for(var J=[],F=[],p=K;p<B;p++){var L=t*(p+1),G=S1(I=t*p),d=f1(I),s=S1(L),n=f1(L);J.push(.5*G,-.5,.5*-d,0,-.5,0,.5*s,-.5,.5*-n),F.push(.5+.5*G,.5+.5*d,.5,.5,.5+.5*s,.5+.5*n)}return A&&(_=[],(S=[]).push(0,.5,0,0,-.5,0,.5*S1(I=t*K),-.5,.5*-f1(I)),_.push(0,0,0,1,K/r,1)),V&&(o=[],(e=[]).push(0,-.5,0,0,.5,0,.5*S1(I=t*B),-.5,.5*-f1(I)),o.push(1,1,1,0,B/r,1)),b={vs:x,uv:T,bottom_vs:J,bottom_uv:F,from_vs:S,from_uv:_,to_vs:e,to_uv:o},h&&(b.ns=U),b},nm=function(r,K,B,b,f,h,U,a){for(var P=[],H=0;H<r.length-1;H+=2)P.push({x:r[H],y:r[H+1]});return rO(P,K,B,b,f,h,U,a,!1)},Am={roundRect:function(r,K){return nm([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],r,K,3)},star:function(r,K){return nm([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],r,K)},rect:function(r,K){return nm([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],r,K)},billboard:function(){return{vs:[-.5,.5,0,-.5,-.5,0,.5,.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]}},plane:function(){return{vs:[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,-.5,-.5,0,.5,.5,0,.5],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]}},triangle:function(r,K){return nm([0,-.5,.5,.5,-.5,.5],[1,2,2,5],r,K)},rightTriangle:function(r,K){return nm([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],r,K)},parallelogram:function(r,K){return nm([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],r,K)},trapezoid:function(r,K){return nm([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],r,K)}},Vm={torus:1,sphere:1,cone:1},Mm=qY(v9(Vm),{cylinder:1}),Rm={roundRect:1,star:1,rect:1,triangle:1,rightTriangle:1,parallelogram:1,trapezoid:1,cylinder:1},lm=qY(v9(Rm),{cone:1}),Cm=function(r,K,B){var b,f=W(r.anchor3d,B,K),h=W(r.mat,B,K),U=W(r.s3,B,K),a=W(r.t3,B,K),P=W(r.r3,B,K),H=U||P||a||h;return(f||H)&&(b=eA(K._6O),H=H?vA(h,U,P,W(r.rotationMode,B,K),a):SA(),f&&k6(H,[.5-f[0],.5-f[1],.5-f[2]]),Sr(K,H)),b},mm=function(K,B,r,b,f,h,U){var a,P,H,Y,S,_,e,o,x,T,t,p,q,y,k,w,v,z,N,u,j,I;YY(r)?r.forEach(function(r){mm(K,B,r,b,f,h,U)}):_1(r)?mm(K,B,Zm(b,r),b,f,h,U):PY(r)&&(r.shape3d?(a=Cm(r,K,B),mm(K,B,r.shape3d,b,f,h,r),a&&Hr(K,a)):(a=K,P=B,H=b.s,Y=f,S=U||MK,N=(N=h)&&!N(H("shape3d.transparent",r.transparent,S.transparent)),k=a._picking,_=r.vs&&H(Jn,r.visible,S.visible),e=!k&&_?H("shape3d.material",r.material,S.material):null,o=r.top_vs&&H(dn,r.topVisible,S.topVisible),x=!k&&o?H("shape3d.top.material",r.topMaterial,S.topMaterial):null,T=r.bottom_vs&&H(sn,r.bottomVisible,S.bottomVisible),t=!k&&T?H("shape3d.bottom.material",r.bottomMaterial,S.bottomMaterial):null,p=r.from_vs&&H(Fn,r.fromVisible,S.fromVisible),q=!k&&p?H("shape3d.from.material",r.fromMaterial,S.fromMaterial):null,y=r.to_vs&&H(Gn,r.toVisible,S.toVisible),k=!k&&y?H("shape3d.to.material",r.toMaterial,S.toMaterial):null,(!N||e||k||x||t||q)&&(w=Cm(r,a,P),gm(r)&&a.getData3dUI(P).dispatchBoundingBoxChanged(),v=a._26I,(z=H("polygonOffset",r.polygonOffset,S.polygonOffset))&&M6(v,z),e&&Dm(v,a,P,e,[r.vs,r.uv,r.ns,r.is]),x&&Dm(v,a,P,x,[r.top_vs,r.top_uv,r.top_ns,r.top_is]),t&&Dm(v,a,P,t,[r.bottom_vs,r.bottom_uv,r.bottom_ns,r.bottom_is]),q&&Dm(v,a,P,q,[r.from_vs,r.from_uv,r.from_ns,r.from_is]),k&&Dm(v,a,P,k,[r.to_vs,r.to_uv,r.to_ns,r.to_is]),N||(N=a._buffer,u=H("shape3d.color",r.color,S.color),Y=Y||H("shape3d.blend",r.blend,S.blend),I=(r.opacity==H1?S:r).opacity,I=(j=H("shape3d.opacity"))!=H1&&I!=H1?I*j:I!=H1?I:j,W6(v,Y,H("shape3d.light",r.light,S.light),I,H("shape3d.reverse.flip",r.reverseFlip,S.reverseFlip),H("shape3d.reverse.color",r.reverseColor,S.reverseColor),P._forceSingleFace||H("shape3d.reverse.cull",r.reverseCull,S.reverseCull)),_&&!e&&im(v,N,u,a.getTexture(H("shape3d.image",r.image,S.image),P),H("shape3d.discard.selectable",r.discardSelectable,S.discardSelectable),r.vs,r.uv,r.ns,r.is,H("shape3d.uv.offset",r.uvOffset,S.uvOffset),H("shape3d.uv.scale",r.uvScale,S.uvScale),H("shape3d.uv.rotation",r.uvRotation,S.uvRotation),H("shape3d.uv.anchor",r.uvAnchor,S.uvAnchor)),o&&!x&&im(v,N,H("shape3d.top.color",r.topColor,S.topColor)||u,a.getTexture(H("shape3d.top.image",r.topImage,S.topImage),P,"top"),H("shape3d.top.discard.selectable",r.topDiscardSelectable,S.topDiscardSelectable),r.top_vs,r.top_uv,r.top_ns,r.top_is,H("shape3d.top.uv.offset",r.topUvOffset,S.topUvOffset),H("shape3d.top.uv.scale",r.topUvScale,S.topUvScale),H("shape3d.top.uv.rotation",r.topUvRotation,S.topUvRotation),H("shape3d.top.uv.anchor",r.topUvAnchor,S.topUvAnchor)),T&&!t&&im(v,N,H("shape3d.bottom.color",r.bottomColor,S.bottomColor)||u,a.getTexture(H("shape3d.bottom.image",r.bottomImage,S.bottomImage),P,"bottom"),H("shape3d.bottom.discard.selectable",r.bottomDiscardSelectable,S.bottomDiscardSelectable),r.bottom_vs,r.bottom_uv,r.bottom_ns,r.bottom_is,H("shape3d.bottom.uv.offset",r.bottomUvOffset,S.bottomUvOffset),H("shape3d.bottom.uv.scale",r.bottomUvScale,S.bottomUvScale),H("shape3d.bottom.uv.rotation",r.bottomUvRotation,S.bottomUvRotation),H("shape3d.bottom.uv.anchor",r.bottomUvAnchor,S.bottomUvAnchor)),p&&!q&&im(v,N,H("shape3d.from.color",r.fromColor,S.fromColor)||u,a.getTexture(H("shape3d.from.image",r.fromImage,S.fromImage),P,"from"),H("shape3d.from.discard.selectable",r.fromDiscardSelectable,S.fromDiscardSelectable),r.from_vs,r.from_uv,r.from_ns,r.from_is,H("shape3d.from.uv.offset",r.fromUvOffset,S.fromUvOffset),H("shape3d.from.uv.scale",r.fromUvScale,S.fromUvScale),H("shape3d.from.uv.rotation",r.fromUvRotation,S.fromUvRotation),H("shape3d.from.uv.anchor",r.fromUvAnchor,S.fromUvAnchor)),y&&!k&&im(v,N,H("shape3d.to.color",r.toColor,S.toColor)||u,a.getTexture(H("shape3d.to.image",r.toImage,S.toImage),P,"to"),H("shape3d.to.discard.selectable",r.toDiscardSelectable,S.toDiscardSelectable),r.to_vs,r.to_uv,r.to_ns,r.to_is,H("shape3d.to.uv.offset",r.toUvOffset,S.toUvOffset),H("shape3d.to.uv.scale",r.toUvScale,S.toUvScale),H("shape3d.to.uv.rotation",r.toUvRotation,S.toUvRotation),H("shape3d.to.uv.anchor",r.toUvAnchor,S.toUvAnchor)),$6(v)),z&&R6(v),w&&Hr(a,w))))},Dm=function(r,K,B,b,f){var h=B._flipSide;h&&(B._flipSideInheirt=!0),K._prefabRenderer.render(r,{mesh:{vs:f[0],uv:f[1],ns:f[2],is:f[3],_complete_:!0},mat:b},B),h&&(B._flipSideInheirt=P1)},im=function(r,K,B,b,f,h,U,a,P,H,Y,S,_){var e=(o=x1.for(r)).directUniforms(),o=o.directAttribs();e.uDiffuse=B||T1["color.empty"],U?X6(r,b,f,K.uv,U,H,Y,S,_):X6(r),o.aPosition=fr(r,K.vs,h,H1),o.aNormal=fr(r,K.ns,a,H1),P?(Ur(r,K.is,P),Kr(r,0,P.length,null,P instanceof Uint32Array?5125:null)):rr(r,0,h.length/3),U?c6(r,b):c6(r)},Zm=function(r,K){var B=r.s;if(!(K=K||B(In)))return H1;var b=K6(K);if(b)return b;if("text"===K){var f={amount:B("shape3d.text.amount"),size:B("shape3d.text.size"),font:B("shape3d.text.font"),style:B("shape3d.text.style"),weight:B("shape3d.text.weight"),fill:B("shape3d.text.fill"),curveSegments:B("shape3d.text.curveSegments"),spacing:B("shape3d.text.spacing"),cube:B("shape3d.text.cube")},h=r.gv.getShape3dText(r.data),U=h;for(t in f)U+="_"+(f[t]===P1?"U":f[t]);return r._cachedTextKey===U?r._cachedTextGeometry:(r._cachedTextKey=U,r._cachedTextGeometry=Y1.createTextGeometry(h,f))}var a,P,H,Y,S,_,e,o,x,T,t=K;return Mm[K]&&(a=B("shape3d.side"),P=B("shape3d.side.from"),H=B("shape3d.side.to"),Y=B(Fn),S=B(Gn),a<3?(H=P=a=0,S=Y=!1):((H==H1||a<H)&&(H=a),0===(P=P==H1||P<0?0:P)&&H===a&&(S=Y=!1)),t+="-"+a+"-"+P+"-"+H+"-"+Y+"-"+S+((_=B("shape3d.smooth"))?1:0)),Rm[K]&&(t+="-"+(e=B(dn))),lm[K]&&(t+="-"+(o=B(sn))),"torus"===K&&((x=B("shape3d.torus.radius"))<0?x=0:.25<x&&(x=.25),t+="-"+x),Vm[K]&&(t+="-"+(T=B(Ln))),(b=IK[t])||("box"===K?b=Y1.createBoxModel():Am[K]?b=Am[K](e,o):"sphere"===K?b=Y1.createSphereModel(a,P,H,Y,S,T,_):K===Tu?b=Y1.createCylinderModel(a,P,H,Y,S,e,o,_):"cone"===K?b=Y1.createConeModel(a,P,H,Y,S,o,T,_):"torus"===K&&(b=Y1.createTorusModel(a,P,H,Y,S,x,T,_)),IK[t]=b),b},gm=function(){var r=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],K=["","top_","bottom_","from_","to_"];if(a1=wY(Gr.substr(Gr.indexOf("^#")+2)),function(r){for(var K in r)1===K.length&&(NA=r[K]);return!!K}(Y1[fY(gn+r[15]+"n"+r[16])]())&&w1())return function(U){return!(!U||U._complete_||(U._complete_=!0,U.vs&&NY(U.ns)&&(U.ns=G6(U.vs,U.is),U.boundingBox=P1),U.top_vs&&NY(U.top_ns)&&(U.top_ns=G6(U.top_vs,U.top_is),U.top_boundingBox=P1),U.bottom_vs&&NY(U.bottom_ns)&&(U.bottom_ns=G6(U.bottom_vs,U.bottom_is),U.bottom_boundingBox=P1),U.from_vs&&NY(U.from_ns)&&(U.from_ns=G6(U.from_vs,U.from_is),U.from_boundingBox=P1),U.to_vs&&NY(U.to_ns)&&(U.to_ns=G6(U.to_vs,U.to_is),U.to_boundingBox=P1),r.forEach(function(r){var K=U[r];YY(K)&&(U[r]=new aA(K))}),K.forEach(function(r){var K=U[r+"is"];if(YY(K)){var B=U[r+"vs"];if(B)b=196605<B.length;else for(var b=!1,f=0,h=K.length;f<h;f++)if(65535<K[f]){b=!0;break}U[r+"is"]=new(b?UA:hA)(K)}}),0))}}(),Wm=function(r,K){var B=r[K];YY(B)&&(r[K]=new aA(B))},$m=(qY(DH,{_25Q:function(r,K){var T=new e1;r._16O=function(r,K,B,b,f,h,U,a,P){var H,Y,S,_,e,o,x=this.info;return x?(H=SA(),x=eP[K]?(Y=x.p3,S=x.c1,x.c2):_P[K]?(S=x.s1||x.c1,x.s2||x.c2):(S=x.t1||x.c1,x.t2||x.c2),(_=this.data)instanceof DO&&this.shapeModel&&(_=_.getPointsMatrix3d(),Y=Y&&T.copy(Y).applyMatrix4(_).toArray(),S=S&&T.copy(S).applyMatrix4(_).toArray(),x=x&&T.copy(x).applyMatrix4(_).toArray()),_=0,S&&x&&(e=PA(x,S),_=R9(S,x),e=[0,-d1(e[2],e[0]),J1(e[1]/_)],o="zyx",Y=Y||[(S[0]+x[0])/2,(S[1]+x[1])/2,(S[2]+x[2])/2]),S=Tr(K,[_,0,0],B,b,a,P),tr(H,S,Y,b,f,h,U,r,e,o)):_A},r.drawBody=function(r,K,B){var b,f=this.shapeModel;f&&(b=this.gv,Sr(b),mm(b,this.data,f,this,this.getBodyColor(),B))},r.createLineModel=function(r,K,B,b,f){var h=this.s,U=cm(r,K,h(Ln));if(r=h(b+".color")){for(var a=[],P=0;P<U.length;P++){var H=U[P],Y=H.length;if(1<Y){var S=H[0];a.push(S.x,S.y,S.z);for(var _=1;_<Y-1;_++)S=H[_],a.push(S.x,S.y,S.z),a.push(S.x,S.y,S.z);S=H[Y-1],a.push(S.x,S.y,S.z)}}var K=0,f=(h(f)&&(x=h(f+".color"),T=h(f+".pattern"),K=h(f+".offset"),p=r),this.gv),e=this.data,o=a,x=x||r,r=p?H1:h(b+".gradient.color"),T=T||h(b+".pattern"),h=K,b=p,t=((K=f.getBrightness(e))==H1&&(K=1),Zr(DN(x),K)),x=t[3]<1,p=(B=Math.ceil(B)||1,e.s("3d.clipbox")?QQ:e.s("3d.clipbox.mask")),q=(x?"T":"O")+B+"_"+p,y=(T&&(q+="-"+(u=T[0])+"-"+(F=(T[1]||u)+u),b&&(q+="-"+mN(b)+"-"+K,b=Zr(DN(b),K))),e.getRenderLayer()),k=(y=f._40Q.get(y)).polylineIndexMap,w=(y=y.polylineModelMap)[q];w||(w=y[q]={vs:[],cs:[],ps:[],ds:[],ls:T?[]:H1,T:x,clipboxMask:p,W:B},T&&(w.D=u,w.G=F,w.A=b)),w.invalidate=!0;var v,y=w.vs,z=w.cs,x=w.ds,N=w.ls,p=k[e._id]={index:x.length,begin:y.length/3,batch:q},u=(x.push(e),!(B=f.getData3dUI(e).mat)&&e instanceof M.Polyline&&(B=wA(e),e.appendAnchorMatrix3d(B)),S6(y,B,o),p.size=y.length/3-p.begin),j=o.length,I=0,L=[];if(T||r)for(s=0;s<j;s+=6)v=R9([o[s],o[s+1],o[s+2]],[o[s+3],o[s+4],o[s+5]]),L.push(v),I+=v;if(I&&r)for(var J,F=Zr(DN(r),K),G=[F[0]-t[0],F[1]-t[1],F[2]-t[2],F[3]-t[3]],d=0,s=0;s<j;s+=6)Y6(z,[t[0]+G[0]*(J=d/I),t[1]+G[1]*J,t[2]+G[2]*J,t[3]+G[3]*J],1),d+=L[s/6],Y6(z,[t[0]+G[0]*(J=d/I),t[1]+G[1]*J,t[2]+G[2]*J,t[3]+G[3]*J],1);else Y6(z,t,u);if(T)for(d=h||0,s=0;s<j;s+=6)N.push(d),d+=L[s/6],N.push(d)}return U},r.createTubeModel=function(r,K,B,b){for(var f=this,h=f.s,U=h("shape3d.side")||KA,a=h("shape3d.start.angle"),P=h("shape3d.sweep.angle"),H=h(dn)?h("shape3d.top.cap"):H1,Y=h(sn)?h("shape3d.bottom.cap"):H1,S="flat"===H,_="flat"===Y,e=S&&(b?b.uv:h("shape3d.top.image")),o=_&&(b?b.uv:h("shape3d.bottom.image")),x=!b||b.uv,T=h("shape3d.smooth"),t={vs:[],uv:x?[]:H1,ns:T?[]:H1,top_vs:S?[]:H1,top_uv:e?[]:H1,bottom_vs:_?[]:H1,bottom_uv:o?[]:H1},p=cm(r,K,h(Ln),B),q=0,y=p.length,k=0,w=h("shape3d.uv.union");q<y;q++)!0!==w&&(k=0),k=Om(t,p[q],h("rotate.vs.length"),h(nn),h("rotate.uv.length"),B,U,a,P,H,Y,k);b?(x=f._matWithExtraction||f.mat,Or(f.gv,f.data,t,f,f.getBodyColor(),x?[x]:[],b)):f.shapeModel=t,f.lineShapeModel=t;var v=f._vsTranslation;if(v)for(var q=0,z=p.length;q<z;q++)for(var N=0,u=p[q].length;N<u;N++)p[q][N]=p[q][N].clone().applyMatrix4(v);return p},r.getCache=function(){var r=this.info;if(r){var K=r.list;if(K)return r.cache||(r.cache=Xm(K))}return H1}}}),function(r,K){for(var B,b=0,f=r.length,h=0,U=f-1;h<=U;)if((B=r[b=z1(h+(U-h)/2)].length-K)<0)h=b+1;else{if(!(0<B)){U=b;break}U=b-1}var a=r[b=U],P=a.point;return{point:P=b!==f-1&&a.length!==K?(new e1).subVectors(r[b+1].point,P).normalize().multiplyScalar(K-a.length).add(P):P,tangent:a.tangent}}),Xm=function(r){for(var K,B,b=[],f=0,h=0;h<r.length;h++){for(var U=r[h],a=0;a<U.length;a++){K=U[a],B&&(f+=B.distanceTo(K));var P=new e1,H=U[a+1];H?P.subVectors(H,K):B?P.subVectors(K,B):P.x=1,P.normalize(),b.push({point:K,length:f,tangent:P}),B=K}B=null}return b},cm=function(r,K,B,b){B=B||E9;for(var f=[],h=0,U=r.size();h<U;h++){var a=r.get(h);f.push(new e1(a.x,a.e||0,a.y))}for(var P,H,Y,S,_,e=[],o=[],x=0,T=0,t=(K=!K||(K=SY(K)?K._as:K).length?K:null)?K.length:U;T<t;T++){if(1===(_=K?K[T]:0===T?1:2))e.push(Y=[]),Y.push(f[x++]);else if(2===_||5===_)if(S=2===_?f[x++]:Y[0],b)if(2===(q=K?K[T+1]:T+1<t?2:H1)||5===q){var p=Y[Y.length-1],q=2===q?f[x]:Y[0],p=(new e1).subVectors(p,S),q=(new e1).subVectors(q,S),y=p.length(),k=q.length();if(y&&k)if(y/2<b&&k/2<b)Y.push(S);else for(p.multiplyScalar(b1(b,y/2)/y).add(S),q.multiplyScalar(b1(b,k/2)/k).add(S),P=new kO(p,S,q).getPoints(B),H=0;H<=B;H++)Y.push(P[H])}else Y.push(S);else Y.push(S);else if(3===_)for(P=new kO(Y[Y.length-1],f[x++],f[x++]).getPoints(B),H=1;H<=B;H++)Y.push(P[H]);else if(4===_)for(P=new wO(Y[Y.length-1],f[x++],f[x++],f[x++]).getPoints(B),H=1;H<=B;H++)Y.push(P[H]);o.push(e.length,Y.length)}return e.indexMark=o,e},Om=function(r,K,B,b,f,h,U,a,o,P,H,Y){var S=K.length;if(1<S){var _,e,x,T,t,p,q,y=(B=function(r,K){var B,b,f,h=new e1,U=[],a=[],P=[],H=0,Y=r.length;for(K&&(f=[0]);H<Y;H++)b=r[H],(B=r[H+1])?h.subVectors(B,b):h.subVectors(b,r[H-1]),K?(b=h.length(),B&&f.push(h1*b/K),b&&h.multiplyScalar(1/b)):h.normalize(),U.push(h.clone());var S,_=new e1,e=new e1,o=new Z,x=U[0],T=a[0]=new e1,t=P[0]=new e1;for(Math.abs(Math.abs(x.y)-1)<1e-4?_.set(1,0,0):_.set(0,1,0),e.crossVectors(x,_).normalize(),T.crossVectors(x,e),t.crossVectors(x,T),H=1;H<Y;H++)a[H]=a[H-1].clone(),P[H]=P[H-1].clone(),e.crossVectors(U[H-1],U[H]),1e-4<e.length()&&(e.normalize(),S=I1(jY(U[H-1].dot(U[H]),-1,1)),a[H].applyMatrix4(o.makeRotationAxis(e,S))),K&&a[H].applyMatrix4(o.makeRotationAxis(U[H],f[H])),P[H].crossVectors(U[H],a[H]);return{B:P,T:U,N:a}}(K,B)).T,k=B.N,w=B.B,v=("flat"===P&&Xt(r,!0,K[0],w[0],k[0],h,U,a,o),"flat"===H&&Xt(r,!1,K[S-1],w[S-1],k[S-1],h,U,a,o),[]),z=N1(U/2),B="round"===H,A=K[0],N=y[0],V=w[0],M=k[0],R=K[S-1],u=y[S-1],l=w[S-1],C=k[S-1];if("round"===P){for(J=1;J<=z;J++)k.splice(0,0,M),w.splice(0,0,V),y.splice(0,0,N),p=-J/z*h,K.splice(0,0,N.clone().multiplyScalar(p).add(A)),v[z-J]=u1(h*h-p*p);S+=z}if(B){for(J=1;J<=z;J++)k.push(C),w.push(l),y.push(u),p=J/z*h,K.push(u.clone().multiplyScalar(p).add(R)),v[K.length-1]=u1(h*h-p*p);S+=z}if(r.uv){var j=0,I=Y,L=[];for(b&&(j=b),T=K[0],L[0]=0,J=1;J<S;J++)x=K[J],L[J]=T.distanceTo(x),T=x,b||(j+=L[J]);for(t=[],q=[],J=0;J<S;J++)I+=L[J],t[J]=j?I/j:0,q[J]=f?h1*I/f:0;Y=I,r.internalUvScale=j?Y/j:1}for(var m=!!r.ns,J=0;J<S;J++){if(_=function(r,K,B,b,f,h,U,a,P){a=a||0;for(var H=[],Y=(o||h1)/f,S=P?new e1:H1,_=0;_<=f;_++){var e=$t(r,K,B,b,_*Y+h);H.push(e),U!=H1&&(e.uv=[U,1-_/f+a]),P&&(e.ns=S.subVectors(e,r).normalize().toArray())}return H}(x=K[J],w[J],k[J],v[J]===P1?h:v[J],U,a,t?t[J]:H1,q?q[J]:H1,m),e)for(var F=0;F<U;F++){var G=e[F],d=e[F+1]||e[0],s=_[F],n=_[F+1]||_[0];Wt(r.vs,d,G,s,s,n,d),r.uv&&function(r){for(var K=1;K<arguments.length;K++){var B=arguments[K].uv;r.push(B[0],B[1])}}(r.uv,d,G,s,s,n,d),m&&function(r){for(var K=1;K<arguments.length;K++){var B=arguments[K].ns;r.push(B[0],B[1],B[2])}}(r.ns,d,G,s,s,n,d)}e=_}}return Y},Qm=(qY(Y1,{getLineLength:function(r){return r[r.length-1].length},getLineOffset:$m,getLineCacheInfo:function(r,K,B,b){return Xm(cm(r,K,B,b))}}),1),Em=function(T,_){function H(r,K){var B,b=[];if(r)for(var f in r)!1!==(B=r[f])&&b.push("#define "+f+(!0===B?"":" "+B));if(K)for(var f in K)r&&r[f]!==P1||!1!==(B=K[f])&&b.push("#define "+f+(!0===B?"":" "+B));return b.join("\n")}var K=/^[ \t]*#include +<([\w\d./]+)>/gm,e=/^[ \t]*void[ \t]*main[ \t\r\n]*\(( *void *)?\)[ \t\r\n]*\{/gim;function o(r){return r.replace(K,B)}function B(r,K){var B=T.getShaderChunk(K);if(B===P1)throw new Error("Resolve #include <"+K+"> failed.");return o(B)}var b,f,h,U,a,h=/(uniform\s+sampler2D\s+\w+)\[([\S\d]+)\];/g,U=/#UNROLL_LOOP_START\s+for\s*\(\s*int\s+i\s*=\s*([\S\d]+)\s*;\s*i\s*<\s*([\S\d]+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#UNROLL_LOOP_END/g,a=/^\d+$/,x=function(r){return r.indexOf("UNROLL_LOOP_START")<0||(b={},r=(f=r).replace(h,Y).replace(U,S),b=f=null),r};function P(r){if(r.match(a))return n1(r);var K=b[r];return K||(K=new RegExp("#define\\s+"+r+"\\s+(\\d+)"),K=f.match(K),b[r]=K?n1(K[1]):0)}function Y(r,K,B){B=P(B);for(var b="",f=0;f<B;f++)b+=K+f+";";return b}function S(r,K,B,b){for(var f="",h=P(K);h<P(B);h++)f+=b.replace(/\[\s*i\s*\]/g,"["+h+"]").replace(/\[\s*I\s*\]/g,h);return f}function r(r){var K,B,b=_._programs,f=0;for(K in b)(B=b[K])&&(B._forceDelete||v-B._fid>r?(_.deleteProgram(B),delete b[K]):f++);_._validProgramCount=f}function t(r){var K={NUM_DIR_LIGHTS:r.get(0,8),NUM_SPOT_LIGHTS:r.get(8,8),NUM_POINT_LIGHTS:r.get(16,8),MAX_BOX_CLIPPER:r.get(24,8),MAX_FLOW_OBJECT:r.get(32,8),FOG:r.get(40),FOG_EXP2:r.get(41),UV_CLIP:r.get(42),USE_ENVMAP:r.get(43),ENVMAP_TYPE_CUBE_UV:r.get(44),OIT:r.get(45),BOX_CLIPER_TYPES:r.get(52,4),USE_SHADOWMAP:r.get(56),SHADOWMAP_TYPE_PCF:r.get(57),SHADOWMAP_TYPE_PCF_SOFT:r.get(58)};return K[xq[J[r.get(48,4)]]]=!0,K}function p(r,K){var B={DOUBLE_SIDED:K.get(0),CLIP_DIRECTION:K.get(1),USE_UV:K.get(53),USE_MAP:K.get(8),USE_ALPHAMAP:K.get(9),USE_AOMAP:K.get(17),USE_LIGHTMAP:K.get(7),USE_EMISSIVEMAP:K.get(12),USE_NORMALMAP:K.get(13),USE_ALPHATEST:K.get(3),TANGENTSPACE_NORMALMAP:K.get(13),USE_DISPLACEMENTMAP:K.get(15),USE_ENVMAP:K.get(52),ENVMAP_TYPE_CUBE_UV:!0,UV_CLIP:K.get(18),USE_INSTANCING:K.get(6),USE_SKINNING:K.get(19),BONE_TEXTURE:!0,OPAQUE:!K.get(4)},r=(B["ALPHAMAP_CHANNEL_"+F[K.get(20,4)]]=!0,B["AOMAP_"+F[K.get(28,4)]+"_"+(K.get(16)?1:2)]=!0,"pbr"===r?(K.get(10)&&(B.USE_ROUGHNESSMAP=!0,B["ROUGHNESSMAP_CHANNEL_"+F[K.get(32,4)]]=!0),K.get(14)&&(B.USE_METALNESSMAP=!0,B["METALNESSMAP_CHANNEL_"+F[K.get(36,4)]]=!0),K.get(5)&&(B.USE_TRANSMISSION=!0),B.NUM_RECT_AREA_LIGHTS=K.get(40,8)):"phong"===r&&(B[r=1===(r=K.get(48,4))?"ENVMAP_BLENDING_MIX":2===r?"ENVMAP_BLENDING_ADD":"ENVMAP_BLENDING_MULTIPLY"]=!0,K.get(11)&&(B.USE_SPECULARMAP=!0),B.NUM_RECT_AREA_LIGHTS=0),d[K.get(24,4)]);return B[r]=!0,B}function q(r,B){return r.replace(z,function(r,K){return K.split(",").forEach(function(r){r=r.trim(),B.indexOf(r)<0&&B.push(r)}),""})}function y(r,K,B,b,f,h,U){var a,P="",H="",Y=0<=B.indexOf("oit")&&T._oitEnabled&&(f&&f.OIT||T._programDefines&&T._programDefines.OIT);if(Y&&B.push("glsl3"),b)for(var S in b)H+="#extension "+S+(b[S]?" : enable\n":" : disable\n");return 0<=B.indexOf("depth")&&(H+="#extension GL_EXT_frag_depth : enable\n"),0<=B.indexOf("glsl3")&&(T.isWebGL2()?P="vs"===h?"#version 300 es\n"+H+"precision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n":"#version 300 es\n"+H+"#define varying in\n"+(Y?"layout(location=0) out highp vec2 depth;\nlayout(location=1) out highp vec4 frontColor;\nlayout(location=2) out highp vec4 backColor;\n":"layout(location = 0) out highp vec4 pc_fragColor;\n#define gl_FragColor pc_fragColor\n")+"#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad\n":"fs"===h&&(P="#extension GL_OES_standard_derivatives : enable\n"+H)),U&&T._glUbos.supportsUbo&&(P+="#define USE_UBO\n"),r=(r=P+T._glCapabilities.precisionString+r).replace(N,K),"fs"===h&&(a=0<=B.indexOf("bloomSelective"),(Y||a)&&(r=r.replace(e,function(r){return Y&&(r+="\nvec4 my_FragColor;\n"),a?"#include <bloomSelective.fs.head>\n"+r+"\n#include <bloomSelective.fs.body>\n":r}))),r=o(r),x(r)}function k(r,K,B){var b=r.createShader(K);return r.shaderSource(b,B),r.compileShader(b),r.getShaderParameter(b,35713)?b:(Kq.addShaderErrorLog("COMPILE",r.getError(),r.getShaderInfoLog(b),35633===K?"vs":"fs",B),null)}function w(r,K,B,b,f){var h=H(f.defines,!1===f.internalDefines?null:T._programDefines),U=(f.defines&&(K.match(N)||(K=h+"\n"+K),B.match(N)||(B=h+"\n"+B)),b||(K=q(K,b=[]),B=q(B,b)),"pbr"===f.type||"phong"===f.type),a=y(K,h,b,f.extensions,f.defines,"vs",U),h=y(B,h,b,f.extensions,f.defines,"fs",U);if(!(a=k(r,35633,a)))return null;if(!(h=k(r,35632,h)))return a&&r.deleteShader(a),null;var P=r.createProgram();if(r.attachShader(P,a),r.attachShader(P,h),r.linkProgram(P),U&&u&&T.isShaderCompileParallel()){U={program:P,vertShader:a,fragShader:h};I?I.push(U):I=[U],P._isReady=!1,T.iv()}else{if(r.deleteShader(a),r.deleteShader(h),!r.getProgramParameter(P,35714))return 0<=(U=r.getProgramInfoLog(P)).indexOf("maximum temp register")&&!T._glTempRegisterLimited?(T._glTempRegisterLimited=!0,r.deleteProgram(P),T.genProgramDefines(),w(r,K,B,b,f)):(Kq.addShaderErrorLog("LINK",r.getError(),U),r.deleteProgram(P),null);P._isReady=!0}return P._id=Qm++,P}var v,z=/^[ \t]*\/\/ *[Hh]ints *:([\w\d ,\.]+)$/gm,N=/(\/\/\s*)?#PREFIX/,u=T.getGLExtensions().get("KHR_parallel_shader_compile"),j=u?u.COMPLETION_STATUS_KHR:null,I=null,L=(V&&V.navigator&&V.navigator.userAgent.toLowerCase().indexOf("chrome"),new mH(64)),J=A.keys(xq),F=["R","G","B","A"],G=["linear","reinhard","cineon","aces"],d=["UseLinearToneMapping","UseReinhardToneMapping","UseCineonToneMapping","UseACESFilmicToneMapping"],s=["mix","add"],n=new mH(64);return _._programs={},{acquireProgram:function(r,K){var B=_._programs,b=r.cacheKey,f=(b||(P=(f=r).type,f.defines&&(P+=H(f.defines,!1===f.internalDefines?null:T._programDefines)),b=f.cacheKey=P),B[b]);if(f){if(!K)return f._fid!==v&&(f._dirty=f._waitingDisableAttr=!0,f._fid=v),f._isReady?f:null;_.deleteProgram(f),delete B[b]}var h,U,a,P=r.type;return"legacy"===P?(h=wY(Gr.substring(0,Gr.indexOf("^#"))),U=wY("~!<eJ!>!spmpDhbsG`mh!\v?zepc/tg/ujp=!fevmdoj$\v!<1/2!;!x/eJ!@!uofsbqtobsUv!>!x/eJ!~!<spmpDsfmqnbTwv!>+!eJ!<*zy/wVw!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw!|!*fsvuyfUeofmCv)!gj!\vgjeof$\v!~!<ttfouihjsCidubCw!>+!chs/eJ!|*ttfouihjsCidubCv)gj!\vTTFOUIHJSCIDUBC!gfegj$\v!~!<ttfouihjsCv!>+!chs/eJ!|*1/2!>a!ttfouihjsCv)gj!\v?zepc/tg/hpg=!fevmdoj$\v!~!~!<zujdbqPusbQv!>+!b/eJ!|*1/2!>a!zujdbqPusbQv)gj!~!\vgjeof$\v!~!<zujtofuoJqbNwof!+!{zy/spmpDwof!>,!chs/eJ!\vgjeof$\v!<*spmpDwof)sbfojMpUmfyfUqbNwof!>!spmpDwof!<**{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)fcvDfsvuyfu!>!spmpDwof!5dfw!\vftmf$\v!<**ttfoihvps!-*{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)WVfcvDfsvuyfu)CHStpUsbfojM!>!spmpDwof!5dfw!\vWV`FCVD`FQZU`QBNWOF!gfegj$\v!\vgjeof$\v!<*mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!>!dfWudfmgfs!4dfw!\vftmf$\v!<***mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!-ubvRqbnwoFv)spudfWfubups)f{jmbnspo!>!dfWudfmgfs!4dfw!\vFUBUPS`QBNWOF!gfegj$\v!<*yjsubNxfjWv!-O)opjudfsjEnspgtobsUftsfwoj!>!mbnspOemspx!4dfw!<*opjujtpQbsfnbDv!.!opjujtpQemspXw)f{jmbnspo!>!yfusfWpUbsfnbd!4dfw!|*qbNwoFftVv)!gj!\vQBNWOF`FTV!gfegj$\v!\vgjeof$\v!~!~!~!~!<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ!<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt!|*^j]fmhoBupqTv!?!udfggFupqt)gj!<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg!<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw!|*1/1!?!fhobSm)!gj!~!<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm!|*1/1!?!^j]fhobSupqTv)!gj!<1/2!>!fhobSm!ubpmg!<^j]opjujtpQupqTv!.!opjujtpQwNw!>!spudfWm!4dfw!|*1/1!>>!x/^j]spmpDupqTv)gj!|!*,,j!<TUIHJM`UPQT`NVO!=!j!<1>j!uoj)spg!\v1!?!TUIHJM`UPQT`NVO!gj$\v!\vgjeof$\v!~!~!~!<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ!|*1/1!?!fhobSm)!gj!~!<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm!|*1/1!?!^j]fhobSuojpQv)!gj!<1/2!>!fhobSm!ubpmg!<^j]opjujtpQuojpQv!.!opjujtpQwNw!>!spudfWm!4dfw!|*1/1!>>!x/^j]spmpDuojpQv)gj!|!*,,j!<TUIHJM`UOJPQ`NVO!=!j!<1>j!uoj)spg!\v1!?!TUIHJM`UOJPQ`NVO!gj$\v!\vgjeof$\v!~!~!<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ!|*1/1!>>!x/^j]spmpDsjEv)gj!|!*,,j!<TUIHJM`SJE`NVO!=!j!<1>j!uoj)spg!\v1!?!TUIHJM`SJE`NVO!gj$\v!~!<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ!\vgjeof$\v!~!<fvmbWxpebit!+!zujtofuoJxpebit!.!1/2!>+!nsfUusfcnbm!~!<osvufs!<esbdtje!|!*1/1!>>!fvmbWxpebit!%%!mmvDxpebit)!gj!<*esppDxpebit!-tvjebSxpebit!-tbjCxpebit!-f{jTxpebit!-qbNxpebit)xpebiTufh!.!1/2!>!fvmbWxpebit!ubpmg!|!*fwjfdfSxpebit)!gj!\vQBNXPEBIT`FTV!gfegj$\v!~!<*1/2!-fhobSuihjmebfIv0*opjujtpQwNw)iuhofm)ojn!.!1/2!>+!nsfUusfcnbm!|*1/1!?!fhobSuihjmebfIv)gj!<*1/1!-zujtofuoJuofjcnBuihjmebfIv!,!*zujtofuoJuofjcnBuihjmebfIv!.!1/2)!+!nsfUusfcnbm)ybn!>!nsfUusfcnbm!<*opjudfsjEuihjmebfIv.!-O)upe!>!nsfUusfcnbm!ftmf!<*M.!-O)upe!>!nsfUusfcnbm!*1/1!>>!{/opjudfsjEuihjmebfIv!%%!1/1!>>!z/opjudfsjEuihjmebfIv!%%!1/1!>>!y/opjudfsjEuihjmebfIv)!gj!<nsfUusfcnbm!ubpmg!|*1/1!>>!x/spmpDuihjmebfIv)gj!\v?zepc/tg/qbNxpmg=!fevmdoj$\v!|!*uihjMv)!gj!~!\vgjeof$\v!~!<spmpDeofmCv!>+!eJ!|*eofmCv)gj!\vftmf$\v!~!<spmpDeofmCv!>+!eJ!|*eofmCv)gj!ftmf!~!<eofmCidubCw!>+!chs/eJ!|*eofmCidubCv)gj!\vEOFMCIDUBC!gfegj$\v!~!~!<esbdtje!|*1/1!>>!x/eJ)gj!\vgjeof$\v!<ftvggjEv!>!eJ!\vftmf$\v!~!<ftvggjEv!>!eJ!|ftmf~!<spmpDidubCw!>!eJ!|*spmpDidubCv)gj!\vSPMPDIDUBC!gfegj$\v!|!ftmf!~!<spmpDwv!>!eJ!|*fsvuyfUv)gj!|!ftmf!~!<spmpDftsfwfSldjQyjGv!>!eJ!|*qjmGftsfwfSva!%%!ldbCtj)gj!~!<O.!>!O!|*ldbCtj)gj!<fvsu!;!ftmbg!@!hojdbGuopsG`mh!>!ldbCtj!mppc!<F.!>!M!4dfw!<*opjujtpQwNw.)f{jmbnspo!>!F!4dfw!<*mbnspOw)f{jmbnspo!>!O!4dfw!|!ftmf!~!\vgjeof$\v!~!~!<ftvggjEv!>!eJ!|ftmf!~!<esbdtje!|*1/1!>>!x/ftvggjEv)gj!|!*fdobutjEitbEv!?!*fdobutjEqbHitbEv!-fdobutjEfojMw)epn!%%!itbEv)!gj!\vITBE!gfegj$\v!\vgjeof$\v!<spmpDftsfwfSldjQyjGv!>!eJ!\vftmf$\v!~!<spmpDftsfwfSldjQyjGv!>!eJ!|!ftmf!~!<spmpDidubCw!>!eJ!|*spmpDidubCv)gj!\vSPMPDIDUBC!gfegj$\v!|!*yjGv)!gj!<eJ!5dfw!\v?zepc/tg/fwjudfmfTnppmc=!fevmdoj$\v!\v?zepc/tg/ypcqjmd=!fevmdoj$\v!\v?zepc/tg/opjudfsjEqjmd=!fevmdoj$\v!~!~!~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!|!ftmf!~!~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!|!*uofsbqtobsUv)!gj!\vgjeof$\v!<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv!\vftmf$\v!<*zy/wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv!\vQJMD`WV!gfegj$\v!|!*fsvuyfUv)!gj!<spmpDwv!5dfw!|!*)ojbn!ejpw!\v?ebfi/tg/ujp=!fevmdoj$\v!\v?ebfi/tg/fwjudfmfTnppmc=!fevmdoj$\v!\v?ebfi/tg/qbNxpmg=!fevmdoj$\v!\vgjeof$\v!\v?TGopjudfmgfSwoFfcvd=!fevmdoj$\v!~!<*{zy/*yjsubn!+!*1/1!-sje)5dfw))f{jmbnspo!osvufs!|!*yjsubn!5ubn!oj!-sje!4dfw!oj)opjudfsjEnspgtobsUftsfwoj!4dfw!\vgjeof$\v!~!<*x/fvmbw!-**SPUDBG`BNNBH)4dfw!-{zy/fvmbw)xpq)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!\vftmf$\v!~<*!b/fvmbw!-*!*!*!*!9142411/1!)4dfw!-chs/fvmbw!)mbvrFobiUttfm!)4dfw!-3:/32!+!chs/fvmbw!-*!661/1!)4dfw!.!661/2!+!*!*!77725/1!)4dfw!-chs/fvmbw!)xpq!)yjn!)5dfw!osvufs!|!*!fvmbw!5dfw!oj!)CHStpUsbfojM!5dfw!~!<*b/fvmbw!-****65151/1)4dfw!-chs/fvmbw)mbvrFobiUttfm)4dfw!-9194::4881/1!+!chs/fvmbw!-**5/3)4dfw!-*5218342361/1)4dfw!,!79:387985:/1!+!chs/fvmbw)xpq)yjn)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!\vWV`FCVD`FQZU`QBNWOF!gfegj$\v!\vgjeof$\v!~!<{zy/*!*x/ubvr!-{/ubvr.!-z/ubvr.!-y/ubvr.)5dfw!-wr!)ubvRumvn!osvufs!<*!*1/1!-dfw)5dfw!-ubvr!)ubvRumvn!>!wr!5dfw!|!*!dfw!4dfw!-ubvr!5dfw!)spudfWfubups!4dfw!~!<*!{/3r!+!{/2r!.!z/3r!+!z/2r!.!y/3r!+!y/2r!.!x/3r!+!x/2r!-z/3r!+!y/2r!.!y/3r!+!z/2r!,!x/3r!+!{/2r!,!{/3r!+!x/2r!-y/3r!+!{/2r!.!{/3r!+!y/2r!,!x/3r!+!z/2r!,!z/3r!+!x/2r!-{/3r!+!z/2r!.!z/3r!+!{/2r!,!x/3r!+!y/2r!,!y/3r!+!x/2r)5dfw!osvufs!|!*3r!5dfw!-2r!5dfw)ubvRumvn!5dfw!<ubvRqbnwoFv!5dfw!nspgjov!\vFUBUPS`QBNWOF!gfegj$\v!<1/3!>!SPUDBG`BNNBH!ubpmg!utopd!\vQBNWOF`FTV!gfegj$\v!\v?ebfi/tg/qbNxpebit=!fevmdoj$\v!\vgjeof$\v!<fdobutjEfojMw!ubpmg!hojzsbw!<fdobutjEqbHitbEv!ubpmg!nspgjov!<fdobutjEitbEv!ubpmg!nspgjov!<itbEv!mppc!nspgjov!\vITBE!gfegj$\v!\v?ebfi/tg/hpg=!fevmdoj$\v!\v?ebfi/tg/ypcqjmd=!fevmdoj$\v!\v?hojldbq=!fevmdoj$\v!\vgjeof$\v!<^TUIHJM`UPQT`NVO]opjudfsjEupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]opjujtpQupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]fhobSupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]fmhoBupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]uofopqyFupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]spmpDupqTv!5dfw!nspgjov!\v1!?!TUIHJM`UPQT`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`UOJPQ`NVO]opjujtpQuojpQv!4dfw!nspgjov!<^TUIHJM`UOJPQ`NVO]fhobSuojpQv!ubpmg!nspgjov!<^TUIHJM`UOJPQ`NVO]spmpDuojpQv!5dfw!nspgjov!\v1!?!TUIHJM`UOJPQ`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`SJE`NVO]opjudfsjEsjEv!4dfw!nspgjov!<^TUIHJM`SJE`NVO]spmpDsjEv!5dfw!nspgjov!\v1!?!TUIHJM`SJE`NVO!gj$\v!\vgjeof$\v!<eofmCidubCw!4dfw!hojzsbw!<eofmCidubCv!mppc!nspgjov!\vEOFMCIDUBC!gfegj$\v!\vgjeof$\v!<ttfouihjsCidubCw!ubpmg!hojzsbw!<ttfouihjsCidubCv!mppc!nspgjov!\vTTFOUIHJSCIDUBC!gfegj$\v!\vgjeof$\v!<spmpDidubCw!5dfw!hojzsbw!<spmpDidubCv!mppc!nspgjov!\vSPMPDIDUBC!gfegj$\v!<opjudfsjEuihjmebfIv!4dfw!nspgjov!<spmpDuihjmebfIv!5dfw!nspgjov!<zujtofuoJuofjcnBuihjmebfIv!ubpmg!nspgjov!<fhobSuihjmebfIv!ubpmg!nspgjov!<opjujtpQemspXw!4dfw!hojzsbw!<opjujtpQbsfnbDv!4dfw!nspgjov!<yjsubNxfjWv!5ubn!nspgjov!\vgjeof$\v!\vgjeof$\v!<qbNwoFv!fcvDsfmqnbt!nspgjov!\vftmf$\v!<ttfoihvps!ubpmg!nspgjov!<qbNwoFv!E3sfmqnbt!nspgjov!\vWV`FCVD`FQZU`QBNWOF!gfegj$\v!<zujtofuoJqbNwof!ubpmg!nspgjov!<qbNwoFftVv!mppc!nspgjov!\vQBNWOF`FTV!gfegj$\v!<opjujtpQmbdpMw!4dfw!hojzsbw!<opjujtpQwNw!4dfw!hojzsbw!<mbnspOw!4dfw!hojzsbw!<ftvggjEv!5dfw!nspgjov!<zujdbqPusbQv!ubpmg!nspgjov!<ttfouihjsCv!ubpmg!nspgjov!<uihjMv!mppc!nspgjov!<spmpDeofmCv!5dfw!nspgjov!<eofmCv!mppc!nspgjov!\v?ebfi/tg/opjudfsjEqjmd=!fevmdoj$\v!\vOPJUDFSJE`QJMD!fojgfe$\v!<sfmqnbTeofmCv!E3sfmqnbt!nspgjov!<sfmqnbTv!E3sfmqnbt!nspgjov!\vgjeof$\v!<wVw!3dfw!hojzsbw!\vftmf$\v!<wVw!4dfw!hojzsbw!\vQJMD`WV!gfegj$\v!<fsvuyfUeofmCv!mppc!nspgjov!<fsvuyfUv!mppc!nspgjov!<uofsbqtobsUv!mppc!nspgjov!<utfUbiqmBv!ubpmg!nspgjov!<spmpDftsfwfSldjQyjGv!5dfw!nspgjov!<qjmGftsfwfSv!mppc!nspgjov!<yjGv!mppc!nspgjov!<fmcbudfmfTesbdtjEv!mppc!nspgjov!\vYJGFSQ$!00\v!\vujp!;tuoji!00")):(K=EQ[P]).isRaw?(h=K.vs,U=K.fs,a=K.hints):(h=wY(K[0],!0),U=wY(K[1],!0)),!r.defines&&r.cacheKeyOfMat&&(r.defines=p(P,r.cacheKeyOfMat)),(f=w(_,h,U,a,r))?(K=f._isReady,f.name=P,f.cacheKey=b,f._dirty=!0,f._fid=v,"pbr"===P||"phong"===P?(f._shaderParams={type:P,cacheKeyOfMat:r.cacheKeyOfMat&&r.cacheKeyOfMat.toString(),cacheKeyOfScene:T._sceneProgramDefinesMask},r.extensions&&(f._shaderParams.extensions=r.extensions)):f._shaderParams={type:r.type,cacheKeyOfMat:r.cacheKeyOfMat,defines:r.cacheKeyOfMat?null:r.defines,gvDefines:!1!==r.internalDefines?v9(T._programDefines):null,extensions:r.extensions},B[b]=f,K?f:null):f},scheduleProgramGC:r,checkParallelLinkStatus:function(){if(I){for(var r=I.length-1;0<=r;r--){var K,B,b=(B=I[r]).program;_.getProgramParameter(b,j)&&(I[r]=I[I.length-1],I.pop(),_.getProgramParameter(b,35714)?b._isReady=!0:(K=_.getProgramInfoLog(b),Kq.addShaderErrorLog("LINK",_.getError(),K),_.deleteProgram(b),b._forceDelete=!0),_.deleteShader(B.vertShader),_.deleteShader(B.fragShader))}I.length?T.iv():I=null}},dispose:function(){r(-1)},setCurrentFrameRenderId:function(r){v=r},disableAttributes:function(r){var K,B,b=r._programs;for(K in b)(B=b[K])&&B._waitingDisableAttr&&(XQ(r,B).disable(),B._waitingDisableAttr=P1)},genPhysicalProgramKeyOfScene:function(r){return L.set(0,r.NUM_DIR_LIGHTS,8),L.set(8,r.NUM_SPOT_LIGHTS,8),L.set(16,r.NUM_POINT_LIGHTS,8),L.set(24,r.MAX_BOX_CLIPPER,8),L.set(32,r.MAX_FLOW_OBJECT,8),L.set(40,r.FOG),L.set(41,r.FOG_EXP2),L.set(42,r.UV_CLIP),L.set(43,r.USE_ENVMAP),L.set(44,r.ENVMAP_TYPE_CUBE_UV),L.set(45,r.OIT),L.set(48,J.indexOf(T.getFlowBlendMode()),4),L.set(52,r.BOX_CLIPER_TYPES,4),L.set(56,r.USE_SHADOWMAP),L.set(57,r.SHADOWMAP_TYPE_PCF),L.set(58,r.SHADOWMAP_TYPE_PCF_SOFT),T._sceneProgramDefinesBits=L,T._sceneProgramDefinesMask=L.toString()},decodeSceneDefinesByKey:t,genPhysicalProgramKeyOfMat:function(r,K){return n.set(0,!r.cullFace),n.set(1,K.clipDirection),n.set(3,r.alphaTest!=H1),n.set(4,K.isTransparent),n.set(5,K.enableTransmission),n.set(6,K.useInstancing),n.set(7,r.lightMap),n.set(8,r.map),n.set(9,r.alphaMap),n.set(10,r.roughnessMap),n.set(11,r.specularMap),n.set(12,r.emissiveMap),n.set(13,r.normalMap),n.set(14,r.metalnessMap),n.set(15,K.useDisplacement),n.set(16,1==K.aoMapUvChannel),n.set(17,r.aoMap),n.set(18,K.useUvClip),n.set(19,K.skeleton),n.set(20,F.indexOf(K.alphaChannel),4),n.set(24,G.indexOf(K.toneMapping),4),n.set(28,F.indexOf(K.aoChannel),4),n.set(32,F.indexOf(K.roughnessChannel),4),n.set(36,F.indexOf(K.metalnessChannel),4),n.set(40,K.rectsNum,8),n.set(48,s.indexOf(K.envMapCombine)+1,4),n.set(52,K.envmap!=H1),n.set(53,n.get(8,8)||3==n.get(16,2)||n.get(18)),2!=n.get(16,2)&&!n.get(7)||(r.uUv2Matrix=ur(r.uv2Rotation,r.uv2Offset,r.uv2Scale,r.uv2Anchor)),n},decodePhysicalProgramDefinesByKey:p,serializePhysicalShader:function(){var r,K,B,b,f=_._programs,h=[];for(b in f)!(r=f[b]._shaderParams)||"pbr"!==r.type&&"phong"!==r.type||(h.push(r),K||(B=r.cacheKeyOfMat.length,K=r.cacheKeyOfScene.length+B));var U,a=h.length,P=40,H=new mH(P+2*a),Y=[H];H.set(0,1,8),H.set(8,a,8),H.set(16,B,8),H.set(24,K,8),H.set(32,2,8);for(var S=0;S<a;S++)U=h[S],H.set(P,"pbr"===U.type),H.set(P+1,U.extensions&&U.extensions.GL_EXT_shader_texture_lod),P+=2,Y.push(U.cacheKeyOfMat,U.cacheKeyOfScene);return Y[0]=Y[0].toString(),Y.join("")},deserializePhysicalShader:function(r){var K=T._programDefines;if(0===r.indexOf("__ht__encode")){var B=Y1.parse(r),b=this;B.forEach(function(r){b.genPhysicalProgramKeyOfScene(T._programDefines=r.gvDefines),b.acquireProgram(r)})}else for(var f=new mH(r.substr(0,8)),h=f.get(8,8),U=f.get(16,8),a=f.get(24,8),P=(f.fromString(r.substr(0,r.length-h*a)),r.length-h*a),H=f.get(32,8),Y=40,S=0;S<h;S++){var _=f.get(Y+0)?"pbr":"phong",e=null,o=(f.get(Y+1)&&(e={GL_EXT_shader_texture_lod:!0}),r.substr(P+S*a,U)),x=r.substr(P+S*a+U,a-U),_=(T._programDefines=t(new mH(x)),{type:_,extensions:e,cacheKey:x+o,cacheKeyOfMat:new mH(o)});this.acquireProgram(_),Y+=H}T._programDefines=K}}},rq=(VU={5126:"float",35664:"vec2",35665:"vec3",35666:"vec4",5124:"int",35667:"ivec2",35668:"ivec3",35669:"ivec4",35670:"bool",35671:"bvec2",35672:"bvec3",35673:"bvec4",35674:"mat2",35675:"mat3",35676:"mat4",35678:"sampler2D",35680:"samplerCube"},MU=["uProjectMatrix","uViewMatrix","uModelMatrix","uModelViewMatrix","uNormalMatrix","uCameraPosition","uTime","uUvMatrix","uUv2Matrix"],RU=D.generateUUID(),function(r,K,B){var b,f=r.getGL();if(!f)return!1;var h=[],U=(B=!1!==B,Kq.getShaderErrorLogId());try{var a=Bq(K);if(!a)return{result:!1,reason:"invalidate shader source."};a.isRaw=!0,EQ[RU]=a,(b=r.acquireProgram({type:RU,defines:null,internalDefines:!1},B))&&function r(K,B){for(var b,f=K.children,h=f.length-1;0<=h;h--){var U,a,P=(b=f[h]).name;0<=MU.indexOf(P)||(a=b.desc,b.isLeaf?B.push({name:P,size:a.size,type:VU[a.activeInfo.type]}):(a=b.childMap)[0]?(B.push({name:P,size:b.children.length,descs:U=[]}),r(a[0],U)):(B.push({name:P,size:0,descs:U=[]}),r(b,U)))}}($Q(f,b)._struct,h)}catch(r){}finally{EQ[RU]=null}return b?{result:!0,uniforms:h}:Kq.getShaderErrorLogId()!==U&&(K=Kq.getShaderErrorLog())?A.assign({result:!1},K):{result:!1,reason:"faild to create shader."}}),Kq=(P=[],H=0,(Y={})[gQ.NO_ERROR]="no error",Y[1280]="invalid enum",Y[1281]="invalid value",Y[1282]="invalid operation",Y[1286]="invalid framebuffer operation",Y[1285]="out of memory",Y[37442]="context lost webgl",{addShaderErrorLog:function(r,K,B,b,f){for(var h=arguments.length,U=[],a=0;a<h;a++)U[a]=arguments[a];r={time:(new Date).toLocaleString(),_62O:r,reason:B},K&&(r.errorFlag=Y[K]),b&&(r.shaderType=b,r.shaderSource=f),P[H]=r,H=(H+1)%50,console.error("Failed to create shader.")},clearShaderErrorLog:function(){P=[],H=0},getShaderErrorLog:function(r){return r=D.modToPositive(H-1+(r=r||0),50),P[r]},getShaderErrorLogId:function(){return H}}),Bq=(qY(Y1,{getShaderErrorLog:Kq.getShaderErrorLog}),lU=/^[ \t]*\/\/[ \t]*fs[ \t]*$/gim,CU=/^[ \t]*\/\/[ \t]*[Hh]ints[ \t]*:([\w\d ,\.]+)$/gm,mU=/^[ \t]*\/\/[ \t]*ExtraInfo[ \t]*:[ \t]*([\w\d\+\/=]+)$/gim,function(r){var K,B,b,f=[];do{if(!r.match(lU))break;var h=(r=(r=r.replace(CU,function(r,K){return K.split(",").forEach(function(r){r=r.trim(),f.indexOf(r)<0&&f.push(r)}),""})).replace(mU,function(r,K){if(K.length)try{b=M.Default.parse("__ht__encode"+K.trim())}catch(r){}return""})).split(lU)}while(2===h.length&&(K=h[0],B=h[1],0));if(!K||!B)return null;var U={vs:K,fs:B};return f.length&&(U.hints=f),b&&(U.extraInfo=b),U}),bq=function(r,K,B,b){var f,h=[];return B&&(f=[],B.glsl3&&f.push("glsl3"),B.light&&f.push("light"),f.length&&h.push("// Hints: "+f.join(", "))),b&&(B=M.Default.stringify(b,0,!0),h.push("// ExtraInfo: "+B.substr(12))),h.push(r+"\n// FS\n"+K),h.join("\n")},fq=D.newIdGenerator(),hq=function(r,K,B,b){this.id=fq.next(),B=B||"",b=b||B,this.gl=r,this.key=B,this.name=b,this.bindingPointIndex=K,this.__bufferOffset=0,this.__uniformNum=0,this.uniforms={},this.attaches=new WeakMap,this.currentCache=null,this.currentBuffer=null,this.currentBufClip=null},Uq=(A.assign(hq.prototype,{setName:function(r){return this.name=r,this},addUniform:(DU={1:function(r,K,B,b){this.currentCache[K]!==(b=b==P1?0:b)&&(this.currentCache[K]=b,(K=this.currentBufClip[K])[0]=b,r.bufferSubData(35345,B,K))},2:function(r,K,B,b){var f=this.currentCache[K];f[0]===b[0]&&f[1]===b[1]||((K=this.currentBufClip[K])[0]=f[0]=b[0],K[1]=f[1]=b[1],r.bufferSubData(35345,B,K))},3:function(r,K,B,b){"string"==typeof b&&(b=DN(b));var f=this.currentCache[K];f[0]===b[0]&&f[1]===b[1]&&f[2]===b[2]||((K=this.currentBufClip[K])[0]=f[0]=b[0],K[1]=f[1]=b[1],K[2]=f[2]=b[2],r.bufferSubData(35345,B,K))},4:function(r,K,B,b){"string"==typeof b&&(b=DN(b));var f=this.currentCache[K];f[0]===b[0]&&f[1]===b[1]&&f[2]===b[2]&&f[3]===b[3]||((K=this.currentBufClip[K])[0]=f[0]=b[0],K[1]=f[1]=b[1],K[2]=f[2]=b[2],K[3]=f[3]=b[3],r.bufferSubData(35345,B,K))},12:function(r,K,B,b){var f=this.currentCache[K],h=!1,K=this.currentBufClip[K];f[0]!==b[0]&&(h=!0,K[0]=f[0]=b[0]),f[1]!==b[1]&&(h=!0,K[1]=f[1]=b[1]),f[2]!==b[2]&&(h=!0,K[2]=f[2]=b[2]),f[4]!==b[3]&&(h=!0,K[4]=f[4]=b[3]),f[5]!==b[4]&&(h=!0,K[5]=f[5]=b[4]),f[6]!==b[5]&&(h=!0,K[6]=f[6]=b[5]),f[8]!==b[6]&&(h=!0,K[8]=f[8]=b[6]),f[9]!==b[7]&&(h=!0,K[9]=f[9]=b[7]),f[10]!==b[8]&&(h=!0,K[10]=f[10]=b[8]),h&&r.bufferSubData(35345,B,K)},16:function(r,K,B,b){for(var f=this.currentCache[K],h=!1,U=this.currentBufClip[K],a=0;a<16;a++)f[a]!==b[a]&&(h=!0,U[a]=f[a]=b[a]);h&&r.bufferSubData(35345,B,U)}},function(r,K){var B,b,f,h;this.uniforms[r]===P1&&(B=this.__uniformNum++,(b=this.__bufferOffset)%(f=K<=2?K:4)!=0&&(b+=f-b%f),f=4*b,h=4*K/Float32Array.BYTES_PER_ELEMENT,this.__bufferOffset=b+K,this.uniforms[r]={index:B,location:f,dataSize:h},A.defineProperty(this,r,{configurable:!1,enumerable:!0,get:q,set:DU[K].bind(this,this.gl,B,f)}))}),attachSource:function(r,K){r=r||MK;var B=this.attaches.get(r),r=(B||this.attaches.set(r,B=this.newInstance()),B[0]),b=this.gl;return b.bindBuffer(35345,r),b.bindBufferBase(35345,this.bindingPointIndex,r),K&&B[3]===K?null:(B[3]=K,this.currentCache=B[1],this.currentBufClip=B[2],this.currentBuffer=r,this)},newInstance:function(){var r,K=this.gl,B=K.createBuffer(),b=(K.bindBuffer(35345,B),16*Math.ceil(this.__bufferOffset/4)),f=(K.bufferData(35345,b,35044),K.bindBuffer(35345,null),new Array(this.__uniformNum)),h=new Array(this.__uniformNum);for(r in this.uniforms){var U=this.uniforms[r],a=U.index,P=U.dataSize;if(P<=1)f[a]=0;else{f[a]=new Array(P);for(var H=0;H<P;H++)f[a][H]=0}for(h[a]=new Float32Array(P),H=0;H<P;H++)h[a][H]=0}return[B,f,h,0]}}),function(h){var B,U,a,b,P,f,H,Y,S=this;function _(r){if("string"!=typeof r)return 0|r;switch(r){case"low":return 512;case"medium":return 1024;case"ultra":return 4096;default:return 2048}}function r(){S.enable=!Y1.graph3dViewShadowDisabled,B=Y1.graph3dViewShadowType,U=Y1.graph3dViewShadowIntensity,a=Y1.graph3dViewShadowBias,b=Y1.graph3dViewShadowQuality,P=Y1.graph3dViewShadowRadius,f=Y1.graph3dViewShadowDegreeX,H=Y1.graph3dViewShadowDegreeZ,Y=null}S.enable=!1,r();var e,o,x,T=1,t=_(b),p=!1,q=new M.Math.Matrix4,y=S.pvMatrix=new M.Math.Matrix4,k=0,w=(S.dispose=function(){m6(h,S.mapForReflector,S.map),S.mapForReflector=null,S.map=null},S.render=function(){if(!h._picking&&S.enable){var r=h.getGL();if(r){p&&S.setupShadowCamera(),h._glCapabilities&&(t=Math.min(t,h._glCapabilities.maxTextureSize));var K=h.isReflecting(r);if(K){if(k===r._renderInfo.frame)return;k=r._renderInfo.frame}(e=S[r=K?"mapForReflector":"map"])?e.setSize(t,t):e=S[r]=new vq(h,h.getGL(),0,0,{samples:1,minFilter:9728,magFilter:9728,width:t,height:t}),h._depthGrabber.renderDepth(e,!0,x,q,t,t,function(r,K){return r?a6(r)||!r.s("shadow.cast")||r instanceof mO||r.s("effect.flow"):K?!1===K.shadowCast:void 0})}}},S.getShadow=function(){var r={degreeX:f,degreeZ:H,intensity:U,quality:b,type:B,radius:P,bias:a,bounding:Y};return 1!==T&&(r.boundExtend=T),r},S.setShadow=function(r,K){S.enable=r=!!r,"object"==typeof K&&(K.intensity!==P1&&(U=K.intensity),K.bias!==P1&&(a=K.bias),K.radius!==P1&&(P=K.radius),K.degreeX!==P1&&(f=K.degreeX),K.degreeZ!==P1&&(H=K.degreeZ),K.quality!==P1&&(b=K.quality),K.bounding!==P1&&(Y=K.bounding),K.type!==P1&&B!==K.type&&(B=K.type),t=_(b),K.boundExtend!==P1&&(T=K.boundExtend)),r&&S.setupShadowCamera(),h.iv()},null),v=(S.tryInvalidateLater=function(r,K){"modelLoaded"===K&&(w&&k9(w,!0),w=y9(function(){w=null,S.refresh()},S,P1,200))},S.refresh=function(){this.enable&&(this.setupShadowCamera(),h.iv())},S.tryUpdateBounding=function(r){var K,B,b;Y||(K=this.boundingSphere)&&(B=(new Z).fromArray(wA(r,h.getMat(r))),r=r.getAnchor3d(),b=new e1,K.containsPoint(b.set(0-r.x,0-r.y,0-r.z).applyMatrix4(B))&&K.containsPoint(b.set(0-r.x,0-r.y,1-r.z).applyMatrix4(B))&&K.containsPoint(b.set(0-r.x,1-r.y,0-r.z).applyMatrix4(B))&&K.containsPoint(b.set(0-r.x,1-r.y,1-r.z).applyMatrix4(B))&&K.containsPoint(b.set(1-r.x,0-r.y,0-r.z).applyMatrix4(B))&&K.containsPoint(b.set(1-r.x,0-r.y,1-r.z).applyMatrix4(B))&&K.containsPoint(b.set(1-r.x,1-r.y,0-r.z).applyMatrix4(B))&&K.containsPoint(b.set(1-r.x,1-r.y,1-r.z).applyMatrix4(B))||S.setupShadowCamera())},[1,1]);S.createShadow=function(r,K){var B,b,f;r=r||h._frameState.renderState.directUniforms(),(b=!1!==h._getFrameRenderOptions("renderShadow")?h._getFrameRenderOptions("useReflectorSelfShadowMap")&&S.mapForReflector?S.mapForReflector.texture:S.map?S.map.texture:null:b)?(r.shadowMap=b,B=!0):((b=(f=h.getGL())._emptyShadowTexture)||(b=f._emptyShadowTexture=s6(f,null,[255,255,255,255])),r.shadowMap=b),K||(r.shadowSize=B?[e.width,e.height]:v,r.shadowMatrix=y.toArray(),r.shadowIntensity=U,r.shadowBias=a,r.shadowRadius=P)},S.genShaderDefine=function(r){return r.USE_SHADOWMAP=!0,"hard"===B?r.SHADOWMAP_TYPE_PCF=!0:"soft"===B&&(h.isGLTempRegisterLimited()?r.SHADOWMAP_TYPE_PCF=!0:r.SHADOWMAP_TYPE_PCF_SOFT=!0),r},S.setupShadowCamera=function(){o=o||(S.boundingSphere=new M.Math.Sphere),Y?o.set((new e1).fromArray(Y),Y[3]):(p=!1,(B=h.getBoundingBox(h.dm().toDatas(function(r){return r.s("shadow.cast")&&h.isVisible(r)})))?(r=new e1(B.min),K=new e1(B.max)):(r=new e1(-256,-256,-256),K=new e1(256,256,256),p=!0),o.set(r.clone().add(K).multiplyScalar(.5),.5*r.distanceTo(K)*T));var r=2*(B=o.radius),K=(x=u6(SA(),-B,B,-B,B,r/1e3,r),y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y.multiply(q.fromArray(x)),Math.tan(-f*Math.PI/180)),r=Math.tan(-H*Math.PI/180),B=B/Math.sqrt(K*K+r*r+1),K=new e1(B*K,B,B*r);S.direction=e1.normalizeArray(K.clone().multiplyScalar(-1)),q.lookAt(K,new e1(0,0,0),new e1(0,1,0)).setPosition(K.add(o.center)),q.getInverse(q),y.multiply(q)},S.getDirection=function(){if(S.enable)return S.direction},S.resetProperties=r}),aq=(Uq.PARAMS=["quality","intensity","bias","radius","type","degree.x","degree.z","bounding"],DH.ms_shadow=function(B,r){Uq.PARAMS.forEach(function(r){var K=(r=r.replace(/(^|\.)[a-z]/g,function(r){return r[r.length-1].toUpperCase()})).charAt(0).toLowerCase()+r.substr(1);B["getShadow"+r]=function(){return this._getShadowParam(K)},B["setShadow"+r]=function(r){this._setShadowParam(K,r)}}),B.getCurrentShadowBounding=function(r){return!r&&this.shadowMap.boundingSphere||this.shadowMap.setupShadowCamera(),[(r=this.shadowMap.boundingSphere).center.x,r.center.y,r.center.z,r.radius]},B.refreshShadow=function(){this.shadowMap.refresh()},B.enableShadow=function(r){this.shadowMap.setShadow(!0,r)},B.disableShadow=function(){this.shadowMap.setShadow(!1)},B._getShadowParam=function(r){return this.shadowMap.getShadow()[r]},B._setShadowParam=function(r,K){var B=this._getShadowParam(r),b={},f=(b[r]=K,this.shadowMap);f.setShadow(f.enable,b),this.firePropertyChange("shadow"+r.charAt(0).toUpperCase()+r.substr(1),B,K)}},function(t){var B=this,p=this.renderTargetPool=[],q=[],y=["rect","circle","polygon"],k=!1,w=(B.render=function(){if(!t._picking){var r=t._flowObjects;if(r.length){var K=t.getGL();if(K){k=!0;(f=t._frameState.renderState.glState).blend.enabled=!1,f.depth.enabled=!1,f.cullFace.enabled=!1;var B,b,f=f.color.clear.slice(0);for(C6(K,[0,0,0,1]),B=0,b=r.length;B<b;B++)h=K,a=r[U=B],T=x=o=e=_=S=Y=H=P=void 0,"billboard"!==(T=(e=t.getData3dUI(a)).s("shape3d"))&&"plane"!==T||((P=p[U])||(P=p[U]=new vq(t)),_=a.s("effect.flow.size"),Y=a.s("effect.flow.uvshape"),o=(S=a.getFinalScale3d())[0],(S="billboard"===T?S[1]:S[2])<o?(S=S/o*_,o=_):(o=o/S*_,S=_),o=Math.max(128,Math.round(o)||0),S=Math.max(128,Math.round(S)||0),P.setSize(h,o,S),P.bind(h),_=t.getViewport(h),t.setViewport(h,0,0,o,S),h.clear(16640),e=t.getData3dUI(a),(o=Zm(e,T))&&(!o.ns&&o.length&&(o=o[0]),gm(o),S=o.vs,(o=a.s("effect.flow.gradient"))?(H="Flow3d.Cached."+o,M.Default.getImageMap()[H]||M.Default.setImage(H,M.Default.toCanvas({width:100,height:100,comps:[{type:"rect",background:"rgb(0,0,0)",gradient:o,rect:[0,0,100,100]}]},100,100))):H=a.s("shape3d.image"),-1===(o=y.indexOf(Y))&&0===Y.indexOf("polygon")&&(x=+Y.substring(7),o=Math.max(3,Math.min(1024,x))-1),t._prefabRenderer.render(h,{model3d:!0,mesh:{position:S},mat:{type:"flow",useXZ:"plane"===T,image:t.getTexture(H,a),blend:a.s("effect.flow.blend")||w,uvMatrix:ur(e.s("shape3d.uv.rotation"),e.s("shape3d.uv.offset"),e.s("shape3d.uv.scale"),e.s("shape3d.uv.anchor")),intensity:a.s("effect.flow.intensity"),shape:o}}),P.unbind(h),t.setViewport(h,_[0],_[1],_[2],_[3]),(Y=a.getMatrix4()).getInverse(Y),S=Y.getElements(),"plane"===T?S[1]=S[5]=S[9]=S[13]=0:S[2]=S[6]=S[10]=S[14]=0,q[U]={matrix:Y,group:a.s("effect.flow.group")}));C6(K,f),p.length!==b&&p.splice(b,p.length-b),k=!1}}}var h,U,a,P,H,Y,S,_,e,o,x,T},B.dispose=function(){t.getGL()&&(m6(t,p),p=this.renderTargetPool=[])},B.createFlow=function(r){var K;if(!k&&(K=p.length)){r=r||t._frameState.renderState.directUniforms();for(var B=[],b=[],f=[],h=0;h<K;h++)B[h]=q[h].matrix.toArray(),b[h]=p[h].texture,f[h]=!1;for(r.flowMatrix=B,h=0;h<K;h++)r["flowTexture"+h]=b[h];r.flowEnabled=f}},B.disableFlow=function(r){var K;if(K=p.length){r=r||t._frameState.renderState.directUniforms();for(var B=[],b=0;b<K;b++)B[b]=!1;r.flowEnabled=B}},B.resetDataFlowEnabld=function(r,K){return B.resetFlowUniform(r.s("effect.flow.mask"),K)},B.resetFlowUniform=function(r,K){var B=p.length,b=new Array(B);if(r)for(var f=0;f<B;f++)r&1<<q[f].group&&(b[f]=!0);K.flowEnabled=b},"white")}),Pq=function(p){function r(r){p.getPostProcessing().isRenderingScene()&&"main"===r.layer&&(f="post"===r.phase?p.getPostProcessing().getRenderTarget().grabDepth():null)}var f,q,y,h=this,K=!1,U=1,S=new M.Math.Matrix4,k=(h.enable=function(){if(!K)return p.isWebGL2()&&p.addRenderLayerListener(r,h),K=!0},h.disable=function(){if(K)return p.isWebGL2()&&(p.removeRenderLayerListener(r,h),f=null),!(K=!1)},h.isEnabled=function(){return K},h.setResolution=function(r){U=r},h.getResolution=function(){return U},h.grab=function(r){var K,B,b;return!r&&p.isWebGL2()?(K=p.getPostProcessing().getRenderTarget())?f||K.grabDepth():null:(r=p.getGL())?(B=Math.round(U*p.getWidth()),b=Math.round(U*p.getHeight()),(K=r._depthGrabberRTT)||(K=r._depthGrabberRTT=new vq(p,B,b,{minFilter:9728,magFilter:9728})),p._setupPVMatrix(),h.renderDepth(K,!1,p._projectMatrix,p._viewMatrix,B,b),K.texture):void 0},h.renderDepth=function(r,K,B,b,f,h,U){var a,P,H,Y=p.getGL();Y&&((P=(a=p._frameState).renderState.glState).blend.enabled=!1,P.depth.enabled=!0,P.depth.mask=!0,P=P.color.clear.slice(0),C6(Y,[1,1,1,1]),H=p.acquireProgram({type:"shadowMap",defines:{MAX_BOX_CLIPPER:p._boxClippers.length,BOX_CLIPER_TYPES:p._boxClipperTypes,UV_CLIP:!1}}),a.renderState.useProgram(H),B.isMatrix4&&(B=B.getElements()),b.isMatrix4||(b=S.fromArray(b)),_(r,K,B,b,f,h,U),C6(Y,P))},new M.Math.Matrix4),_=function(r,K,B,b,f,h,U){var a=p.getGL();r.setSize(a,f,h),r.bind(a),a.clear(16640);var P=(S=p._frameState.renderState).directUniforms(),H=S.directAttribs(),Y=S.directState(),S=(P.uUseInstance=!1,P.uUseSkinning=!1,H.aMatrixInstanced=P1,P.boneTexture=P1,P.projectionMatrix=B,y=p.isReflecting(a),(q=0<p._boxClippers.length)&&(i6(p,P,QQ),P.uClipperMatrix=p._boxClipperMatrixes,P.uClipperClipInner=p._boxClipperClipInner),p._viewport);p.setViewport(a,0,0,f,h);for(var _=p.getRenderLayerKeys(),e=0,o=_.length;e<o;e++){var x,T=_[e];p.getRenderLayerInfo(T).ignore||(T=p._40Q.get(T))&&(T.resetModel3dInstancedDraw(),x=T.batchIndexMap,z(a,P,H,Y,b,U,K,T.opaque,x,!1),K&&z(a,P,H,Y,b,U,K,T.transparent,x,!0),t(a,P,H,Y,b,U,K,T.batchModelMap,x))}r.unbind(a),S&&p.setViewport(a,S[0],S[1],S[2],S[3])},w=function(r,K,B,b,f,h,U){B&&B.length&&(f=f&&f.length?f.length/16:0,K.position=fr(r,p._buffer.vs,B,H1),b?(Ur(r,p._buffer.is,b),Kr(r,h||0,U===P1?b.length:U,null,b instanceof Uint32Array?5125:b instanceof Uint8Array?5121:null,null,f)):rr(r,h||0,U===P1?B.length/3:U,null,f))},v=function(r,K,B,b){var f,h,U;if(YY(B))for(h=0,U=B.length;h<U;h++)(f=B[h])&&v(r,K,f,b);else _1(B)?v(r,K,Zm(b,B),b):PY(B)&&(B.shape3d?v(r,K,B.shape3d,b):a(r,K,B))},a=function(r,K,B){gm(B),w(r,K,B.vs,B.is),w(r,K,B.top_vs,B.top_is),w(r,K,B.bottom_vs,B.bottom_is),w(r,K,B.from_vs,B.from_is),w(r,K,B.to_vs,B.to_is)},t=function(r,K,B,b,f,h,U,a){if(!zY(a)&&!p.drawFilter){var P,H,Y,S,_,e=k.identity().premultiply(f),o=(K.modelViewMatrix=e.toArray(),K.uClipDirection=0,new M.Math.Matrix4);for(P in a)if(!1!==(H=p.getBatchInfo(P)||MK).visible){if(!U)if(Y=H.material){if("string"==typeof Y&&(Y=Y1.getMaterial(Y)),!U&&(!Y||Y.transparent))continue}else if(H.transparent)continue;h&&h(null,H)||y&&!1===H.reflectable||((Y=a[P]).invalidate&&am(Y,p._picking),q&&(K.modelMatrix=sr,i6(p,K,H.clipboxMask===P1?OQ:H.clipboxMask)),(H=Y.translate)&&(o.set(1,0,0,H[0],0,1,0,H[1],0,0,1,H[2],0,0,0,1),K.modelMatrix=o.getElements(),K.modelViewMatrix=o.premultiply(f).toArray()),(_=(S=Y.ms32)&&S.length)&&(K.uUseInstance=!0,B.aMatrixInstanced=br(r,p._buffer.ms,S,H1)),w(r,B,Y.vs32,Y.is,S),_&&(K.uUseInstance=!1,B.aMatrixInstanced=P1),H&&(K.modelMatrix=sr,K.modelViewMatrix=e.toArray()))}}},z=function(H,Y,S,_,e,r,o,K,B,b){for(var x,f,T,h=K.length,U=0;U<h;U++)if(f=(P=K[U]).ui,x=P.data,p.isVisible(x)&&!(r&&r(x)||B[x._id]||y&&!1===x.s("3d.reflectable"))){if(P=f.s("3d.clip.direction")){if(0===(a=f.s("3d.clip.percentage")))continue;P=f._formatClipUniforms(P,a,x),Y.uClipPercent=P[1],Y.uClipDirection=P[0]}else Y.uClipDirection=0;if(q&&i6(p,Y,x.s("3d.clipbox")?QQ:x.s("3d.clipbox.mask")),(a=f.shapeModel||Zm(f))&&a.model3d)b||p._prefabRenderer.renderDepth(H,a,x,f.mat,function(r,K,B,b,f){var h,U,a,P;(o||B&&!B.transparent)&&((b=b&&b.aMatrixInstanced)&&(Y.uUseInstance=!0,S.aMatrixInstanced=br(H,p._buffer.ms,b,H1)),q&&(Y.modelMatrix=r.getElements()),Y.modelViewMatrix=r.clone().premultiply(e).getElements(),_.cullFace.enabled=!(!B||!B.cullFace),T=!(!B||!B.flipSide),(T=x._flipSide?!T:T)&&(_.cullFace.frontFace=2304),(r=!!(f.skeleton&&x&&(h=p._updatedSkeletonDatas[f._skeletonId+"|"+x._lastAnimHashKey])&&(U=p.getPrefabBoneTexture(f))))&&(B=f.boneTextureSize,H.activeTexture(33984),A6(H,U),H.texImage2D(3553,0,34836,B,B,0,6408,5126,h),A6(H,H1),jr(Y,f,U,h),S.skinIndex=fr(H,null,K.skinIndex),S.skinWeight=fr(H,null,K.skinWeight)),f.drawRange&&(a=f.drawRange[0],P=f.drawRange[1]),w(H,S,K.vs,K.is,b,a,P),T&&(_.cullFace.frontFace=2305),b&&(Y.uUseInstance=!1,S.aMatrixInstanced=P1),r&&(Y.uUseSkinning=!1,S.skinIndex=P1,S.skinWeight=P1))});else{var a=a||(x instanceof M.Node&&!(x instanceof M.Shape)?{vs:km,is:wm}:[f.left,f.front,f.right,f.back,f.top,f.bottom]),P=f.mat?k.fromArray(f.mat):k.identity(),t=f._vsTranslation;if(t&&(Y1.extractShapeTranslation||Y1.extractPolylineTranslation||Y1.extractVerticesTranslation)&&P.multiply(t),q&&(Y.modelMatrix=P.toArray()),Y.modelViewMatrix=P.premultiply(e).toArray(),T=!1,t=x.s("shape3d.material")){if("string"==typeof t&&(t=Y1.getMaterial(t)),!o&&(!t||t.transparent))continue;_.cullFace.enabled=!(!t||!t.cullFace),T=!(!t||!t.flipSide),(T=x._flipSide?!T:T)&&(_.cullFace.frontFace=2304)}else _.cullFace.enabled=!!x.s("shape3d.reverse.cull"),x._flipSide&&(T=!0,_.cullFace.frontFace=2304);v(H,S,a,f),T&&(_.cullFace.frontFace=2305)}}}},Hq=function(e){var o,x,T,t,p,q,y=this,k=!1,w=-99999,v=[0,0];function r(){k=!1;var K=e.getGL();K&&(o&&o.forEach(function(r){K.deleteFramebuffer(r)}),x&&x.forEach(function(r){K.deleteFramebuffer(r)}),K.deleteFramebuffer(T),m6(e,t)),o=x=T=t=null,v[0]=0,v[1]=0}function z(r,K,B){for(var b=0,f=e._prg,h=e.getGL(),U=r.length;b<U;b++)r[b].ui._42(h,f,u);Pm(e,K,B,0,!0)}function N(r){var K=e.getGL(),K=x1.for(K),B=e._frameState;B.syncEnv(),K.useProgram(e._prg=e._frameState.defaultProgram=r),B.setGLState(!0,!0),B.setUniforms(!0),K.directAttribs().disable(),e.shadowMap.enable&&e.shadowMap.createShadow(),e.rebindOITTexture(),e._envmapRenderer.resetUniformCache(),e.flowMap.createFlow()}y.enableOIT=function(){},y.disableOIT=function(){r()},y.dispose=function(){r()},y.bindTexture=function(r){t&&((r=r||e._frameState.renderState.directUniforms()).oitDepthSampler=t[p],r.oitFrontColorSampler=t[q])},y.render=function(r,K,B){var b=e.getOITPassCount();if(!b)return!1;if(!r.length)return!1;if(!function(){var r=e.getGL();if(r&&(B=e.getCanvas())){var K=B.width,B=B.height;if(K&&B){if(k&&v[0]===K&&v[1]===B)return 1;var b={width:K,height:B,filter:9728,clampToEdge:!0,format:33319,type:5126,data:null},f=A.assign({},b,{format:6408,type:5131});o=[r.createFramebuffer(),r.createFramebuffer()],x=[r.createFramebuffer(),r.createFramebuffer()],T=r.createFramebuffer(),t=[];for(var h=0;h<2;h++){var U=e.createTexture(b),a=e.createTexture(f),P=e.createTexture(f),H=3*h;f6(r,o[h]),r.activeTexture(33984+H),r.bindTexture(3553,U),r.framebufferTexture2D(36160,36064,3553,U,0),r.activeTexture(33984+H+1),r.bindTexture(3553,a),r.framebufferTexture2D(36160,36065,3553,a,0),r.activeTexture(33984+H+2),r.bindTexture(3553,P),r.framebufferTexture2D(36160,36066,3553,P,0),h6(r),f6(r,x[h]),r.framebufferTexture2D(36160,36064,3553,a,0),r.framebufferTexture2D(36160,36065,3553,P,0),h6(r),r.activeTexture(33984+H),A6(r,null),r.activeTexture(33984+H+1),A6(r,null),r.activeTexture(33984+H+2),A6(r,null),t.push(U,a,P)}f6(r,T);var Y=e.createTexture(f);return r.activeTexture(33990),r.bindTexture(3553,Y),r.framebufferTexture2D(36160,36064,3553,Y,0),A6(r,null),h6(r),t.push(Y),v[0]=K,v[1]=B,k=!0}}}())return!1;e._programDefines.OIT=!0,e._glPrograms.genPhysicalProgramKeyOfScene(e._programDefines);var f=e._prg,h=(N(e.acquireProgram({type:"legacy"})),e.getGL()),U=x1.for(h).directState(),a=l6(h,!0),P=(P=h.frameStack)&&P.length?P[P.length-1]:null,H=(h.bindFramebuffer(36009,T),U.color.clear=[0,0,0,0],h.clear(16384),h.bindFramebuffer(36160,o[0]),h.drawBuffers([36064]),U.color.clear=[w,w,0,0],h.clear(16384),h.bindFramebuffer(36009,o[1]),U.color.clear=[-0,1,0,0],h.clear(16384),h.bindFramebuffer(36009,x[0]),h.drawBuffers([36064,36065]),U.color.clear=[0,0,0,0],h.clear(16384),h.bindFramebuffer(36009,x[1]),U.color.clear=[0,0,0,0],h.clear(16384),e.getPostProcessing().getRenderTarget());H&&H.isBinding(h)&&(H=H.grabDepth(!0),h.bindFramebuffer(36160,o[0]),h.bindRenderbuffer(36161,H),h.framebufferRenderbuffer(36160,36096,36161,H),h.bindRenderbuffer(36161,null),h.bindFramebuffer(36160,null)),h.bindFramebuffer(36009,o[0]),h.drawBuffers([36064]),h.blendEquation(32776),p=3,q=4,y.bindTexture(x1.for(h).directUniforms()),z(r,K,B);for(var Y,S=0,_=0;_<b;_++)h.bindFramebuffer(36009,o[S=1-(Y=_%2)]),h.drawBuffers([36064]),U.color.clear=[w,w,0,0],h.clear(16384),h.bindFramebuffer(36009,x[S]),h.drawBuffers([36064,36065]),U.color.clear=[0,0,0,0],h.clear(16384),h.bindFramebuffer(36009,o[S]),h.drawBuffers([36064,36065,36066]),h.blendEquation(32776),q=1+(p=3*Y),y.bindTexture(x1.for(h).directUniforms()),z(r,K,B),h.bindFramebuffer(36009,T),h.drawBuffers([36064]),h.blendEquation(32774),h.blendFuncSeparate(770,771,1,771),e.renderModel({type:"oitBackBlend",transparent:!0,uBackColor:t[3*S+2]},{clear:!1});h.bindFramebuffer(36160,P),h.blendFunc(1,771),e.renderModel({type:"oitFinal",transparent:!0,uFrontColor:t[3*S+1],uBackColor:t[6]},{clear:!1}),U.blend.apply({equation:32774,func:[770,771,1,771]}),U.color.clear=a,delete e._programDefines.OIT,e._glPrograms.genPhysicalProgramKeyOfScene(e._programDefines),N(f)}},Yq=function(r){this.gv=r,this.onMouseOver=this.onMouseOver.bind(this),this.resetProperties()};Yq.Mode={Disable:0,Selection:1,MouseOver:2,Style:3},DH.ms_highlight=function(r){r.setHighlightMode=function(r){var K="selection"===r||"selected"===r?Yq.Mode.Selection:"mouseover"===r||"hover"===r?Yq.Mode.MouseOver:"style"===r?Yq.Mode.Style:Yq.Mode.Disable,B=this.getHighlightMode();this._highlightHelper.mode=K,this.firePropertyChange("highlightMode",B,r)},r.getHighlightMode=function(){var r=this._highlightHelper.mode;return r===Yq.Mode.Selection?"selected":r===Yq.Mode.MouseOver?"hover":r===Yq.Mode.Style?"style":"disabled"},["type","color","width","glow","strength"].forEach(function(b){var f=b.replace(/(^|\.)[a-z]/g,function(r){return r[r.length-1].toUpperCase()});r["getHighlight"+f]=function(){return this._highlightHelper[b]},r["setHighlight"+f]=function(r){var K=this._highlightHelper,B=K[b];r!==B&&(K[b]=r,this.firePropertyChange("highlight"+f,B,r))}})},BA(Yq,A,{onMouseOver:function(r){Y1.preventDefault(r);var K=this.gv;K._48Q||(r=K.getDataAt(r))!==this.mouseOverData&&(this.mouseOverData=r,K.iv())},setFetchTargetFunc:function(r){this.fetchTargetFunc=r},_42:function(r,K){var B,b,f=this,h=f._mode,U=f.gv;if(!r._renderInfo.reflectDepth&&h!==Yq.Mode.Disable){if(h===Yq.Mode.Selection?B=U.sm().getSelection().toArray(function(r){return r.s("highlight.visible")}):h===Yq.Mode.MouseOver&&f.mouseOverData&&f.mouseOverData.s("highlight.visible")&&(B=[f.mouseOverData]),f.fetchTargetFunc&&(B=f.fetchTargetFunc(B)),h===Yq.Mode.Style)B=B||[],b=function(r){if(0<=B.indexOf(r))return!1;var K=U.getDataHighlightMode(r);return!1===K||!0!==K&&("selected"===K?!U.isSelected(r):"hover"!==K||r!==f.mouseOverData)};else{if(!B||!B.length)return;b=function(r){if(B.indexOf(r)<0)return!0}}var a,P,H,h=U.isVRPresenting(),Y=U._camera,S=(Y?(e=Y.getSize(U),a=e[0],e=e[1]):(a=U.getWidth(),e=U.getHeight(),h&&(P=U.getWidth,a/=2,U.getWidth=function(){return a},H=U.getViewport())),U.getDevicePixelRatio()),_=Math.floor(a*S),e=Math.floor(e*S),o=((S=f._renderTarget)?S.setSize(r,_,e):f._renderTarget=S=new Fr.RenderTarget(U,r,_,e),"soft"===f.type);S.bind(r),o?(x=l6(r,!0),C6(r,[1,1,1,1]),r.clear(16384),C6(r,x)):r.clear(16384),U.setViewport(r,0,0,_,e),U.drawFilter=function(r){return!r.s("static")&&b(r)},er=function(r,K,B,b,f,h){return h?or(r,K,B,b,f,h):(K=[0,1,1,1],x1.for(r).directUniforms().uFixPickReverseColor=K)},U.getRenderLists().each(function(r){r.beginFillHighlightMaskColor(b)});(x=r._blooming)&&(r._blooming=!1),U.renderPickScene(),x&&(r._blooming=!0),er=or,U.drawFilter=null,U.getRenderLists().each(function(r){r.endFillHighlightMaskColor()}),S.unbind(r);var K=U._prg,x=(D1&&Pr(r,K.aPosition),Pr(r,K.aNormal),!Y&&h&&(U.getWidth=P,U.setViewport(r,H[0],H[1],H[2],H[3])),U.getHighlightColor());return f._lastHighlightColor!==x&&(S=mN(f._lastHighlightColor=x),f._highlightColorData=[S[0]/255,S[1]/255,S[2]/255,S[3]/255]),o?f.renderSoftOutline(r,_,e):f.renderHardOutline(r,_,e),x1.for(r).useProgram(K=U._prg=U.acquireProgram({type:"legacy",defines:{}})),D1&&(Y=r,(h=K.aPosition)!=H1&&0<=h&&Y.enableVertexAttribArray(h)),!0}},renderHardOutline:function(r,K,B){var b=this.gv,f=b._postProcessing;(r=x1.for(r).directState()).blend.enabled=!0,r.depth.enabled=!1,f.blitScreen({type:"highlightHard",image:this._renderTarget.texture,textureSize:[K,B],edgeWidth:b.getHighlightWidth(),edgeColor:this._highlightColorData},{clear:!1}),r.blend.enabled=!1,r.depth.enabled=!0},renderSoftOutline:function(r,K,B){var b,f,h,U,a,P=this,H=P.gv,Y=H._postProcessing,S=Math.floor(K/2),_=Math.floor(B/2),K=Math.floor(K/4),B=Math.floor(B/4),e=P._downSampleRenderTarget,o=(e?(b=P._edgeDetectionRenderTarget,f=P._blurV2,h=P._blurH2,U=P._blurV4,a=P._blurH4,e.width===S&&e.height===_||(e.setSize(S,_),b.setSize(S,_),f.setSize(S,_),h.setSize(S,_),U.setSize(K,B),a.setSize(K,B))):(e=P._downSampleRenderTarget=new Fr.RenderTarget(H,r,S,_),b=P._edgeDetectionRenderTarget=new Fr.RenderTarget(H,r,S,_),f=P._blurV2=new Fr.RenderTarget(H,r,S,_),h=P._blurH2=new Fr.RenderTarget(H,r,S,_),U=P._blurV4=new Fr.RenderTarget(H,r,K,B),a=P._blurH4=new Fr.RenderTarget(H,r,K,B)),l6(r,!0)),x=H.getViewport(),T=P.width,t=P.strength,p=P.glow,q=(y=x1.for(r).glState).depth,y=y.blend,k=q.enabled;C6(r,[1,1,1,1]),q.enabled=!1,y.apply({func:[770,1]}),Y.blitScreen(e,{type:"blitScreen",image:P._renderTarget.texture}),Y.blitScreen(b,{type:"highlightEdgeDetection",image:e.texture,texSize:[S,_],color:P._highlightColorData}),Y.blitScreen(h,{type:"highlightBlur",image:b.texture,direction:[1,0],texSize:[S,_],radius:T}),Y.blitScreen(f,{type:"highlightBlur",image:h.texture,direction:[0,1],texSize:[S,_],radius:T}),Y.blitScreen(a,{type:"highlightBlur",image:f.texture,direction:[1,0],texSize:[K,B],radius:T}),Y.blitScreen(U,{type:"highlightBlur",image:a.texture,direction:[0,1],texSize:[K,B],radius:T}),y.apply({enabled:!0}),H.setViewport(r,x[0],x[1],x[2],x[3]),Y.blitScreen({type:"highlightFinalBlend",image:P._renderTarget.texture,edgeTexture1:f.texture,edgeTexture2:U.texture,edgeStrength:t*T,edgeGlow:p},{clear:!1}),y.apply({func:[770,771,1,771]}),q.enabled=k,C6(r,o)},resetProperties:function(){this.mode=Yq.Mode.Style,this.type=T1["highlight.type"],this.color=T1["highlight.color"],this.width=T1["highlight.width"],this.glow=T1["highlight.glow"],this.strength=T1["highlight.strength"]},dispose:function(){var r=this;m6(r.gv,r._renderTarget,r._downSampleRenderTarget,r._edgeDetectionRenderTarget,r._blurV2,r._blurH2,r._blurV4,r._blurH4),r._renderTarget=null,r._downSampleRenderTarget=null,r._edgeDetectionRenderTarget=null,r._blurV2=null,r._blurH2=null,r._blurV4=null,r._blurH4=null}}),A.defineProperties(Yq.prototype,{mode:{get:function(){return this._mode},set:function(r){var K=this._mode;r!==K&&(this._mode=r,K=K===Yq.Mode.MouseOver||K===Yq.Mode.Style,(r=r===Yq.Mode.MouseOver||r===Yq.Mode.Style)&&K||(K&&K1(this.gv.getView(),"mousemove",this.onMouseOver),r&&r1(this.gv.getView(),"mousemove",this.onMouseOver)))}}});((r=Fr.PrefabRenderer=function(r){this.gv=r}).prototype={}).constructor=r,ez("model"),ez("mesh"),ez("material"),ez("shader"),ez("shaderChunk",{loadingParam:{sync:!0}}),$U="",XU={},cU=[],OU=new Z,QU=new Z,EU=[0,0,0],r5={aPosition:"vs",aUv:"uv",aUv2:"uv2",aNormal:"ns"},K5={type:"fixColor",color:"gray"},B5={type:"fixColor",color:"black"},b5={5126:1,35664:2,35665:3,35666:4,35674:4,35675:9,35676:16},f5={triangles:4,triangleStrip:5,triangleFan:6,lines:1,lineLoop:2,lineStrip:3,points:gQ.POINTS},h5={groundColor:[0,0,0]},U5=new Z,a5=new Z,r.prototype.render=function(A,r,K,B){var b;if((gU=r.prefix)&&($U=(b=$U)+gU+"."),!1===Kc(r,"visible",gU&&K instanceof PP&&K.s("model3dBindings")))b!==P1&&($U=b);else{var f,V,U=this.gv,A=fc(A,K);if(f=r.matDef)for(var h in f){var M=XU[h];M&&((V=V||{})[h]=M),XU[h]=f[h]}var a,P,R=Et().copy(QU),B=(B&&QU.fromArray(B),bc(r,o1)),l=(QU.multiply(B),rc(B),!1),C=!1,m=!1;do{if(Y=r.model){(Y=Y1.getShape3dModel(Y)||Y1.getModel(Y))&&this.render(ZU,Y,K);break}var D=r.mesh;if(!D)break;var H,i,Y=U._picking;if(o1&&o1.s("static"))if((S=(S=U.getRenderLists().get(o1.getRenderLayer()).getModel3dInstancedBatchMap())&&S[U.getStaticInstancingKey(o1)])&&S.length){if(S.rendered&&S.rendered!==o1._id)break;if(H=Sc(U,o1,QU,S,!1),Y){if(S._highlightInvalid)break;i=function(r){var K=r.cachePick;if(K.length!==r.length||K.version!==r.csVersion){K.buffer=new aA(4*r.length);for(var B=0,b=K.buffer,f=r.cs,h=4*r.length;B<h;B+=4)b[B]=f[B],b[B+1]=f[B+1],b[B+2]=f[B+2],b[B+3]=f[B+3];K.length=r.length,K.version=r.csVersion}return K.buffer}(S)}S.rendered=o1._id}var S=!1,_=null,Z=!1,e=r.mat;if(e){if(e instanceof Array){var o=r.subMeshes;if(o){for(var g=o._drawRangeGroupByMat||function(r){for(var K=[],B=0;B<r.length;B++){var b,f=r[B].materialIndex;(b=K[f])||(K[f]=b=[]),b.push(r[B].start,r[B].count)}return r._drawRangeGroupByMat=K}(o),x=0;x<g.length;x++)g[x]&&this.render(ZU,{mesh:D,mat:e[x],instances:r.instances,drawRange:g[x]},K);break}}if("string"==typeof e){if(o=Bc(o1,e)||XU[e]){if(_1(o)&&!(o=Y1.getMaterial(o)))break}else if(!(o=Y1.getMaterial(e)))break;e=o}}else e=K5;var T,W=!0===e.transparent;if(!!U._45Q!=W)break;WU=TB[e.type];var t,p=!!(r.skeleton&&o1&&(T=U._updatedSkeletonDatas[r._skeletonId+"|"+o1._lastAnimHashKey]));if(p&&(U.getPrefabBoneTexture(r)?(t=r.boneTextureSize,ZU.activeTexture(33984),A6(ZU,U.getPrefabBoneTexture(r)),ZU.texImage2D(3553,0,34836,t,t,0,6408,5126,T),A6(ZU,H1)):(t=r.boneTextureSize=Math.round(Math.sqrt(T.length/4)),U.setPrefabBoneTexture(r,U.createTexture({data:T,width:t,height:t,type:5126,filter:9728,clampToEdge:!0})))),!Y||e.renderPickMap){var q=x1.for(ZU),y=e.type||"fixColor";if(!(z=EQ[y])||z.isRaw)if(z)w=U.acquireProgram({type:y,cacheKey:y});else{if(!(z=Y1.getShader(y)))break;if(!(z=Bq(z))){EQ[y]=EQ.fixColor;break}z.isRaw=!0,EQ[y]=z,w=U.acquireProgram({type:y,cacheKey:y},!0)}else{var $=o1?o1.s("3d.clip.direction"):0;switch(o1&&ZU._blooming&&!o1.s("bloom")&&(y="fixColor",B5.cullFace=e.cullFace,B5.flipSide=e.flipSide,e=B5),y){case"fixColor":w=U.acquireProgram({type:"fixColor",defines:{CLIP_DIRECTION:!!$,USE_INSTANCING:!(!r.instances&&!H)}});break;case"pbr":case"phong":var X,k,c=1,O=((o1||iU)&&-1!==(k=o1?o1.s("envmap.probe"):iU.envmapProbe||0)&&(X=!0,(c=o1?o1.s("envmap"):iU.envmap||0)&&(c*=U._envmapRenderer._envmapIntensity[k],_=k)),X||!(_=e.envmap||e.envMap)||(k=U.getTexture(_))&&k!==ZU._emptyTexture||(_=null),U.isTransmissionEnabled(e)),Q=U._glPrograms.genPhysicalProgramKeyOfMat(e,{clipDirection:$,isTransparent:W,enableTransmission:O,useInstancing:!(!r.instances&&!H),useDisplacement:!!e.displacementMap&&U._glCapabilities.vertexTextures,aoMapUvChannel:Pc("aoUvChannel",e,WU)||1,useUvClip:!(!U._uvClipEnabled||"uv.left"!=$&&"uv.right"!=$),skeleton:p,alphaChannel:Pc("alphaChannel",e,WU),aoChannel:Pc("aoChannel",e,WU),roughnessChannel:Pc("roughnessChannel",e,WU),metalnessChannel:Pc("metalnessChannel",e,WU),toneMapping:U.getToneMapping(),rectsNum:U._87I.length,envMapCombine:Pc("envMapCombine",e,WU),envmap:_}),w=U.acquireProgram({type:y,cacheKey:U._sceneProgramDefinesMask+Q.toString(),cacheKeyOfMat:Q,extensions:O?{GL_EXT_shader_texture_lod:!0}:null});break;default:w=U.acquireProgram(e)}}if(!w)break;m=!0,q.useProgram(w);var E,v=q.directUniforms(),r1=q.directState(),z=!!e.flipSide;if(o1&&(2===(E=o1._forceSingleFace)&&(z=!z),o1._flipSideInheirt&&(z=!z)),QU.determinant()<0&&(z=!z),r1.cullFace.enabled=!(!E&&!e.cullFace),r1.cullFace.frontFace=z?2304:2305,(Z=(S=w&&("pbr"===w.name||"phong"===w.name))&&U._glUbos.supportsUbo)?U._glUbos.updateAndBind("scene",w):(v.uProjectMatrix=U._projectMatrix,v.uViewMatrix=U._viewMatrix,v.uCameraPosition=U._camera?U._camera.p3():U.getEye(),v.uTime=U.__uptime),w._dirty){if(w._dirty=P1,S){var N,u=f1=F=N=J=L=I=z=j=void 0,j=U,z=v,I=(I=j._headlightDirection)&&3===I.length?I:"shadow"===I?j.shadowMap.getDirection():PA(j.getCenter(),j.getEye()),u=j._lastLightUploadInfo.headlightColor;if(h5.color=ac(u,Math.PI*j._headlightRatioForPhysicalMaterial),z.hemisphereLight.direction=e1.normalizeArray(j._transformDirectionToViewSpace(I)),z.hemisphereLight.groundColor=h5.groundColor,z._lastLightMask=P1,z._lastHeadlightAmbientIntensity=P1,j.lightProbe&&(z.lightProbe=j.lightProbe),(N=j._59O)&&N.length){for(L=0,J=N.length,F=[];L<J;L++)F.push({position:j._transformPointToViewSpace(N[L].p3()),color:Hc(N[L]),distance:N[L].s("light.range"),decay:1,enable:!1});z.pointLights=F}if((N=j._spots)&&N.length){for(L=0,J=N.length,F=[];L<J;L++){var K1=N[L].s("light.angle");F.push({position:j._transformPointToViewSpace(N[L].p3()),color:Hc(N[L]),direction:N[L].s("light.rotation.enable")?j._transformDirectionToViewSpace(e6([0,0,1],N[L])):j._transformDirectionToViewSpace(N[L].s("light.center"),N[L].p3()),decay:1,enable:!1,distance:N[L].s("light.range"),coneCos:S1(K1/2),penumbraCos:S1(K1/2*(1-N[L].s("light.exponent")))})}z.spotLights=F}if((N=j._dirs)&&N.length){for(L=0,J=N.length,F=[];L<J;L++)F.push({direction:N[L].s("light.rotation.enable")?j._transformDirectionToViewSpace(e6([0,0,1],N[L])):j._transformDirectionToViewSpace(null,N[L].p3()),color:Hc(N[L]),enable:!1});z.directionalLights=F}if((N=j._87I)&&N.length){for(var B1,b1,f1=new e1,L=0,J=N.length,F=[];L<J;L++)VH.fromArray(wA(N[L])),VH.premultiply(MH.fromArray(j._viewMatrix)),MH.identity().extractRotation(VH),B1=f1.set(.5*-N[L].s("light.size")[0],0,0).applyMatrix4(MH).toArray(),b1=f1.set(0,.5*N[L].s("light.size")[1],0).applyMatrix4(MH).toArray(),F.push({position:j._transformPointToViewSpace(N[L].p3()),color:Hc(N[L]),halfWidth:B1,halfHeight:b1,enable:!1,disableSpecular:N[L].s("light.specular.disable")});z.rectAreaLights=F,Y1.LTC_FLOAT_1&&((u=j.getGL())._LTC_1||(u._LTC_1=j.createTexture(Y1.LTC_FLOAT_1)),u._LTC_2||(u._LTC_2=j.createTexture(Y1.LTC_FLOAT_2)),z.ltc_1=u._LTC_1,z.ltc_2=u._LTC_2)}}v.uClipperMatrix=U._boxClipperMatrixes,v.uClipperClipInner=U._boxClipperClipInner,Z||(U._fogDisabled||(v.uFogColor=U._fogColor,v.uFogDensity=U._fogDensity,v.uFogNear=U._fogNear,v.uFogFar=U._fogFar),v.toneMappingExposure=U.getToneMappingExposure()),U.shadowMap.enable&&U.shadowMap.createShadow(v)}else U.shadowMap.enable&&U.shadowMap.createShadow(v,!0);U.rebindOITTexture(v),U.flowMap.createFlow(v),U._87I.length&&Y1.LTC_FLOAT_1&&(v.ltc_1=ZU._LTC_1,v.ltc_2=ZU._LTC_2),S&&O&&ZU._transmissionRTT&&(v.transmissionSamplerMap=ZU._transmissionRTT.texture,v.transmissionSamplerSize=ZU._transmissionRTT.getSize()),e.uUvMatrix=ur(e.uvRotation,e.uvOffset,e.uvScale,e.uvAnchor)}var G,I=H?{aMatrixInstanced:H,aBatchColor:i}:r.instances,d=function(r,K,h){var B=Uc(K);if(!B)return 0;if(gm(B)||!B._4HQ)for(var b in B._4HQ=!0,B)"is"!==b&&YY(B[b])&&(B[b]=new aA(B[b]));if(h&&!h._complete_)for(var b in h._complete_=!0,h)YY(h[b])&&(h[b]=new aA(h[b]));(K=x1.for(ZU).directAttribs()).disable();var U,f=B.index||B.is,a=!f,P=0;return K.apply(B,function(r,K,B){var b,K=r5[K]||K;if(h&&(b=h[K])!==P1){if(!b.length)return null;var f=b5[B.desc.activeInfo.type];return P=P||b.length/f,br(ZU,null,b,null,f)}return(b=r[K])!=P1&&b.length?(a&&(a=!1,U=b.length/b5[B.desc.activeInfo.type]),fr(ZU,null,b)):null}),f?(Ur(ZU,r._buffer.is,f),{length:f.length,instances:P,indexType:f instanceof Uint32Array?5125:f instanceof Uint8Array?5121:null,is:!0}):U||B.vs?{length:U||B.vs.length/3,instances:P,is:!1}:0}(U,D,I);if(!d)break;d.instances&&(v=v||x1.for(ZU).directUniforms(),i&&(v.uBatchColor=!0),C=v.uUseInstance=!0),H?Sr(U):(l=!0,Sr(U,QU.getElements())),!Y||e.renderPickMap?(v=v||q.directUniforms(),o1?O6(ZU,U,o1,S):iU&&(z=ZU,u=U,a=iU,n=S,G=P=void 0,P=x1.for(z).directUniforms(),G=a.alphaTest,P.uAlphaTest=G===P1?T1.alphaTest:G,G=u._picking,P.shadowReceive=!G&&!1!==a.shadowReceive,i6(u,P,a.clipboxMask===P1?OQ:a.clipboxMask),P.blackout=!(!z._blooming||a.bloom),G||(u._flowObjects.length&&u.flowMap.resetFlowUniform(a.effectFlowMask===P1?OQ:a.effectFlowMask,P),n||(a.envmap!==P1?(P.uUseEnvMap=!0,P.roughness=a.roughness||0,u._setEnvmapByProbeId(P,a.envmapProbe||0,a.envmap)):(P.uUseEnvMap=!1,P.envMapIntensity=0),o6(u,P,a.lightMask===P1?OQ:a.lightMask,a.headlightAmbientIntensity)),P.uFog=!0)),S&&(o1?Yc(v,U,o1._currentFaceLightMask!=H1?o1._currentFaceLightMask:o1.s("shape3d.light")?o1.s("light.mask"):0,o1.s("headlight.ambientIntensity")||U._headlightAmbientIntensity):iU?Yc(v,U,iU.light==H1?iU.lightMask===P1?OQ:iU.lightMask:0,iU.headlightAmbientIntensity||U._headlightAmbientIntensity):Yc(v,U,0,0),_!=H1&&(X?(G=U._envmapRenderer._envmaps[_],v.envmap=G?G.texture:ZU._emptyTexture):v.envmap=U._envmapRenderer.assureEnvmapFromEquirectangular(_),v.envMapIntensity=c*Pc("envMapIntensity",e,WU)),p&&jr(v,r,U.getPrefabBoneTexture(r),T)),U.resetSharedTextureIndex(),S?function(r,K,B,b,f,h){var U,a,P,H,Y,S,_,e,o,x,T,t=h.type,p=tB[t];if(B){if(!(T=(x=r._glUbos).attachUbo(t,h,r._renderId))){for(a=0,P=p.length;a<P&&-1!==(H=p[a]);a+=2)S=h[H],Y=p[a+1],S&&(S instanceof WebGLTexture||(S=r.textureAccessesByMaterial(S,b)),f[H]=S),a+=2*Y;return x.updateAndBind(t,K)}}else T=f;for(U=!0,a=0,P=p.length;a<P;a+=2)if(-1===(H=p[a]))U=!1,a--;else{if(Y=0,_=!1,-2===H?(Y=(P-a-1)/2,a--,_=!0):(S=h[H],Y=p[a+1],S&&(!U||S instanceof WebGLTexture||(S=r.getTexture(S,b)),U?f[H]=S:T[H]=S,_=!0)),_)for(o=(e=a+2)+2*Y;e<o;e+=2)(S=h[H=p[e]])===P1&&(S=p[e+1]),T[H]=S;a+=2*Y}T.uUvMatrix=h.uUvMatrix;var q=h.uUv2Matrix;q&&(T.uUv2Matrix=q),B&&x.updateAndBind(t,K)}(U,w,Z,o1,v,e):v.apply(e,function(r,K,B){if("envmap"!==K&&"envMapIntensity"!==K){if((f=(f=r[K])===P1&&WU?WU[K]:f)&&(35678===B||35680===B)&&!(f instanceof WebGLTexture))if(YY(f))for(var b=f,r=b.length,f=new Array(r),h=0;h<b.length;h++)f[h]=U.textureAccessesByMaterial(b[h],o1);else f=U.textureAccessesByMaterial(f,o1);return f}})):p&&(v=v||x1.for(ZU).directUniforms(),jr(v,r,U.getPrefabBoneTexture(r),T));var s,n,h1=f5[e.renderMode];if(o1&&U.onPreRenderData(o1,ZU),s=r.drawRange)for(var x=0,U1=s.length;x<U1;x+=2)d.is?Kr(ZU,s[x],s[x+1],h1,d.indexType,d.instances):rr(ZU,s[x],s[x+1],h1,d.instances);else d.is?Kr(ZU,0,d.length,h1,d.indexType,d.instances):rr(ZU,0,d.length,h1,d.instances)}while(o1&&U.onPostRenderData(o1,ZU),p&&(v.uUseSkinning=!1),Y&&((n=x1.for(ZU).directAttribs()).aNormal=!1,n.aUv=!1,n.skinIndex=!1,n.skinWeight=!1),0);l&&Hr(U),C&&(v.uUseInstance=!1,v.uBatchColor=!1),m&&U._prg&&(q.useProgram(U._prg),q.directAttribs().disable(),r1.cullFace.frontFace=2305,U.shadowMap.enable&&U.shadowMap.createShadow(null,!0),U.rebindOITTexture(),U._envmapRenderer.resetUniformCache(),U.flowMap.createFlow());var a1=r.comps;if(a1&&a1.length)for(x=0,U1=a1.length;x<U1;x++)this.render(ZU,a1[x],o1);if(rc(QU),QU=R,f=r.matDef)for(var h in f)XU[h]=V&&V[h]||P1;b!==P1&&($U=b),hc(A)}},r.prototype.renderDepth=function(r,K,B,b,f){var h;if((gU=K.prefix)&&($U=(h=$U)+gU+"."),!1===Kc(K,"visible",gU&&B instanceof PP&&B.s("model3dBindings")))h!==P1&&($U=h);else{var U,a,r=fc(r,B),P=Et().copy(QU);if(b&&QU.fromArray(b),U=K.matDef)for(var H in U){var Y=XU[H];Y&&((a=a||{})[H]=Y),XU[H]=U[H]}b=bc(K,o1),QU.multiply(b),rc(b);do{var S,_=K.model;if(_){(_=Y1.getShape3dModel(_)||Y1.getModel(_))&&this.renderDepth(ZU,_,B,null,f);break}if(!(_=Uc(K.mesh)))break;if(o1&&o1.s("static")){var e=this.gv,o=e.getRenderLists().get(o1.getRenderLayer()).getModel3dInstancedBatchMap();if((o=o&&o[e.getStaticInstancingKey(o1)])&&o.length){if(o.rendered&&o.rendered!==o1._id)break;S=Sc(e,o1,QU,o,!0),o.rendered=o1._id}}if(gm(_),e=K.mat){if("string"==typeof e){if(o=Bc(o1,e)||XU[e]){if(_1(o)&&!(o=Y1.getMaterial(o)))break}else if(!(o=Y1.getMaterial(e)))break;e=o}}else e=K5}while(f(S?OU:QU,_,e,S?{aMatrixInstanced:S}:K.instances,K),0);var x=K.comps;if(x&&x.length)for(var T=0,t=x.length;T<t;T++)this.renderDepth(ZU,x[T],o1,null,f);if(rc(QU),QU=P,U=K.matDef)for(var H in U)XU[H]=a&&a[H]||P1;h!==P1&&($U=h),hc(r)}};var Sq=M.Light=function(){vY(Sq,this),this.s(cQ,T1[cQ]),this.s(In,"sphere"),this.s("shape3d.reverse.cull",!0),this.s3(20,20,20)},_q=(Cs("Light",JO,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(r,K,B){Sq.superClass.onStyleChanged.apply(this,arguments),r===cQ&&this.s("shape3d.color",B)}}),Fr.FrameState=function(r,K){this.renderState=x1.for(K),this.picking=!1,this.envmapReflectivity=.5,this.cameraPosition=P1,this.projectMatrix=P1,this.viewMatrix=P1,this.view=r,this.defaultProgram=P1,this.pickColorMap=P1,this._pvStack=[],this._renderStateStack=[]}),eq=(_q.prototype.savePV=function(){var r=this.view;this._pvStack.push([eA(this.projectMatrix),eA(this.viewMatrix),r._18Q,eA(r._7O)])},_q.prototype.restorePV=function(){var r,K=this._pvStack.pop();K&&(r=this.view,this.projectMatrix=r._projectMatrix=K[0],this.viewMatrix=r._viewMatrix=K[1],r._18Q=K[2],r._7O=K[3])},_q.prototype.setPV=function(r,K){var B,b=this.view,f=!1;r&&(this.projectMatrix=b._projectMatrix=r,f=!0),K&&(this.viewMatrix=b._viewMatrix=K,b._7O=eA(K),f=!0),f&&(r=b.getWidth(),f=b.getHeight(),B=eA(this.projectMatrix),b._18Q=v6(B,B,K),b._18Q._wh=r/f)},_q.prototype.syncEnv=function(r){var K=this.view;this.envmapReflectivity=K._envmapReflectivity||.5,this.cameraPosition=K.getEye(),this.projectMatrix=K._projectMatrix,this.viewMatrix=K._viewMatrix,this.pickColorMap=r,this.picking=K.getGL()._picking},_q.prototype.setGLState=(P5=[0,0,0,0],H5=[!0,!0,!0,!0],Y5=[0,1],S5=[32774,32774],_5=[770,771,1,771],function(r,K){this.renderState.gl;var B=this.renderState.glState;B.dither=!1,K?B.color.mask=H5:B.color.reset(),B.pixelStore.reset(),B.blend.color=P5,B.blend.equation=S5,B.blend.func=_5,B.cullFace.enabled=!1,B.scissor.enabled=!1,B.depth.enabled=!0,B.depth.clear=1,B.depth.func=515,B.depth.range=Y5,B.stencil.enabled=!1,B.polygonOffset.enabled=!1,r?(B.depth.mask=!1,B.blend.enabled=!0):(B.depth.mask=!0,B.blend.enabled=!1)}),_q.prototype.setUniforms=function(r){var K,B,b,f,h,U,a,P,H,Y,S,_,e,o,x,T,t,p=this.view,q=this.renderState,y=q.gl;(q=q.uniforms).uBrightness=1,q.uOpacity=1,q.uPartOpacity=1,q.uUseSkinning=!1,q.uUseInstance=!1,q.uTexture=!1,q.uBlendTexture=!1,q.uAlphaTest=T1.alphaTest,q.uTransparent=!!r,q.uFix=!1,q.uBatchColor=!1,q.uBatchBlend=!1,q.uBatchBrightness=!1,q.envMapIntensity=this.envmapReflectivity||.5,q.uCameraPosition=this.cameraPosition,q.uProjectMatrix=this.projectMatrix,q.uViewMatrix=this.viewMatrix,q.uEnvMap=null,i6(p,q,QQ),q.uClipperMatrix=p._boxClipperMatrixes,q.uClipperClipInner=p._boxClipperClipInner,q.uEnvmapQuat=p._envmapExtraQuaternion,p._envmapRenderer.resetUniformCache(),this.picking||(K=p,r=y,r=x1.for(r).directUniforms(),e=K._lastLightUploadInfo={c:[],g:[],e:[]},(y=K._headlightDirection)&&3===y.length?o=y:"shadow"===y&&(o=K.shadowMap.getDirection()),o=o?e1.normalizeArray(K._transformDirectionToViewSpace(null,o)):[0,0,0],r.uHeadlightDirection=o,r.uHeadlightRange=K._headlightRange,y=r.uHeadlightAmbientIntensity=K._headlightAmbientIntensity,o=K._headlightIntensity,x=DN(K._headlightColor),1!==o&&(x=[x[0]*o,x[1]*o,x[2]*o]),r.uHeadlightColor=e.headlightColor=[x[0],x[1],x[2],(o=K._headlightDisabled)?1:0],e.c.push(x[0],x[1],x[2]),e.g.push(o?-1:K._headlightGroup),e.e.push(o?1:0),x=K._59O,o=K._spots,T=K._dirs,t=K._87I,x.length&&(B=[],b=[],f=[],x.forEach(function(r){_6(B,r,e),tY(b,K._transformPointToViewSpace(r.p3())),f.push(r.s("light.range"))}),r.uPointColor=B,r.uPointRange=f,r.uPointPosition=b),o.length&&(h=[],U=[],a=[],P=[],H=[],Y=[],o.forEach(function(r){_6(h,r,e),tY(U,K._transformPointToViewSpace(r.p3())),r.s("light.rotation.enable")?tY(H,K._transformDirectionToViewSpace(null,e6([0,0,1],r))):tY(H,K._transformDirectionToViewSpace(r.p3(),r.s("light.center"))),a.push(r.s("light.range")),P.push(S1(r.s("light.angle")/2)),Y.push(r.s("light.exponent"))}),r.uSpotColor=h,r.uSpotRange=a,r.uSpotAngle=P,r.uSpotExponent=Y,r.uSpotPosition=U,r.uSpotDirection=H),T.length&&(S=[],_=[],T.forEach(function(r){_6(S,r,e),r.s("light.rotation.enable")?tY(_,K._transformDirectionToViewSpace(null,e6([0,0,1],r))):tY(_,K._transformDirectionToViewSpace(r.p3()))}),r.uDirColor=S,r.uDirDirection=_),t.length&&t.forEach(function(r){_6([],r,e)}),r._lastLightMask=OQ,r._lastHeadlightAmbientIntensity=y,p._fogDisabled||(q.uFogColor=p._fogColor,q.uFogDensity=p._fogDensity,q.uFogNear=p._fogNear,q.uFogFar=p._fogFar))},_q.prototype.drawLayer=function(r,K){return this.view.renderLayers(r,!0)},_q.prototype.drawData=function(r,K,B){var b,f,h,U,a,P,H=this.view;H.isVisible(r)&&(f=(b=this.renderState).uniforms,(r=H.getData3dUI(r))&&(U=(h=b.gl)._picking,a=H._picking,P=r._pickId,B&&(r._pickId=B),h._picking=H._picking=!!B,f.uTransparent=!!K,r._42(b.gl,b.program,K?u:y),h._picking=U,H._picking=a,r._pickId=P))},Fr.Graph3dView=function(r,K){var B,b,f=this;f.resetHeadlightProperties(),f.resetFogProperties(),f._webGLVersion=1,f._attributes=K||Y1.graph3dViewAttributes,f._25I={},f._attributes&&(B=f._attributes.view)?B._ht=f:B=lY(1,f),f._view=B,f._attributes&&(b=f._attributes.canvas)||(b=mY(f._view)),f._canvas=b,f.__startTime=Date.now(),f.__uptime=0,r1(b,"webglcontextlost",function(r){r.preventDefault(),f._26I&&f.dispose(),f._26I=H1,f._35O=!0}),r1(b,"webglcontextrestored",function(r){f._35O=!1,f.iv()}),f._40Q=new wq(f),f._43Q={},f._44Q=-1,f._boneViewMatrices=[],f._batchIndexMap={},f._batchModelMap={},f._wireframeIndexMap={},f._wireframeModelMap={},f._wireframeIndexMapSwap={},f._wireframeModelMapSwap={},f._polylineIndexMap={},f._polylineIndexMap={},f._polylineIndexMapSwap={},f._polylineIndexMapSwap={},f._8O=[],f._modelMatrixStack=[],f._7O=SA(),f._6O=SA(),f._modelMatrix=SA(),f._1o=new Iq(f),f._30O=new Fq(f),f._31O=new Lq(f),f._32O=new Jq(f),f._raycaster=new mq(f),f._highlightHelper=new Yq(f),f._postProcessing=new uB(f),f._41Q=[],f._42Q=0,f._frameRenderOptionStack=[],Fr.VR?(f.vr=new Fr.VR(f),f.isVREnabled=function(){return this.vr.enable},f.isVRPresenting=function(){return this.vr.isPresenting()}):(f.vr={enable:!1,isPresenting:q},f.isVREnabled=q,f.isVRPresenting=q),f.shadowMap=new Uq(f),f.flowMap=new aq(f),f._33Q=!0,f._eye=v9(Y1.graph3dViewEye),f._center=v9(Y1.graph3dViewCenter),f._up=v9(Y1.graph3dViewUp),f._lightChanged=!1,f._59O=[],f._spots=[],f._dirs=[],f._87I=[],f._boxClippers=[],f._boxClipperVersion=0,f._flowObjects=[],f._transmissionObjects=[],f._frameId=0,f._renderId=0,f._picking=!1,f._tempCameraQueue=[],f._batchInfoMap={},f._updatedSkeletonDatas={},f._renderLayerInfoMap={},f._renderLayerSettingsVersion=0,f._gatherRenderLayersByPriority(!0),f.overlappingBox=new WO(f),f._envmapRenderer=new Fr.EnvmapRenderer(this),f._prefabRenderer=new Fr.PrefabRenderer(this),f._depthGrabber=new Pq(this),f.dm(r||new HP),f._coreInteractor=new Fz(this),f.setInteractors([new zq(f)]),f.enableQuickVisibleMode(),f._initView(),f._genBatchInstancedArrayFunc(),f.genProgramDefines(),f._setupPVMatrix()}),oq={box:1,sphere:2,cylinder:3,cone:4},xq={addRGB:"FLOW_BLEND_MODE_ADD_RGB",addRGBA:"FLOW_BLEND_MODE_ADD_RGBA",overrideRGBA:"FLOW_BLEND_MODE_OVERRIDE_RGBA",overrideRGB:"FLOW_BLEND_MODE_OVERRIDE_RGB",overrideA:"FLOW_BLEND_MODE_OVERRIDE_A",multiplyRGB:"FLOW_BLEND_MODE_MULTIPLY_RGB",multiplyRGBA:"FLOW_BLEND_MODE_MULTIPLY_RGBA"},Tq=0,tq=(h("Graph3dView",A,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_shadow:1,ms_highlight:1,ms_quickVisible:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","editHelperDisabled","blockSelectable","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable","zoomToCenter",Eu,rn,"firstPersonMode",Yn,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightDirection","headlightColor","headlightIntensity","headlightAmbientIntensity","headlightRatioForPhysicalMaterial","headlightDisabled","headlightGroup","ortho","orthoWidth","syncEyeWithOrthoWidth","fovy","near","far",hu,fu,"up","aspect","fogDisabled","fogMode","fogDensity","fogColor","fogNear","fogFar","pickerResolution","dashDisabled","uvClipEnabled","transmissionEnabled","batchColorDisabled","batchInstancedDisabled","batchBlendDisabled","batchBrightnessDisabled","flowBlendMode","hoverDelay","batchInfoMap","renderLayerInfoMap","rotateMinPhi","rotateMaxPhi","sortable","opaqueSortable","sortFunc","toneMapping","toneMappingExposure"],_editable:!1,_sortable:Y1.graph3dViewSortable,_opaqueSortable:Y1.graph3dViewOpaqueSortable,_editHelperDisabled:Y1.graph3dViewEditHelperDisabled,_blockSelectable:Y1.graph3dViewBlockSelectable,_devicePixelRatio:P1,_boundaries:P1,_parallelShaderCompile:!1,_moveStep:Y1.graph3dViewMoveStep,_rotateStep:Y1.graph3dViewRotateStep,_toneMapping:P1,_toneMappingExposure:1,_rotateMinPhi:Y1.graph3dViewMinPhi===P1?Y1.graph3dViewRotateMinPhi:Y1.graph3dViewMinPhi,_rotateMaxPhi:Y1.graph3dViewMaxPhi===P1?Y1.graph3dViewRotateMaxPhi:Y1.graph3dViewMaxPhi,_pannable:Y1.graph3dViewPannable,_rotatable:Y1.graph3dViewRotatable,_walkable:Y1.graph3dViewWalkable,_resettable:Y1.graph3dViewResettable,_zoomable:Y1.graph3dViewZoomable,_zoomToCenter:!0,_firstPersonMode:Y1.graph3dViewFirstPersonMode,_mouseRoamable:Y1.graph3dViewMouseRoamable,_gridVisible:Y1.graph3dViewGridVisible,_gridSize:Y1.graph3dViewGridSize,_gridGap:Y1.graph3dViewGridGap,_gridColor:Y1.graph3dViewGridColor,_originAxisVisible:Y1.graph3dViewOriginAxisVisible,_centerAxisVisible:Y1.graph3dViewCenterAxisVisible,_axisXColor:Y1.graph3dViewAxisXColor,_axisYColor:Y1.graph3dViewAxisYColor,_axisZColor:Y1.graph3dViewAxisZColor,_ortho:Y1.graph3dViewOrtho,_orthoWidth:Y1.graph3dViewOrthoWidth,_syncEyeWithOrthoWidth:Y1.graph3dViewSyncEyeWithOrthoWidth,_fovy:Y1.graph3dViewFovy,_near:Y1.graph3dViewNear,_far:Y1.graph3dViewFar,_rectSelectable:Y1.graph3dViewRectSelectable,_rectSelectBackground:Y1.graph3dViewRectSelectBackground,_editSizeColor:Y1.graph3dViewEditSizeColor,_autoMakeVisible:Ds,_pickerResolution:Y1.graph3dViewPickerResolution,_oitPassCount:3,_dashDisabled:Y1.graph3dViewDashDisabled,_uvClipEnabled:Y1.graph3dViewUvClipEnabled,_transmissionEnabled:Y1.graph3dViewTransmissionEnabled,_batchColorDisabled:Y1.graph3dViewBatchColorDisabled,_batchInstancedDisabled:Y1.graph3dViewBatchInstancedDisabled,_batchBlendDisabled:Y1.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:Y1.graph3dViewBatchBrightnessDisabled,_useOIT:!1,_oitEnabled:!1,_flowBlendMode:Y1.graph3dViewFlowBlendMode,addCamera:function(r){var K=A.freeze({id:this._42Q++,priority:r.priority||0,ignoreInPick:!!r.ignoreInPick,render:r.render});r.switch3DStatus&&(this._43Q[K.id]=!0),this._41Q.push(K),this._41Q.sort(function(r,K){return r.priority!==K.priority?r.priority-K.priority:r.id-K.id})},setEye:function(r,K,B){1===arguments.length&&(K=r[1],B=r[2],r=r[0]);var b=this._eye;b[0]=r,b[1]=K,b[2]=B,this.fp(hu,H1,b)},setCenter:function(r,K,B){1===arguments.length&&(K=r[1],B=r[2],r=r[0]);var b=this._center;b[0]=r,b[1]=K,b[2]=B,this.fp(fu,H1,b)},setUp:function(r,K,B){1===arguments.length&&(K=r[1],B=r[2],r=r[0]);var b=this._up;b[0]=r,b[1]=K,b[2]=B,this.fp("up",H1,b)},setVisibleFunc:function(r){var K=this._visibleFunc;this._visibleFunc=r,this.fp("visibleFunc",K,r),r?this.isQuickVisibleMode()&&(this.disableQuickVisibleMode(),this._quickVisiblePending=!0):this._quickVisiblePending&&(this._quickVisiblePending=!1,this.enableQuickVisibleMode())},getDevicePixelRatio:function(){return this._picking?this._1o._resolution:this._devicePixelRatio||WH},isTransmissionEnabled:function(r){return!!this._transmissionEnabled&&(!r||r.enableTransmission)},isDepthGrabberEnabled:function(){return this._depthGrabber.isEnabled()||this.getPostProcessing().isEnabled()},enableDepthGrabber:function(){this._depthGrabber.enable()},disableDepthGrabber:function(){this._depthGrabber.disable()},grabDepth:function(r){return this._depthGrabber.grab(r)},isFloatDepthTexture:function(r){return r&&r._internalFormat},isOITEnabled:function(r){return!!this._useOIT&&(!r||this._oitEnabled)},enableOIT:function(){var r=this;if(r._useOIT)return!0;if(r._useOIT=!0,!r.getGL())return!1;if(!r.isWebGL2())return!1;if(!r._glExtensions.get("EXT_color_buffer_float"))return!1;var K=V.navigator;return!(K&&(/iPad|iPhone|iPod/.test(K.platform)||"MacIntel"===K.platform&&1<K.maxTouchPoints)||(r._oitEnabled=!0,r._depthPeelingRenderer||(r._depthPeelingRenderer=new Hq(r)),r._depthPeelingRenderer.enableOIT(),r.iv(),0))},disableOIT:function(){return this._useOIT&&(this._useOIT=!1,this._oitEnabled&&(this._depthPeelingRenderer&&this._depthPeelingRenderer.disableOIT(),this._oitEnabled=!1,this.iv())),!0},setOITPassCount:function(r){this._oitPassCount=r,this.iv()},getOITPassCount:function(){return this._oitPassCount},rebindOITTexture:function(r){return!!this._oitEnabled&&this._depthPeelingRenderer.bindTexture(r)},isTransparentMask:function(r){return r.s("transparent.mask")},getCoreInteractor:function(){return this._coreInteractor},getHighlightHelper:function(){return this._highlightHelper},getRaycaster:function(){return this._raycaster},getAspect:function(){return this._aspect||this.getWidth()/this.getHeight()||1.2},getCanvas:function(){return this._canvas},setDataModel:function(r){var K=this,B=K._dataModel,b=K._selectionModel;B!==r&&(B&&(B.ump(K.handleDataModelPropertyChange,K),B.umm(K.handleDataModelChange,K),B.umd(K.handleDataPropertyChange,K),b||B.sm().ums(K.handleSelectionChange,K)),(K._dataModel=r).mp(K.handleDataModelPropertyChange,K),r.mm(K.handleDataModelChange,K),r.md(K.handleDataPropertyChange,K),b?b._21I(r):r.sm().ms(K.handleSelectionChange,K),K._postProcessing.handleDataModleChange(B,r),K._tryInvalidateEnvmap(),K.invalidateAll(!0),K.invalidateLight(),K.invalidateBoxClipper(),K.invalidateFlowObjects(),K.invalidateTransmissionObjects(),K._49Q(),K.fp(Nn,B,r),K._canvas.style.background=r.getBackground()||"")},handleDataModelPropertyChange:function(r){var K,B=r.property;"background"===B?(K=this._canvas.style.background,r=r.newValue||"",this._canvas.style.background=r,this.fp("canvasBackground",K,r)):"envmapType"===B?this._tryInvalidateEnvmap():"envmap"!==B&&"invalidateView"!==B||this.iv()},handleDataPropertyChange:function(r){var K=r.data,B=(this.invalidateData(K),r.property);a6(K)&&"s:light.type"===B?this.invalidateLight():"s:3d.clipbox"===B?this.invalidateBoxClipper(K,!0):"s:effect.flow"===B?this.invalidateFlowObjects(K,!0):"s:shadow.cast"===B?this.shadowMap.tryUpdateBounding(K):"s:3d.visible"===B||"parent"===B&&(r.oldValue instanceof RO||r.newValue instanceof RO)?this.invalidateQuickVisible(K):"s:shape3d.transmission"===B&&this.invalidateTransmissionObjects(K,!0)},invalidateBoxClipper:function(r,K){var B=this._boxClippers,b=B.length;r?!!r.s("3d.clipbox")==(K=!!K)?B.indexOf(r)<0&&B.push(r):0<=(K=B.indexOf(r))&&B.splice(K,1):(B=this._boxClippers=[],this.dm().each(function(r){r.s("3d.clipbox")&&B.push(r)})),b!==(r=B.length)&&(this._updateBoxClipperMatrix(),i6=r?D6:lK),this.iv()},_setupPVMatrix:function(){this._projectMatrix=F6(this),J6(this,this._7O),this._viewMatrix=eA(this._7O)},_updateBoxClipperMatrix:(s5=/if[ \t]*\([^\0{}]*{/,function(){for(var r,K=this._boxClippers,B=this._boxClipperMatrixes=[],b=this._boxClipperClipInner=[],f=this._boxClipperGroups=[],h=this._boxClipperShapes=[],U=0,a=new Z,P=0,H=K.length;P<H;P++){(r=K[P]).appendAnchorMatrix3d(Y=wA(r,this.getMat(r))),B.push(a.getInverse(a.fromArray(Y)).toArray()),b.push("inner"===r.s("3d.clipbox")),f.push(r.s("3d.clipbox.group"));var Y=oq[r.s("3d.clipbox.shape")]||1;h.push(Y),U|=1<<Y-1}if(this._boxClipperVersion++,U!==this._boxClipperTypes){if(U){G5||(S=(_=wY(r6["clipbox.fs.body"],!0)).match(s5),d5=_.slice(0,S.index)+"if ($TEMPLATE) {"+_.slice(S.index+S[0].length),_=S[0],G5=_.slice(_.indexOf("(")+1,_.lastIndexOf(")")).split("||").map(function(r){return r.trim()}));for(var S,_,e=[],P=0;P<G5.length;P++)U&1<<P&&e.push(G5[P]);this._clipboxShaderChunkFS=d5.replace("$TEMPLATE",e.join(" || "))}else this._clipboxShaderChunkFS="";this._boxClipperTypes=U}}),_49Q:function(){this._4AQ||this._48Q||this.dm().size()<Y1.graph3dViewDataNumWarningLine||(this._48Q=!0,console.log("Too many datas so than disable some feature to speed up.\nYou can set global Default.graph3dViewDataNumWarningLine to largeEnoughNum to avoid this, or call graph3dView.quitDataNumWarning() to quit.\n"),this.enableQuickVisibleMode(),this.getHighlightHelper().mouseOverData=null)},quitDataNumWarning:function(){this.disableQuickVisibleMode(),this._48Q=!1,this._4AQ=!0},invalidateFlowObjects:function(r,K){var B=this._flowObjects;r?!!r.s("effect.flow")==(K=!!K)?B.indexOf(r)<0&&B.push(r):0<=(K=B.indexOf(r))&&B.splice(K,1):(B=this._flowObjects=[],this.dm().each(function(r){r.s("effect.flow")&&B.push(r)})),this.iv()},invalidateTransmissionObjects:function(r,K){var B=this._transmissionObjects;r?!!r.s("shape3d.transmission")==(K=!!K)?B.indexOf(r)<0&&B.push(r):0<=(K=B.indexOf(r))&&B.splice(K,1):(B=this._transmissionObjects=[],this.dm().each(function(r){r.s("shape3d.transmission")&&B.push(r)})),this.iv()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(r){if(r=r.property,this.iv(),this._18Q=H1,"eye"===r)this._33Q=!0;else if("devicePixelRatio"===r)this._42(this.getDevicePixelRatio());else if("batchInstancedDisabled"===r){this._genBatchInstancedArrayFunc();var K,B=Y1.getBatchInfoMap();for(K in B)B[K]&&B[K].instanced&&this.invalidateBatch(K);for(K in B=this._batchInfoMap)B[K]&&B[K].instanced&&this.invalidateBatch(K)}},_5O:function(r){var K=r.get3dUIClass();return K?new K(this,r):H1},getData3dUI:function(r){var K=this._25I[r._id];return K===P1&&(K=this._5O(r),this._25I[r._id]=K),K},invalidateAll:function(r,K){var B=this;if(r){for(var b in B._25I)(b=B._25I[b])&&b.dispose();B._25I={},B.iv(),mr(B)}else mr(B),B.dm().each(function(r){B.invalidateData(r)});B.shadowMap.tryInvalidateLater(r,K)},invalidateSelection:function(){var K=this;K.sm().each(function(r){K.invalidateData(r)})},invalidateData:function(r){var K=this.getData3dUI(r);K&&(K.iv(),this.iv()),mr(this,r)},getShape3dText:function(r){return r.getStyle("shape3d.text")||this.getLabel(r)},invalidateBatch:function(K){var B=this;B._40Q.each(function(r){B._invalidateBatch(K,r.batchModelMap,r.batchIndexMap),B._invalidateBatch("T"+K,r.wireframeModelMap,r.wireframeIndexMap),B._invalidateBatch("O"+K,r.wireframeModelMap,r.wireframeIndexMap),r.markBatchInvalid()}),B.iv()},_invalidateBatch:function(r,K,B){var b=this,f=K[r];if(f){f.ds.forEach(function(r){var K=b.getData3dUI(r);K&&(K.iv(),K.invalidateWireframe()),delete B[r._id]});var h=b.getBatchInfo(r)||MK;if(!1!==h.keepData&&f.ms&&f.ms.length&&h.instanced&&!b.isBatchInstancedDisabled())return f.ds=[],f.ms=[],f.ics&&(f.ics=[]),void(f.ps&&(f.ps=[]));delete K[r]}},handleDataModelChange:function(r){var K,B,b=this,f=r.kind,r=r.data;"add"===f?(b.invalidateData(r),_Y(r)&&r.getEdgeGroup()&&r.getEdgeGroup().eachSiblingEdge(b.invalidateData,b),a6(r)&&b.invalidateLight(),r.s("3d.clipbox")&&b.invalidateBoxClipper(r,!0),r.s("effect.flow")&&b.invalidateFlowObjects(r,!0),r.s("shape3d.transmission")&&b.invalidateTransmissionObjects(r,!0),b._49Q()):f===yu?(K=r._id,(B=b._25I[K])&&(B.dispose(),delete b._25I[K],b.iv()),r===b._currentSubGraph&&b.setCurrentSubGraph(H1),mr(b,r),a6(r)&&b.invalidateLight(),r.s("3d.clipbox")&&b.invalidateBoxClipper(r,!1),r.s("effect.flow")&&b.invalidateFlowObjects(r,!1),r.s("shape3d.transmission")&&b.invalidateTransmissionObjects(r,!1),r.isAnimationPlaying()&&r.stopAnimation()):f===ku&&(b.invalidateAll(!0),b.setCurrentSubGraph(H1),mr(b),b.invalidateLight(),b.invalidateBoxClipper(),b.invalidateFlowObjects(),b.invalidateTransmissionObjects())},toCanvas:function(r,K,B){for(var b,f=this.getGL(),h=(this.validate(),r&&(b=f.getParameter(3106),C6(f,r)),this._42(1,{renderAxis:!1,renderEdit:!1,renderGrid:!1}),this.getWidth()||1),U=this.getHeight()||1,a=new Uint8Array(h*U*4),P=mY(),H=P.getContext("2d"),Y=(f.readPixels(0,0,h,U,6408,5121,a),ZY(P,h,U,1),H.getImageData(0,0,h,U)),S=Y.data,_=0;_<S.length;_+=4){var e=_/4,o=z1(e/h);S[e=4*((U-1-o)*h+(e-o*h))]=a[_],S[1+e]=a[_+1],S[2+e]=a[_+2],S[3+e]=a[_+3]}return H.putImageData(Y,0,0),r&&C6(f,b),this._42(this.getDevicePixelRatio()),K&&B?(Y=(H=mY()).getContext("2d"),ZY(H,K,B,1),Y1.drawImage(Y,P,0,0,K,B),H):P},toDataURL:function(r,K){var B,b=this.getGL(),K=(this.validate(),r&&(B=b.getParameter(3106),C6(b,r)),this._42(1,{renderAxis:!1,renderEdit:!1,renderGrid:!1}),this._canvas.toDataURL(K||"image/png",1));return r&&C6(b,B),this._42(this.getDevicePixelRatio()),K},isWebGL2:function(){return 2===this._webGLVersion},getGL:function(){var r,K,B,b=this._26I;if(b)return b;if(!this._35O){var f=this,h=f._canvas,U=f._attributes;if(!U||!1!==U.requestWebGL2)try{(b=h.getContext("webgl2",U)||h.getContext("experimental-webgl2",U))&&(f._webGLVersion=2,f._26I=b)}catch(b){}if(!b)try{b=h.getContext("webgl",U)||h.getContext("experimental-webgl",U)}catch(b){throw new Error("WebGL not supported")}if(b)return f._26I=b,h=f._frameState=new _q(f,b),f._glExtensions=new ct(b),f._glCapabilities=new Ot(b,f._glExtensions),f._glUbos=new Qt(f,b,f._glCapabilities,U&&U.forceNoUniformBuffer),f._glPrograms=new Em(f,b),f._2O={},b._emptyCubeTexture=(r=b,B=new Uint8Array(4),K=r.createTexture(),r.activeTexture(33984),r.bindTexture(34067,K),r.texParameteri(34067,10240,9729),r.texParameteri(34067,10241,9729),r.texImage2D(34069,0,6408,1,1,0,6408,5121,B),r.texImage2D(34070,0,6408,1,1,0,6408,5121,B),r.texImage2D(34071,0,6408,1,1,0,6408,5121,B),r.texImage2D(34072,0,6408,1,1,0,6408,5121,B),r.texImage2D(34073,0,6408,1,1,0,6408,5121,B),r.texImage2D(34074,0,6408,1,1,0,6408,5121,B),K),b._compiledShader={},b._emptyTexture=s6(b),b._emptyBlendTexture=s6(b),b._4NQ={},b._id=++Tq,b._4MQ=[],b._4KQ={},h.setGLState(),f._buffer={vs:n6(b),ns:n6(b),is:n6(b),uv:n6(b),batchColor:n6(b),batchBlend:n6(b),batchBrightness:n6(b),lineDistance:n6(b)},f._1O=d6(f,b),b._sharedTexturePool=[],U=f._cube={vs:n6(b),ns:n6(b),is:n6(b),uv:n6(b)},Br(b,U.vs,km),Br(b,U.ns,zm),Br(b,U.uv,vm),hr(b,U.is,wm),f._genBatchInstancedArrayFunc(),b._renderInfo={calls:0,vertices:0,faces:0,lines:0,points:0,textureCache:{time:0,count:0,pixels:0},frame:0,cacheTimeCost:0,reflectDepth:0},b._renderTargetStack=[],b._dynamicTexturePool={},b;throw new Error("WebGL not supported")}},getGLCapabilities:function(){if(this.getGL())return this._glCapabilities},getGLExtensions:function(){if(this.getGL())return this._glExtensions},getGLState:function(){var r=this.getGL();if(r)return x1.for(r).glState},getShaderChunk:function(r){var K;return"clipbox.fs.body"===r?this._clipboxShaderChunkFS||"":(K=r6[r])?wY(K,!0):Y1.getShaderChunk(r)},dispose:function(){var K=this,r=K.getGL();if(r){for(var B in r._renderInfo&&K._doBufferGC(r,!0),K._glPrograms.dispose(),ZY(K._canvas,0,0),["_highlightHelper","shadowMap","flowMap","_envmapRenderer","_postProcessing","_depthPeelingRenderer"].forEach(function(r){(r=K[r])&&r.dispose()}),K.dm().each(function(r){K.getData3dUI(r).dispose()}),K._2O)K.deleteTexture(B);for(var B in r)"string"==typeof B&&"_"===B[0]&&(m6(K,r[B]),delete r[B]);K._1o.dispose()}},disposeAllPrograms:function(){this._glPrograms.dispose()},getShadowMap:function(){return this.shadowMap},invalidateShape3dAttribute:function(r,K){delete r._complete_,(r=r[K])&&r._bufId&&delete r._bufId},getEnvmap:function(){return this._glCapabilities&&this._glCapabilities.maxVertexTextures<Y1.graph3dEnvmapCapabilityRequire?null:this.dm().getEnvmap()},getEnvmapType:function(){var r,K=this.dm();return(K?K.getEnvmapType():r)||"legacy"},setEnvmapExtraQuaternion:function(r){this._envmapExtraQuaternion=r instanceof D.Quaternion?r.clone().inverse().toArray():null},invalidateEnvmap:function(r){return this._envmapRenderer.invalidateEnvmap(r)},invalidateEnvmapUsedByMaterial:function(r){return this._envmapRenderer.invalidateEnvmapUsedByMaterial(r)},isEnvmapUsedByMaterialReady:function(r){return this._envmapRenderer.isEnvmapUsedByMaterialReady(r)},_setEnvmapByProbeId:function(r,K,B){return this._envmapRenderer.setEnvmapByProbeId(r,K,B)},_tryInvalidateEnvmap:function(){var r=this.getEnvmapType();r!==this._lastProgramEnvmapType&&(this._envmapRenderer.changeEnvmapType(this._lastProgramEnvmapType=r),this.iv())},acquireProgram:function(r,K){return this._glPrograms.acquireProgram(r,K)},renderModel:function(r,K,B,b,f){f&&!1===f.restoreViewport||B&&!1===B.restoreViewport||K&&!1===K.restoreViewport||(h=(h=this.getViewport())&&v9(h));var h,r=this._postProcessing.blitScreen(r,K,B,b,f);return h&&this.setViewport(this.getGL(),h[0],h[1],h[2],h[3]),r},renderPrefab:function(){return this.renderModel.apply(this,arguments)},isGLTempRegisterLimited:function(){return this._glTempRegisterLimited},getBrightness:function(r){var K=r.s("brightness"),r=this.isSelected(r)?r.s("select.brightness"):H1;return K==H1?r:r==H1?K:K*r},getDataHighlightMode:function(r){return r.s("highlight.mode")},getWireframe:function(r){var K=r.s("wf.visible"),B=r.s("wf.width");if(!0===K||0<B&&"selected"===K&&this.isSelected(r))return{color:r.s("wf.color"),width:B,short:r.s("wf.short"),mat:r.s("wf.mat")}},getPartPosition:function(r,K,B,b){return b=b||MK,[(r=this.getData3dUI(r)._16O(b.autoRotate,K,H1,B||Q1,b.t3,b.r3,b.rotationMode))[12],r[13],r[14]]},_transformPointToViewSpace:function(r){return r=[r[0],r[1],r[2]],xA(r,this._viewMatrix),r},_transformDirectionToViewSpace:function(r,K){var r=r?[r[0],r[1],r[2]]:[0,0,0],K=(xA(r,this._viewMatrix),K?[K[0],K[1],K[2]]:[0,0,0]),B=(xA(K,this._viewMatrix),K[0]-r[0]),b=K[1]-r[1],K=K[2]-r[2];return(r=Math.sqrt(B*B+b*b+K*K))?[B/r,b/r,K/r]:[B,b,K]},getWireframeGeometry:function(r){if(r.s("wf.geometry"))return{color:r.s("wf.color"),width:r.s("wf.width"),mat:r.s("wf.mat"),geometry:!0}},getBodyColor:function(r){return r.s("body.color")},getMat:function(r){return r.getMat?r.getMat():r.s("mat")},getFaceMat:function(r,K){return r.getFaceMat?r.getFaceMat(K):r.s(K+".mat")},getFaceBlend:function(r,K){return r.s(K+".blend")||r.s("all.blend")},getFaceColor:function(r,K){return r.s(K+".color")||r.s("all.color")},getFaceImage:function(r,K){return r.s(K+".image")||r.s("all.image")},getFaceBlendImage:function(r,K){return r.s(K+".blend.image")||r.s("all.blend.image")},getFaceDiscardSelectable:function(r,K){return(K=r.s(K+".discard.selectable"))==H1?r.s("all.discard.selectable"):K},getFaceUv:function(r,K){return r.s(K+".uv")||r.s("all.uv")},getFaceUvOffset:function(r,K){return r.s(K+".uv.offset")||r.s("all.uv.offset")},getFaceUvScale:function(r,K){return r.s(K+".uv.scale")||r.s("all.uv.scale")},getFaceUvRotation:function(r,K){return r.s(K+".uv.rotation")||r.s("all.uv.rotation")},getFaceUvAnchor:function(r,K){return r.s(K+".uv.anchor")||r.s("all.uv.anchor")},getFaceLight:function(r,K){return(K=r.s(K+".light"))==H1?r.s("all.light"):K},getFaceVisible:function(r,K){return(K=r.s(K+".visible"))==H1?r.s("all.visible"):K},getFaceOpacity:function(r,K){return(K=r.s(K+".opacity"))==H1?r.s("all.opacity"):K},getFaceTransparent:function(r,K){return(K=r.s(K+".transparent"))==H1?r.s("all.transparent"):K},getFaceReverseColor:function(r,K){return r.s(K+".reverse.color")||r.s("all.reverse.color")},getFaceReverseFlip:function(r,K){return(K=r.s(K+".reverse.flip"))==H1?r.s("all.reverse.flip"):K},getFaceReverseCull:function(r,K){return(K=r.s(K+".reverse.cull"))==H1?r.s("all.reverse.cull"):K},getFaceMaterial:function(r,K){return(K=r.s(K+".material"))==H1?r.s("all.material"):K},isPicking:function(){return this._picking},renderPickScene:function(){var r=this.getGL();this.syncRenderState(),this._picking=r._picking=!0,this.renderScene(),this._picking=r._picking=!1},invalidateCachedGeometry:function(r){this.getData3dUI(r).invalidateCachedGeometry(),this.invalidateData(r)},invalidateCachedWireframe:function(B){var r,b;B instanceof M.Data?(r=(r=this.getData3dUI(B)).shapeModel||Zm(r))&&(gr(r),B.iv()):B&&(gr(B),(b=this).dm().each(function(r){var K=b.getData3dUI(r);(K.shapeModel||Zm(K))===B&&r.iv()}),this.iv())},isInteractive:function(r){return r.s("interactive")},redraw:function(){this.iv()},validateImpl:function(){var B,b,f,h,r=this,K=(r._lightChanged&&(r._lightChanged=!1,B=[],b=[],f=[],h=[],r.dm().each(function(r){var K;a6(r)&&("point"===(K=r.s("light.type"))?B.push(r):"spot"===K?b.push(r):"directional"===K?f.push(r):"rect"===K&&h.push(r))}),r._59O=B,r._spots=b,r._dirs=f,r._87I=h),r.getAspect());K!==r.__cachedAspect__&&(r._updateSkybox({property:"asceptChanged"}),r.__cachedAspect__=K),r._attributes&&!1===r._attributes.autoDraw||r._42(),r._1o.iv()},getRenderInfo:function(){var r=this.getGL();if(r)return r._renderInfo},getDebugTip:function(){var r,K,B=this.getRenderInfo();if(B)return r=(K=this.getGL())._validBufCount||0,r="Draw Calls: "+B.calls+"<br/>Vertices: "+B.vertices+"<br/>Faces: "+B.faces+"<br/>Lines: "+B.lines+"<br/>"+(B.points?"Points: "+B.points+"<br/>":"")+"Buffers: "+r+"<br/>Programs: "+(K._validProgramCount||0)+"<br/>Cache Models: "+A.keys(IK).length+"<br/>Shape3d Models: "+A.keys(jK).length,this.isVRPresenting()&&(r+="<br/>VR fps: "+this.vr.getFps()),B.textureCache&&(K=B.textureCache.count,r+="<br/>2D Dynamic Textures: "+B.textureCache.count,0<K&&(r+="<br/>2D Dynamic pixels: "+(1e6<(K=B.textureCache.pixels)?Math.round(K/1e6)+"M":1e3<K?Math.round(K/1e3)+"K":Math.round(K)))),r},getFrameState:function(){return this._frameState},isBoundingBoxInView:(J5=new M.Math.Box3,F5=new M.Math.Matrix4,function(r){if(!(r=r instanceof M.Data?this.getData3dUI(r):r).mat)return!0;var K=r.getBoundingBox(!0);return J5.copy(K).applyMatrix4(F5.fromArray(r.mat)),this.getFrustum().intersectsBox(J5)}),updateScene:function(){var K=this,B=(K.onPreUpdate(),K._81O=H1,K.overlappingBox.clear(),K.initSkeletonDatas(),K._40Q),b=(B.init(),K.getGL()),r=K.dm();if(r.isHierarchicalRendering())r.eachByHierarchical(function(r){(r=K.getData3dUI(r))&&r.update(K,b,B)});else for(var f,h=r.getDatas().getArray(),U=h.length,a=0;a<U;a++)f=h[a],(f=K.getData3dUI(f))&&f.update(K,b,B);this._updateBoxClipperMatrix(),B.onUpdated(),K.onPostUpdate()},_pushFrameRenderOptions:function(r){this._frameRenderOptionStack.push(this._currentFrameRenderOptions),this._currentFrameRenderOptions=r},_popFrameRenderOptions:function(r){this._currentFrameRenderOptions=this._frameRenderOptionStack.pop()},_getFrameRenderOptions:function(r){var K=this._currentFrameRenderOptions;return K&&K[r]},getRenderLists:function(){return this._40Q},_setCurrentFrameRenderId:function(r,K){var B=this._renderId++;r._renderInfo.renderId=B,this._glPrograms.setCurrentFrameRenderId(B),K&&this._glUbos.setCurrentFrameRenderId(B)},renderScene:function(r){var B,b=this,f=b.getGL(),h=b._picking,U=(h||b.onPreRender(),b._setCurrentFrameRenderId(f,!1),b.genProgramDefines(),b._frameState),K={},a=(h&&(K.BATCHINSTANCE=!b._batchInstancedDisabled||b._picking),b._prg=U.defaultProgram=b.acquireProgram({type:h?"pick":"legacy",defines:K}),b._pushFrameRenderOptions(r),!1!==b._getFrameRenderOptions("renderShadowMap")&&b.shadowMap.render(),b.flowMap.render(),b._envmapRenderer.onBeforeRender(f),b._44Q=-1,U.renderState),K=a.glState;function P(r,K){U.setGLState(r,K),U.setUniforms(r),U.renderState.attribs.disable(),B=a.directUniforms(),a.directAttribs().disable()}var H,r=b._prg,Y=(b._setupPVMatrix(),this._glUbos.setCurrentFrameRenderId(this._renderId),b.isReflecting(f)||v6(b._projScreenMatrix=SA(),b._projectMatrix,b._viewMatrix),U.syncEnv(h?this.pickColorMap:P1),a.useProgram(r),P(!1,!0),f.clear(256),this._41Q),S=0,_=Y.length;function e(r){for(var K=!1;S<_;S++){var B=Y[S];if(!h||!B.ignoreInPick){if(B.priority>=r)break;b._43Q[b._44Q=B.id]&&!k1[Vu.length]||(B.render(f,b,U),P(),K=!0)}}return K}if(e(Y1.cameraPriority.skybox),h?(H=K.color.clear.slice(0),C6(f,[0,0,0,0])):(C6(f,[0,0,0,0]),K.blend.enabled=!1,K.depth.enabled=!1,K.depth.mask=!1,b._camera&&!1===b._camera.s("camera.renderSky")||b.drawSky(f,r),!1!==b._getFrameRenderOptions("renderReflector")&&b.drawReflectors(f)&&(b._setupPVMatrix(),U.syncEnv(),P(),b._setCurrentFrameRenderId(f,!0)),K.blend.enabled=!1,K.depth.enabled=!0,K.depth.mask=!0,(B.uTransparent=!1)!==b._getFrameRenderOptions("renderGrid")&&b._31O._42(f)),!f.textureBatch||k1[(ONE_FRAME_TIME-6)/2]){h||(b.shadowMap.enable&&b.shadowMap.createShadow(B),b.rebindOITTexture(B),b.flowMap.createFlow(B));for(var o=b._sortedRenderLayers,x=0,T=o.length;x<T;x++){var t=o[x],p=b.getRenderLayerInfo(t);!(b._camera||!p.ignore||p.renderForBloom&&f._blooming)||b._camera&&!b._camera.isLayerVisible(t)||(e(p.priority)&&!h&&(b.shadowMap.enable&&b.shadowMap.createShadow(B),b.rebindOITTexture(B),b.flowMap.createFlow(B)),this.renderLayer(t))}e(Y1.cameraPriority.infinity),h||(b._renderBonesForDebug(f,K),b.flowMap.disableFlow(B)),o6(b,B,0,Y1.graph3dViewHeadlightAmbientIntensity),B.uHeadlightColor=[1,1,1,0],B.uUseEnvMap=!1,B.uHeadlightDirection=[0,0,0],B.uHeadlightRange=0,K.depth.enabled=!1,B.uTransparent=!1,B.shadowReceive=!1,i6(b,B,QQ),h?b.drawFilter||b._30O._42(f):(b._highlightHelper._42(f),this._renderAxisAndEditHelper(!1!==b._getFrameRenderOptions("renderAxis"),!1!==b._getFrameRenderOptions("renderEdit")),K.blend.enabled=!1,K.depth.mask=!0),K.depth.enabled=!0,h&&C6(f,H),Br(f,H1),hr(f,H1),b._44Q=-1,b._popFrameRenderOptions(null),b._glPrograms.disableAttributes(f),h||b.onPostRender()}},_renderAxisAndEditHelper:function(r,K){if(!r&&!K)return!1;var B=this.getGL(),b=this._frameState,f=(h=b.renderState).glState,h=h.directUniforms();return b.renderState.attribs.disable(),f.depth.enabled=!1,h.uTransparent=!1,h.shadowReceive=!1,f.blend.enabled=!1,f.depth.mask=!0,(b=!this._fogDisabled)&&(h.uFog=!1),r&&this._32O._42(B),K&&this._30O._42(B),b&&(h.uFog=!0),Br(B,H1),hr(B,H1),!0},renderLayers:function(r,K){for(var B=0,b=(r=K?bP(r):r).length;B<b;B++)this.renderLayer(r[B])},renderSky:function(){var r=this._frameState,K=r.renderState,B=K.glState,b=this.getGL(),f=this._prg;this._setupPVMatrix(),v6(this._projScreenMatrix=SA(),this._projectMatrix,this._viewMatrix),r.syncEnv(),K.useProgram(f),r.setGLState(!1,!0),r.setUniforms(!1),r.renderState.attribs.disable(),b.clear(256),C6(b,[0,0,0,0]),B.blend.enabled=!1,B.depth.enabled=!1,B.depth.mask=!1,this.drawSky(b,f),B.depth.mask=!0,B.depth.enabled=!0,Br(b,H1),hr(b,H1)},addRenderLayerListener:function(r,K,B){this._renderLayerNotifier||(this._renderLayerNotifier=new aP),this._renderLayerNotifier.add(r,K,B)},removeRenderLayerListener:function(r,K){this._renderLayerNotifier&&this._renderLayerNotifier.remove(r,K)},fireRenderLayerEvent:function(r,K){var B=this._renderLayerNotifier;B&&B.fire({layer:r,phase:K})},renderLayer:function(r){var K=this,B=K._picking;if(x=K._40Q.get(r)){K.fireRenderLayerEvent(r,"prepare");var b,f,h,U=K.getGL(),a=K.getRenderLayerInfo(r),P=(H=K._frameState.renderState).glState,H=H.directUniforms(),Y=(!B&&K.isSortable()&&x.sort(K._sortFunc,K._projScreenMatrix,K.isOpaqueSortable()),x.resetModel3dInstancedDraw(),x.opaque),S=x.transparent,_=x.batchModelMap,e=x.batchIndexMap,o=x.polylineModelMap,x=x.wireframeModelMap,U=K.getGL(),T=K._prg,t=(B||(P.blend.enabled=!1,P.depth.enabled=!0,P.depth.mask=!0),(H.uTransparent=!1)!==a.clearDepth&&U.clear(256),this.drawFilter);if(t){for(b=0,f=(h=Y).length;b<f;b++)!0!==t(h[b].data)&&h[b].ui._42(U,T,y);if(B)for(b=0,f=(h=S).length;b<f;b++)h[b].ui._46Q(U);Pm(K,_,e)}else{for(b=0,f=(h=Y).length;b<f;b++)h[b].ui._42(U,T,y);if(B)for(b=0,f=(h=S).length;b<f;b++)h[b].ui._46Q(U);Pm(K,_,e),Um(K,o),Um(K,x)}if(B||(P.blend.enabled=!0,P.depth.mask=!1),K._45Q=H.uTransparent=!0,t){for(b=0,f=(h=S).length;b<f;b++)!0!==t(h[b].data)&&h[b].ui._42(U,T,u);Pm(K,_,e,0,!0)}else{if(B||!K._oitEnabled||K.isReflecting(U)||U._blooming){for(b=0,f=(h=S).length;b<f;b++)h[b].ui._42(U,T,u);Pm(K,_,e,0,!0)}else K._depthPeelingRenderer.render(S,_,e);Um(K,o,0,!0),Um(K,x,0,!0)}K._45Q=null,K.fireRenderLayerEvent(r,"post")}},onPreFrame:lK,onPostFrame:lK,onPreUpdate:lK,onPostUpdate:lK,onPreRender:lK,onPostRender:lK,onPreRenderData:lK,onPostRenderData:lK,_42:function(r,K){var B=this;if(!B._35O&&(!z||k1(z))){var b=B.getWidth(),f=B.getHeight();if(b&&f){var h=B.getGL();if(h){var U=B._canvas,a=(r?a=!0:r=B.getDevicePixelRatio(),B._picking||!a&&b===U.clientWidth&&f===U.clientHeight||(ZY(U,b,f,r),a=r,b&&1<Math.abs(h.drawingBufferWidth-b*r)&&(a=Math.min(a,h.drawingBufferWidth/b)),(a=f&&1<Math.abs(h.drawingBufferHeight-f*r)?Math.min(a,h.drawingBufferHeight/f):a)!==r&&(B.setDevicePixelRatio(r=a),ZY(U,b,f,r)),B._18Q=null),B._attributes&&!1===B._attributes.autoClear||h.clear(16384),h._renderInfo);if(a){a.calls=0,a.vertices=0,a.faces=0,a.lines=0,a.points=0,a.textureCache={time:0,count:0,pixels:0},a.frame=++B._frameId,a.cacheTimeCost=0,a.reflectDepth=0,B.__uptime=(Date.now()-B.__startTime)/1e3,b=U.width,f=U.height,B._gatherRenderLayersByPriority(),B.onPreFrame(),B.syncRenderState(),B._glPrograms.checkParallelLinkStatus();do{if(B.isVREnabled()&&B.vr.render(h,b,f,K))break;B.updateScene();var P=B._4JQ}while((P||!B._postProcessing.render(h,b,f,K,0<B._transmissionObjects.length&&B.isTransmissionEnabled()||B._oitEnabled||B._depthGrabber.isEnabled()))&&(B.setViewport(h,0,0,b,f),P?B.renderPickScene(K):B.renderScene(K),0));B._33Q=!1,B.countFrame(),B.onPostFrame(),B._doBufferGC(h),B._glPrograms.scheduleProgramGC(B._shaderGCInterval||500)}}}}},drawImmediately:function(r,K,B){if(r){var b=this.getGL();if(!b)return!1;f6(b,r),this._42(K,B),h6(b)}else this._42(K,B)},_4IQ:function(r){this._4JQ=r,this.iv()},syncRenderState:function(){var r;(r=this._frameState)&&(r=r.renderState)&&r.syncLoss()},drawReflectors:function(r){r._renderInfo.reflectDepth++;var K,B,b=this._dataModel.getReflectors(),f=!1;for(K in b)B=b[K],this.isVisible(B)&&(B=this.getData3dUI(B))&&B.drawReflector&&B.drawReflector(r)&&(f=!0);return r._renderInfo.reflectDepth--,f},isReflecting:function(r){return r._renderInfo.reflectDepth},isRenderSceneForBloom:function(){var r=this.getGL();return!!r&&!!r._blooming},getPostProcessing:function(){return this._postProcessing},enablePostProcessing:function(r,K){return this._postProcessing.enableModule(r,K)},getPostProcessingModule:function(r){return this._postProcessing.getModule(r)},getPostProcessingValue:function(r,K){return(r=this._postProcessing.getModule(r))?r[K]:P1},setPostProcessingValue:function(r,K,B){var b=this.getPostProcessingValue(r,K),f=this._postProcessing.getModule(r);f&&b!==B&&("enable"===K?this.enablePostProcessing(r,B):f[K]=B,this.firePropertyChange("postProcessing."+r+"."+K,b,B))},setDofImageFromGraphView:function(r,K,B){return this._postProcessing.getModule("Dof").setImageFromGraphView(r,K,B)},setViewport:function(r,K,B,b,f){this._viewport=[K,B,b,f],x1.for(r).directState().viewport=this._viewport},getRenderState:function(){return x1.for(this._26I)},genProgramDefines:function(){var r=this,K=(K=r.getEnvmap())&&K.length,B=((K={NUM_DIR_LIGHTS:r._dirs.length,NUM_SPOT_LIGHTS:r._spots.length,NUM_POINT_LIGHTS:r._59O.length,MAX_BOX_CLIPPER:r._boxClippers.length,BOX_CLIPER_TYPES:r._boxClipperTypes,MAX_FLOW_OBJECT:r._flowObjects.length,FOG:!r._fogDisabled,FOG_EXP2:"exp2"===r.getFogMode(),UV_CLIP:!!r._uvClipEnabled,USE_ENVMAP:!!K,ENVMAP_TYPE_CUBE_UV:"legacy"!==r.getEnvmapType(),DASH:!r._dashDisabled,ENVMAP_ROTATE:null!=r._envmapExtraQuaternion,BATCHCOLOR:!r._batchColorDisabled,BATCHINSTANCE:!r._batchInstancedDisabled,BATCHBLEND:!r._batchBlendDisabled,BATCHBRIGHTNESS:!r._batchBrightnessDisabled})[xq[r.getFlowBlendMode()]||xq[Y1.graph3dViewFlowBlendMode]]=!0,r.shadowMap.enable&&r.shadowMap.genShaderDefine(K),r._glPrograms);return B&&B.genPhysicalProgramKeyOfScene(r._programDefines=K),K},getViewport:function(){return this._viewport},setBufferGCInterval:function(r){this._bufferGCInterval=r},setShaderGCInterval:function(r){this._shaderGCInterval=r},_doBufferGC:function(r,K){var B,b,f=r._4NQ,h=0,U=0,a=r._renderInfo.frame,P=this._bufferGCInterval||10;for(B in f)h++,(b=f[B])&&(K||a-b._fid>P?(r.deleteBuffer(b._buf),b._buf=null,f[B]=null):U++);if(U<h/2&&128<h){var H={};for(B in f)f[B]&&(H[B]=f[B]);r._4NQ=H}r._validBufCount=U},_swapLineMap:function(){var r=this;C1=r._polylineModelMap,r._polylineModelMap=r._polylineModelMapSwap,r._polylineModelMapSwap=C1,C1=r._wireframeModelMap,r._wireframeModelMap=r._wireframeModelMapSwap,r._wireframeModelMapSwap=C1,C1=r._polylineIndexMap,r._polylineIndexMap=r._polylineIndexMapSwap,r._polylineIndexMapSwap=C1,C1=r._wireframeIndexMap,r._wireframeIndexMap=r._wireframeIndexMapSwap,r._wireframeIndexMapSwap=C1},_updateSkybox:function(r){var K,B,b,f,h,U,a,P,H;this._skybox&&r&&(r=r.property,K=!1,B=this._skybox,"eye"!==r&&"forceUpdate"!==r||(b=this._camera?this._camera.getEye():this._eye,B.p3(b[0],b[1],b[2]),K=!0),"near"!==r&&"far"!==r&&"forceUpdate"!==r&&"asceptChanged"!==r||(b=(b=B.__cachedS3__)||(B.__cachedS3__=B.getFinalScale3d()),r=b1(b[0],b[1],b[2])/2,f=("sphere"===B.s("shape3d")?B1(b[0],b[1],b[2]):u1(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]))/2,h=this._near,U=this._far,H=Math.tan(this.getFovy()/2)*h,a=this.getAspect()*H,a=u1(a*a+H*H+h*h),a=1.01*B1(a,u1(3)*h),P=1,r<a?P=a/r:U<=f&&(P=U*U/(h+U)/f),P!==1/0&&1!==P&&(B.__updatingSkybox__=!0,H=b.map(function(r){return P*r}),B.s3(H),B.setScale3d(1,1,1),K=!0,delete B.__updatingSkybox__)),K&&this.invalidateData(B))},getSkyBox:function(){return this.getSkybox()},setSkyBox:function(r){return this.setSkybox(r)},getSkybox:function(){return this._skybox},setSkybox:function(K){var B,r=this._skybox;r===K?K&&this._updateSkybox({property:"forceUpdate"}):(r&&(this._skyboxStyleMap&&r.setStyleMap(this._skyboxStyleMap),this._skyboxStyleMap=null,this._skyboxAnchor3d&&r.setAnchor3d(this._skyboxAnchor3d),this._skyboxAnchor3d=null,this._skyboxP3&&r.p3(this._skyboxP3),this._skyboxP3=null,this.handleDataModelChange({kind:yu,data:r})),this._skybox=K,this.ump(this._updateSkybox,this),K&&(K.removeFromDataModel(),this._skyboxStyleMap=M.Default.clone(K.getStyleMap()),this._skyboxAnchor3d=K.getAnchor3d(),K.setAnchor3d(.5,.5,.5),this._skyboxP3=K.p3().slice(0),K.s({"shape3d.reverse.flip":!0,"shape3d.reverse.cull":!1,"all.reverse.flip":!0,"all.reverse.cull":!1,"front.reverse.flip":!0,"front.reverse.cull":!1,"back.reverse.flip":!0,"back.reverse.cull":!1,"left.reverse.flip":!0,"left.reverse.cull":!1,"right.reverse.flip":!0,"right.reverse.cull":!1,"top.reverse.flip":!0,"top.reverse.cull":!1,"bottom.reverse.flip":!0,"bottom.reverse.cull":!1}),B=K.onPropertyChanged,K.onPropertyChanged=function(r){B.call(K,r),!K.__updatingSkybox__&&0<=["width","height","tall","scale","scaleTall"].indexOf(r.property)&&(K.__cachedS3__=P1)},this.mp(this._updateSkybox,this),this._updateSkybox({property:"forceUpdate"})),this.fp("skybox",r,K))},drawSky:function(r,K){var B,b,f,h,U,a,P,H,Y,S,_,e,o=this,x=o._skybox;x&&(h=f=0,o._camera&&!1===o._camera.s("camera.skybox.blur")||(f=x.s("skybox.blur.size"),h=x.s("skybox.blur.resolution"),0===f&&0===h||(P=h||o.getDevicePixelRatio(),(B=r._blurRTT)||(B=r._blurRTT=new Fr.RenderTarget(o,null,null,{})),U=o.getWidth()*P,P=o.getHeight()*P,B.setSize(r,U,P),b=v9(o._viewport),o.setViewport(r,0,0,U,P),B.bind(r))),U=x1.for(r).directUniforms(),P=o._headlightIntensity,a=DN(o._headlightColor),K=o._prg,1!==P&&(a=[a[0]*P,a[1]*P,a[2]*P]),U.uHeadlightColor=[a[0],a[1],a[2],1],(P=o.getData3dUI(x))&&((Y=(H=o.isOrtho())||this._computedProjectMatrix)&&(S=o._projectMatrix,H&&(o._ortho=!1),U.uProjectMatrix=o._projectMatrix=F6(o,!0)),e=x.p3(),_=(this._camera||this).getEye(),e[0]===_[0]&&e[1]===_[1]&&e[2]===_[2]||(x._position.x=_[0],x._54O=_[1],x._position.y=_[2]),P.validate(),P._42(r,K,p),Y&&(H&&(o._ortho=!0),U.uProjectMatrix=o._projectMatrix=S)),r.clear(256),U.uHeadlightColor=[a[0],a[1],a[2],o._headlightDisabled?1:0],0===f&&0===h||(B.unbind(r),0!==f&&(e=o.getPostProcessingModule("Blur"))&&e.drawImpl(r,B,f,!1,4<f?4:2<f?3:1<f?2:1),o.setViewport(r,b[0],b[1],b[2],b[3]),o.renderModel(null,{type:"blitScreen",image:B.texture,defines:{DITHERING:!1}},{clear:!1})))},getLogicalPoint:function(r){return $9(r,this._canvas)},isRectOverlapping:function(r){return this.getData3dUI(r)._rectOverlapping},getHitFaceInfo:function(r){r.target&&(r=this.lp(r));var K=this.getDataInfoAt(r);return K&&(r=this.intersectObject(r,K.data))?{data:K.data,face:r.part}:H1},unproject:function(r,K){var B=this.getWidth(),b=this.getHeight(),B=((r=r.target?this.lp(r):r).x-B/2)/B*2,r=-1*(r.y-b/2)/b*2,b=(K=K||0,SA()),f=F6(this),h=J6(this);return v6(b,f,h),y6(b),[(f=TA([B,r,K,1],b))[0]/f[3],f[1]/f[3],f[2]/f[3]]},getDataAt:function(r){return(r=this.getDataInfoAt(r))?r.data:H1},getDataInfoAt:function(r,K,B){return r.target&&(r=this.lp(r)),this._1o.get(bY(r.x,r.y,K),!0,B)},getDataInfoDuringInteract:function(r,K){var B=this.getDataInfoAt(r);if(!this.isBlockSelectable()||!B||!B.data)return B;if(!K&&this.isSelected(B.data))return B;for(var b=B.data;(b=b.getParent())&&b instanceof M.Block&&this.isSelectable(b);){var f=this.isSelected(b);if(f&&K)break;if(B={data:b,part:B.part},f&&!K)break}return B},getDatasInRect:function(r,K){return this._1o.get(r,!1,K)},setEditable:function(r){var K=this._editable;this._editable=r,this.fp(xn,K,r)},isEditable:function(r){return r?!!this._editable&&!!l(r)&&!!r.s("3d.editable")&&(!this._editableFunc||this._editableFunc(r)):this._editable},isSelectable:function(r){return r.s("3d.selectable")&&this.sm().isSelectable(r)},isMovable:function(r){return(!_Y(r)||r.getStyle(Zu)===Lu)&&!!r.s("3d.movable")&&(!this._movableFunc||this._movableFunc(r))},isSizeEditable:function(r){return!!l(r)&&(!this._sizeEditableFunc||this._sizeEditableFunc(r))},isRotationEditable:function(r){return!(!l(r)||!1===r.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(r))},handleDelete:function(r){this._editable&&this.removeSelection()},zoomIn:function(r){this.setZoom(H9,r)},zoomOut:function(r){this.setZoom(1/H9,r)},setZoom:(u5=new e1,j5=new e1,I5=new e1,L5=new e1,function(r,K){if(1!==r){var B=this;B._14o&&B._14o.stop(!0);var b,f=1/r,h=(u5.copy(B.getCenter()),j5.copy(B.getEye()),B._ortho);if(h){if((b=B._orthoWidth)<B._moveStep&&1<r)return}else if(u5.distanceTo(j5)<B._moveStep&&f<1)return;var U=!1;if(!1===B._zoomToCenter&&B._lastZoomLP&&(I5.copy(j5).sub(u5).normalize(),B._81O=null,L5.copy(B.getHitPosition(B._lastZoomLP,u5.toArray(),I5.toArray())),U=!0,B._lastZoomHit=L5),K=pY(K))return K.action=function(r){B.fi({kind:B._zooming?"betweenZoom":"beginZoom"}),B._zooming=1,r=(f-1)*r+1,h&&B.setOrthoWidth(b*r),U?(B.setEye(I5.lerpVectors(L5,j5,r).toArray()),B.setCenter(I5.lerpVectors(L5,u5,r).toArray())):h||B.setEye(I5.lerpVectors(u5,j5,r).toArray())},K._37o=function(){delete B._14o,delete B._zooming,B.fi({kind:"endZoom"}),B.onZoomEnded()},B._14o=N9(K);h&&B.setOrthoWidth(b*f),U?(B.setEye(I5.lerpVectors(L5,j5,f).toArray()),B.setCenter(I5.lerpVectors(L5,u5,f).toArray())):h||B.setEye(I5.lerpVectors(u5,j5,f).toArray())}}),setOrthoZoom:function(r,K){return this.setZoom(r,K)},getPositionInfo:function(r){var K=this._eye,B=this._center,b=this.getAspect(),r=r?YA(PA(B,K,!0),PA(r,K)):R9(K,B);return this._ortho?{length:r,height:(K=this._orthoWidth)/b,width:K}:{length:r,height:B=G1(this._fovy/2)*r*2,width:B*b}},getCenterInfo:function(){return this._81O||(this._81O=this.getPositionInfo()),v9(this._81O)},rotate:function(B,b,r,f){var h=this;if(B||b){f==H1&&(f=h._firstPersonMode),h._88O&&h._88O.stop(!0);var K=h._center,U=h._eye,a=h.getCenterInfo().length,P=f?K:U,H=f?U:K,Y=PA(P,H),S=d1(Y[0],Y[2]),_=d1(u1(Y[0]*Y[0]+Y[2]*Y[2]),Y[1]),e=f?fu:hu;if(f&&(b=-b),r=pY(r))return r.action=function(r){h.fi({kind:h._rotating?"betweenRotate":"beginRotate"}),h._rotating=1;var K=S+B*r,r=_+b*r,r=f?F-x6(h,F-r):x6(h,r);Y[0]=a*f1(r)*f1(K),Y[1]=a*S1(r),Y[2]=a*f1(r)*S1(K),P[0]=H[0]+Y[0],P[1]=H[1]+Y[1],P[2]=H[2]+Y[2],h.fp(e,H1,P)},r._37o=function(){delete h._88O,delete h._rotating,h.fi({kind:"endRotate"}),h.onRotateEnded()},h._88O=N9(r);S+=B,_+=b,_=f?F-x6(h,F-_):x6(h,_),Y[0]=a*f1(_)*f1(S),Y[1]=a*S1(_),Y[2]=a*f1(_)*S1(S),P[0]=H[0]+Y[0],P[1]=H[1]+Y[1],P[2]=H[2]+Y[2],h.fp(e,H1,P)}},pan:function(r,K,B,b){if(r||K){var f,h,U=this;b==H1&&(b=U._firstPersonMode),U._89O&&U._89O.stop(!0);var r=[(a=J6(U))[0]*r,a[4]*r,a[8]*r],a=[a[1]*K,a[5]*K,a[9]*K],P=r[0]+a[0],H=r[1]+a[1],Y=r[2]+a[2],S=U._center,_=U._eye;if(b&&(K=Lr(U.getBoundaries(),_[0],_[2],_[0]+P,_[2]+Y,u1(P*P+Y*Y)),P=K[0],Y=K[1]),B=pY(B))return f=v9(_),h=v9(S),B.action=function(r){U.fi({kind:U._panning?"betweenPan":"beginPan"}),U._panning=1,S[0]=h[0]+P*r,S[1]=h[1]+H*r,S[2]=h[2]+Y*r,_[0]=f[0]+P*r,_[1]=f[1]+H*r,_[2]=f[2]+Y*r,U.fp(hu,H1,_),U.fp(fu,H1,S)},B._37o=function(){delete U._89O,delete U._panning,U.fi({kind:"endPan"}),U.onPanEnded()},U._89O=N9(B);S[0]+=P,S[1]+=H,S[2]+=Y,_[0]+=P,_[1]+=H,_[2]+=Y,U.fp(hu,H1,_),U.fp(fu,H1,S)}},walk:function(K,r,B){if(K){var b,f,h=this,U=(B==H1&&(B=h._firstPersonMode),h._90O&&h._90O.stop(!0),h._center),a=h._eye,P=PA(U,a,!0);if(B){if(B=Lr(h.getBoundaries(),a[0],a[2],a[0]+P[0]*K,a[2]+P[2]*K,j1(K)),!(K=R9(B)))return;P=[B[0]/K,0,B[1]/K]}if(r=pY(r))return b=v9(a),f=v9(U),r.action=function(r){h.fi({kind:h._walking?"betweenWalk":"beginWalk"}),h._walking=1,r*=K,a[0]=b[0]+P[0]*r,a[1]=b[1]+P[1]*r,a[2]=b[2]+P[2]*r,U[0]=f[0]+P[0]*r,U[1]=f[1]+P[1]*r,U[2]=f[2]+P[2]*r,h.fp(hu,H1,a),h.fp(fu,H1,U)},r._37o=function(){delete h._90O,delete h._walking,h.fi({kind:"endWalk"}),h.onWalkEnded()},h._90O=N9(r);a[0]+=P[0]*K,a[1]+=P[1]*K,a[2]+=P[2]*K,U[0]+=P[0]*K,U[1]+=P[1]*K,U[2]+=P[2]*K,h.fp(hu,H1,a),h.fp(fu,H1,U)}},handleScroll:function(r,K){x9(r);var B=this,b=B._moveStep,f=B.getDataInfoAt(r);if((f=f&&f.data)&&B.isInteractive(f)){var h=B.intersectObject(r,f);if(h&&(h=h.part,(h=g(f.s(h+".image")||f.s("shape3d."+h+".image")||f.s("all.image")||f.s("shape3d.image")))&&W(h.scrollable,f,B)))return}B.isFirstPersonMode()?B.isPannable()&&B.pan(0,0<K?b:-b):B.isZoomable()&&(B._lastZoomLP=B.lp(r),B.setZoom(K<0?1/Y9:Y9),B._lastZoomLP=B._lastZoomHit=null)},handlePinch:function(r,K){!this.isZoomable()||Math.abs(r-K)<Y1.pinchZoomThreshold||this.setZoom(r<K?1/S9:S9)},setLightProbe:function(r){if(r){if(9===r.length)return this.lightProbe=r;if(27<=r.length){for(var K=this.lightProbe=[],B=0;B<9;B++)K[B]=[r[3*B],r[3*B+1],r[3*B+2]];return K}}return!1},getLightProbe:function(){return this.lightProbe},reset:function(r){this.setUp(Y1.graph3dViewUp),this.moveCamera(Y1.graph3dViewEye,Y1.graph3dViewCenter,r)},moveSelection:function(r,K,B){this.dm().beginTransaction(),ks(this.sm().toSelection(this.isMovable,this),r,K,B),this.dm().endTransaction()},getMoveMode:function(r,K){return(K=K.s("3d.move.mode"))?K:n9(r)||LK[88]&&LK[89]&&LK[90]?"xyz":LK[88]&&LK[89]?"xy":LK[88]&&LK[90]?"xz":LK[89]&&LK[90]?"yz":LK[88]?"x":LK[89]?"y":LK[90]?"z":"xz"},handleTick:function(){var r,K=this,B=!1,b=K._moveStep,f=b,h=-1*K._rotateStep;K.isWalkable()||(f=0),K.isPannable()||(b=0),K.isRotatable()||(h=0),K._32Q&&(f*=r=(OK()-K._32Q)/50,b*=r,h*=r),K._31Q&&(k9(K._31Q),delete K._31Q,delete K._32Q),zN()&&K.pan(-b,0,!(B=!0),!0),uN()&&K.pan(b,0,!(B=!0),!0),jN()&&(B=!0,n9()?K.pan(0,b,!1,!0):K.walk(f,!1,!0)),NN()&&(B=!0,n9()?K.pan(0,-b,!1,!0):K.walk(-f,!1,!0)),IN()&&K.rotate(-h,0,!(B=!0),!0),JN()&&K.rotate(h,0,!(B=!0),!0),LN()&&K.rotate(0,-h/2,!(B=!0),!0),FN()&&K.rotate(0,h/2,!(B=!0),!0),B&&(K._32Q=OK(),K._31Q=y9(K.handleTick,K))},handleKeyDown:function(r){!A9(r)&&nN[r.keyCode]?this.handleTick():wN(r)?this.selectAll():vN(r)?this.handleDelete(r):GN(r)&&this.isResettable()&&this.reset()},checkDoubleClickOnNote:function(r,K,B){if(B===nu){if(K.s("note.toggleable"))return K.s(Cu,!K.s(Cu)),this.fi({kind:"toggleNote",event:r,data:K,part:B}),!0}else if(B===Au&&K.s("note2.toggleable"))return K.s(mu,!K.s(mu)),this.fi({kind:"toggleNote2",event:r,data:K,part:B}),!0;return!1},checkDoubleClickOnRotation:function(r,K,B){return B===nq?(K.setRotationX(0),!0):B===Aq?(K.setRotationY(0),!0):B===Vq&&(K.setRotationZ(0),!0)},onRotateEnded:function(){},onWalkEnded:function(){},getViewRatio:function(r){if(this.isOrtho())return this.getWidth()/this.getOrthoWidth();var K=this.getCenter(),B=this.getHeight(),b=this.getEye(),K=[K[0]-b[0],K[1]-b[1],K[2]-b[2]],r=[r[0]-b[0],r[1]-b[1],r[2]-b[2]];return B*Math.sqrt(K[0]*K[0]+K[1]*K[1]+K[2]*K[2])*(1/Math.tan(this.getFovy()/2))/(r[0]*K[0]+r[1]*K[1]+r[2]*K[2])},inViewSpace:function(r){var K,r=this._transformPointToViewSpace(r),B=this.getAspect(),b=this.getNear(),f=this.getFar();return!(-r[2]<b||-r[2]>f)&&(this.isOrtho()?(K=this.getOrthoWidth()/2,Math.abs(r[0])<=K&&Math.abs(r[1]*B)<=K):(K=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2])*Math.tan(this.getFovy()/2),Math.abs(r[1]<=K)&&Math.abs(r[0])<=K*B))},getPVMatrix:function(r){var K;return!r&&(K=this._18Q)||(K=F6(this),this._18Q=v6(K,K,J6(this)),this._18Q._wh=this.getWidth()/2/this.getHeight()),K},getFrustum:(v5=new Z,z5=new ms,N5=new Array(16),function(){for(var r=this.getPVMatrix(),K=!1,B=0;B<16;B++)r[B]!==N5[B]&&(K=!0,N5[B]=r[B]);return K&&z5.setFromMatrix(v5.fromArray(r)),z5}),toViewPosition:function(r){var K=this.getWidth()/2,B=this.getHeight()/2,b=this.getPVMatrix();return{x:K+K*(r=TA([r[0],r[1],r[2],1],b))[0]/r[3],y:B-B*r[1]/r[3],z:r[2]/r[3]}},getHitPosition:function(r,K,B){var b=this.getWidth(),f=this.getHeight(),h=(r=r.target?this.lp(r):r).x-b/2,r=r.y-f/2,U=this.getCenterInfo(),a=J6(this),b=(K=K||[0,0,0],B=B||[0,1,0],h=h/b*U.width,r=-1*r/f*U.height,[a[0]*h,a[4]*h,a[8]*h]),f=[a[1]*r,a[5]*r,a[9]*r],U=[b[0]+f[0],b[1]+f[1],b[2]+f[2]],h=this.getCenter();return t6(this,K,B,[U[0]+h[0],U[1]+h[1],U[2]+h[2]])||[0,0,0]},intersectObject:function(r,K){return this._raycaster.intersectObject(r,K)},intersectObjects:function(r,K,B){return this._raycaster.intersectObjects(r,K,B)},serializePhysicalShader:function(){return this._glPrograms.serializePhysicalShader()},deserializePhysicalShader:function(r){return this._glPrograms.deserializePhysicalShader(r)},getLineLength:function(r){return this.validate(),(r=this.getData3dUI(r))&&r.getCache&&(r=r.getCache())?r[r.length-1].length:0},getLineOffset:function(r,K){var B=this.getData3dUI(r);if(B&&B.getCache&&(B=B.getCache())){var b,B=$m(B,K);if(r.s("shape3d")!==Tu)return B;if(r.getScale3d&&1===(f=r.getScale3d())[0]&&1===f[1]&&1===f[2]&&(f=null),!(b=r.r3&&0===(b=r.r3())[0]&&0===b[1]&&0===b[2]?null:b)&&!f)return B;var f,K=new e1(r.p3()),h=new e1(B.point).sub(K),B=new e1(B.tangent).add(h);return f&&(f=new e1(f),h.multiply(f),B.multiply(f)),b&&(f=(new FH).setFromEuler(new lH(b,r.getRotationMode(),!0)),h.applyQuaternion(f),B.applyQuaternion(f)),{point:h.clone().add(K),tangent:B.sub(h).normalize()}}return H1},_genBatchInstancedArrayFunc:function(){var r=this._glCapabilities&&this._glCapabilities.instancedArray&&!this._batchInstancedDisabled,a=r?cr:Or,b=(this.batchInstancedModel=function(r,K,B,b,f,h,U){a(this,r,K,B,b,f,h,U)},r?Er:rm),h=(this.batchInstancedShapeFace=function(r,K,B){b(r,K,B)},r?Km:Bm);this.batchInstancedFace=function(r,K,B,b,f){h(this,r,K,B,b,f)}},isLabelVisible:function(r){return!0},isNoteVisible:function(r){return!0},moveCamera:function(r,K,B){var b=this,f=[(f=b.getEye())[0],f[1],f[2]],h=[(h=b.getCenter())[0],h[1],h[2]];if(r=r||f,K=K||h,b._flyAnim&&b._flyAnim.stop(!0),!(B=pY(B)))return b.setEye(r[0],r[1],r[2]),b.setCenter(K[0],K[1],K[2]),delete b._flyAnim,!0;var U=[r[0]-f[0],r[1]-f[1],r[2]-f[2]],a=[K[0]-h[0],K[1]-h[1],K[2]-h[2]];return B.action=function(r){b.setCenter(h[0]+a[0]*r,h[1]+a[1]*r,h[2]+a[2]*r),b.setEye(f[0]+U[0]*r,f[1]+U[1]*r,f[2]+U[2]*r)},B._37o=function(){delete b._flyAnim},b._flyAnim=N9(B)},flyTo:(o5=new e1,x5=new e1,T5=new e1,t5=new e1,p5=new e1,q5=new Z,y5=new M.Math.Quaternion,k5=new lH,w5=new AH,function(r,K,B){var b,f,h=this,U=(K=("boolean"==typeof K?{animation:K}:K)||{}).center,a=K.distance,P=K.direction,H=K.worldDirection,Y=B||K.ratio||.8,S=K.xRatio||Y,Y=K.yRatio||Y,_=((B!==P1||K.duration||K.frames)&&(K={animation:K}),[]),B=a===P1;if(U&&T5.fromArray(U),!U||B)if((r=1===(r=r||h.dm().getDatas()).length?SY(r)?r.get(0):r[0]:r)instanceof M.Node)U||T5.fromArray(r.p3()),B&&(_c(_,h,r),b=_.length);else{if(!r.length)return;if(!(!B&&U||(_=[],r.forEach(function(r){_c(_,h,r)}),b=_.length)))return;U||(w5.setFromPoints(_),T5.copy(w5.min).add(w5.max).multiplyScalar(.5))}h._flyAnim&&h._flyAnim.stop(!0),o5.fromArray(h.getEye()),x5.fromArray(h.getCenter()),h.setCenter(T5.x,T5.y,T5.z),t5.subVectors(o5,x5),(P||H)&&(!H&&r instanceof M.Node?y5.setFromEuler(k5.set(r.r3(),r.getRotationMode(),!0)):y5.set(0,0,0,1),U=t5.length(),t5.fromArray(H||P).applyQuaternion(y5).setLength(U));var e=new e1(h.getUp()),o=D.fequal(e.x,0,1e-5)&&D.fequal(e.z,0,1e-5),x=(o&&0===t5.x&&0===t5.z&&(r=t5.y,t5.y=.999*r,t5.z=.001*Math.sign(r)),0);if(B){var T,t,p,q=S,y=Y;if(p5.copy(t5),h.isOrtho()){var k=-1/0;for(h._eye[0]=t5.x+T5.x,h._eye[1]=t5.y+T5.y,h._eye[2]=t5.z+T5.z,T=F6(h),v6(T,T,J6(h)),f=0;f<b;f++)p=_[f],t=TA([p.x,p.y,p.z,1],T),k=Math.max(k,Math.max(Math.abs(t[0])/q,Math.abs(t[1])/y));x=h.getOrthoWidth()*k}else{for(var w,v,A=h.getNear(),z=10;z--;){for(h._eye[0]=t5.x+T5.x,h._eye[1]=t5.y+T5.y,h._eye[2]=t5.z+T5.z,T=F6(h),v6(T,T,J6(h)),w=!0,v=-1/0,f=0;f<b;f++){if(p=_[f],(t=TA([p.x,p.y,p.z,1],T))[3]<A&&z){t5.multiplyScalar(2),w=!1;break}v=Math.max(v,Math.max(Math.abs(t[0])/q,Math.abs(t[1])/y)-t[3])}if(w)break}t5.setLength(v+t5.length())}t5.manhattanLength()<1e-6&&t5.copy(p5)}else t5.setLength(a);var N,u,j,I,L,J,F,G,d,s,n,V,H=t5.add(T5);return(P=pY(K.animation))?(h.setEye(o5.x,o5.y,o5.z),h.setCenter(x5.x,x5.y,x5.z),U=H.clone().sub(T5),(N=U.length())&&U.multiplyScalar(1/N),r=o5.clone().sub(x5),(u=r.length())&&r.multiplyScalar(1/u),B=(new Z).lookAtDirection(r,e),S=(new Z).lookAtDirection(U,e),j=(new FH).setFromRotationMatrix(B),I=(new FH).setFromRotationMatrix(S),L=(new e1).subVectors(T5,x5),x&&(J=h.getOrthoWidth()),F=new e1,G=new e1,d=new e1,s=P.action,n=P._37o,V=x5.clone(),P.action=function(r,K){G.copy(V).addScaledVector(L,r);var B=j.clone().slerp(I,r);F.set(0,0,1).applyQuaternion(B).setLength(u+(N-u)*r).add(G),d.set(0,1,0).applyQuaternion(B),h.setCenter(G.x,G.y,G.z),h.setEye(F.x,F.y,F.z),h.setUp(d.x,d.y,d.z),x&&h.setOrthoWidth((x-J)*r+J),s&&s(r,K)},P._37o=function(){delete h._flyAnim;var r=h.getUp(),K=o?Y1.graph3dViewUp:e.toArray();r[0]===K[0]&&r[1]===K[1]&&r[2]===K[2]||h.setUp(K),n&&n()},{lastEye:o5,lastCenter:x5,eye:H,center:T5,orthoWidth:x,animation:h._flyAnim=N9(P)}):(h.setEye(H.x,H.y,H.z),h.setCenter(T5.x,T5.y,T5.z),x&&h.setOrthoWidth(x),delete h._flyAnim,{lastEye:o5,lastCenter:x5,eye:H,center:T5,orthoWidth:x})}),getBoundingBox:(e5=new Z,function(r){if(0===(r=(r=r||this.sm().getSelection())instanceof M.Node?[r]:r).length)return H1;var B=[],K=(r.forEach(function(r){var K;l(r)&&(K=B,e5.fromArray(wA(r,this.getMat(r))),r=r.getAnchor3d(),K.push((new e1).set(0-r.x,0-r.y,0-r.z).applyMatrix4(e5)),K.push((new e1).set(0-r.x,0-r.y,1-r.z).applyMatrix4(e5)),K.push((new e1).set(0-r.x,1-r.y,0-r.z).applyMatrix4(e5)),K.push((new e1).set(0-r.x,1-r.y,1-r.z).applyMatrix4(e5)),K.push((new e1).set(1-r.x,0-r.y,0-r.z).applyMatrix4(e5)),K.push((new e1).set(1-r.x,0-r.y,1-r.z).applyMatrix4(e5)),K.push((new e1).set(1-r.x,1-r.y,0-r.z).applyMatrix4(e5)),K.push((new e1).set(1-r.x,1-r.y,1-r.z).applyMatrix4(e5)))},this),[1/0,1/0,1/0]),b=[-1/0,-1/0,-1/0];return B.forEach(function(r){K[0]=Math.min(r.x,K[0]),K[1]=Math.min(r.y,K[1]),K[2]=Math.min(r.z,K[2]),b[0]=Math.max(r.x,b[0]),b[1]=Math.max(r.y,b[1]),b[2]=Math.max(r.z,b[2])}),{min:K,max:b}}),isShaderCompileParallel:function(){return!!this._parallelShaderCompile},enableShaderCompileParallel:function(){var r=this.getGLExtensions();return!!r&&!!r.get("KHR_parallel_shader_compile")&&void(this._parallelShaderCompile=!0)},disableShaderCompileParallel:function(){this._parallelShaderCompile=!1},setBatchInfo:function(r,K){var B=this._batchInfoMap[r];this._batchInfoMap[r]=K,this.fp("batchInfo",B,K)},getBatchInfo:function(r){return this._batchInfoMap[r]||uK[r]},getStaticInstancingKey:function(r,K){if(!K&&(b=r._lastInstancingKey))return b;var B,K=r.s("shape3d"),b=PY(K)?B=(B=K.uuid)?B:K.uuid=D.generateUUID():K;return b+=(r._flipSide?"_1_":"_0_")+r.s("static.group"),r._lastInstancingKey=b},setOrthoWidth:function(r){var K,B,b,f=this._orthoWidth;this._orthoWidth=r,this._syncEyeWithOrthoWidth&&(K=r/this.getAspect()/2/G1(this.getFovy()/2),B=(new e1).fromArray(this.getEye()),b=(new e1).fromArray(this.getCenter()),B.sub(b).setLength(K).add(b),this.setEye(B.toArray())),this.fp("orthoWidth",f,r)},getCamera:function(r){var K=this,B=((r=(r=r||K._mainCamera)||(K._mainCamera=new M.Camera)).s({"camera.type":K.isOrtho()?"ortho":"perspective","camera.aspect":K.getAspect(),"camera.fovy":K.getFovy(),"camera.ortho.width":K.getOrthoWidth(),"camera.near":K.getNear(),"camera.far":K.getFar()}),K.getEye());return r.p3(B.slice()),r.lookAt(K.getCenter(),K.getUp()),r},syncFromCamera:function(r){var K=this,B=new e1(K.getEye()),b=new e1(K.getCenter()),f=new e1,h=b.sub(B).length(),U=(K.setEye(r.p3()),r.getEuler());return f.set(0,0,-1).applyEuler(U),B.copy(f).setLength(h).add(b.copy(r.p3())),K.setCenter(B.toArray()),B.set(0,1,0).applyEuler(U),b.set(0,1,0),Math.abs(f.cross(B).dot(b))<1e-5?K.setUp(b.toArray()):K.setUp(B.toArray()),K.setOrtho("ortho"===r.s("camera.type")),K.setAspect(r.s("camera.aspect")),K.setFovy(r.s("camera.fovy")),K.setOrthoWidth(r.s("camera.ortho.width")),K.setNear(r.s("camera.near")),K.setFar(r.s("camera.far")),!0},resetHeadlightProperties:function(){this._headlightColor=Y1.graph3dViewHeadlightColor,this._headlightIntensity=Y1.graph3dViewHeadlightIntensity,this._headlightRange=Y1.graph3dViewHeadlightRange,this._headlightDirection=Y1.graph3dViewHeadlightDirection,this._headlightGroup=Y1.graph3dViewHeadlightGroup,this._headlightAmbientIntensity=Y1.graph3dViewHeadlightAmbientIntensity,this._headlightDisabled=Y1.graph3dViewHeadlightDisabled,this._headlightRatioForPhysicalMaterial=Y1.graph3dViewHeadlightRatioForPhysicalMaterial},resetFogProperties:function(){this._fogDisabled=Y1.graph3dViewFogDisabled,this._fogMode=Y1.graph3dViewFogMode,this._fogDensity=Y1.graph3dViewFogDensity,this._fogColor=Y1.graph3dViewFogColor,this._fogNear=Y1.graph3dViewFogNear,this._fogFar=Y1.graph3dViewFogFar},_gatherRenderLayersByPriority:function(r){if(r||!(this._renderLayerSettingsVersion>=cA)){var K,B=this,b=(B._renderLayerSettingsVersion=cA,B._sortedRenderLayers=A.keys(B._renderLayerInfoMap));for(K in OA)0<=b.indexOf(K)||b.push(K);b.sort(function(r,K){return B.getRenderLayerInfo(r).priority-B.getRenderLayerInfo(K).priority})}},setRenderLayerInfo:function(r,K){rP(0,r,this._renderLayerInfoMap);var B,b=this.getRenderLayerInfo(r),r=v9(b);for(B in K)"mask"!==B&&(b[B]=K[B]);this._gatherRenderLayersByPriority(!0),this.fp("renderLayerInfo",r,b)},getRenderLayerInfo:function(r){return this._renderLayerInfoMap[r]||OA[r]},setRenderLayerInfoMap:function(r){var K,B=this._renderLayerInfoMap;for(K in this._renderLayerInfoMap={},r)this.setRenderLayerInfo(K,r[K]);this.fp("renderLayerInfoMap",B,this._renderLayerInfoMap)},getRenderLayerInfoMap:function(){return this._renderLayerInfoMap},getRenderLayerKeys:function(){return this._sortedRenderLayers}}),Y1.registerTextureLoader=function(r){n5?n5.push(r):n5=[r]},Y1.unregisterTextureLoader=function(r){if(n5)return 0<=(r=n5.indexOf(r))&&(n5.splice(r,1),0===n5.length&&(n5=null),!0)},function(r,K){return(5131!==K||r.isWebGL2()?K:null!==(r=r._glExtensions.get("OES_texture_half_float"))?r.HALF_FLOAT_OES:null)||5121}),pq=function(r,K,B){if(!r.isWebGL2())return K;var b=K;return 6403===K&&(5126===B&&(b=33326),5131===B&&(b=33325),5121===B&&(b=33321)),33319===K&&(5126===B&&(b=33328),5131===B&&(b=33327),5121===B&&(b=33323)),6407===K&&(5126===B&&(b=34837),5131===B&&(b=34843),5121===B&&(b=32849)),6408===K&&(5126===B&&(b=34836),5131===B&&(b=34842),5121===B&&(b=32856)),33325!==b&&33326!==b&&34842!==b&&34836!==b||r._glExtensions.get("EXT_color_buffer_float"),b},qq=D.newIdGenerator(),yq=(A.assign(Fr.Graph3dView.prototype,{getTextureMap:function(){return this._2O},setTextureStyle:function(r,K,B){return!(!(r=g(r))||!r.texture||(this.deleteTexture(r),r[K]=B,this.iv(),0))},setTexture:function(r,K,B){var b;B=B||"",(b=(b=this._2O[r])?b:this._2O[r]={})[B]=K},deleteTexture:function(r){if(this._2O){r&&r.uuid&&(r=r.uuid);var K=this._2O[r];if(K){delete this._2O[r];var B,b=this.getGL();for(B in K)b.deleteTexture(K[B])}}},invalidateCachedTexture:function(r,K){var B=this.getData3dUI(r).invalidateCachedTexture(this.getGL());!1===K&&!B||this.invalidateData(r)},invalidateShape3dCachedImage:function(r){this.invalidateCachedTexture(r)},getTextureFromLoader:function(r){if(n5)for(var K,B=0,b=n5.length;B<b;B++)if((K=n5[B]).checkType(r))return K.getTexture(this,r)},getGLTextureFromLoader:function(r){var K=this.getTextureFromLoader(r);return K&&(K=this.createTexture(K),this.setTexture(r,K),K)},getPrefabBoneTexture:function(r){var K=this._26I;return K?K._4KQ[r._4LQ||(r._4LQ=qq.next())]:null},setPrefabBoneTexture:function(r,K){var B=this._26I;return B?(B._4KQ[r._4LQ||(r._4LQ=qq.next())]=K,!0):null},textureToCanvas:(A5={type:"blitScreen",defines:{USE_LINEAR:!0}},V5={type:"blitScreen"},function(r,K,B,b){var f=b6(r)?r:this.getTextureFromLoader(r);if(f&&(B=B||f.width,b=b||f.height,B&&b))return(f=(K=K===P1?"linear"===f.colorSpace:K)?A5:V5).image=r,K=new vq(this,B,b),this.renderModel(K,f),f.image=null,r=K.toCanvas(),K.release(),r}),createTexture:function(r,K){var B,b,f,h,U,a,P,H=this.getGL(),Y=gQ,S=tq(this,r.type||r.textureType),_=r.format||Y.RGBA,e=pq(this,_,S),o=(r.image?(B=(f=g(r.image)).naturalWidth||f.width,b=f.naturalHeight||f.height,o=!f||"VIDEO"!==f.tagName&&(!B||!b)):(f=r.data,B=r.width,b=r.height,(o=f===P1||!B||!b)||(h=!0)),o&&(f=null,B=b=0),r.minFilter||r.filter||Y.LINEAR),x=r.magFilter||r.filter||Y.LINEAR,T=r.wrapS||r.wrap,t=r.wrapT||r.wrap,p=(T||t||(T=t=!D.isPOT(B)||!D.isPOT(b)||r.clampToEdge||f&&f.clampToEdge?Y.CLAMP_TO_EDGE:Y.REPEAT),this.isWebGL2());return p||T===Y.CLAMP_TO_EDGE&&t===Y.CLAMP_TO_EDGE&&(o===Y.NEAREST||o===Y.LINEAR)||D.isPOT(B)&&D.isPOT(b)||!f||h||(U=r.scaleMode,a=D.nearestPOT(B),P=D.nearestPOT(b),"smaller"===U?(B<a&&(a/=2),b<P&&(P/=2)):"larger"===U&&(a<B&&(a*=2),P<b&&(P*=2)),f=Y1.resizeImage(f,a,P),B=a,b=P),K=K||H.createTexture(),H.activeTexture(33984),A6(H,K),H.pixelStorei(37440,!0===r.flipY),H.pixelStorei(37441,!1),h?H.texImage2D(Y.TEXTURE_2D,0,e,B,b,0,_,S,f):f&&H.texImage2D(Y.TEXTURE_2D,0,e,_,S,f),V6(H,10242,T),V6(H,10243,t),V6(H,10240,x),T!==Y.CLAMP_TO_EDGE||t!==Y.CLAMP_TO_EDGE?(V6(H,10241,9728===o?9984:9987),p&&r.mipmapMaxLevel!==P1&&V6(H,33085,r.mipmapMaxLevel),H.generateMipmap(Y.TEXTURE_2D)):V6(H,10241,o),A6(H,H1),K},resetSharedTextureIndex:function(){this._sharedTextureIndex=0},textureAccessesByMaterial:function(r,K){var B,b,f=this._sharedTextureIndex;return 0===f?b=this._1O:(b=(B=this.getGL())._sharedTexturePool[f-1])||(B._sharedTexturePool[f-1]=b=d6(this,B)),(f=this.getTexture(r,K,P1,P1,b))===b&&this._sharedTextureIndex++,f},getTexture:function(r,K,B,b,f){if(!r)return H1;var h,U=this,a=U.getGL(),P=U._2O[r];if(!(h=P?P[(_=K?K.s("texture.mipmap.max"):_)||""]||P.default:h)&&null===(h=U.getGLTextureFromLoader(r)))return a._emptyTexture;if(!h){if(!(P=g(r)))return a._emptyTexture;if(b=b||{},K&&(b.mipmapMaxLevel=_=K.s("texture.mipmap.max"),Y=K.s("texture.wrap"),b.clampToEdge="clampToEdge"===Y||"repeat"!==Y&&P1,b.flipY=K.s("texture.flipY")),P.uuid||(P.uuid=M.Math.generateUUID()),P.tagName||P.texture){if((Y=P.texture)&&!g(P.image))return a._emptyTexture;if(P.dynamic)return(S=a._dynamicTexturePool[P.uuid])||(S=a._dynamicTexturePool[P.uuid]=a.createTexture()),Y?this.createTexture(P,S):d6(U,a,P,S,b);Y?(h=U._2O[P.uuid])?h=h[""]:(h=this.createTexture(P),U.setTexture(P.uuid,h)):(h=d6(U,a,P,P1,b),U.setTexture(r,h,_))}else{var H,Y,S=K&&(K.s("texture.cache")||K.s("shape3d.image.cache")||P.textureCache);if((Y=U.isVRPresenting())&&K&&(K._textureUpdateFrame===a._renderInfo.frame?S=!0:K._textureUpdateFrame=a._renderInfo.frame),S&&(h=(H=U.getData3dUI(K)).getCachedTexture(B))&&H.interactiveInfo&&h.interactiveInfo&&(H.interactiveInfo[h.interactiveInfo.key]=h.interactiveInfo.info),!h){var _=a._renderInfo.textureCache;if(S){if(_.time>Y1.graph3dMaxVectorCacheTime)return U.redraw(),a._emptyTexture;if(!T9(P,K))return a._emptyTexture}K&&(1!==K.s("texture.scale")?p=K.s("texture.scale"):1!==K.s("shape3d.texture.scale")&&(p=K.s("shape3d.texture.scale")));var e,o,x,T,t,p=p||1,q=(k=K&&(K.s("fixSizeOnScreen")||K.s("shape3d.fixSizeOnScreen")))?9728:9729;k?"number"==typeof k&&(p*=k<0?1:k):K&&(K.s("vector.dynamic")||K.s("shape3d.vector.dynamic"))&&(k=(H=H||U.getData3dUI(K)).getVectorDynamicSize());"billboard"===(y=K&&K.s("shape3d"))?e=K.getTall()/K.getWidth():"plane"===y&&(e=K.getHeight()/K.getWidth());var y=DA(P,K),k=k?(x=U._devicePixelRatio||WH,o=0<k[0]?k[0]*x:p*y*x,0<k[1]?k[1]*x:p*(e?iA(P,K,U,Math.min(4096,y*e)):iA(P,K))*x):(o=p*y,p*(e?iA(P,K,U,Math.min(4096,y*e)):iA(P,K)));1<=o&&1<=k&&(x=0,(S||Y)&&(x=Date.now()),p=U._glCapabilities.maxTextureSize,o=Math.min(o,p),k=Math.min(k,p),y=RN(o,k),(H=!H&&K?U.getData3dUI(K):H)&&H.interactiveInfo&&("object"==typeof(T=r)&&(T=T.uuid||(T.uuid=M.Math.generateUUID())),t=H.interactiveInfo[T]={},y.interactiveInfo=t.bodyInfo={compInfos:[],matrix:new LH,rect:{x:0,y:0,width:o,height:k}}),ZA(y,P,0,0,o,k,K,U),y.interactiveInfo&&(y.interactiveInfo=null),y.restore(),_.count++,_.pixels+=o*k,K?(b.minFilter=Jr(K.s("texture.filter.min")||K.s("texture.filter"))||q,b.magFilter=Jr(K.s("texture.filter.mag")||K.s("texture.filter"))||q):b.minFilter=b.magFilter=q,S||Y?(h=d6(U,a,VN,null,b),H&&H.setCachedTexture(h,B),_.time+=Date.now()-x,t&&(h.interactiveInfo={key:T,info:t}),VN=null):h=d6(U,a,VN,f||U._1O,b))}}}return h}}),(((B=Fr.EnvmapRenderer=function(r){this.gv=r,this._envmaps={},this._envmapHash={},this._probeCaptureTime={},this._envmapPoolCachedByImage=[],this._pingPongRenderTarget=null,this._equirectMaterial=null,this._blurMaterial=null,this._lastCaptureFrame=0,this._cubemapMaterial=null,this._envmapIntensity={}}).prototype={}).constructor=B).prototype.changeEnvmapType=function(r){"legacy"===r?(this.setEnvmapByProbeId=this.setEnvmapLegacy,this.onBeforeRender=this.onBeforeRenderLegacy):(this.setEnvmapByProbeId=this.setEnvmap,this.onBeforeRender=this.onBeforeRenderNew)},B.prototype.invalidateEnvmap=function(r){var K=this.gv;"legacy"!==K.getEnvmapType()&&K.getGL()&&(r?(delete this._envmapHash[r],delete this._probeCaptureTime[r]):(this._envmapHash={},this._probeCaptureTime={}),K.iv())},B.prototype.dispose=function(){var r,K=this,B=[K._pingPongRenderTarget,K._hdrDynamicComposeRTT];for(r in K._envmaps)B.push(K._envmaps[r]);m6(K.gv,B),K._envmaps={},K._envmapPoolCachedByImage=[],K._envmapHash={},K._pingPongRenderTarget=null,K._equirectMaterial=K._cubemapMaterial=K._blurMaterial=null,K._hdrDynamicComposeRTT=null,K._envmapLegacy=null,K._lastLegacyImage=null},B.prototype.onBeforeRenderLegacy=function(r){this.gv._picking||(this.assureTextureLegacy(r),this.assureEnvmapPoolForImage())},B.prototype.assureTextureLegacy=function(r){var K,B,b=this.gv.getEnvmap();b!==this._lastLegacyImage&&(this._envmapLegacy&&(r.deleteTexture(this._envmapLegacy),this._envmapLegacy=null),b?(K=Y1.getImage(b))&&K.tagName&&(K=Y1.resizeImagePOT(K,!0),B=this._envmapLegacy=r.createTexture(),r.activeTexture(33984),r.bindTexture(34067,B),r.texParameteri(34067,10240,9729),r.texParameteri(34067,10241,9729),r.texImage2D(34069,0,6408,6408,5121,K),r.texImage2D(34070,0,6408,6408,5121,K),r.texImage2D(34071,0,6408,6408,5121,K),r.texImage2D(34072,0,6408,6408,5121,K),r.texImage2D(34073,0,6408,6408,5121,K),r.texImage2D(34074,0,6408,6408,5121,K),r.bindTexture(34067,r._emptyCubeTexture),this._lastLegacyImage=b):this._lastLegacyImage=b)},B.prototype.setEnvmapLegacy=function(r,K,B){r.uEnvMap=this._envmapLegacy,r.envMapIntensity=B},B.prototype.onBeforeRenderNew=function(r){this.gv._picking||(this.assureTextureNew(r),this.resetUniformCache(),this.assureEnvmapPoolForImage())},B.prototype.isHDR=function(r){return"string"==typeof r&&(r.indexOf(".hdr")===r.length-4||r.indexOf(".HDR")===r.length-4)},B.prototype.isDynamicImage=function(r){return r&&r.comps&&r.comps[0]&&"__ht_envmap_bg__"===r.comps[0].type},B.prototype.isImageReady=function(r){var K;if(this.isHDR(r))K=Y1.getHdrTexture(r);else if(K=Y1.getImage(r),this.isDynamicImage(K)&&!this.isImageReady(K.comps[0].image))return!1;return K},B.prototype.assureTextureNew=function(r){var K=this,B=K.gv,b=B.getEnvmap(),f=K._envmapHash,h=K._envmaps,U=K._envmapIntensity,r=r._renderInfo.frame;if(this._lastCaptureFrame>=r||B._picking)for(a in b)H=b[a].intensity,U[a]=H==H1?1:H;else{for(var a in b){var P=b[a],H=P.intensity;switch(U[a]=H==H1?1:H,P.type){case"sphere":(o=P.image)!==f[a]&&(o?K.isImageReady(o)&&(f[a]=o,ec(h,a,K.fromEquirectangular(o))):(f[a]=o,ec(h,a,null)));break;case"cube":if((x=P.texture)!==P1)f[a]!==x&&(f[a]=x,ec(h,a,K.fromCubemap(x,P.encoding)));else{var Y=P.images;if(Y&&6===Y.length&&(o=Y.join(","))!==f[a]){for(var S=!0,_=!1,e=0;e<6;e++){if(!Y[e]){_=!0;break}if(!Y1.getImage(Y[e])){S=!1;break}}_?(f[a]=o,ec(h,a,null)):S&&(f[a]=o,ec(h,a,K.fromCubemap(Y)))}}break;case"skybox":var o,x,T=B.getSkybox();if(T)if((o="sphere"===(x=T.s("shape3d"))?T._id+"_"+T.s("shape3d.image"):T._id+"_"+T.s("front.image"))!==f[a]){if("sphere"===x)S=K.isImageReady(T.s("shape3d.image"));else for(var S=!0,t=["front","back","left","right","top","bottom"],e=0;e<6;e++)if(!Y1.getImage(T.s(t[e]+".image"))){S=!1;break}S&&(f[a]=o,ec(h,a,K.fromSkybox()))}break;case"probe":var p,q,y=P.pos,k=P.size;(o=y[0]+"_"+y[1]+"_"+y[2]+"_"+k)!==f[a]&&(p=this._probeCaptureTime[o],q=Date.now(),p||(this._probeCaptureTime[o]=p=q),q-p>Y1.envmapProbeMinWaitTime&&!ZK&&!_m||q-p>Y1.envmapProbeMaxWaitTime?(delete this._probeCaptureTime[o],f[a]=o,ec(h,a,K.fromSceneProbe(y,k,P.filter))):B.iv())}}A.keys(h).forEach(function(r){b[r]===P1&&(delete f[r],ec(h,r,null))})}},B.prototype.resetUniformCache=function(){this._frameUniformCache={}},B.prototype.setEnvmap=function(r,K,B){var b=r.uuid,f=this._frameUniformCache,h=(h=this._envmaps[K])&&h.texture;f[b]!==h&&(f[b]=h,r.uEnvMap=h),B&&(B*=this._envmapIntensity[K]||0),r.envMapIntensity=B},B.prototype.assureEnvmapPoolForImage=function(){for(var r=this._envmapPoolCachedByImage,K=0,B=r.length;K<B;K++)r[K][0]&&!r[K][1]&&this.isImageReady(r[K][0])&&(r[K][1]=this.fromEquirectangular(r[K][0]))},B.prototype.assureEnvmapFromEquirectangular=function(r){for(var K,B=this._envmapPoolCachedByImage,b=0,f=B.length;b<f;b++)if(B[b][0]===r)return(K=B[b][1])?K.texture:null;return B.push([r,null]),this.gv.iv(),null},B.prototype.invalidateEnvmapUsedByMaterial=function(r){if(r)for(var K=this._envmapPoolCachedByImage,B=0,b=K.length;B<b;B++)K[B][0]===r&&(K[B][1]=null);else this._envmapPoolCachedByImage=[];this.gv.iv()},B.prototype.isEnvmapUsedByMaterialReady=function(r){for(var K=this._envmapPoolCachedByImage,B=r==H1,b=0,f=K.length;b<f;b++)if(B){if(!K[b][1])return!1}else if(K[b][0]===r)return!!K[b][1];return B},B.prototype.fromEquirectangular=function(r){var K,B,b,f,h,U=this.isHDR(r)?(K=M.Default.getHdrTexture(r),"linear"):this.isDynamicImage(r)&&this.isHDR(r.comps[0].image)?(f=(B=r.comps[0]).image,B.image=null,b=this.gv.getTexture(r),B.image=f,f=this.gv.getTexture(f),h=(h=this._hdrDynamicComposeRTT)||(this._hdrDynamicComposeRTT=this._allocateTargets()),U=r.width,this.gv.renderModel(h,U,r.height,{type:"envmapDynamicCompose",offset:B.offset?(B.offset%1+1)%1:0,texture1:f,texture2:b}),h=h.texture,K=r,"linear"):(K=M.Default.getImage(r),"sRGB");return K?(this.rectSize=[1/K.width,1/K.height],r=h||this.gv.getTexture(r),this.fromTexture(r,null,U)):null},B.prototype.fromCubemap=function(r,K){if(K=K||"sRGB",b6(r))return this.fromTexture(r,!0,K);for(var B=this.gv.getGL(),b=B.createTexture(),f=(B.activeTexture(33984),B.bindTexture(34067,b),B.texParameteri(34067,10240,9729),B.texParameteri(34067,10241,9729),[]),h=$5/3,U=0;U<6;U++)f[U]=Y1.resizeImage(M.Default.getImage(r[U]),h);return B.texImage2D(34069,0,6408,6408,5121,f[0]),B.texImage2D(34070,0,6408,6408,5121,f[1]),B.texImage2D(34071,0,6408,6408,5121,f[2]),B.texImage2D(34072,0,6408,6408,5121,f[3]),B.texImage2D(34073,0,6408,6408,5121,f[4]),B.texImage2D(34074,0,6408,6408,5121,f[5]),B.bindTexture(34067,B._emptyCubeTexture),this.fromTexture(b,!0,K)},B.prototype.fromTexture=function(r,K,B){var b=this._allocateTargets(),f=(this._pingPongRenderTarget||(this._pingPongRenderTarget=this._allocateTargets()),this.gv),h=f.getGL(),U=x1.for(h).directState(),a=U.depth.enabled,P=(U.scissor.enabled=!0,U.depth.enabled=!1,f.getViewport(h));return this._textureToCubeUV(r,b,K,B),this._applyPMREM(b),f.setViewport(h,P[0],P[1],P[2],P[3]),U.depth.enabled=a,U.scissor.enabled=!1,b},B.prototype.fromSkybox=function(){return this._fromCamera(function(r){r.s({"camera.onlySky":!0,"camera.skybox.blur":!1})})},B.prototype.fromScene=function(K){return this._fromCamera(function(r){r.s({"camera.onlySky":!1}),K&&K(r)})},B.prototype.fromNode=function(r){var K,B=this.gv.getData3dUI(r),b=B._42,f=(B._42=lK,this.gv.getSkybox()),h=r.p3(),r=(f&&(K=f.p3(),f.p3(h)),this.fromScene(function(r){r.p3(h)}));return B._42=b,f&&f.p3(K),r},B.prototype.fromSceneProbe=function(K,B,b){var r,f,h=this.gv,U=h.getSkybox(),a=(U&&(r=U.p3(),U.p3(K)),b&&(f=h.isVisible,h.isVisible=function(r){var K=b(r);return K!==P1?K:f.call(h,r)}),this.fromScene(function(r){r.p3(K),r.s("camera.near",B)}));return b&&(h.isVisible=f),U&&U.p3(r),a},B.prototype._fromCamera=function(r){var K=this.gv,B=K.getCamera(),r=(r&&r(B),new vq(K,$5,$5,{cube:!0})),b=K.getGL(),f=K.getViewport(b),h=this.setEnvmapByProbeId,U=this.onBeforeRender,B=(this.setEnvmapByProbeId=function(r){r.envMap=b._emptyTexture},this.onBeforeRender=lK,B.attachRenderTarget(r),B.render(K),B.detachRenderTarget(),this.setEnvmapByProbeId=h,this.onBeforeRender=U,K.setViewport(b,f[0],f[1],f[2],f[3]),this.fromTexture(r.texture,!0,"sRGB"));return r.releaseTexture(),B},B.prototype._allocateTargets=function(r){return new vq(this.gv,3*l5,3*l5,{textureType:5131})},B.prototype._textureToCubeUV=function(r,K,B,b){var f,h,U=this,a=U.gv,P="sRGB"===b?"USE_SRGB":"USE_LINEAR",P=(B?(null==U._cubemapMaterial&&(U._cubemapMaterial={}),null==(f=U._cubemapMaterial[P])&&((h={})[P]=!0,U._cubemapMaterial[P]=f={type:"envmapCubemap",internalDefines:!1,defines:h})):(null==U._equirectMaterial&&(U._equirectMaterial={}),null==(f=U._equirectMaterial[P])&&((h={})[P]=!0,U._equirectMaterial[P]=f={type:"envmapEquirect",internalDefines:!1,defines:h})),f.envMap=r,B||(f.texelSize=U.rectSize),Z5[0]);a.renderModel(K,{model3d:!0,mesh:P,mat:f,encoding:"linear"===b?1:0},{restoreViewport:!1,preRender:function(){U._setViewport(K,0,0,3*l5,2*l5)}})},B.prototype._applyPMREM=function(r){for(var K,B,b=1;b<m5;b++)K=Math.sqrt(W5[b]*W5[b]-W5[b-1]*W5[b-1]),B=i5[(b-1)%i5.length],this._blur(r,b-1,b,K,B)},B.prototype._setViewport=function(r,K,B,b,f){var h=this.gv;h.setViewport(h.getGL(),K,B,b,f),h.getRenderState().directState().scissor.box=[K,B,b,f]},B.prototype._blur=function(r,K,B,b,f){var h=this._pingPongRenderTarget;this._halfBlur(r,h,K,B,b,"latitudinal",f),this._halfBlur(h,r,B,B,b,"longitudinal",f)},B.prototype._halfBlur=function(r,K,B,b,f,h,U){var a=this,P=a.gv,H=a._blurMaterial;if("latitudinal"===h||"longitudinal"===h){H||(a._blurMaterial=H={type:"envmapBlur",internalDefines:!1,defines:{n:D5}});for(var Y,S=g5[B]-1,_=f/(S=isFinite(f)?Math.PI/(2*S):2*Math.PI/(2*D5-1)),e=isFinite(f)?1+Math.floor(3*_):D5,o=[],x=0,T=0;T<D5;++T)p=T/_,Y=Math.exp(-p*p/2),o.push(Y),0==T?x+=Y:T<e&&(x+=2*Y);for(T=0;T<o.length;T++)o[T]=o[T]/x;H.envMap=r.texture,H.samples=e,H.weights=o,H.latitudinal="latitudinal"===h,U&&(H.poleAxis=U),H.dTheta=S,H.mipInt=R5-B;var t=g5[b],p=3*Math.max(0,l5-2*t),q=(0===b?0:2*l5)+2*t*(R5-M5<b?b-R5+M5:0),f=Z5[b];P.renderModel(K,{model3d:!0,mesh:f,mat:H},{restoreViewport:!1,preRender:function(r){a._setViewport(K,p,q,3*t,2*t)}})}},M5=4,R5=8,l5=Math.pow(2,R5),m5=R5-M5+1+(C5=[.125,.215,.35,.446,.526,.582]).length,D5=20,K=1/(B=(1+Math.sqrt(5))/2),i5=[new e1(1,1,1),new e1(-1,1,1),new e1(1,1,-1),new e1(-1,1,-1),new e1(0,B,K),new e1(0,B,-K),new e1(K,0,B),new e1(-K,0,B),new e1(B,K,0),new e1(-B,K,0)],B=function(){for(var r=[],K=[],B=[],b=R5,f=0;f<m5;f++){var h=Math.pow(2,b),U=(K.push(h),1/h);R5-M5<f?U=C5[f-R5+M5-1]:0==f&&(U=0),B.push(U);for(var a=-(U=1/(h-1))/2,P=1+U/2,H=[],Y=[],S=[],_=0;_<6;_++){var e=_%3*2/3-1,o=2<_?0:-1;H.push(e,o,0,e+2/3,o,0,e+2/3,1+o,0,e,o,0,e+2/3,1+o,0,e,1+o,0),Y.push(a,a,P,a,P,P,a,a,P,P,a,P),S.push(_,_,_,_,_,_)}r.push({position:new aA(H),uv:new aA(Y),faceIndex:new aA(S)}),M5<b&&b--}return{_lodPlanes:r,_sizeLods:K,_sigmas:B}}(),Z5=B._lodPlanes,g5=B._sizeLods,W5=B._sigmas,$5=Y1.EnvmapTextureSize,Y1.setCompType("__ht_envmap_bg__",function(r,K,B,b,f){var h,U,a,P=B.image;(P=P&&Y1.getImage(P))&&(h=K.x,U=K.y,a=K.width,K=K.height,0!=(B=((B.offset||0)%1+1)%1*a|0)&&(r.save(),r.beginPath(),r.rect(h,U,a,K),r.clip(),r.translate(B,0),Y1.drawImage(r,P,h-a,U,a,K,b,f)),Y1.drawImage(r,P,h,U,a,K,b,f),0!=B&&r.restore())}),["left","front","right","back","top","bottom"]),kq=Fr._RenderList=function(L){var J=[],F=[],G={},d={},s={},n={},A={},V={},M={},R={};return{opaque:J,transparent:F,init:function(){for(var r in J.length=0,F.length=0,M={},R)R[r].length=0},push:function(r,K){if(K){var B,b,f,h,U=r,a=U.gv,P=U.data,H=U.shapeModel;if(H)if(P.s("static")&&(T=!0),H.model3d)x=B=b=!0;else{(e=P.s("shape3d.top.material"))&&(wr(e)?b=!0:B=!0),(e=P.s("shape3d.bottom.material"))&&(wr(e)?b=!0:B=!0),(e=P.s("shape3d.from.material"))&&(wr(e)?b=!0:B=!0),(e=P.s("shape3d.to.material"))&&(wr(e)?b=!0:B=!0),(e=P.s("shape3d.material"))&&(wr(e)?b=!0:B=!0);var Y,S,_=P.s("shape3d.transparent")||P.s("points.transparent");for(YY(H)||(Y=W(H.transparent,P,a),H=[H]),f=0,h=H.length;f<h;f++)S=H[f],(S=(S=(S=W(S.transparent,P,a))===P1?Y:S)===P1?_:S)?b=!0:B=!0}for(f=0,h=yq.length;f<h;f++){var e,o=U[yq[f]];o&&((e=a.getFaceMaterial(P,yq[f]))?wr(e)?b=!0:B=!0:o.transparent?b=!0:B=!0)}var K=!1,x=(a.isLabelVisible(P)&&(U.labelInfo&&(K=!0,P.s(du+".transparent")?b=!0:B=!0),U.label2Info&&(K=!0,P.s(su+".transparent")?b=!0:B=!0)),a.isNoteVisible(P)&&(U.noteInfo&&(K=!0,P.s(nu+".transparent")?b=!0:B=!0),U.note2Info&&(K=!0,P.s(Au+".transparent")?b=!0:B=!0)),{opaque:B=!(b=U._38o?B=K=!0:b)||B,transparent:b,model3d:x,staticModel3d:T});K&&P instanceof RO&&(x.blockRenderable=!0),U._renderParams=x}var T=r.data,K=T._id;if((x=M[K])!==P1)return x;x=r._renderParams;if(!x||!1===x.visible||T instanceof RO&&!x.blockRenderable)return M[K]=!1;if(M[K]=!0,T.isAnimationPlaying()&&(r.shapeModel&&L.updateSkeleton(T,r.shapeModel),T.isAnimationPaused()||L.iv()),r={ui:r,model3d:x.model3d,data:T,z:0,id:K},L._glCapabilities&&L._glCapabilities.instancedArray&&x.staticModel3d&&r.ui.mat&&L.isVisible(T)&&T.s(Jn)){for(var t=L.shadowMap.enable,p=L.getStaticInstancingKey(T,!0),q=R[p],y=0!==(p=(q=q||(R[p]={ms:[],ds:[],cs:[],highlightColors:[],length:0,msVersion:0,shadowVersion:0,csVersion:0,highlightVersion:0,shadow:[],cache:{version:-1,length:-1,id:-1,buffer:null},cacheShadow:{version:-1,length:-1,id:-1,buffer:null},cachePick:{version:-1,length:-1,buffer:null},cacheHighlight:{version:-1,length:-1,buffer:null}})).length),k=!1,w=16*p,v=0,z=q.ms,N=r.ui.mat;v<16;v++)z[w+v]!=N[v]&&(k=!0,z[w+v]=N[v]);k&&(q.msVersion=q.msVersion+1),q.ds[p]=K,t&&(t=T.s("shadow.cast"),!k&&q.shadow[p]===t||(q.shadow[p]=t,q.shadowVersion=q.shadowVersion+1));for(var u=er(null,L.pickColorMap,L.isSelectable(T),r.ui,Gu,!0),k=!1,j=4*p,v=0,I=q.cs;v<4;v++)I[j+v]!==u[v]&&(k=!0,I[j+v]=u[v]);if(k&&(q.csVersion=q.csVersion+1),q.length++,y)return u&&($r(u,d[K],G),$r(u,n[K],s),$r(u,V[K],A)),!0}return x.opaque&&J.push(r),x.transparent&&F.push(r),!0},getModel3dInstancedBatchMap:function(){return R},resetModel3dInstancedDraw:function(){for(var r in R)R[r].rendered=null},batchModelMap:G,batchIndexMap:d,polylineModelMap:s,polylineIndexMap:n,wireframeModelMap:A,wireframeIndexMap:V,beginFillHighlightMaskColor:function(r){var K,B=L.dm();for(K in R){var b=R[K],f=b.ds;if(f&&b.length){for(var h=b.highlightColors,U=!1,a=!1,P=0,H=b.length;P<H;P++)for(var Y=r(B.getDataById(f[P]),!0)?[0,0,0,0]:(a=!0,[0,1,1,1]),S=4*P,_=0;_<4;_++)h[S+_]!==Y[_]&&(U=!0,h[S+_]=Y[_]);U&&(b.highlightVersion=b.highlightVersion+1),b._csBackup=[b.cs,b.csVersion,b.cachePick],b.cs=b.highlightColors,b.csVersion=b.highlightVersion,b.cachePick=b.cacheHighlight,b._highlightInvalid=!a}}},endFillHighlightMaskColor:function(){for(var r in R){var K=(r=R[r])._csBackup;K&&(r.cachePick=K[2],r.csVersion=K[1],r.cs=K[0],r._csBackup=P1,r._highlightInvalid=P1)}},ivBatch:function(r){r?(Dr(G,d,r,L),Dr(s,n,r,L),Dr(A,V,r,L)):(G=this.batchModelMap={},d=this.batchIndexMap={},s=this.polylineModelMap={},n=this.polylineIndexMap={},A=this.wireframeModelMap={},V=this.wireframeIndexMap={}),this.markBatchInvalid()},ivModelBatch:function(r){r?Dr(G,d,r,L):(G=this.batchModelMap={},d=this.batchIndexMap={}),this.markBatchInvalid()},ivPolylineBatch:function(r){r?Dr(s,n,r,L):(s=this.polylineModelMap={},n=this.polylineIndexMap={}),this.markBatchInvalid()},ivWireframeBatch:function(r){r?Dr(A,V,r,L):(A=this.wireframeModelMap={},V=this.wireframeIndexMap={}),this.markBatchInvalid()},markBatchInvalid:function(){this._batchInvalid=!0},isBatchInvalid:function(){return this._batchInvalid},onUpdated:function(){this._batchInvalid=null},sort:function(r,K,B){var b=1<F.length;if(B=B&&1<J.length,b||B){for(var f,h,U,a,P=K[2],H=K[6],Y=K[10],S=K[14],_=K[3],e=K[7],o=K[11],x=K[15],T=0;T<2;T++){if(0===T){if(!B)continue;a=J}else{if(!b)continue;a=F}for(var t=0,p=a.length;t<p;t++)(U=(h=a[t].data)._position)?(f=U.x,h=h._54O,U=U.y,a[t].z=(P*f+H*h+Y*U+S)/(_*f+e*h+o*U+x)):a[t].z=0}B&&J.sort(function(r,K){var B=r.model3d;return B!==K.model3d?B?1:-1:r.z!==K.z?r.z-K.z:r.id-K.id}),b&&F.sort(r||oc)}}}},wq=Fr._RenderLists=function(b){var f={};function B(r,K){var B=f[r=r||"main"];return!B&&K?f[r]=new kq(b):B}return{init:function(){for(var r in f)f[r].init()},onUpdated:function(){for(var r in f)f[r].onUpdated()},get:B,push:function(r,K){return B(r.data.getRenderLayer(),!0).push(r,K)},each:function(r){for(var K in f)r(f[K])},lists:f}},vq=Fr.RenderTarget=function(r,K,B,b){var f,h=this;null!=K&&K.canvas?(f=K,K=B,B=b,b=arguments[4]):f=r.getGL(),b=b||{},b.cube?b.samples=0:b.samples=Math.min(r._glCapabilities.maxSamples,b.samples&&1<b.samples&&2===r._webGLVersion?b.samples:0),h.options=b,h.uuid=M.Math.generateUUID(),h.gv=r,h.init(r,f,b),h.format=b.format||6408,h.textureType=tq(r,b.textureType),h.generateMipmaps=!!b.generateMipmaps,h.depthInternalFormat=b.depthFormat||33189,b.samples&&!r._glCapabilities._maxSamplesChecked?h.setSize(f,K||1,B||1):h.setSize(f,K,B)},KK=(A.assign(Fr.RenderTarget.prototype,{isRenderTarget:!0,bind:function(r,K){var B,b,f,h=this.options;h.autoSize&&(B=(f=this.gv).getDevicePixelRatio(),b=f.getWidth()*B,f=f.getHeight()*B,this.setSize(r,b,f)),h.cube?f6(r,this.frame[K]):f6(r,this.options.samples?this._MSAAFbo:this.frame),r._renderTargetStack.push(this)},unbind:function(r){r._renderTargetStack.pop(),h6(r),this.options.samples&&(r.bindFramebuffer(36008,this._MSAAFbo),r.bindFramebuffer(36009,this.frame),r.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,16384,9728),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null))},isBinding:function(r){if(!(r=r.frameStack)||!r.length)return!1;var K=r[r.length-1];if(this.options.cube){for(var B=0;B<6;B++)if(this.frame[B]===K)return!0;return!1}return K===(this.options.samples?this._MSAAFbo:this.frame)},grabDepth:function(r){var K=this,B=this.gv.getGL();if(!B)return null;var b,f,h,U=K.options,a=U.samples;if(r&&!a)return K.depth;var P=K.depthInternalFormat,H=K.width,Y=K.height;return r?(f=(b=(b=B._grabDepthRboFrame)?b:B._grabDepthRboFrame={frame:B.createFramebuffer()}).depthRbo)||(f=b.depthRbo=B.createRenderbuffer()):(h=(b=(b=B._grabDepthTextureFrame)?b:B._grabDepthTextureFrame={frame:B.createFramebuffer()}).depthTexture)||(h=b.depthTexture=K.gv.createTexture({empty:!0,wrapS:U.wrapS||33071,wrapT:U.wrapT||33071,filter:9728})),b.width===H&&b.height===Y&&b.format===P||(f6(B,b.frame),r?(B.bindRenderbuffer(36161,f),B.renderbufferStorage(36161,P,H,Y),B.framebufferRenderbuffer(36160,36096,36161,f),B.bindRenderbuffer(36161,null)):(B.activeTexture(33984),A6(B,h),B.texImage2D(3553,0,P,H,Y,0,6402,36012===P?5126:33190===P?5125:5123,null),B.framebufferTexture2D(36160,36096,3553,h,0),A6(B,null),h._internalFormat=P),h6(B),b.width=H,b.height=Y,b.format=P),B.bindFramebuffer(36008,a?this._MSAAFbo:this.frame),B.bindFramebuffer(36009,b.frame),B.blitFramebuffer(0,0,K.width,K.height,0,0,K.width,K.height,256,9728),B.bindFramebuffer(36008,null),B.bindFramebuffer(36009,null),r?f:h},isCube:function(){return this.options.cube},init:function(r,K,B){var b=B.samples,f=B.cube,h=this.texture=K.createTexture(),U=f?34067:3553,h=(K.activeTexture(33984),K.bindTexture(U,h),K.texParameteri(U,10242,B.wrapS||33071),K.texParameteri(U,10243,B.wrapT||33071),b?9728:9729);if(K.texParameteri(U,10241,B.minFilter||h),K.texParameteri(U,10240,B.magFilter||h),K.bindTexture(U,null),f){this.depth=[],this.frame=[];for(var a=0;a<6;a++)this.depth[a]=K.createRenderbuffer(),this.frame[a]=K.createFramebuffer()}else this.depth=K.createRenderbuffer(),this.frame=K.createFramebuffer();this.assureTexture()},assureTexture:function(){this.gv.setTexture(this.uuid,this.texture,"default"),M.Default.setImage(this.uuid,null)},releaseTexture:function(){return this.release()},release:function(){var r=this,K=r.gv.getGL();if(r.gv.deleteTexture(this.uuid),r.options.cube)for(var B=0;B<6;B++)K.deleteRenderbuffer(r.depth[B]),K.deleteFramebuffer(r.frame[B]);else K.deleteRenderbuffer(r.depth),K.deleteFramebuffer(r.frame),r._MSAAFbo&&(K.deleteRenderbuffer(r._MSAARbO),K.deleteFramebuffer(r._MSAAFbo))},getUUID:function(){return this.uuid},getTexture:function(){return this.texture},getSize:function(){return[this.width,this.height]},setSize:function(r,K,B){var b=this;if(K=Math.round(K),B=Math.round(B),K&&B&&(b.width!==K||b.height!==B)){b.width=K,b.height=B;var f=36161,h=b.options.samples,U=b.options.cube,a=U?34067:3553;if(h){var P=b.gv._glCapabilities;if(!P._maxSamplesChecked){for(r.bindRenderbuffer(f,b.depth),r.getError();1<h&&(r.renderbufferStorageMultisample(f,h,b.depthInternalFormat,K,B),r.getError());)h=Math.floor(h>>1);h<=1&&(h=0,r.texParameteri(a,10241,b.options.minFilter||9729),r.texParameteri(a,10240,b.options.magFilter||9729),r.renderbufferStorage(f,b.depthInternalFormat,K,B)),P._maxSamplesChecked=!0,P.maxSamples=b.options.samples=h,r.bindRenderbuffer(f,H1)}}if(h&&(b._MSAAFbo||(b._MSAAFbo=r.createFramebuffer(),b._MSAARbO=r.createRenderbuffer()),r.bindRenderbuffer(f,b._MSAARbO),r.renderbufferStorageMultisample(36161,h,32856,K,B),f6(r,b._MSAAFbo),r.framebufferRenderbuffer(36160,36064,f,b._MSAARbO),r.framebufferRenderbuffer(36160,36096,f,b.depth),h6(r),r.bindRenderbuffer(f,null)),r.activeTexture(33984),r.bindTexture(a,b.texture),U)for(var H=0;H<6;H++)b.setupFrameBufferTextureAndDepth(r,b.frame[H],b.depth[H],34069+H);else b.setupFrameBufferTextureAndDepth(r,b.frame,b.depth,3553);b.generateMipmaps&&(2===gv._webGLVersion||D.isPOT(K)&&D.isPOT(B))&&(r.generateMipmap(a),P=b.options.minFilter||(h?9728:9729),r.texParameteri(a,10241,9728===P?9984:9987)),r.bindTexture(a,null)}},setupFrameBufferTextureAndDepth:function(r,K,B,b){var f,h=this.format,U=this.textureType;(f=this.options.data)&&(this.options.data=null),r.texImage2D(b,0,pq(this.gv,h,U),this.width,this.height,0,h,U,f||null),f6(r,K),r.framebufferTexture2D(36160,36064,b,this.texture,0),this.setupRenderBufferStorage(r,B),h6(r)},setupRenderBufferStorage:function(r,K){r.bindRenderbuffer(36161,K);var B=this.options.samples;B?r.renderbufferStorageMultisample(36161,B,this.depthInternalFormat,this.width,this.height):(r.renderbufferStorage(36161,this.depthInternalFormat,this.width,this.height),r.framebufferRenderbuffer(36160,36096,36161,K)),r.bindRenderbuffer(36161,null)},readPixels:function(r,K,B,b,f){var h,U=this.gv.getGL();f6(U,this.frame),h=5121===this.textureType?(f=f||new Uint8Array(4*B*b),5121):(f=f||new Float32Array(4*B*b),5126);try{U.readPixels(r,K,B,b,6408,h,f)}finally{h6(U)}return f},readPixelsAsync:function(r,K,B,b,f,h){if(!this.gv.isWebGL2())throw new Error("readPixelsAsync only work on WebGL2");var U,a,P,H,Y,S,_=this.gv.getGL();f6(_,this.frame),U=5121===this.textureType?(f=f||new Uint8Array(4*B*b),5121):(f=f||new Float32Array(4*B*b),5126);try{var e=n6(_),o=(_.bindBuffer(35051,e),_.bufferData(35051,f.byteLength,35041),_.readPixels(r,K,B,b,6408,U,0),_.bindBuffer(35051,null),_.fenceSync(37143,0));_.flush()}finally{h6(_)}a=_,P=o,H=0,Y=10,S=function(r){_.deleteSync(o),r&&(_.bindBuffer(35051,e),_.getBufferSubData(35051,0,f),_.bindBuffer(35051,null)),_.deleteBuffer(e),h(r?f:null)},function r(){var K=a.clientWaitSync(P,H,0);37149==K?S(!1):37147==K?R1(r,Y):S(!0)}()},toCanvas:function(r,K){var B,b=this.width,f=this.height,h=this.readPixels(0,0,b,f),U=((K=K||_.createElement("canvas")).width!==b&&(K.width=b),K.height!==f&&(K.height=f),(B=r?((X5=X5||_.createElement("canvas")).width!==b&&(X5.width=b),X5.height!==f&&(X5.height=f),X5.getContext("2d")):K.getContext("2d")).createImageData(b,f));if(h instanceof Float32Array){for(var a=h.byteLength/h.BYTES_PER_ELEMENT,P=new Uint8Array(a);0<=--a;){var H=h[a];H<0?H=0:1<H&&(H=1),P[a]=255*H}h=P}return U.data.set(h),B.putImageData(U,0,0),r&&(B=K.getContext("2d"),p9(B,{width:b,height:f,comps:[{scaleY:-1,type:"image",name:X5,rect:[0,0,b,f]}]},P1,0,0,b,f)),K}}),Fr.Interactor=function(r){this.gv=this.g3d=r}),zq=(h("Interactor",A,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()},fi:function(r){this.gv.fi(r)},startDragging:function(r){c9(this,r)}}),Fr.DefaultInteractor=function(r){vY(zq,this,[r])}),Nq=(h("DefaultInteractor",KK,{getState:function(){return this._62O},setState:function(r){this._62O=r},handle_contextmenu:function(r){x9(r)},handle_mousewheel:function(r){this.gv.handleScroll(r,r.wheelDelta/40)},handle_DOMMouseScroll:function(r){2===r.axis&&this.gv.handleScroll(r,-r.detail)},handle_keydown:function(r){this.gv.handleKeyDown(r)},handle_mousedown:function(r){this.handle_touchstart(r)},handle_touchstart:function(r){x9(r);var K=this,B=K.gv,b=J9(r),f=(h=B.getDataInfoDuringInteract(r))?h.data:H1,h=h?h.part:H1,U=B.sm(),a=yN(r),P=d9(r);B.setFocus(r)&&(K._62O=H1,K._57I=H1,K.pendingClickThrough=H1,K.__lastClientPoint__=V9(r),f?A9(r)?U.co(f)?U.rs(f):U.as(f):U.co(f)?f instanceof RO&&f.isClickThroughEnabled()&&J9(r)&&(K.pendingClickThrough=V9(r)):U.ss(f):b&&(A9(r)?B.isRectSelectable()&&(K._62O=Qu):K._57I=V9(r)),K._31Q&&(k9(K._31Q),delete K._31Q,delete K._32Q),K._62O||(B.isFirstPersonMode()&&(n9(r)||F9(r)||2<P?K._62O="pan":B.isMouseRoamable()||eN(r)?(K._62O="roaming",K.foward=a&&J9(r),K._32Q=OK(),K._31Q=y9(K.tick,K)):b||(K._62O="roaming")),K._62O||(b&&a&&Cq[h]?(K._62O=h,K.p3=f.p3()):b&&a&&l(f)&&B.isSelected(f)?B.isMovable(f)?(K._62O="move",K.p3=f.p3(),K.movedata=f):B._39Q(f)&&(K._62O="none"):eN(r)&&(2<P?K._62O="pan":2===P&&(K.dist=Ts(r),K._62O="pinch")))),K.point=B.lp(r),c9(K,r),s9(r)?B.handleDoubleClick(r,f,h):B.handleClick(r,f,h))},tick:function(){var r=this.gv,K=r._moveStep;this.point&&r.isWalkable()&&(this._32Q&&(K*=(OK()-this._32Q)/50),r.walk(this.foward?K:-K),this._32Q=OK(),this._31Q=y9(this.tick,this))},handle_mouseup:function(r){this.handle_touchend(r)},handle_touchend:function(r){var K=this._57I;K&&(R9(K,V9(r))<=1&&this.gv.sm().cs(),this._57I=H1),(K=this.pendingClickThrough)&&(R9(K,V9(r))<=1&&(K=this.gv.getDataInfoDuringInteract(r))&&K.data instanceof RO&&K.data.isClickThroughEnabled()&&(K=this.gv.getDataInfoDuringInteract(r,!0))&&(r.clickThrough=!0,this.gv.sm().ss(K.data)),this.pendingClickThrough=null)},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowTouchMove:function(K){var B,b,r=this,f=r.gv,h=r._62O,U=r.point,a=f.dm(),P=f.lp(K),H=P.x-U.x,Y=P.y-U.y,S=f.getWidth(),_=f.getHeight();if(S&&_){var e=V9(K),e=FP(f,e,r.__lastClientPoint__),e=R9({x:0,y:0},e),o=-h1*H/S,x=-h1*Y/_;if("roaming"===h)r.rotate(K,o/2,x/2);else if(h===nq||h===Aq||h===Vq)f._86O||a.beginTransaction(),f.fi({kind:f._86O?"betweenEditRotation":"beginEditRotation",event:K}),f._86O=1,f.sm().each(function(r){var K;l(r)&&f.isRotationEditable(r)&&(K=j1(o)>j1(x)?o:x,h===nq?r.setRotationX(r.getRotationX()+K):h===Aq?r.setRotationY(r.getRotationY()+K):h===Vq&&r.setRotationZ(r.getRotationZ()+K))});else if("move"===h||Cq[h]){if(h===Mq||h===Rq||h===lq)f._87O||a.beginTransaction(),f.fi({kind:f._87O?"betweenEditScale":"beginEditScale",event:K}),f._87O=1;else{if(!f._moving){if(e<Y1.touchMoveThreshold)return;a.beginTransaction()}f.fi({kind:f._moving?"betweenMove":"beginMove",event:K}),f._moving=1}var T,t,e=r.p3,a=f.getPositionInfo(e),p=J6(f),q=h===Gq?"x":h===dq?"y":h===sq?"z":h===Mq?"sx":h===Rq?"sy":h===lq?"sz":f.getMoveMode(K,r.movedata),H=H/S*a.width,Y=-1*Y/_*a.height,S=[p[0]*H,p[4]*H,p[8]*H],_=[p[1]*Y,p[5]*Y,p[9]*Y],a=S[0]+_[0],p=S[1]+_[1],S=S[2]+_[2],_=[e[0]+a,e[1]+p,e[2]+S],y=PA(f.getEye(),_,!0);if("xyz"===q?(T=_,f.moveSelection(a,p,S)):"xz"===q?(T=t6(f,e,[0,1,0],_))&&f.moveSelection(T[0]-e[0],0,T[2]-e[2]):"xy"===q?(T=t6(f,e,[0,0,1],_))&&f.moveSelection(T[0]-e[0],T[1]-e[1],0):"yz"===q?(T=t6(f,e,[1,0,0],_))&&f.moveSelection(0,T[1]-e[1],T[2]-e[2]):"x"===q||"sx"===q?(y[0]=0,(T=t6(f,e,y,_))&&(t=T[0]-e[0],"x"===q?f.moveSelection(t,0,0):f.sm().each(function(r){l(r)&&f.isSizeEditable(r)&&(B=r.getScaleX()+t/100,b=B/r.getScaleX(),r.setScaleX(B),n9(K)&&(r.setScaleY(r.getScaleY()*b),r.setScaleTall(r.getScaleTall()*b)))}))):"y"===q||"sy"===q?(y[1]=0,(T=t6(f,e,y,_))&&(t=T[1]-e[1],"y"===q?f.moveSelection(0,t,0):f.sm().each(function(r){l(r)&&f.isSizeEditable(r)&&(B=r.getScaleTall()+t/100,b=B/r.getScaleTall(),r.setScaleTall(B),n9(K)&&(r.setScaleY(r.getScaleY()*b),r.setScaleX(r.getScaleX()*b)))}))):"z"!==q&&"sz"!==q||(y[2]=0,(T=t6(f,e,y,_))&&(t=T[2]-e[2],"z"===q?f.moveSelection(0,0,t):f.sm().each(function(r){l(r)&&f.isSizeEditable(r)&&(B=r.getScaleY()+t/100,b=B/r.getScaleY(),r.setScaleY(B),n9(K)&&(r.setScaleX(r.getScaleX()*b),r.setScaleTall(r.getScaleTall()*b)))}))),!T)return;r.p3=T}else h===Qu?((a=r.div)||(a=r.div=CY(),gY(r.getView(),a),a.op=U,a.style.background=f.getRectSelectBackground()),f.fi({kind:f._rectSelecting?"betweenRectSelect":"beginRectSelect",event:K}),f._rectSelecting=1,a.rect=l9(a.op,P),L(a,a.rect)):"pinch"===h&&2===d9(K)?(f.fi({kind:f._pinching?"betweenPinch":"beginPinch",event:K}),f._pinching=1,t=Ts(K),f._lastZoomLP||(f._lastZoomLP=(S=(p=K).touches[0],p=p.touches[1],y=S.clientX,S=S.clientY,{x:(y+p.clientX)/2,y:(S+p.clientY)/2})),f.handlePinch(t,r.dist),r.dist=t):"pan"===h||n9(K)||F9(K)?r.pan(K,H,Y):"none"===h||f.isFirstPersonMode()||r.rotate(K,o,x);r.point=P}},pan:function(r,K,B){var b,f,h=this.gv;h.isPannable()&&(f=h.getWidth(),b=h.getHeight(),f&&b&&(f=K/f*(K=h.getCenterInfo()).width,B=-1*B/b*K.height,h.fi({kind:h._panning?"betweenPan":"beginPan",event:r}),h._panning=1,h.pan(-f,-B)))},rotate:function(r,K,B){var b=this.gv;b.isRotatable()&&(b.fi({kind:b._rotating?"betweenRotate":"beginRotate",event:r}),b._rotating=1,b.rotate(K,B))},handleWindowMouseUp:function(r){this.handleWindowTouchEnd(r)},handleWindowTouchEnd:function(r){var K,B,b,f,h,U=this,a=U.gv,P=a.dm(),H=U.div;H&&((K=a.getDatasInRect(H.rect)).isEmpty()||(B=a.sm(),b=B.toSelection(),f=n9(r),h=r.altKey,K.each(function(r){B.co(r)?f&&!h||b.remove(r):(!h||f&&h)&&b.add(r)}),B.ss(b)),O9(H)),a._moving&&(delete a._moving,a.fi({kind:"endMove",event:r}),a.onMoveEnded(),P.endTransaction()),a._panning&&(delete a._panning,a.fi({kind:"endPan",event:r}),a.onPanEnded()),a._rotating&&(delete a._rotating,a.fi({kind:"endRotate",event:r}),a.onRotateEnded()),a._86O&&(delete a._86O,a.fi({kind:"endEditRotation",event:r}),P.endTransaction()),a._87O&&(delete a._87O,a.fi({kind:"endEditScale",event:r}),P.endTransaction()),a._pinching&&(delete a._pinching,a.fi({kind:"endPinch",event:r}),a.onPinchEnded()),a._rectSelecting&&(delete a._rectSelecting,a.fi({kind:"endRectSelect",event:r}),a.onRectSelectEnded()),a._walking&&(delete a._walking,a.fi({kind:"endWalk",event:r}),a.onWalkEnded()),a._lastZoomLP=a._lastZoomHit=null,U.dist=U.point=U._62O=U.p3=U.movedata=U.div=U._57I=U.pendingClickThrough=U._32Q=U._31Q=U.foward=H1,U.__lastClientPoint__=H1}}),Fr.MapInteractor=function(r){vY(Nq,this,[r]),this._keepHorizon=!0,this._threshold=2,this._touchScaleThreshold=.05,this._touchRotateThreshold=.03,this._touchScaleCheckAccuracy=.01,this._panButton="right",this._minPhi=0,this._maxPhi=5*Math.PI/12}),uq=(h("MapInteractor",KK,{setUp:function(){Nq.superClass.setUp.call(this);var r=this.gv;this.__oldMinPhi__=r.getRotateMinPhi(),this.__oldMaxPhi__=r.getRotateMaxPhi(),r.setRotateMinPhi(this._minPhi),r.setRotateMaxPhi(this._maxPhi)},tearDown:function(){Nq.superClass.tearDown.call(this);var r=this.gv;r.setRotateMinPhi(this.__oldMinPhi__),r.setRotateMaxPhi(this.__oldMaxPhi__),delete this.__oldMinPhi__,delete this.__oldMaxPhi__},handle_contextmenu:function(r){x9(r)},handle_mousewheel:function(r){this.gv.handleScroll(r,r.wheelDelta/40)},handle_DOMMouseScroll:function(r){2===r.axis&&this.gv.handleScroll(r,-r.detail)},handle_keydown:function(r){this.gv.handleKeyDown(r)},handle_mousedown:function(r){this.handle_touchstart(r)},handle_touchstart:function(r){x9(r);var K,B,b,f=this.gv;f.setFocus(r)&&(K=(B=f.getDataInfoAt(r))?B.data:H1,B=B?B.part:H1,this.__lastClientPoint__=V9(r),b=this.editing={point:f.lp(r),data:K,part:B},eN(r)?b.touch=!0:(b.touch=!1,b.clickLeft=J9(r),F9(r)?b.pan=!0:b.pan="left"===this.panButton===b.clickLeft),K&&f._39Q(K)&&(b.preventDefault=!0),c9(this,r),s9(r)?f.handleDoubleClick(r,K,B):f.handleClick(r,K,B))},handle_mouseup:function(r){this.handle_touchend(r)},handle_touchend:function(r){},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowTouchMove:function(r){var K=this,f=K.gv,B=K.editing;if(B){var b=f.lp(r),h=B.point,U=b.x-h.x,h=b.y-h.y;if(!B.moved){if(Math.abs(U)<K.threshold&&Math.abs(h)<K.threshold&&!(r.touches&&1<r.touches.length))return;B.moved=!0}if(!B.preventDefault){B.point=b;var a,P,H,Y,S,_,e=B.part;if(Cq[e]){var b=B.data,o=f.dm(),x=f.getWidth(),T=f.getHeight(),t=-h1*U/x,p=-h1*h/T;if(e===nq||e===Aq||e===Vq){f._86O||o.beginTransaction(),f.fi({kind:f._86O?"betweenEditRotation":"beginEditRotation",event:r}),f._86O=1;var q=j1(t)>j1(p)?t:p;f.sm().each(function(r){l(r)&&f.isRotationEditable(r)&&(e===nq?r.setRotationX(r.getRotationX()+q):e===Aq?r.setRotationY(r.getRotationY()+q):e===Vq&&r.setRotationZ(r.getRotationZ()+q))})}else{var y,k,w,v,b=b.p3(),U=U/x*(N=f.getPositionInfo(b)).width,h=-1*h/T*N.height,z=[(N=J6(f))[0]*U,N[4]*U,N[8]*U],N=[N[1]*h,N[5]*h,N[9]*h],z=[b[0]+(z[0]+N[0]),b[1]+(z[1]+N[1]),b[2]+(z[2]+N[2])],N=PA(f.getEye(),z,!0);if(e===Mq||e===Rq||e===lq)f._87O||o.beginTransaction(),f.fi({kind:f._87O?"betweenEditScale":"beginEditScale",event:r}),f._87O=1,(y=t6(f,b,N,z))&&(I=0,e===Mq?k="X":e===Rq?(k="Tall",I=1):e===lq&&(k="Y",I=2),(w=["X","Y","Tall"]).splice(w.indexOf(k),1),v=n9(r),j=(y[I]-b[I])/100,f.sm().each(function(K){var r,B,b;l(K)&&f.isSizeEditable(K)&&(r=K["getScale"+k](),K["setScale"+k](B=r+j),v&&(b=B/r,w.forEach(function(r){K["setScale"+r](K["getScale"+r]()*b)})))}));else if(e===Gq||e===dq||e===sq){if(!f._moving){var u=V9(r),u=FP(f,u,K.__lastClientPoint__);if(R9({x:0,y:0},u)<Y1.touchMoveThreshold)return;o.beginTransaction()}f.fi({kind:f._moving?"betweenMove":"beginMove",event:r}),f._moving=1;var j,I=0;e===Gq?I=0:e===dq?I=1:e===sq&&(I=2),N[I]=0,(y=t6(f,b,N,z))&&(j=y[I]-b[I],(u=[0,0,0])[I]=j,f.moveSelection.apply(f,u))}}}else B.touch?2!==(o=r.touches.length)?K.pan(r,U,h):o<=1||(z=(N=r.touches)[0].clientX,y=N[0].clientY,u={x:(b=N[1].clientX)-z,y:(I=N[1].clientY)-y},o=B.lastCenter,N=Math.atan2(u.y,u.x),a=0,(H=B.theta)==H1?H=B.theta=N:(a=N-H,B.thetaStarted||Math.abs(a)>K.touchRotateThreshold?(B.thetaStarted=!0,B.theta=N):a=0),H=F*(y+I)/2/f.getHeight(),N=0,(P=B.phi)==H1?P=B.phi=H:(N=H-P,B.phiStarted||Math.abs(N)>K.touchRotateThreshold?(B.phiStarted=!0,B.phi=H):N=0),P=Math.sqrt(u.x*u.x+u.y*u.y),(H=B.vlen)?(u=z-o.x,S=y-o.y,_=b-o.x,o=I-o.y,u=Math.sqrt(u*u+S*S),S=Math.sqrt(_*_+o*o),(o=K._sign2(u-(_=H/2)))*(u=K._sign2(S-_))<0||0===o&&0===u?(Y=1,B.vlen=P):(Y=Y||P/H,B.scaleStarted||Math.abs(Y-1)>K.touchScaleThreshold?(B.vlen=P,B.scaleStarted=!0):Y=1)):(H=B.vlen=P,Y=1),1!==Y&&f.setZoom(Y),(N||a)&&K.rotate(r,a,-N),B.lastCenter={x:(b+z)/2,y:(I+y)/2}):B.pan?K.pan(r,U,h):(x=f.getWidth(),T=f.getHeight(),x&&T&&(t=-h1*U/x,p=-h1*h/T,K.rotate(r,t,p)))}}},_sign2:function(r){return Math.abs(r)<this._touchScaleCheckAccuracy?0:0<r?1:-1},handleWindowMouseUp:function(r){this.handleWindowTouchEnd(r)},handleWindowTouchEnd:function(r){var K,B,b=this.editing;this.editing=null,b&&(K=this.gv,b.moved||!b.clickLeft&&!b.touch?(K._panning=null,K._rotating=null,K.fi({kind:b.pan?"endPan":"endRotate",event:r})):(B=(B=(b=K.getDataInfoDuringInteract(r))&&b.data)instanceof RO&&B.isClickThroughEnabled()&&(b=K.getDataInfoDuringInteract(r,!0))?b.data:B)?K.sm().setSelection([B]):K.sm().clearSelection(),b=K.dm(),K._moving&&(delete K._moving,K.fi({kind:"endMove",event:r}),K.onMoveEnded(),b.endTransaction()),K._86O&&(delete K._86O,K.fi({kind:"endEditRotation",event:r}),b.endTransaction()),K._87O&&(delete K._87O,K.fi({kind:"endEditScale",event:r}),b.endTransaction()))},pan:function(r,K,B){var b=this.gv;if(b.isPannable()){var f=b.getWidth(),h=b.getHeight();if(f&&h){var U=b.getCenterInfo(),K=-K/f*U.width,f=+B/h*U.height,B=(b.fi({kind:b._panning?"betweenPan":"beginPan",event:r}),b._panning=1,this.keepHorizon);if(!(B=(h=this.editing.touch)&&r.touches&&1<r.touches.length||!h&&n9(r)?!B:B))return b.pan(K,f);(K||f)&&(h=[(U=J6(b))[0]*K,U[4]*K,U[8]*K],r=[U[1],0,U[9]],(B=Math.sqrt(r[0]*r[0]+r[2]*r[2]))&&(r=[r[0]/B*f,0,r[2]/B*f]),K=h[0]+r[0],U=h[1]+r[1],B=h[2]+r[2],f=b._center,h=b._eye,f[0]+=K,f[1]+=U,f[2]+=B,h[0]+=K,h[1]+=U,h[2]+=B,b.fp(hu,H1,h),b.fp(fu,H1,f))}}},rotate:function(r,K,B){var b,f,h=this.gv;h.isRotatable()&&(f=h._center,b=h._eye,b=PA(b,f),f=d1(u1(b[0]*b[0]+b[2]*b[2]),b[1]),B=x6(h,f+B)-f,h.fi({kind:h._rotating?"betweenRotate":"beginRotate",event:r}),h._rotating=1,h.rotate(K,B))}}),A.defineProperties(Nq.prototype,{panButton:{get:function(){return this._panButton},set:function(r){this._panButton=r}},minPhi:{get:function(){return this._minPhi},set:function(r){this.gv.setRotateMinPhi(this._minPhi=r)}},maxPhi:{get:function(){return this._maxPhi},set:function(r){this.gv.setRotateMaxPhi(this._maxPhi=r)}},keepHorizon:{get:function(){return this._keepHorizon},set:function(r){this._keepHorizon=r}},threshold:{get:function(){return this._threshold},set:function(r){this._threshold=r}},touchScaleThreshold:{get:function(){return this._touchScaleThreshold},set:function(r){this._touchScaleThreshold=r}},touchRotateThreshold:{get:function(){return this._touchRotateThreshold},set:function(r){this._touchRotateThreshold=r}}}),Fr.GlobeInteractor=function(e,r){function b(r){return e._81O=null,r=e.getHitPosition(r,e.getCenter(),S.copy(e.getEye()).sub(p.copy(e.getCenter())).toArray()),_.origin.copy(e.getEye()),_.direction.copy(r).sub(_.origin).normalize(),_.intersectEllipsoid(q)}function o(r,K){var B;t&&(B=Date.now(),t.deltaTime=t.lastTime?B-t.lastTime:1e3,t.lastTime=B,t.lastAxis=r,t.lastAngle=K),K&&(f.setFromAxisAngle(r,K),e.setEye(S.copy(e.getEye()).applyQuaternion(f).toArray()),e.setCenter(S.copy(e.getCenter()).applyQuaternion(f).toArray()),e.setUp(S.copy(e.getUp()).applyQuaternion(f).toArray()))}function x(r){return Math.abs(r)<.01?0:0<r?1:-1}vY(uq,this,[e]);var h,T=r.radius||6378137,a=this,t=null,f=(c5||((c5=CY()).style.border="",c5.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEyUlEQVRYR62XW0xcVRSG/58cmIG2HmstE9N4SX2xtVqBCISoFS/RmDSpKQSvTWNixUStQSqVyBQYJUGttrQVtYkPatuQPmhivMUHqbUBZ2itl1qjTzZpImNUZhDLsUeWWXgOOd2cgcGyk3mYs/de69trr70uxP8YIlJKMi0i9wIgyf0iEiM5PFdxzGeDiBQAuB7AjQBuALCN5NcGQDmANgBfeL8UyYnZ5M8KICJ3AXgAwAlfOMl/VHAQwPtveYAKuQLA2yQ/ngliRgAR2QogA2AvSdcUZAIE50VEYR4BsIDkC7kgQgFE5GIAuwDsJnkk1+aZAPw9IqLX1gjgcZK/m7KmAXjK4wBaSf4ZplxEIgCuA3Cz3gSAfgDHSf6dY/0FAJ4D0G5ChAEcAPBwmHIRqXNd90nLsiocx/k+k8n8oK/Atu2rIpHIStd1v7QsawfJd0Ouywawh6T609Q4B8C788NhZnddt29sbGxBd3f39q6urtNhJ43H48uam5u3lJSUjFiWdV8IxE0Aqki+6M9NAXjefjnJXsOZogBGBgYGttbU1Hw427PS+cHBwbVVVVUJAItJOoa8xwD8RPIT/T4J4L3zfQAeNL1dRMZra2ur+/v7/8pHub+mvr7+wr6+vs8KCgoWGABFAN4EsEHjhA9QBeA2ks8HF6vZk8nkQL4nNwGTyeTa8vLycsuy7jcg1Mk/IpnyAZoBaOQ6FHg+ddlsdqNt201zObm5NpvN7ly0aNHrJN8LyL4FwGqSr/gAOrnej3C60HXdw/F4PJ7L4fKFSiQSl7W0tLQVFRWtCQDoNRwguZ6aWABcorE9sEDf+QjJ1fkqmmmdiHwHoCToXyKiceR0rkhY5TjOq9FoVLPdeY/x8fG+SCSySe/cFKYWCFOyPJ1Or4zFYh3nrR3A8PBwe2lp6TcAfg4DmBYwAFyRTqdXxWKx9nkE+DYUIEyBiFQ6jvNaNBq9Zz4AZruCGIBlJI8ZXpolee18AORwwgoAp/xnqMmjPuilZ8+ePZRIJNo7OztD436+YB0dHZe2trY+W1hYWGsccD/JOh/gKQBHSWpanRwicnc2m91k2/bmfJWFrRsdHd29cOHCXSTfD8i+FcA1JHcEQ/HtJDVnTw3XdfcPDQ0dra6unto8F5hUKrWurKxslWVZG4L7RGQbgA9IDgWT0VsANprJaGJi4kxDQ8OagwcPjsxFeWNj49Le3l6N91qMTA2vmNnr6fovGXkmvxPAlST3hGz4LZVKbausrMzLEnryioqKNpJLzCpJRJ4AcJLkp6rHLEieBjBA8rB5Wtd1942NjS3p6el5qa2t7VSYNdThmpqaWoqLi38xze4dUku4CpLb/f1hJZnWBY+SzJpKRGSdV5LVOI5zIpPJnNQ1tm2viEQiV7uue8SyrJeDDhew8GIAO0me4w9hABdp8ahNBkktyacNr+Qu84pSndfX81VY6e6dXJV3AoiT/CMoMFcyUogeAG+Q/DyX8+VZlqvZHwKw2VQ+zQdCTL4FwBkPZFrJPUtjoildG5PC4J2bOvJpze7QWhHAj4HWbBImpDXTQsPvH5cDeMf39lxWnBXAU6TNqcZu7fn0lyB53GhOdf6ZQHN6bF6a0xxOuJTkrwbA5LdcJ831/V8SOUYQxYGhRwAAAABJRU5ErkJggg==)"),new FH),S=new e1,p=new e1,P=new e1,_=new nH,U="number"==typeof T?{x:T,y:T,z:T}:T,q={center:new e1(0,0,0),radius:U};a._showCrossIcon=function(r){gY(a.getView(),c5),L(c5,{x:r.clientX-16,y:r.clientY-16,width:32,height:32})},a._hideCrossIcon=function(){O9(c5)},a._scrollImpl=function(r,K){(t={point:e.lp(r),screen:V9(r),hit:b(r),type:"right"}).hitNormalize=t.hit?t.hit.clone().normalize():new e1,r={clientX:t.screen.x,clientY:t.screen.y+10*K},a._handleMoveImpl(r),a._endMoveImpl(r)},a._startMoveImpl=function(r){h&&(h.stop(!0),h=null),(t={point:e.lp(r),screen:V9(r),hit:b(r)}).hitNormalize=t.hit?t.hit.clone().normalize():new e1,eN(r)?1===r.touches.length?t.hit&&(t.type="left"):2===r.touches.length&&(t.type="touch2"):(J9(r)?t.hit&&(t.type="left"):G9(r)?t.type="right":F9(r)&&t.hit&&(t.type="middle"),!t.hit||"right"!==t.type&&"middle"!==t.type||a._showCrossIcon(r)),t.type&&c9(a,r)},a._handleMoveImpl=function(r){if(t)switch(t.type){case"left":return a._handleLeft(r);case"right":return a._handleRight(r);case"middle":return a._handleMiddle(r);case"touch2":return a._handleTouch2(r)}},a._endMoveImpl=function(r){var B,b,f;t&&(this._hideCrossIcon(),"left"!==t.type&&"middle"!==t.type||(B=t.lastAngle/(t.deltaTime||30)*1e3,b=t.lastAxis,f=t.lastTime,h=N9({action:function(){var r=Date.now(),K=(r-f)/1e3;f=r,B*=Math.pow(Math.abs(a.decelerationRate),3*K),Math.abs(B)<.01?(B=0,h&&h.stop()):o(b,B*K)},duration:5e3})),t=null)},a._handleLeft=function(r){if(!t.finished){var K=V9(r),B=function(r,K){e._81O=null,_.origin.copy(e.getEye());for(var B,b,f=e.getCenter(),h=S.copy(e.getEye()).sub(p.copy(e.getCenter())).toArray(),U=1,a=16,P=0,H=1,Y={x:0,y:0};a--;){if(Y.x=K.x+(r.x-K.x)*U,Y.y=K.y+(r.y-K.y)*U,B=e.getHitPosition(Y,f,h),_.direction.copy(B).sub(_.origin).normalize(),(b=_.intersectEllipsoid(q))&&1===U)return{hit:b};b?P=U:H=U,U=(P+H)/2}return{hit:b,out:U<1}}(K,t.lastScreen||t.screen);if(t.lastScreen=K,!B.hit)return t.finished=!0,void a._endMoveImpl(r);(K=B.hit).normalize();var b=t.hitNormalize,f=Math.acos(K.dot(b));o(K=K.cross(b).normalize(),f),B.out&&(t.finished=!0,a._endMoveImpl(r))}},a._handleRight=function(r){var K,B=(t.lastScreen||t.screen).y;(r=(t.lastScreen=V9(r)).y-B)&&(B=Math.min(.5,r*a.scaleSpeed),S.copy(e.getEye()),r=(r=t.hit)||S.clone().divide(U).normalize().multiply(U),p.copy(S).lerp(r,B),e.setEye(p.toArray()),S.copy(e.getUp()),p.normalize(),r=S.clone().cross(p).normalize(),P.copy(e.getCenter()),P.sub(r.multiplyScalar(P.dot(r))),e.setCenter(P.toArray()),t.hit&&(B=b(t.screen),r=t.hitNormalize,B&&(B.normalize(),K=Math.acos(B.dot(r)),B=B.cross(r).normalize(),K&&o(B,K))))},a._handleTouch2=function(r){var K,B,b,f,h,U,a,P,H,Y,S,_;2===r.touches.length&&(K=(r=r.touches)[0].clientX,B=r[0].clientY,_={x:(b=r[1].clientX)-K,y:(r=r[1].clientY)-B},Y=t.lastCenter,U=Math.atan2(_.y,_.x),f=0,(h=t.theta)==H1?h=t.theta=U:(f=U-h,t.thetaStarted||.03<Math.abs(f)?(t.thetaStarted=!0,t.theta=U):f=0),h=Math.sqrt(_.x*_.x+_.y*_.y),(U=t.vlen)?(S=K-Y.x,P=B-Y.y,H=b-Y.x,Y=r-Y.y,S=Math.sqrt(S*S+P*P),P=Math.sqrt(H*H+Y*Y),(Y=x(S-(H=U/2)))*(S=x(P-H))<0||0===Y&&0===S?(a=1,t.vlen=h):(a=a||h/U,t.scaleStarted||.05<Math.abs(a-1)?(t.vlen=h,t.scaleStarted=!0):a=1)):(U=t.vlen=h,a=1),_=p.copy(e.getEye()).clone(),1!==a&&e.setEye(_.setLength((_.length()-T)/a+T).toArray()),f&&o(_.normalize(),f),t.lastCenter={x:(b+K)/2,y:(r+B)/2})},a._handleMiddle=function(r){var r=V9(r),K=t.screen,B=((t.screen=r).y-K.y)/180*Math.PI*a.rollSpeed,b=(p.copy(e.getCenter()).sub(S.copy(e.getEye())).normalize(),S.copy(e.getUp()).cross(p).normalize(),p.copy(e.getEye()).sub(t.hit).applyAxisAngle(S,B).add(t.hit),p.clone()),f=(p.copy(e.getCenter()).sub(t.hit).applyAxisAngle(S,B).add(t.hit),p.clone()),h=p.copy(e.getUp()).applyAxisAngle(S,B).clone(),U=!1,B=(0<B&&(P.copy(h),p.copy(f).sub(b).normalize(),S.copy(b).multiplyScalar(-1).normalize(),0<S.dot(P)-p.dot(P)&&(U=!0)),U||0<=P.copy(t.hit).sub(b).dot(t.hitNormalize)&&(U=!0),U||(e.setEye(b.toArray()),e.setCenter(f.toArray()),e.setUp(h.toArray())),-(r.x-K.x)/180*Math.PI*a.rotateSpeed);o(t.hitNormalize,B)}}),jq=(h("GlobeInteractor",KK,{handle_contextmenu:function(r){x9(r)},handle_mousewheel:function(r){this._scrollImpl(r,r.wheelDelta/40)},handle_DOMMouseScroll:function(r){2===r.axis&&this._scrollImpl(r,-r.detail)},handle_keydown:function(r){this.gv.handleKeyDown(r)},handle_mousedown:function(r){this.handle_touchstart(r)},handle_touchstart:function(r){x9(r);var K,B,b=this.gv;b.setFocus(r)&&((K=(B=b.getDataInfoAt(r))?B.data:H1)&&b.isInteractive(K)||this._startMoveImpl(r),B=B?B.part:H1,s9(r)?b.handleDoubleClick(r,K,B):b.handleClick(r,K,B))},handle_mouseup:function(r){this.handle_touchend(r)},handle_touchend:function(r){},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowTouchMove:function(r){this._handleMoveImpl(r)},handleWindowMouseUp:function(r){this.handleWindowTouchEnd(r)},handleWindowTouchEnd:function(r){this._endMoveImpl(r)}}),A.defineProperties(uq.prototype,{rotateSpeed:{get:function(){return this._rotateSpeed||.3},set:function(r){this._rotateSpeed=r}},rollSpeed:{get:function(){return this._rollSpeed||.1},set:function(r){this._rollSpeed=r}},scaleSpeed:{get:function(){return this._scaleSpeed||.002},set:function(r){this._scaleSpeed=r}},decelerationRate:{get:function(){return this._decelerationRate||.04},set:function(r){this._decelerationRate=r}}}),function(r){return[((r|=2147483648)>>16&255)/255,(r>>8&255)/255,(255&r)/255,(r>>24&255)/255]}),Iq=function(r){this.gv=r,this.gv.pickColorMap={_pickIdUsed:2e3}},Lq=(BA(Iq,A,{_iv:!0,iv:function(){this._iv=!0},get:function(r,K,B){if(this.validate(),!this.gv.getGL())return H1;var b,f,h=this._resolution,U=this.renderTarget,a=Math.round(r.x*h),P=Math.ceil(r.width*h),H=Math.ceil(r.height*h),r=U.getSize()[1]-Math.round(r.y*h)-H,Y=z1(P/2),S=U.readPixels(a,r,P,H),_=0,e=S.length,o=K?H1:new $,x=K?H1:{};if(K){for(;_<=Y;_++)for(var T=Y-_,t=Y+_,p=T;p<=t;p++)for(var q=T;q<=t;q++)if((p===T||p===t||q===T||q===t)&&(b=this.info(S,4*(p*P+q)))&&(!B||!1!==B(b)))return b}else for(;_<e;_+=4)!(b=this.info(S,_))||B&&!1===B(b)||x[(f=b.data)._id]||(o.add(f),x[f._id]=f);return o},info:function(r,K){return this.gv.pickColorMap[(r[K]<<16)+(r[K+1]<<8)+r[K+2]+((127&r[K+3])<<24)]},getResolution:function(){return this._resolution},dispose:function(){m6(this.gv,this.renderTarget),this.renderTarget=null},validate:function(r){var K,B,b,f,h=this.gv,U=h.getGL();U&&(B=this._resolution=h._pickerResolution*h.getDevicePixelRatio(),K=Math.round(B*h.getWidth()),B=Math.round(B*h.getHeight()),(b=this.renderTarget)?b.setSize(U,K,B):this.renderTarget=b=new vq(h,K,B),this._iv&&(f=this._iv=!1,h._40Q.each(function(r){!f&&r.isBatchInvalid()&&(f=!0)}),f&&h.updateScene(),b.bind(U),U.clear(16384),h.overlappingBox.clear(),h.setViewport(U,0,0,K,B),h.renderPickScene(),b.unbind(U)))}}),function(r){this.gv=r}),Jq=(BA(Lq,A,{gap:0,size:0,_42:function(r){var K,B=this,b=B.gv,f=b._gridGap,h=b._gridSize;if(b._gridVisible){if(B.gap!==f||B.size!==h){for(var U=[],a=b._gridSize/2,P=f*a,H=0;H<2*a+1;H++){var Y=6*H,S=6*(2*a+1)+Y;U[Y]=-P,U[1+Y]=0,U[2+Y]=H*f-P,U[3+Y]=P,U[4+Y]=0,U[5+Y]=H*f-P,U[S]=H*f-P,U[1+S]=0,U[2+S]=-P,U[3+S]=H*f-P,U[4+S]=0,U[5+S]=P}B.vs=new aA(U),B.gap=f,B.size=h}Sr(b),Z6(r),X6(r),(h=!b._fogDisabled)&&((K=x1.for(r).directUniforms()).uFog=!1),Q6(r,1,b._gridColor,b._buffer.vs,B.vs),rr(r,0,B.vs.length/3,1),h&&(K.uFog=!0),c6(r),g6(r)}else B.vs=B.gap=B.size=H1}}),function(r){this.gv=r}),Fq=(BA(Jq,A,{_42:function(r){var K,B,b,f,h=this.gv,U=h._buffer.vs,a=h._axisXColor,P=h._axisYColor,H=h._axisZColor,Y=h._originAxisVisible,S=h._centerAxisVisible;(Y||S)&&(B=D1?4:6,Sr(h),Z6(r),X6(r),Y&&(b=h.getCenterInfo(),f=b1(b.width,b.height)/5,Q6(r,1.5,a,U,new aA([0,0,0,f,0,0,Y=.8*f,K=.05*f,0,Y,0,K,Y,-K,0,Y,0,-K,Y,K,0,0,0,0,0,f,0,K,Y,0,0,Y,K,-K,Y,0,0,Y,-K,K,Y,0,0,0,0,0,0,f,K,0,Y,0,K,Y,-K,0,Y,0,-K,Y,K,0,Y])),rr(r,0,2,1),rr(r,1,6,B),Q6(r,H1,P),rr(r,7,2,1),rr(r,8,6,B),Q6(r,H1,H),rr(r,14,2,1),rr(r,15,6,B)),S&&(Y=(K=h._center)[0],B=K[1],S=K[2],b=h.getPositionInfo(K),f=b1(b.width,b.height)/20,Q6(r,1.5,a,U,new aA([Y,B,S,Y+f,B,S,Y,B,S,Y,B+f,S,Y,B,S,Y,B,S+f])),rr(r,0,2,1),Q6(r,H1,P),rr(r,2,2,1),Q6(r,H1,H),rr(r,4,2,1)),c6(r),g6(r))}}),function(r){this.gv=r}),Gq="edit_tx",dq="edit_ty",sq="edit_tz",nq="edit_rx",Aq="edit_ry",Vq="edit_rz",Mq="edit_sx",Rq="edit_sy",lq="edit_sz",Cq={},mq=(Cq[Gq]=101,Cq[dq]=102,Cq[sq]=103,Cq[nq]=104,Cq[Aq]=105,Cq[Vq]=106,Cq[Mq]=107,Cq[Rq]=108,Cq[lq]=109,BA(Fq,A,{_42:function(r){var K,B,b,f,h,U,a,P,H,Y,S,_,e,o,x=this,T=x.gv,t=T.sm().ld();!t||!T.isEditable(t)||T.isEditHelperDisabled()||!l(t)||T.isFirstPersonMode()&&(T.isMouseRoamable()||$1)||(Sr(T),K=T.isMovable(t),B=T.isRotationEditable(t),b=T.isSizeEditable(t),f=T._axisXColor,h=T._axisYColor,U=T._axisZColor,a=T._editSizeColor,_=t.p3(),T=(P=T.isOrtho()?(P=T.getCenterInfo(),b1(P.width,P.height)/8):R9(T.getEye(),_)/10)/(T.isPicking()?5:10),H=.4*(P*=.7),Y=_[0],S=_[1],_=_[2],o=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],K&&x._17O(r,t,Gq,f,o,[Y,S-T,_,Y+P,S-T,_,Y+P,S,_,Y+P,S,_,Y,S,_,Y,S-T,_,Y,S-T,_+T,Y+P,S-T,_+T,Y+P,S-T,_,Y+P,S-T,_,Y,S-T,_,Y,S-T,_+T]),e=Y+P,b&&x._17O(r,t,Mq,a,o,[e,S-T,_,e+H,S-T,_,e+H,S,_,e+H,S,_,e,S,_,e,S-T,_,e,S-T,_+T,e+H,S-T,_+T,e+H,S-T,_,e+H,S-T,_,e,S-T,_,e,S-T,_+T]),e+=H,B&&x._17O(r,t,nq,f,o,[e,S-T,_,e+H,S-T,_,e+H,S,_,e+H,S,_,e,S,_,e,S-T,_,e,S-T,_+T,e+H,S-T,_+T,e+H,S-T,_,e+H,S-T,_,e,S-T,_,e,S-T,_+T]),o=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],K&&x._17O(r,t,dq,h,o,[Y,S,_,Y,S+P,_,Y-T,S+P,_,Y-T,S+P,_,Y-T,S,_,Y,S,_,Y,S,_,Y,S,_-T,Y,S+P,_-T,Y,S+P,_-T,Y,S+P,_,Y,S,_]),e=S+P,b&&x._17O(r,t,Rq,a,o,[Y,e,_,Y,e+H,_,Y-T,e+H,_,Y-T,e+H,_,Y-T,e,_,Y,e,_,Y,e,_,Y,e,_-T,Y,e+H,_-T,Y,e+H,_-T,Y,e+H,_,Y,e,_]),e+=H,B&&x._17O(r,t,Aq,h,o,[Y,e,_,Y,e+H,_,Y-T,e+H,_,Y-T,e+H,_,Y-T,e,_,Y,e,_,Y,e,_,Y,e,_-T,Y,e+H,_-T,Y,e+H,_-T,Y,e+H,_,Y,e,_]),o=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],K&&x._17O(r,t,sq,U,o,[Y,S,_,Y,S,_+P,Y,S-T,_+P,Y,S-T,_+P,Y,S-T,_,Y,S,_,Y,S-T,_,Y-T,S-T,_,Y-T,S-T,_+P,Y-T,S-T,_+P,Y,S-T,_+P,Y,S-T,_]),e=_+P,b&&x._17O(r,t,lq,a,o,[Y,S,e,Y,S,e+H,Y,S-T,e+H,Y,S-T,e+H,Y,S-T,e,Y,S,e,Y,S-T,e,Y-T,S-T,e,Y-T,S-T,e+H,Y-T,S-T,e+H,Y,S-T,e+H,Y,S-T,e]),e+=H,B&&x._17O(r,t,Vq,U,o,[Y,S,e,Y,S,e+H,Y,S-T,e+H,Y,S-T,e+H,Y,S-T,e,Y,S,e,Y,S-T,e,Y-T,S-T,e,Y-T,S-T,e+H,Y-T,S-T,e+H,Y,S-T,e+H,Y,S-T,e]))},_17O:function(r,K,B,b,f,h){var U=this.gv,a=U._buffer,P=(H=x1.for(r)).directUniforms(),H=H.directAttribs();U._picking&&(U.pickColorMap[U=Cq[B]]={data:K,part:B},P.uFixPickReverseColor=jq(U)),W6(r,H1,!0,H1,!0,H1,!1),P.uDiffuse=b,H.aPosition=Br(r,a.vs,new aA(h)),H.aNormal=Br(r,a.ns,new aA(f)),X6(r),rr(r,0,12),c6(r),$6(r)}}),M.Raycaster=function(r){this.gv=r,this.maxTriangleTest=1/0,this.backfaceCulling=!0,this.triangleTestEpsilon=1e-9}),Dq=(Cs("Raycaster",A,{getTriangleTestEpsilon:function(){return this.triangleTestEpsilon},setTriangleTestEpsilon:function(r){return this.triangleTestEpsilon=r,this},getBackfaceCulling:function(){return this.backfaceCulling},setBackfaceCulling:function(r){return this.backfaceCulling=r,this},intersect:function(r){var K=this.gv.getDataAt(r);return K?this.intersectObject(r,K):null},intersectObjects:function(K,r,B){var b,f,h,U,a=this,P=1/0,H=K.origin||(new e1).fromArray(a.gv.getEye()),Y=a.maxTriangleTest,S=[],_=(r.forEach(function(r){B&&!1===B(r)||!1!==r.s("intersect")&&S.push(r)}),H.distanceToSquared2([0,0,0]));return S.sort(function(r,K){return(r.p3?H.distanceToSquared2(r.p3()):_)-(K.p3?H.distanceToSquared2(K.p3()):_)}),a.countTriangles=0,S.forEach(function(r){a.countTriangles>Y||(b=a.intersectObject(K,r))&&(f=H.distanceToSquared(b.world))<P&&(h=r,U=b,P=f)}),a.countTriangles=0,{data:h,intersect:U}},intersectObjectAndRecordTriangle:function(r,K){return this._4GQ=!0,r=this.intersectObject(r,K),this._4GQ=!1,r},intersectLastTriangle:function(r,K){if((r=this.getRay(r)).applyMatrix4(K.inverseMatrix),!(r=r.intersectPlane(K.plane)))return null;var B=RH.uvIntersection(r,K.p1,K.p2,K.p3,K.uv1.clone(),K.uv2.clone(),K.uv3.clone());return{world:r.clone().applyMatrix4(K.matrixWorld),local:r.clone(),uv:B}},getRay:function(r){if(r instanceof nH)return r;var K,B=this.gv,r=B.unproject(r),b=new e1,f=B.getEye(),h=new e1;return B.isOrtho()?(K=new e1(f),h.copy(B.getCenter()).sub(K).normalize(),B=b.copy(r).sub(K).dot(h),b.copy(h).setLength(-B).add(K.copy(r))):(b.copy(f),h.copy(r).sub(b).normalize()),new M.Math.Ray(b,h)},intersectObject:function(r,K){return this._intersectObjectImpl(this.getRay(r),K)},_intersectObjectImpl:(O5=new Z,Q5=new Z,E5=new nH,rQ=new e1,KQ=new e1,BQ=new e1,bQ=new e1,fQ=new e1,hQ=new e1,UQ=new e1,aQ=new e1,PQ=new i,HQ=new i,YQ=new i,SQ=new e1,_Q={vs:km,is:wm,uv:vm},(eQ=Nm.slice(0)).push("csg"),function(r,K){var B,b,f,h,U,a,P,H,Y,S,_,e,o,x=this.gv.getData3dUI(K),T=((G=K.mat||x.mat)?O5.fromArray(G):O5.identity(),Q5.getInverse(O5),E5.copy(r).applyMatrix4(Q5),"body");if(!(G=(G=(G=!(G=x.shapeModel)&&(K instanceof M.Polyline||K instanceof M.Edge)&&x.lineShapeModel?x.lineShapeModel:G)||Zm(x))||(M.CSGNode&&K instanceof M.CSGNode||M.CSGShape&&K instanceof M.CSGShape?(f=!0,[x.left,x.front,x.right,x.back,x.top,x.bottom,x.csg]):K instanceof M.Node&&!(K instanceof M.Shape)?(B=!0,_Q):(b=!0,[x.left,x.front,x.right,x.back,x.top,x.bottom]))))return console.log("Can not find shape model."),null;YY(G)||(G=[G]);var t,p,q,y,k,w,v,z=1/0,N=["","top_","bottom_"],u=!1,j=this.backfaceCulling,I=this.triangleTestEpsilon,L=[];for(zr(G,x,L),h=0,U=L.length;h<U;h++)if((p=L[h])&&(w=p.matrix,p=p.mesh))for(a=0,P=N.length;a<P;a++)if(S=p[(q=N[a])+"vs"],_=p[q+"is"],e=p[q+"uv"]||p[q+"tuv"],S){if(y=p[q+"boundingBox"]){if(!(v=E5.intersectBox(y)))continue;if(E5.origin.distanceTo(v)>z)continue;k=!1}else p[q+"boundingBox"]=y=new M.Math.Box3,k=!0;for(H=0,Y=_?_.length:S.length/3;H<Y;H+=3)this.countTriangles++,_?(KQ.fromArray(S,3*_[H]),BQ.fromArray(S,3*_[H+1]),bQ.fromArray(S,3*_[H+2])):(KQ.fromArray(S,3*H),BQ.fromArray(S,3*(H+1)),bQ.fromArray(S,3*(H+2))),w&&(KQ.applyMatrix4(w),BQ.applyMatrix4(w),bQ.applyMatrix4(w)),k&&(y.expandByPoint(KQ),y.expandByPoint(BQ),y.expandByPoint(bQ)),(o=E5.intersectTriangle(KQ,BQ,bQ,j,I,rQ))&&(t=E5.origin.distanceTo(o))<z&&(z=t,fQ.copy(o),hQ.copy(KQ),UQ.copy(BQ),aQ.copy(bQ),""!==q?T=q.slice(0,-1):B?T=Nm[Math.floor(H/6)]:b?T=Nm[h]:f&&(T=eQ[h]),e&&(u=!0,_?(PQ.fromArray(e,2*_[H]),HQ.fromArray(e,2*_[H+1]),YQ.fromArray(e,2*_[H+2])):(PQ.fromArray(e,2*H),HQ.fromArray(e,2*(H+1)),YQ.fromArray(e,2*(H+2)))))}if(!isFinite(z))return null;var J,F,r=fQ.clone().applyMatrix4(O5),K=this._4GQ,G=(u&&(K&&(F={inverseMatrix:Q5.clone(),matrixWorld:O5.clone(),p1:hQ.clone(),p2:UQ.clone(),p3:aQ.clone(),uv1:PQ.clone(),uv2:HQ.clone(),uv3:YQ.clone(),plane:(new M.Math.Plane).setFromCoplanarPoints(hQ,UQ,aQ)}),J=RH.uvIntersection(fQ,hQ,UQ,aQ,PQ,HQ,YQ)),xc()),x=xc(hQ.applyMatrix4(O5),UQ.applyMatrix4(O5),aQ.applyMatrix4(O5)),r=((K=0<E5.direction.dot(G))&&(G.multiplyScalar(-1),x.multiplyScalar(-1)),{world:r,local:fQ.clone(),worldNormal:x,normal:G,uv:J,part:T,backface:K});return F&&(r.triangleInfo=F),r})}),Fr.Data3dUI=function(b,f){this.gv=b,this.s=function(r,K,B){return(K=K==H1?B:K)==H1?f.getStyle(r):W(K,f,b)},this.data=f}),iq=(BA(Dq,A,{I3d:!0,ms_icons:1,_iv:!0,_cacheBoundingBox:P1,iv:function(){this._iv=!0},update:function(r,K,B){var b=this,f=b.data;if(r||(K=(r=b.gv).getGL(),B=r._40Q),b.needValidate(K)&&r.isVisible(f)){var h,U,a,P=f._id,H=f._47Q?null:b.s("batch"),Y=f.getRenderLayer(),S=(Y=B.get(Y,!0)).batchIndexMap,_=Y.batchModelMap,e=r.getBrightness(f),o=e!=H1&&1!==e,_=ir(S,_,f,H,r),H=H?r.getBatchInfo(H)||MK:H1,x=b.validate(_,H);if(_&&(!H.ms||!H.ms.length)&&(h=(H=S[P]).size=_.vs.length/3-H.begin,a=_.rs))for(e=o?e:1,U=0;U<h;U++)a.push(e);(S=r.getWireframeGeometry(f))?Wr(r,f,S):l(f)&&(P=r.getWireframe(f))&&Wr(r,f,P),b.labelInfo=b.label2Info=b.noteInfo=b.note2Info=b._38o=H1,b._24O(du,"getLabel"),b._24O(su,"getLabel2"),b._26O(nu,"getNote"),b._26O(Au,"getNote2"),b._15O(),b.interactiveInfo=r.isInteractive(f)?{}:H1,!Y.push(this,!0)&&f instanceof RO&&b._46Q(K),!1!==x&&(b._iv=!1)}else B.push(this,!1)},clearWireframeGeometryCache:function(){this.gv.invalidateCachedWireframe(this.data)},invalidateWireframe:function(){var r=this.data,K=r.getRenderLayer();(K=this.gv._40Q.get(K))&&K.ivWireframeBatch(r)},_46Q:function(r,K){var B,b,f,h,U=this.data,a=this.gv;a.isVisible(U)&&(h=U._id,b=(B=a._40Q.get(U._renderLayer,!0)).batchIndexMap[h],f=B.polylineIndexMap[h],h=B.wireframeIndexMap[h],(b||f||h)&&(K=K==H1?er(r,a.pickColorMap,a.isSelectable(U),this,Gu,!0):K)&&($r(K,b,B.batchModelMap),$r(K,f,B.polylineModelMap),$r(K,h,B.wireframeModelMap)))},_42:function(r,K,B){var b=this,f=b.data,h=b.gv;if(h.isVisible(f)){var U,a,P,H,Y,S,_,e,o,x,T=h._picking;if(T)U=h.pickColorMap;else{if(h.isTransparentMask(f)||h.isReflecting(r)&&!1===f.s("3d.reflectable"))return;U=P1}if(Dq.getTitle===P1)for(var t in Dq.getTitle=0,Y1)if(t.length===su.length+1&&t[su.length]===Un[4].toUpperCase()&&t[su.length-1]===Un[su.length+1].toUpperCase()){Dq.getTitle=FY;break}if(!Dq.getTitle||k1[su.length+2]){if(Dq.getHead===P1)for(var t in Dq.getHead=0,HN){var p="box-sizing";6===t.length&&t[0]===Un[4]&&t[3]===p[0]&&t[4]===p[1]&&t[5]===p[2]&&(Dq.getHead=rY)}if(!Dq.getHead||k1[su.length]){if(Dq.getTitle2===P1)for(var t in Dq.getTitle2=0,HN)6===t.length&&t[0]===Cn[1].toUpperCase()&&t[1]==="uv"[0]&&(Dq.getTitle2=EK);Dq.getTitle2&&!k1[en.length]||h[Ju[0]+an[0]]&&h[Ju[0]+an[0]].enable&&!k1[Tu[0]]||(h.isTransmissionEnabled()&&b.s("shape3d.transmission")&&!T&&(a=r._renderTargetStack[r._renderTargetStack.length-1])&&!a.isCube()&&(r._transmissionRTT||(r._transmissionRTT=new vq(h,0,0,{autoSize:!0})),a.unbind(r),h.renderModel(r._transmissionRTT,null,null,{type:"blitScreen",transparent:h._45Q,image:a.texture}),a.bind(r)),a=f._id,e=(P=h._40Q.get(f._renderLayer,!0)).batchIndexMap,o=P.batchModelMap,H=h.isSelectable(f),_=!(S=!1),e=e[a],T&&(x=er(r,U,H,b,Gu,e))&&!h._45Q&&($r(x,e,o),$r(x,P.polylineIndexMap[a],P.polylineModelMap),$r(x,P.wireframeIndexMap[a],P.wireframeModelMap)),e||(S||(S=!0,_=O6(r,h,f)),_&&(T||!h._45Q||h._oitEnabled||h.isReflecting(r)||r._blooming||!b.s("transparent.separate")?b.drawBody(r,K,B):(o=x1.for(r).directState().cullFace,f._forceSingleFace=2,o.frontFace=f._flipSide?2305:2304,b.drawBody(r,K,B),f._forceSingleFace=1,o.frontFace=f._flipSide?2304:2305,b.drawBody(r,K,B),f._forceSingleFace=P1,o.frontFace=2305))),h.isLabelVisible(f)&&((Y=b.labelInfo)&&(T&&er(r,U,H,b,du),S||(S=!0,O6(r,h,f)),b._28O(Y,du,B)),(Y=b.label2Info)&&(T&&er(r,U,H,b,su),S||(S=!0,O6(r,h,f)),b._28O(Y,su,B))),h.isNoteVisible(f)&&((Y=b.noteInfo)&&(T&&er(r,U,H,b,nu),S||(S=!0,O6(r,h,f)),b._29O(Y,nu,B)),(Y=b.note2Info)&&(T&&er(r,U,H,b,Au),S||(S=!0,O6(r,h,f)),b._29O(Y,Au,B))),(Y=b._38o)&&(S||(S=!0,O6(r,h,f)),b._99O(r,Y,U,H,B)),S&&((x=x1.for(r).directUniforms()).uBrightness=1,x.uClipDirection=0,x1.for(r).directState().cullFace.frontFace=2305,r._blooming&&(x.blackout=!1)))}}}},_formatClipUniforms:function(r,K,B){switch(r){case"uv.right":r=7;break;case"uv.left":r=8;break;case"left":r=2;break;case"top":r=3;break;case"bottom":r=4;break;case"front":r=5;break;case"back":r=6;break;default:r=1}var b,f,h;return r%2==0&&(K=1-K),7===r||8===r?(b=this.shapeModel)&&b.internalUvScale&&(K*=b.internalUvScale):B instanceof M.Shape?(b=B.s3(),f=B.p3(),h=B.getAnchor3d(),K=r<3?(K-h.x)*b[0]+f[0]:r<5?(K-h.y)*b[1]+f[1]:(K-h.z)*b[2]+f[2]):(K-=.5,(h=B._clipPercentageTranform)&&(K=(K+h[0])*h[1])),[r,K]},prepare:function(){var r=this,K=r.data;if(!(K instanceof RO)){var B,b,f,h=r.gv,U=h.getGL(),a=K._id,P=r.s("batch"),H=h._batchIndexMap,Y=h._batchModelMap,S=h.getBrightness(K),_=S!=H1&&1!==S;if(r.needValidate(U)){U=ir(H,Y,K,P,h),Y=P?h.getBatchInfo(P)||MK:H1;if(r.validate(U,Y),U&&(!Y.ms||!Y.ms.length)&&(B=(P=H[a]).size=U.vs.length/3-P.begin,f=U.rs))for(S=_?S:1,b=0;b<B;b++)f.push(S);l(K)&&((Y=h.getWireframeGeometry(K))?Wr(h,K,Y):(H=h.getWireframe(K))&&Wr(h,K,H)),r.labelInfo=r.label2Info=r.noteInfo=r.note2Info=r._38o=H1,r._24O(du,"getLabel"),r._24O(su,"getLabel2"),r._26O(nu,"getNote"),r._26O(Au,"getNote2"),r._15O(),r.interactiveInfo=h.isInteractive(K)?{}:H1,r._iv=!1}}},dispatchBoundingBoxChanged:function(){this._cacheBoundingBox=P1},getBoundingBox:function(r){if(this._cacheBoundingBox)return this._cacheBoundingBox;oQ||(oQ={vs:km,is:wm,uv:vm},xQ=new e1,TQ=new e1,tQ=new e1,pQ=new e1,qQ=new e1);var K,B,b,f,h,U,a,P,H=this,Y=H.data,S=H.shapeModel;if((S=(S=!S&&(Y instanceof M.Polyline||Y instanceof M.Edge)&&H.lineShapeModel?H.lineShapeModel:S)||Zm(H))||(M.CSGNode&&Y instanceof M.CSGNode||M.CSGShape&&Y instanceof M.CSGShape?(isCSG=!0,S=[H.left,H.front,H.right,H.back,H.top,H.bottom,H.csg]):Y instanceof M.Node&&!(Y instanceof M.Shape)?S=oQ:(H.left||H.front||H.right||H.back||H.top||H.bottom)&&(S=[H.left,H.front,H.right,H.back,H.top,H.bottom])),!S)return P1;YY(S)||(S=[S]);var _,e,o,x,T,t,p=["","top_","bottom_"],q=new M.Math.Box3,y=!1,k=(H._needRecoverPosition?(pQ.set.apply(pQ,Y.p3()),t=Y.s3(),qQ.set(1/(t[0]||1),1/(t[1]||1),1/(t[2]||1))):(pQ.set(0,0,0),qQ.set(1,1,1)),[]);for(zr(S,H,k),K=0,B=k.length;K<B;K++)if((_=k[K])&&(e=_.mesh))for(o=_.matrix,b=0,f=p.length;b<f;b++)if(a=e[(T=p[b])+"vs"],P=e[T+"is"],a){if(!(x=e[T+="boundingBox"]))for(e[T]=x=new M.Math.Box3,h=0,U=P?P.length:a.length/3;h<U;h+=3)P?(xQ.fromArray(a,3*P[h]),TQ.fromArray(a,3*P[h+1]),tQ.fromArray(a,3*P[h+2])):(xQ.fromArray(a,3*h),TQ.fromArray(a,3*(h+1)),tQ.fromArray(a,3*(h+2))),o&&(xQ.applyMatrix4(o),TQ.applyMatrix4(o),tQ.applyMatrix4(o)),xQ.sub(pQ).multiply(qQ),TQ.sub(pQ).multiply(qQ),tQ.sub(pQ).multiply(qQ),xQ.isNaN()||x.expandByPoint(xQ),TQ.isNaN()||x.expandByPoint(TQ),tQ.isNaN()||x.expandByPoint(tQ);q.expandByBox(x),y=!0}return y?(this._cacheBoundingBox=q,A.freeze(q),A.freeze(q.min),A.freeze(q.max),r||mr(H.gv,Y),q):P1},needValidate:function(r){return this._iv},validate:function(r,K){},_16O:function(r,K,B,b,f,h,U,a,P){return _A},drawBody:function(r,K,B){},dispose:function(){this.disposeGLContent();var r,K=this._pickId;K&&(r=this.gv.pickColorMap)[K]&&delete r[K]},getBodyColor:function(r){var K=this.data;return this.gv.getBodyColor(K)||(r?K.getStyle(r):H1)},disposeGLContent:function(){this._cachedTextures&&this.gv.invalidateCachedTexture(this.data)},getCachedTexture:function(r){var K=this._cachedTextures;return K?K[r||"main"]:null},setCachedTexture:function(r,K){return(this._cachedTextures||(this._cachedTextures={}))[K||"main"]=r},invalidateCachedTexture:function(r){var K=this._cachedTextures;if(!K)return!1;var B,b=!1;for(B in K){var f=K[B];f&&(b=!0,r.deleteTexture(f))}return this._cachedTextures={},b},invalidateCachedGeometry:function(){},_24O:function(r,K){var B,b,f=this.data,h=this.gv,U=this.s,a=h[K](f);a!=H1&&(B=U(r+".scale"),b=U(r+".max"),K=(h=this[r+"Info"]={label:a,textureScale:U(r+".texture.scale"),color:h[K+"Color"](f),font:U(r+".font"),align:U(r+".align"),background:h[K+"Background"](f)}).rect=WY(h,a),0<b&&b<K.width&&(h.labelWidth=K.width,K.width=b),K.x=K.y=0,K.width*=B,K.height*=B,h.mat=this._16O(U(r+".autorotate"),U(r+".position"),K,U(r+".face"),U(r+".t3"),U(r+".r3"),U(r+".rotationMode")),f=K.width/2,a=K.height/2,h.vs=new aA([-f,a,0,-f,-a,0,f,-a,0,f,a,0]),K.width/=B,K.height/=B)},_26O:function(r,K){var B,b=this.data,f=this.gv,h=this.s,U=f[K](b);U!=H1&&(B=h(r+".scale"),U=(f=this[r+"Info"]={note:U,textureScale:h(r+".texture.scale"),expanded:h(r+".expanded"),font:h(r+".font"),color:h(r+".color"),align:h(r+".align"),borderWidth:h(r+".border.width"),borderColor:h(r+".border.color"),background:f[K+"Background"](b)}).expanded?(K=h(r+".max"),(b=WY(f,U)).width+=6,b.height+=2,0<K&&K<b.width&&(f.labelWidth=b.width,b.width=K),{x:-b.width/2,y:-8-b.height,width:b.width,height:b.height+8}):{x:-6,y:-18,width:12,height:18},f.mat=this._16O(h(r+".autorotate"),h(r+".position"),H1,h(r+".face"),h(r+".t3"),h(r+".r3"),h(r+".rotationMode")),f.rect=U,1!==B&&((U=v9(U)).x*=B,U.height*=B,U.y=-U.height,U.width*=B),K=U.x,b=U.y,h=U.width,r=U.height,f.vs=new aA([K,-b,0,K,-b-r,0,K+h,-b-r,0,K+h,-b,0]))},eachShapeModel:function(r,K){var B,b,f,h,U=this,a=U.data,P=(K=(K=(K=!(K=K||U.shapeModel)&&(a instanceof M.Polyline||a instanceof M.Edge)&&U.lineShapeModel?U.lineShapeModel:K)||Zm(U))||(a instanceof M.Node&&!(a instanceof M.Shape||M.CSGNode&&a instanceof M.CSGNode)?cubeSM:[U.left,U.front,U.right,U.back,U.top,U.bottom,U.csg]),YY(K)||(K=[K]),[]);for(zr(K,U,P),B=0,b=P.length;B<b;B++)(h=P[B])&&(f=h.mesh)&&(h=h.matrix,gm(f),f.vs&&r(f.vs,f.is,f.ns,f.uv,h),f.top_vs&&r(f.top_vs,f.top_is,f.top_ns,f.top_uv,h),f.bottom_vs&&r(f.bottom_vs,f.bottom_is,f.bottom_ns,f.bottom_uv,h),f.from_vs&&r(f.from_vs,f.from_is,f.from_ns,f.from_uv,h),f.to_vs&&r(f.to_vs,f.to_is,f.to_ns,f.to_uv,h));return!0},_28O:function(r,K,B){var b,f,h;B(this.s(K+".transparent"))&&(B=r.rect,b=r.textureScale,h=B.width*b,f=B.height*b,1<=h&&1<=f&&(h=RN(h,f),1!==b&&(h.translate(B.x,B.y),h.scale(b,b),h.translate(-B.x,-B.y)),GP(h,r),h.restore(),qr(this,K,r.mat,r.vs,!0)))},_29O:function(r,K,B){var b,f,h,U,a;B(this.s(K+".transparent"))&&(B=r.rect,b=r.textureScale,f=B.x,h=B.y,a=B.width*b,U=B.height*b,1<=a&&1<=U&&(B.x=B.y=0,a=RN(a,U),1!==b&&a.scale(b,b),dP(a,r),a.restore(),B.x=f,B.y=h,qr(this,K,r.mat,r.vs,!1)))},_99O:function(r,K,B,b,f){if(K){var h,U=this.gv,a=this.data,P=U._buffer,H=U._1O,Y=K.icons,S=x1.for(r).directAttribs();for(h in Y){var _=Y[h],e=K.rects[h];if(e&&f(W(_.transparent,a,U))){U._picking&&er(r,B,b,this,h);var o=W(_.shape3d,a,U),x=o?[o]:W(_.names,a,U),T=x?x.length:0,t=W(_.textureScale,a,U)||1,p=W(_.light,a,U);p==H1&&(p=!!o),W6(r,W(_.blend,a,U),p,W(_.opacity,a,U),W(_.reverseFlip,a,U),W(_.reverseColor,a,U),W(_.reverseCull,a,U));for(var q=0;q<T;q++){var y,k,w,v=x[q],z=e[q];pr(this,z.mat),o?mm(U,a,Zm(this,o),this):(v=g(v))&&(y=z.width*t,k=z.height*t,1<=y&&1<=k&&(w=RN(y,k),p9(w,v,W(_.stretch,a,U),0,0,y,k,a,U),w.restore(),d6(U,r,VN,H),X6(r,H,W(_.discardSelectable,a,U),P.uv,pm),S.aPosition=Br(r,P.vs,z.vs),S.aNormal=fr(r,P.ns,qm,H1),Ur(r,P.is,ym),Kr(r,0,ym.length),c6(r,H))),Hr(U)}$6(r)}}}}}),Fr.Node3dUI=function(r,K){vY(iq,this,[r,K])}),Zq=(BA(iq,Dq,{_16O:function(r,K,B,b,f,h,U,a,P){var H,Y,S=this.data,_=S.getFinalScale3d(),e=((S.hasOwnProperty("_anchor")||S.hasOwnProperty("_anchorElevation"))&&(H=[-((H=S.getAnchor3d()).x-.5)*_[0],-(H.y-.5)*_[1],-(H.z-.5)*_[2]]),S.s("part.boundingBox")&&(e=this.getBoundingBox(!0))&&(Y=e.max.clone().sub(e.min),e=e.max.clone().add(e.min).divideScalar(2),(H=H||[0,0,0])[0]+=e.x*_[0],H[1]+=e.y*_[1],H[2]+=e.z*_[2],_[0]*=Y.x,_[1]*=Y.y,_[2]*=Y.z),Tr(K,_,B,b,a,P));return H&&(e[0]+=H[0],e[1]+=H[1],e[2]+=H[2]),tr(SA(),e,S.p3(),b,f,h,U,r,S.getFinalRotation3d(),S.getRotationMode())},clear:function(){var r=this;r.faceMat=r.mat=r.shapeModel=r.left=r.right=r.front=r.back=r.top=r.bottom=r.csg=H1},needValidate:function(r){return this._iv?(this._validateFrameId=r._renderInfo.frame,!0):!(!this.data._47Q||(r=r._renderInfo.frame,this._validateFrameId===r))&&(this._validateFrameId=r,!0)},invalidateUnstableWireframe:function(){this.data._47Q&&this.invalidateWireframe()},validate:function(r,K){var B,b,f,h=this,U=h.gv,a=h.data,P=h.shapeName=h.s(In),H=Zm(h,P),Y=(h._updateAutoRotation(),h._updateFixSize2d(),h._updateOverlapping(),h.dispatchBoundingBoxChanged(),h.invalidateUnstableWireframe(),wA(a,U.getMat(a),!H||h.s("shape3d.scaleable"))),S=(a.appendAnchorMatrix3d(Y),H!==h.shapeModel);h.clear(),h.mat=a.mat=Y,a._flipSide=Z.determinantOfArray(Y)<0,!H&&P||(P=null,(h.shapeModel=H)&&H.model3d&&((b=a.s("3d.clip.direction"))&&a.s("3d.clip.percentage")&&(f=H.position,B=H.scale,(f||B)&&(b="left"===b||"right"===b?0:"front"===b||"back"===b?2:1,P=[f?-f[b]:0,B?1/B[b]:1])),S&&H.playAutomatically&&!a.isAnimationPlaying()&&a.playAnimation()),a._clipPercentageTranform=P,r?H?K.instanced?U.batchInstancedModel(a,H,h,h.getBodyColor(),[Y],r):Or(U,a,H,h,h.getBodyColor(),[Y],r):(f=Yr(Y),K.instanced?U.batchInstancedFace(a,r,K,Y,f):Bm(U,a,r,K,Y,f)):H||(h._cubeUvs=null,h.vf(ru,0),h.vf(Ku,16),h.vf(Q1,8),h.vf(E1,24),h.vf(Bu,32),h.vf(bu,40)))},_updateAutoRotation:(MQ=new lH,RQ=new Z,lQ=new e1,CQ=new e1,mQ=new e1,function(){var r=this.data,K=this.s("autorotate")||this.s("shape3d.autorotate");if(K){var B=this.gv;if(lQ.copy(this.s("shape3d.autorotate.up")||B._up),CQ.copy(B._eye).sub(mQ.copy(B._center)),"string"==typeof K){for(var b=0,f=K.length;b<f;b++)CQ[K[b]]=0;B=CQ.normalize().dot(mQ.copy(lQ).normalize()),1-Math.abs(B)<1e-5&&(K.indexOf("x")<0?CQ.x+=1e-4:K.indexOf("y")<0?CQ.y+=1e-4:K.indexOf("z")<0&&(CQ.z+=1e-4))}RQ.lookAtDirection(CQ,lQ),MQ.set(0,0,0,r.getRotationMode(),!0).setFromRotationMatrix(RQ),(B=r._dynamicRotation)&&Math.abs(B[0]-MQ.x)<1e-5&&Math.abs(B[1]-MQ.y)<1e-5&&Math.abs(B[2]-MQ.z)<1e-5||(r._dynamicRotation=[MQ.x,MQ.y,MQ.z])}else r._dynamicRotation&&delete r._dynamicRotation}),_updateFixSize2d:function(){var r,K,B,b,f,h,U=this.data,a=this.s("fixSizeOnScreen")||this.s("shape3d.fixSizeOnScreen");a?(B=this.gv,r=wA(U,B.getMat(U)),h=xA([0,0,0],r),h=B.toViewPosition(h),isNaN(h.x)||isNaN(h.y)||(K=xA([1,0,0],r),K=B.toViewPosition(K),r=xA([0,1,0],r),B=B.toViewPosition(r),r=K.x-h.x,K=B.y-h.y,r&&K&&(B=U._dynamicScale3d||[1,1,1],h=g(U.s("shape3d.image")),0<a[0]&&(b=a[0]),0<a[1]&&(f=a[1]),b&&f||(a=0<a?a:1,b=b||(DA(h,U)||U.getWidth())*a,f=f||(iA(h,U)||U.getTall())*a),h=Math.abs(r/b),a=Math.abs(K/f),Math.abs(h-1)<.001&&Math.abs(a-1)<.001||(U._dynamicScale3d=[B[0]/h,B[1]/a,B[2]])))):U._dynamicScale3d&&delete U._dynamicScale3d},_updateOverlapping:function(){var r=this.s("hide.overlapping.group");if(r){for(var K,B=this.gv,b=this.data,f=wA(b,B.getMat(b)),h=1/0,U=1/0,a=-1/0,P=-1/0,H=(b=b.getAnchor3d()).x,Y=b.y,S=b.z,_=0;_<8;_++){if(K=xA([(_>>2)-H,(_>>1&1)-Y,(1&_)-S],f),K=B.toViewPosition(K),isNaN(K.x)||isNaN(K.y))return;h=Math.min(h,K.x),a=Math.max(a,K.x),U=Math.min(U,K.y),P=Math.max(P,K.y)}this._rectOverlapping=B.overlappingBox.isOverlapping(r,{x:h,y:U,w:a-h,h:P-U})}else this._rectOverlapping&&(this._rectOverlapping=P1)},getVectorDynamicSize:function(){var b,f,h,U,a,P,r,K,B,H,Y=this.s("shape3d"),S=this.data;if("billboard"===Y||"plane"===Y||(K=S._currentCubeElementId)!=H1)return b=this.gv,f=wA(S,b.getMat(S)),r=S.getAnchor3d(),h=.5-r.x,U=.5-r.y,a=.5-r.z,P=Math.min(this.s("vector.dynamic.maxsize"),b._glCapabilities.maxTextureSize)/b.getDevicePixelRatio(),r=function(r,K){r[0]+=h,r[1]+=U,r[2]+=a,K[0]+=h,K[1]+=U,K[2]+=a;var r=b.toViewPosition(xA(r,f)),K=b.toViewPosition(xA(K,f)),B=r.x-K.x,r=r.y-K.y;return Math.min(P,Math.sqrt(B*B+r*r))},"billboard"===Y?(B=r([-.5,0,0],[.5,0,0]),H=r([0,-.5,0],[0,.5,0])):"plane"===Y?(B=r([-.5,0,0],[.5,0,0]),H=r([0,0,-.5],[0,0,.5])):S._currentCubeElementId!=H1&&(Y=3*wm[K+1],S=3*wm[K],K=3*wm[K+2],B=r([km[Y],km[1+Y],km[2+Y]],[km[K],km[1+K],km[2+K]]),H=r([km[Y],km[1+Y],km[2+Y]],[km[S],km[1+S],km[2+S]])),[B,H]},vf:function(r,K){if(this.gv.getFaceVisible(this.data,r)){(r=yr(this,r)).mat&&(this.faceMat=!0);var B=r.uv;if(B)for(var b=(b=this._cubeUvs)||(this._cubeUvs=new aA([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0])),f=0;f<8;f++)b[K+f]=B[f];return r}},_billboardInView:(dQ=[-.5,-.5,0,-.5,.5,0,.5,-.5,0,.5,.5,0],sQ=[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,.5],nQ=new AH,AQ=new e1,VQ=new Z,function(r){if(!this.mat)return!0;var K=this.gv.getFrustum(),B="billboard"===r?dQ:sQ;nQ.makeEmpty(),VQ.fromArray(this.mat);for(var b=0,f=B.length;b<f;b+=3)nQ.expandByPoint(AQ.fromArray(B,b).applyMatrix4(VQ));return K.intersectsBox(nQ)}),drawBody:function(r,K,B){var b=this;if(b._rectOverlapping)return!0;var f=b.shapeModel;if(f||!b.shapeName){if(("billboard"===(U=b.s("shape3d"))||"plane"===U)&&!b._billboardInView(U))return!0;var h,U=b.gv,a=b.data,P=U._cube,H=x1.for(r).directAttribs();if(f&&f.model3d)b.s(Jn)&&b.gv._prefabRenderer.render(r,f,b.data,b.mat);else{if(Sr(U,b.mat),!(!r._picking&&b.s("shape3d.reflector")||b.s("effect.flow")))if(f)mm(U,a,f,b,b.getBodyColor(),B);else for(H.aPosition=Br(r,P.vs,H1),H.aNormal=Br(r,P.ns,H1),hr(r,P.is),h=0;h<6;h++)b._18O(r,Nm[h],6*h,B,!1);if(Hr(U),b.faceMat)for(h=0;h<6;h++)b._18O(r,Nm[h],6*h,B,!0)}}},_18O:function(r,K,B,b,f){var h,U,a,P,H,Y,S,_,e,o=this[K];o&&(h=this.data,!(P=(U=this.gv)._picking?null:o.material)&&!b(o.transparent)||f&&!o.mat||!f&&o.mat||(h._currentCubeElementId=B,(b=h.s("polygonOffset"))&&M6(r,b),P?(P={mesh:{vs:km,is:wm,ns:zm,uv:o.uv?this._cubeUvs:vm,_complete_:!0},drawRange:[B,6],mat:P},h._currentFaceLightMask=o.light?h.s("light.mask"):0,U._prefabRenderer.render(r,P,h,f?o.mat:null),h._currentFaceLightMask=null,P=U._cube,(a=x1.for(r).directAttribs()).aPosition=Br(r,P.vs,H1),a.aNormal=Br(r,P.ns,H1),hr(r,P.is)):(f&&Sr(U,o.mat),a=x1.for(r).directUniforms(),P=U.getTexture(o.texture,h,K),K=o.uv,H=o.uvScale,Y=o.uvOffset,S=o.uvRotation,_=o.uvAnchor,e=o.discardSelectable,P?K?X6(r,P,e,U._buffer.uv,this._cubeUvs,Y,H,S,_):X6(r,P,e,U._cube.uv,H1,Y,H,S,_):X6(r),W6(r,o.blend,o.light,o.opacity,o.reverseFlip,o.reverseColor,h._forceSingleFace||o.reverseCull),a.uDiffuse=o.color||T1["color.empty"],Kr(r,B,6),$6(r),c6(r,P),f&&Hr(U)),b&&R6(r),h._currentCubeElementId=null))},disposeGLContent:function(){iq.superClass.disposeGLContent.apply(this,arguments),this.data.s("shape3d.reflector")&&(m6(this.gv,this._reflectorRenderTarget),this._reflectorRenderTarget=null,this._reflectNormal=null)},drawReflector:(yQ=new e1,kQ=new e1,wQ=new lH,vQ=new Z,zQ=new e1,NQ=new e1,uQ=new e1,jQ=new e1,IQ=new Z,LQ=new Z,JQ=new sH,FQ=new GH,GQ=new GH,function(r){var K=this,B=(K._reflectorInfo=null,K.data);if(B._reflecting)return!1;var b=K.gv;if(b._picking)return!1;if(b._camera&&!b._camera.isLayerVisible(B.getRenderLayer()))return!1;var f,h,U=b._camera||b,a=B instanceof CO,P=B.s("shape3d.reflector.ratio"),H=K._reflectorRenderTarget,Y=b._canvas.width*P,S=b._canvas.height*P;if(1!==P&&(f=(f=b.getViewport(r))&&v9(f)),H?H.setSize(r,Y,S):H=K._reflectorRenderTarget=new Fr.RenderTarget(b,r,Y,S),a?(h=B.getPointsMatrix3d().getElements(),(P=B.p3())[1]+=(1-B.getAnchorElevation())*B.getTall(),yQ.copy(xA(P,h)),(Y=K._matWithExtraction)&&(h=Y)):yQ.copy(B.p3()),kQ.copy(U.getEye()),vQ.makeRotationFromEuler(wQ.set(B.r3(),B.getRotationMode(),!0)),!K._reflectNormal){if(a&&B.getThickness()<0){if(!K.shapeModel||!K.shapeModel.top_vs)return!1;_={vs:K.shapeModel.top_vs,ns:K.shapeModel.top_ns}}else{if(!(_=Zm(K,K.s("shape3d"))))return!1;!_.ns&&_.length&&(_=_[0])}if(!_.ns||!_.vs)return!1;K._reflectNormal=[_.ns[0],_.ns[1],_.ns[2]],K._reflectorModel={model3d:!0,mesh:{pos:_.vs},mat:{type:"reflector",cacheKey:"reflector"}}}if(zQ.copy(K._reflectNormal),zQ.applyMatrix4(vQ),NQ.subVectors(yQ,kQ),0<NQ.dot(zQ))return!1;NQ.reflect(zQ).negate(),NQ.add(yQ),uQ.copy(U.getCenter()).negate().add(yQ),uQ.reflect(zQ).negate(),uQ.add(yQ),jQ.copy(U.getUp()),jQ.reflect(zQ);var S=b._camera,Y=0<(P=b)._tempCameraQueue.length?P._tempCameraQueue.pop():new M.Camera,_=(b.getCamera(Y),(b._camera=Y).p3(NQ.toArray()),Y.lookAt(uQ.toArray(),jQ.toArray()),b._18Q=H1,H.bind(r),b.setViewport(r,0,0,H.width,H.height),B.s("shape3d.reflector.background"));_?(T=l6(r,!0),C6(r,_)):C6(r,[0,0,0,1]),x1.for(r).glState.depth.mask=!0,r.clear(16640);var P=(U=B.s("shape3d.reflector.clip"))===P1?.003:U,U=F6(b),e=J6(b),P=(JQ.setFromNormalAndCoplanarPoint(zQ,yQ.add(zQ.clone().multiplyScalar(P))),JQ.applyMatrix4(LQ.fromArray(e)),FQ.set(JQ.normal.x,JQ.normal.y,JQ.normal.z,JQ.constant),LQ.fromArray(U).getInverse(LQ),GQ.set(Math.sign(FQ.x),Math.sign(FQ.y),1,1).applyMatrix4(LQ),FQ.multiplyScalar(2/FQ.dot(GQ)),B._reflecting=!0,B.s("shape3d.reflector.shadow")),e={renderAxis:!1,renderEdit:!1,renderGrid:!1};if("disabled"===P?(e.renderShadowMap=!1,e.renderShadow=!1):"scene"===P?e.renderShadowMap=!1:e.useReflectorSelfShadowMap=!0,Y.setProjectMatrix(U),b.renderSky(),U[2]=FQ.x-U[3],U[6]=FQ.y-U[7],U[10]=FQ.z-U[11],U[14]=FQ.w-U[15],Y.setProjectMatrix(U),Y.s("camera.renderSky",!1),b.renderScene(e),IQ.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),IQ.multiply(LQ.fromArray(b._projectMatrix)),IQ.multiply(LQ.fromArray(b._viewMatrix)),_&&C6(r,T),H.unbind(r),b._tempCameraQueue.push(Y),b._18Q=H1,b._camera=S,(P=B.s("shape3d.reflector.blur"))&&(U=b.getPostProcessingModule("Blur"))&&U.drawImpl(r,H,P,3<=P,B.s("shape3d.reflector.blur.iterations")),(e=b.getPostProcessingModule("Glitch"))&&e.enable&&e.onlyReflector&&(H=e._42(r,H)),f&&b.setViewport(r,f[0],f[1],f[2],f[3]),!1===B.s("shape3d.reflector.visible"))return Tc(b,B),!0;var o,x,T=(_=K._reflectorModel).mat;return T.tDiffuse=H.texture,T.color=DN(B.s("shape3d.reflector.color")||"rgb(128,128,128)"),T.textureMatrix=IQ.toArray(),T.modelMatrix=a?h:wA(B),T.viewMatrix=J6(b),T.projectionMatrix=F6(b),(Y=this.s("shape3d.transparent"))&&(x=(o=x1.for(r).glState).depth.mask,o.depth.mask=!1),b.renderModel(_,{clear:!1,restoreViewport:!1}),Y&&(o.depth.mask=x),Tc(b,B),!0})}),function(r,K){vY(Zq,this,[r,K])}),gq=(BA(Zq,iq,{drawBody:function(r){}}),function(r,K){vY(gq,this,[r,K])}),Wq=(BA(gq,Dq,{_25Q:1,validate:function(r,K){var B=this,b=B.s;if(b(In)!==Tu||b("batch")!=H1||!B.info||B._geometryVersion!==B.data._geometryVersion){var f=B.gv,h=B.data,U=b("edge.width"),a=h._40I,P=h._41I;if(B._geometryVersion=h._geometryVersion,B.shapeModel=B.info=B.lineShapeModel=H1,a&&P){var H=h.isLooped(),Y=b(Zu);if(j=Y1.getEdgeType(Y)){if(!(j=j(h,VP(B,f,h,H,Y),f,B._19Q)).points||j.points.isEmpty())return;for(var S=B.info={},_=j.segments,e=(u=j.points).size(),o=a.getElevation(),x=P.getElevation(),T=0;T<e;T++){var t=u.get(T);t.e==H1&&(t.e=o+(x-o)*T/(e-1))}var p=P6(u.get(0)),q=P6(u.get(e-1)),y=(e-(z=e%2))/2;S.c1=P6(u.get(y-1)),S.c2=P6(u.get(y)),0!==z&&(S.p3=S.c2),S.s1=p,S.s2=P6(u.get(1)),S.t1=P6(u.get(e-2)),S.t2=q}else{var k,w,v,z,N,u=new $,S=B.info={},j=b("edge.offset"),P=b("edge.center"),I=b("edge.source.t3"),L=b("edge.target.t3"),J=xr(f,h,"source"),F=xr(f,h,"target");if(!J||!F)return f.invalidateData(h),delete B.info,!1;I&&(J[0]+=I[0],J[1]+=I[1],J[2]+=I[2]),L&&(F[0]+=L[0],F[1]+=L[1],F[2]+=L[2]),Y===Lu?(_=b("edge.segments"),(e=(I=S.points=b(iu)||UP).size())?(p=P6(I.get(0)),q=P6(I.get(e-1)),!P&&j&&(L=j,k=PA(p,J,!0),j=b1(L,R9(J,p)),J=[J[0]+k[0]*j,J[1]+k[1]*j,J[2]+k[2]*j],k=PA(F,q,!0),j=b1(L,R9(q,F)),F=[F[0]-k[0]*j,F[1]-k[1]*j,F[2]-k[2]*j]),1===e?S.p3=p:(y=(e-(z=e%2))/2,w=P6(I.get(y-1)),v=P6(I.get(y)),0!==z&&(S.p3=v),S.s1=J,S.s2=p,S.t1=q,S.t2=F)):(!P&&j&&(k=PA(F,J,!0),N=R9(J,F),j=sP(j,N),J=[J[0]+k[0]*j,J[1]+k[1]*j,J[2]+k[2]*j],F=[F[0]-k[0]*j,F[1]-k[1]*j,F[2]-k[2]*j]),w=J,v=F),u.add({x:J[0],y:J[2],e:J[1]}),u.addAll(I),u.add({x:F[0],y:F[2],e:F[1]})):(L=VP(B,f,h,H,Y),B._19Q||(L=-L),H?(y=J[0],z=J[1],p=J[2],w=[y-L,z+(q=a.getTall()/2+L),p],v=[y+L,z+q,p],u.add({x:y-L,y:p,e:z}),u.add({x:y-L,y:p,e:z+q}),u.add({x:y+L,y:p,e:z+q}),u.add({x:y+L,y:p,e:z})):(k=PA(F,J,!0),N=R9(J,F),I={x:J[0],y:J[2]},f={x:F[0],y:F[2]},Y=(h=q6(H1,I,f,L)).x-I.x,H=h.y-I.y,j=sP(j,N),k[0]*=j,k[1]*=j,k[2]*=j,w=[J[0]+k[0]+Y,J[1]+k[1],J[2]+k[2]+H],v=[F[0]-k[0]+Y,F[1]-k[1],F[2]-k[2]+H],P?(u.add({x:J[0],y:J[2],e:J[1]}),u.add({x:w[0],y:w[2],e:w[1]}),u.add({x:v[0],y:v[2],e:v[1]}),u.add({x:F[0],y:F[2],e:F[1]})):(u.add({x:w[0],y:w[2],e:w[1]}),u.add({x:v[0],y:v[2],e:v[1]})))),S.c1=w,S.c2=v}S._lastPointsSegments={points:u,segments:_},b(In)===Tu?S.list=B.createTubeModel(u,_,U/2,r):S.list=B.createLineModel(u,_,U,"edge","edge.dash")}}},invalidateCachedGeometry:function(){this.info=H1}}),function(r,K){vY(Wq,this,[r,K]),this._needRecoverPosition=!0}),$q=(BA(Wq,iq,{drawBody:function(r,K,B){var b=this._matWithExtraction||this.mat;if(b&&(!this.s("shape3d.reflector")||r._picking)){var f=this.gv,h=this.shapeModel;if(Sr(f,b),h)mm(f,this.data,h,this,this.getBodyColor(),B);else for(var U=0;U<6;U++)kr(this,r,K,Nm[U],B);Hr(f)}},validate:function(r,K){var B,b,f,h=this,U=h.s,a=h.data,P=a._thickness/2,H=a.isClosePath(),Y=a.getPoints(),S=a.getSegments(),_=U(Ln),e=r&&r.uv;if(h.invalidateUnstableWireframe(),h.clear(),h.dispatchBoundingBoxChanged(),h._updateAutoRotation(),Y1.extractShapeTranslation||Y1.extractVerticesTranslation?(b=new D.Vector3(a.p3()),(Y=v9(Y)).forEach(function(r){r.x-=b.x,r.y-=b.z}),h._vsTranslation=(new D.Matrix4).setPosition(b),f=a.getShapeElevation,a.getShapeElevation=function(){return-(this.getTall()||0)*(this._anchorElevation-.5)}):h._vsTranslation=null,P<0){h.s("shape3d.reflector")&&(h._reflectNormal=null);try{var o,x,T=U("shape3d.image.projection");T&&T[4]&&(o=(J=a.p3())[0],x=J[2],T=[o+T[0],T[1]+x,o+T[2],T[3]+x]),B=h.shapeModel=rO(Y,S,U(dn),U(sn),_,U(nn),a.getTall(),a.getShapeElevation(),H,T)}catch(r){B=h.shapeModel={}}U(Jn)||(delete B.vs,delete B.ns,delete B.uv),U("shape3d.top.image")||U("shape3d.top.material")||delete B.top_uv,U("shape3d.bottom.image")||U("shape3d.bottom.material")||delete B.bottom_uv}else if(U(In)===Tu)u=XN(Y,S,_,H),(B=h.shapeModel={vs:[],uv:[]}).sum=U(nn)||VY(u)||1,B.len=0,U(dn)&&!H&&(B.top_vs=[],B.top_uv=[]),U(sn)&&!H&&(B.bottom_vs=[],B.bottom_uv=[]),h._12O(u,P);else{var t,p,q,y,k,w,v,z,N,u=XN(Y,S,_,H),j=h.vf(Q1,e,!1,K);if(P&&(k=h.vf(E1,e,!1,K),w=H?H1:h.vf(ru,e,!1,K),v=H?H1:h.vf(Ku,e,!1,K),z=h.vf(Bu,e,!1,K),N=h.vf(bu,e,!1,K)),P){for(var I=0,L=u.length;I<L;I++)u[I]=h._tryRemoveBezierPoints(u[I],P);h._12O(u,P)}else j&&u.forEach(function(r){if(0<(y=r.length))for(t=r[0],q=1;q<y;q++)p=r[q],h.addV(j.vs,t,p),t=p});h._20Q(u),r||(j&&(j.ns=G6(j.vs),Wm(j,"vs"),Wm(j,Xu)),P&&(k&&(k.ns=G6(k.vs),Wm(k,"vs"),Wm(k,Xu)),w&&(w.ns=G6(w.vs),Wm(w,"vs"),Wm(w,Xu)),v&&(v.ns=G6(v.vs),Wm(v,"vs"),Wm(v,Xu)),z&&(z.ns=G6(z.vs),Wm(z,"vs"),Wm(z,Xu)),N&&(N.ns=G6(N.vs),Wm(N,"vs"),Wm(N,Xu))))}var J=h.mat=a.getPointsMatrix3d().getElements();a._flipSide=Z.determinantOfArray(J)<0,h._vsTranslation?J=h._matWithExtraction=(new D.Matrix4).fromArray(J).multiply(h._vsTranslation).toArray():h._matWithExtraction=null,r&&(bm(h,J,r,B,K),h.clear()),f!=H1&&(a.getShapeElevation=f)},_20Q:function(r){var K,B,b,f,h,U,a,P,H,Y,S,_,e,o=this,x=o.front,T=o.back,t=o.top,p=o.bottom,x=x?x.tuv:H1,T=T?T.tuv:H1,t=t?t.tuv:H1,p=p?p.tuv:H1,q=0,y={front:0,back:0,top:0,bottom:0};(x||T||t||p)&&(e=o.s(nn),K=e||VY(r)||1,S=o.s("all.uv.union"),r.forEach(function(r){if(0<(B=r.length)){for(Y in y)(!1===(_=o.s(Y+".uv.union"))||_==H1&&!1===S)&&(y[Y]=0,e||(K=VY([r])));for(U=r[0],b=1;b<B;b++){for(Y in a=r[b],P=R9(U,a),y)q=y[Y],f=q/K,y[Y]=q+=P,h=q/K,"back"===Y&&(H=f,f=1-h,h=1-H),o._14O(o[Y],f,h);U=a}}}))},_14O:function(r,K,B){var b,f,h,U,a,P,H,Y;r&&(Y=r.uv,(r=r.tuv)&&(Y=Y?(b=Y[0]+(Y[6]-Y[0])*K,f=Y[1]+(Y[7]-Y[1])*K,h=Y[2]+(Y[4]-Y[2])*K,U=Y[3]+(Y[5]-Y[3])*K,a=Y[2]+(Y[4]-Y[2])*B,P=Y[3]+(Y[5]-Y[3])*B,H=Y[0]+(Y[6]-Y[0])*B,Y[1]+(Y[7]-Y[1])*B):(h=b=K,P=U=1,H=a=B,f=0),r.push(h,U,a,P,H,Y,H,Y,b,f,h,U)))},_13O:function(r){var K=r.uv;(r=r.tuv)&&(K?r.push(K[2],K[3],K[4],K[5],K[6],K[7],K[6],K[7],K[0],K[1],K[2],K[3]):r.push(0,1,1,1,1,0,1,0,0,0,0,1))},_tryRemoveBezierPoints:function(K,r){var B=K.length;if(B<4)return K;for(var b,f,h,U,a=!1,P=function(r){return K[r]},H=function(r){return K[B-1-r]},Y=0;Y<=1;Y++)for(b=(h=Y?H:P)(0),f=h(1),_=2;_<B-1;_++)(U=h(_)).remove||(U.b&&q6(b,f,U,r).adjust?a=U.remove=!0:(b=f,f=U));if(!a)return K;for(var S=[],_=0;_<B;_++)K[_].remove||S.push(K[_]);return S},_12O:function(r,K){var B,b,f,h,U,a=this.s("shape3d.point.epsilon"),P=this;r.forEach(function(r){if(0<(U=r.length))for(B={p:r[0],n:!0},h=1;h<U;h++)b=r[h],(f=h<U-1?r[h+1]:H1)&&Math.abs(b.x-f.x)<a&&Math.abs(b.y-f.y)<a||P.addPoint(B,b,f,K,r)})},addPoint:function(r,K,B,b,f){var h,U,a,P,H,Y,S=this,_=r.p,e=r.f,o=r.b,x=S.s("shape3d.side")||KA,T=S.s("shape3d.start.angle"),t=S.s("shape3d.sweep.angle"),p=S.shapeModel,q=S.data.isClosePath();if(r.n&&(r.n=!1,e=q&&2<f.length?q6(f[f.length-2],_,K,b):q6(H1,_,K,b),o=p6(_,e),p?p.top_vs&&S._10O(o,e,x,T,t,p.top_vs,p.top_uv):(h=S.left)&&(S.addV(h.vs,o,e),S._13O(h))),q=B?q6(_,K,B,b):q&&2<f.length?q6(_,K,f[1],b):q6(_,K,H1,b),f=p6(K,q),p){var y,k,w=p.vs,v=p.uv,b=p.sum;for(v&&(y=p.len/b,p.len+=R9(_,K),k=p.len/b),a=S._9O(o,e,x,T,t),P=S._9O(f,q,x,T,t),H=0;H<x;H++)tY(w,a[Y=H+1]),tY(w,P[H]),tY(w,a[H]),tY(w,P[H]),tY(w,a[Y]),tY(w,P[Y]),v&&v.push(y,Y/=x,k,U=H/x,y,U,k,U,y,Y,k,Y);!B&&p.bottom_vs&&S._10O(f,q,x,T,t,p.bottom_vs,p.bottom_uv,!0)}else!B&&(h=S.right)&&(S.addV(h.vs,q,f),S._13O(h)),(h=S.front)&&S.addV(h.vs,e,q),(h=S.back)&&S.addV(h.vs,f,o),(h=S.top)&&S.addH(h.vs,e,q,f,o,!0),(h=S.bottom)&&S.addH(h.vs,o,f,q,e);r.p=K,r.f=q,r.b=f},_10O:function(r,K,B,b,f,h,U,a){for(var P,H,Y=this.data,S=this._9O(r,K,B,b,f),_=(r.x+K.x)/2,e=(r.y+K.y)/2,o=Y.getShapeElevation(),x=0,x=0;x<B;x++)a?(tY(h,S[x]),tY(h,S[x+1])):(tY(h,S[x+1]),tY(h,S[x])),tY(h,[_,o,e]),U&&(H=a?(P=h1*(x+1)/B+b,h1*x/B+b):(P=h1*x/B+b,h1*(x+1)/B+b),U.push(.5-.5*S1(H),.5-.5*f1(H),.5-.5*S1(P),.5-.5*f1(P),.5,.5))},_9O:function(r,K,B,b,f){var h,U,a=this.data,P=[],H=(r.x+K.x)/2,Y=(r.y+K.y)/2,S=a.getTall()/2,_=a.getShapeElevation(),e=0;for(f==H1&&(f=h1);e<=B;e++)U=S1(h=f*e/B+b),P.push([H+(r.x-H)*U,_+S*f1(h),Y+(r.y-Y)*U]);return P},addV:function(r,K,B){var b=K.x,K=K.y,f=B.x,B=B.y,h=(U=this.data).getShapeElevation(),U=U.getTall()/2;r.push(b,h-U,K,f,h-U,B,f,h+U,B,f,h+U,B,b,h+U,K,b,h-U,K)},addH:function(r,K,B,b,f,h){var U=(a=this.data).getTall()/2,a=a.getShapeElevation()+(h?U:-U);r.push(K.x,a,K.y,B.x,a,B.y,b.x,a,b.y,b.x,a,b.y,f.x,a,f.y,K.x,a,K.y)},vf:function(r,K,B,b){var f,h=this.gv.getFaceVisible(this.data,r);return(B||h)&&((f=yr(this,r,b)).vs=[],f.tuv=h?[]:H1,f.visible=h),f}}),function(r,K){vY($q,this,[r,K])}),Xq={},cq=(BA($q,iq,{validate:function(){var r=this,K=r.gv,B=r.data,b=r.s,f=DN(b("points.color")),h=b("points.size"),A=b("points.uv.offset"),U=b("points.image"),a=(!U||/\.(png|jpg|gif|jpeg|bmp|svg)$/i.test(U)||sK.test(U)||(Xq[U]||(Xq[U]=r._createCachedImage(U)),U=Xq[U]),B._modelDirty),P=b("points.model");if(P){if(r._lastShapeModel!==P||!r.shapeModel){var H=Zm(r,P);if(!H)return;var S=[],_={},e=D.requestVector3();r.eachShapeModel(function(r,K,B,b,f){for(var h=0,U=r.length;h<U;h+=3){var a=r[h],P=r[h+1],H=r[h+2],Y=(f&&(e.set(a,P,H).applyMatrix4(f),a=e.x,P=e.y,H=e.z),a+"_"+P+"_"+H);_[Y]||(_[Y]=!0,S.push(a,P,H))}},H),D.releaseVector3(e),r._setShapeModelPoints(new aA(S)),r._lastShapeModel=P,a=!0}o=r.shapeModel.vs.length/3}else{var Y=B.getPoints(),o=Y.length;if(a||B._pointsDirty||!r.shapeModel){for(var x=[],T=0;T<o;T++){var t=Y[T];t&&x.push(t.x,t.e,t.y)}r._setShapeModelPoints(new aA(x)),B._pointsDirty=!1,a=!(r._lastShapeModel=null)}}if(H=b("points.transparent"),r.info={mat:wA(B),size:h,diffuse:f,opacity:b("points.opacity"),texture:U,transparent:H,alphaTest:H?0:b("alphaTest"),uvScale:b("points.uv.scale"),uvOffset:A,discardSelectable:b("points.discard.selectable")},a||B._colorsDirty){var p=!1,q=B.getColors();if(q&&0<q.length)for(var y=[],T=0;T<o;T++)for(var k=q[T],V=k?(p=!0,DN(k)):f,M=4*T,w=0;w<4;w++)y[M+w]=V[w];r.shapeModel.cs=p?new aA(y):null,B._colorsDirty=!1}if(a||B._sizesDirty){var v=!1,z=B.getSizes();if(z&&0<z.length)for(var N,u=[],T=0;T<o;T++)0<=(N=z[T])?(u.push(N),v=!0):u.push(h);r.shapeModel.ss=v?new aA(u):null,B._sizesDirty=!1}if(a||B._offsetsDirty){var j=!1,I=B.getUvoffsets();if(I&&0<I.length)for(var L,J,F=[],T=0;T<o;T++)L=I[J=2*T],J=I[1+J],L!=P1&&J!=P1?(F.push(L,J),j=!0):F.push(0,0);r.shapeModel.os=j?new aA(F):null,B._offsetsDirty=!1}if(a||r._lastPointNumber!==o){this.dispose();for(var G=K.pickColorMap,d=r._startPickId=G._pickIdUsed,x=(G._pickIdUsed=d+o,[]),T=0;T<o;T++){var s=d+T,n=jq(s);x.push(n[0],n[1],n[2],n[3]),G[s]||(G[s]={data:B,part:T})}r.shapeModel.ps=new aA(x),r._lastPointNumber=o}B._modelDirty=!1,this.dispatchBoundingBoxChanged()},_setShapeModelPoints:function(r){var K=this.shapeModel,B=this.shapeModel={vs:r};return K&&(r=r.length,r=Math.round(r/3),K.cs&&K.cs.length==4*r&&(B.cs=K.cs),K.ss&&K.ss.length==r&&(B.ss=K.ss),K.os&&K.os.length==2*r&&(B.os=K.os),K.ps&&K.ps.length==4*r&&(B.ps=K.ps)),B},_createCachedImage:function(r){var K=mY(),B=K.getContext("2d"),B=(ZY(K,128,128,1),ZA(B,{width:128,height:128,comps:[{type:r,background:"white",borderWidth:0,rect:[0,0,128,128]}]},0,0,128,128),M.Math.generateUUID());return zK[B]=K,B},drawBody:function(r,K){var B,b,f=this.gv,h=f._picking;h&&!f.isSelectable(this.data)||(B=this.shapeModel,b=this.info,B&&B.vs&&B.vs.length&&(b={type:"points",renderMode:"points",renderPickMap:!0,transparent:b.transparent,modelMatrix:b.mat,modelViewMatrix:v6([],f._viewMatrix,b.mat),projectionMatrix:f._projectMatrix,viewMatrix:f._viewMatrix,scale:f.getHeight()/2,size:b.size,diffuse:b.diffuse,opacity:b.opacity,map:f.getTexture(b.texture,this.data),alphaTest:b.alphaTest,resolution:f.getDevicePixelRatio(),discardSelectable:b.discardSelectable,uvScale:b.uvScale,blackout:r._blooming&&!this.data.s("bloom"),picking:h,useColor:!h&&B.cs!=H1,useSizeArray:B.ss!=H1,uUvOffset:b.uvOffset,useUvArray:!h&&B.os!=H1},f._prefabRenderer.render(r,{model3d:!0,mesh:{position:B.vs,pickColor:h?B.ps:null,color:h?null:B.cs,aUvOffset:!h&&B.os?B.os:null,sizeArray:B.ss},mat:b}),(h=x1.for(r)).useProgram(K),h.directAttribs().disable(),f.shadowMap.enable&&f.shadowMap.createShadow(),f.rebindOITTexture(),f.flowMap.createFlow()))},dispose:function(){$q.superClass.dispose.call(this);var r=this._startPickId,K=this._lastPointNumber;if(r&&K){for(var B=this.gv.pickColorMap,b=0;b<K;b++){var f=r+b;B[f]&&delete B[f]}delete this._startPickId,delete this._lastPointNumber}}}),function(r,K){vY(cq,this,[r,K]),this._needRecoverPosition=!0}),Oq=(BA(cq,Dq,{_25Q:1,needValidate:function(r){return iq.prototype.needValidate.call(this,r)},_updateAutoRotation:function(){return iq.prototype._updateAutoRotation.call(this)},invalidateUnstableWireframe:function(){this.data._47Q&&this.invalidateWireframe()},validate:function(r,K){var B,b,f,h,U,a=this,P=a.data,H=a.s,Y=P.getPoints(),S=Y.size(),_=(a.dispatchBoundingBoxChanged(),a._updateAutoRotation(),a.invalidateUnstableWireframe(),P.p3()),e=a.mat=SA(),o=(k6(e,_),nO(e,P.getFinalRotation3d(),P.getRotationMode()),P.getScale3d()),x=P._dynamicScale3d;x&&(o[0]*=x[0],o[1]*=x[1],o[2]*=x[2]),w6(e,o),k6(e,HA(_)),P._flipSide=Z.determinantOfArray(e)<0,H(In)===Tu&&H("batch")==H1&&a.shapeModel&&a._geometryVersion===P._geometryVersion||(a._geometryVersion=P._geometryVersion,a.shapeModel=a.info=a.lineShapeModel=H1,1<S&&(x=a.info={},o=P.getSegments(),B=P.getThickness(),b=P6(Y.get(0)),f=P6(Y.get(S-1)),x.c1=P6(Y.get((U=(S-(h=S%2))/2)-1)),x.c2=P6(Y.get(U)),0!=h&&(x.p3=x.c2),x.s1=b,x.s2=P6(Y.get(1)),x.t1=P6(Y.get(S-2)),x.t2=f,H(In)===Tu?(Y1.extractPolylineTranslation||Y1.extractVerticesTranslation?(_=new D.Vector3(P.p3()),(Y=v9(Y)).forEach(function(r){r.x-=_.x,r.e-=_.y,r.y-=_.z}),a._vsTranslation=(new D.Matrix4).setPosition(_),a._matWithExtraction=(new D.Matrix4).fromArray(e).multiply(a._vsTranslation).toArray()):(a._vsTranslation=null,a._matWithExtraction=null),x.list=a.createTubeModel(Y,o,B/2,r)):x.list=a.createLineModel(Y,o,B,"shape.border","shape.dash")))},invalidateCachedGeometry:function(){this.shapeModel=this.info=this.lineShapeModel=H1},drawBody:function(r,K,B){var b,f,h,U,a,P,H,Y,S,_,e=this,o=e.shapeModel;o&&(f=e.mat,(Y1.extractPolylineTranslation||Y1.extractVerticesTranslation)&&e._matWithExtraction&&(f=e._matWithExtraction),b=e.gv,Sr(b,f),f=e.s("3d.clip.direction"),b._uvClipEnabled&&("uv.left"===f||"uv.right"===f)&&(h=e.s("3d.clip.percentage"))<1?(a=U=!0,gm(o),P=o.top_vs,H=o.bottom_vs,Y=o.vs,S=(_=x1.for(r)).directUniforms(),_=_.directAttribs(),"uv.left"==f?(h<1&&(U=!1),h<=0&&(a=!1)):(h<1&&(a=!1),h<=0&&(U=!1)),o.top_vs=o.bottom_vs=P1,_.aUv=fr(r,b._buffer.uv,o.uv,H1,2),mm(b,e.data,o,e,e.getBodyColor(),B),_.aUv=!1,S.uClipDirection=0,o.vs=P1,U&&(o.top_vs=P),a&&(o.bottom_vs=H),mm(b,e.data,o,e,e.getBodyColor(),B),o.vs=Y,o.top_vs=P,o.bottom_vs=H):mm(b,e.data,o,e,e.getBodyColor(),B),Hr(b))}}),DQ={s:p},function(r){var K={vs:[],ns:[],uv:[]};return Or(null,null,r,DQ,!1,[],K),K}),Qq=Y1.meshTypeMap={box:function(){return Y1.createBoxModel()},sphere:function(r){return Oq(Y1.createSphereModel(r.side,r.sideFrom,r.sideTo,r.from,r.to,r.resolution,r.smooth))},cylinder:function(r){return Oq(Y1.createCylinderModel(r.side,r.sideFrom,r.sideTo,r.from,r.to,r.top,r.bottom,r.smooth))},cone:function(r){return Oq(Y1.createConeModel(r.side,r.sideFrom,r.sideTo,r.from,r.to,r.bottom,r.resolution,r.smooth))},torus:function(r){return Oq(Y1.createTorusModel(r.side,r.sideFrom,r.sideTo,r.from,r.to,r.radius,r.resolution,r.smooth))}};for(ZQ in qY(Y1,{invalidateMeshAttribute:function(r){r&&r._bufId&&(r._bufId=null)},setMeshStyle:function(r,K,B){return r[K]!==B&&(B===P1?delete r[K]:r[K]=B,delete r._geometry_,!0)},invalidateMesh:function(r,K){if(r){if(K)for(var B in r)Y1.invalidateMeshAttribute(r[B]);delete r._4HQ,delete r._complete_}}}),qY(eq,{invalidateMeshAttribute:function(r){Y1.invalidateMeshAttribute(r),this.iv()},setMeshStyle:function(r,K,B){Y1.setMeshStyle(r,K,B)&&this.iv()},getMeshStyle:function(r,K){return r[K]},invalidateMesh:function(r,K){Y1.invalidateMesh(r,K),this.iv()}}),Am)Qq[ZQ]=Am[ZQ];Qq.bone=(iQ=new Array(5),function(r){for(var K=r.ratio||.1,B=r.resolution||8,b=null,f=0;f<5;f++){if(iQ[f])return iQ[f].ratio==K&&iQ[f].resolution==B&&(iQ[f].active=Date.now()),iQ[f].mesh;b=f}if(!b)for(var h=1/0,f=0;f<5;f++)iQ[f].active<h&&(h=iQ[f].active,b=f);var U=[],a=[];for(K*=.5,U.push(0,0,0,0,0,.5),f=0;f<B;f++){var P=f/B*Math.PI*2;U.push(Math.cos(P)*K,Math.sin(P)*K,K),0<f&&(a.push(0,f+2,f+1),a.push(f+1,f+2,1))}return a.push(0,2,B+1),a.push(B+1,2,1),iQ[f]={active:Date.now(),resolution:B,ratio:K,mesh:{vs:U,is:a}},iQ[f].mesh});var Eq,rB,KB,BB,bB,fB,hB,UB,aB,PB,HB,YB=function(r,K,B){var b,f,h=r._geometry_;if(h)return h;if(B=B||r,(h=r.type)&&"raw"!==h){var U=Y1.meshTypeMap[h],a=(f=r)&&K?(A.assign(a={},f),A.assign(a,K),delete a.type,a):f||K;if(!U)return!!(b=Y1.getMesh(h))&&YB(b,a,B);if(!(b=U(a)))return!1;B._geometry_=b}else b=r;return b.func?b.func(b):b},SB=(KB=!(rB=1),BB={},bB={},fB={},hB=function(){y9(hB);var r=Date.now(),K=r-Eq;Eq=r;try{UB(K/1e3)}catch(r){}},UB=function(r){var K,B,b={};for(K in BB){var f,h,U=(h=BB[K]).speed,a=h.time,P=(h.paused?f=h.time:(f=h.time+r*U,h.time=f),h.duration),H=h.loop,U=("once"===H?U<0&&f<=h.end||0<=U&&f>=h.end?(f=h.end,h.iteration=1):f=D.modToPositive(f,P):(Math.floor(f/P)!==Math.floor(a/P)&&h.iteration++,"pingpong"===H?P<(f=D.modToPositive(f,2*P))&&(f=2*P-f):f=D.modToPositive(f,P)),B=h.animation,h.displayTime=D.roundFloat(f,3));U+=h.shift,(a=b[B])?a.push(K,U):b[B]=[K,U]}for(B in b){L=I=z=y=q=N=t=T=x=v=u=o=w=_=void 0;var Y=B,S=b[B],_=bB[Y][1];if(_){var e,o,x,T,t={},p=S.length/2,q={},y=fB[Y];if(y){for(var k=y.clips,w=0,v=k.length;w<v;w++)t[k[w].time]=w;for(w=0;w<p;w++)(T=t[x=S[2*w+1]])!==P1&&(q[T]=!0)}else y=fB[Y]={clips:[]};for(var v=_.length,z=-1,N=0;N<p;N++)if(e=S[2*N],(T=t[x=S[2*N+1]])!==P1)BB[e].clip=y.clips[T];else{for(;q[++z];);(o=y.clips[z])?o.time=x:o=y.clips[z]={time:x,datas:[]};for(var u=o.datas,w=0;w<v;w++)for(var j=_[w].evaluate(x),I=(I=u[w])||(u[w]=[]),L=0,J=j.length;L<J;L++)I[L]=j[L];t[x]=z,BB[e].clip=o}}}},aB=D.newIdGenerator(),{add:function(Y,r,K,B,b){(f=Y.tag)||(f=Y.tag=aB.next()),bB[f]||(bB[f]=function(){for(var r,K,B=Y.tracks,b=B.length,f=new Array(b),h={},U=0;U<b;U++){var a=B[U],P=a.type,H=a.name.split(".");switch((K=h[H[0]])||(K=h[H[0]]=[]),H[1]){case"scale":K[2]=U;break;case"quaternion":K[1]=U;break;default:K[0]=U}switch(P){case"linear":r=new at(a.times,a.values);break;case"quaternion":r=new Pt(a.times,a.values);break;case"cubic":r=new Ht(a.times,a.values);break;case"cubicSpline":r=new Yt(a.times,a.values,3);break;case"cubicSplineQuaternion":(r=new Yt(a.times,a.values,3)).isQuaternion=!0;break;default:r=new Ut(a.times,a.values)}f[U]=r}return[h,f]}());var f,h=rB++,U=Y.duration;return r===P1&&(r=Y.speed||1),B===P1&&(B=Y.loop||"repeat"),BB[h]={time:K||0,start:K||0,loop:B,shift:Y.start||0,duration:U,animation:f,animationName:Y.name,clip:b,iteration:0},tc(BB[h],r),KB||(KB=!0,Eq=Date.now(),hB()),h},stop:function(r){var K=BB[r];return!!K&&(delete BB[r],K)},changeAnimationInfo:function(r,K,B){return!!(r=BB[r])&&("speed"===K?(tc(r,B),!0):"forwardTime"===K&&(r.time+=B,!0))},getAnimation:function(r){return BB[r]},getAnimationMap:function(){return BB},getAnimationTracks:function(){return bB},getFrameAnimationData:function(){return fB}}),_B=(qY(JO,{playAnimation:function(r,K,B,b){return!!(r=r||this.getDefaultAnimationName())&&(!!(r=this.getAnimation(r))&&(this._animationPlaying&&(f=SB.stop(this._animationId)),r=this._animationId=SB.add(r,K,B,b,f?f.clip:null),this._animationPlaying=!0,this._animationPaused=!1,this._lastAnimIteration=0,this.fp("animationStart",null,!0),r));var f},changeCurrentAnimationSpeed:function(r){return SB.changeAnimationInfo(this._animationId,"speed",r)},forwardAnimation:function(r){return this.invalidateView(),SB.changeAnimationInfo(this._animationId,"forwardTime",r)},backwardAnimation:function(r){return this.forwardAnimation(-r)},stopAnimation:function(){var r=this._animationId;return r&&SB.stop(r),this._animationPlaying=!1,this._animationPaused=!1,this._animationId=P1,this._lastAnimIteration=0,this.fp("animationStop",null,!0),r},pauseAnimation:function(){if(this._animationPaused)return!1;var r=this._animationId;return!!r&&(!!(r=SB.getAnimation(r))&&(r.paused=!0,this._animationPaused=!0,this.fp("animationPause",null,!0),!0))},resumeAnimation:function(){var r;return!!this._animationPaused&&(!!(r=this._animationId)&&(!!(r=SB.getAnimation(r))&&(r.paused=!1,this._animationPaused=!1,this.fp("animationResume",null,!0),!0)))},isAnimationPlaying:function(){return this._animationPlaying},isAnimationPaused:function(){return this._animationPaused},getAnimationNames:function(){return Y1.getShapeModelAnimationNameList(this.s("shape3d"))},getAnimation:function(r){return Y1.getShapeModelAnimation(this.s("shape3d"),r)},getDefaultAnimationName:function(){return Y1.getShapeModelDefaultAnimationName(this.s("shape3d"))},getAnimations:function(){return Y1.getShapeModelAnimations(this.s("shape3d"))},getCurrentAnimationState:function(r){var K=this._animationId;if(!K)return null;var B=SB.getAnimation(K);if(!B)return null;switch(r){case"time":return B.displayTime||0;case"name":return B.animationName;case"loop":return B.loop;case"speed":return B.speed;case"duration":return B.duration;default:return{time:B.displayTime||0,name:B.animationName,loop:B.loop,speed:B.speed,duration:B.duration}}}}),qY(PP,{isAnimationPlaying:q}),qY(Y1,{getShapeModelAnimations:function(r){return(r=r&&K6(r))&&r.model3d&&(r=r.animations)?r:null},getShapeModelAnimation:function(r,K){var B=Y1.getShapeModelAnimations(r);if(B)for(var b=0,f=B.length;b<f;b++)if(B[b].name===K)return B[b];return null},getShapeModelAnimationNameList:function(r){var K=Y1.getShapeModelAnimations(r);if(!K)return null;for(var B=K.length,b=new Array(B),f=0;f<B;f++)b[f]=K[f].name;return b},getShapeModelDefaultAnimationName:function(r){var K,B=Y1.getShapeModelAnimations(r);if(!B)return null;for(var b=0,f=B.length;b<f;b++){if(B[b].default)return B[b].name;!K&&0<B[b].duration&&(K=B[b].name)}return K}}),PB={},{request:function(r){var K;return(K=PB[r])?K.length?K.pop():new Float32Array(r):(PB[r]=[],new Float32Array(r))},release:function(r){var K,B=r.length;(K=PB[B])?K.push(r):PB[B]=[r]}}),eB=D.newIdGenerator(),oB=(A.assign(Fr.Graph3dView.prototype,{initSkeletonDatas:function(){var r,K=this._updatedSkeletonDatas;for(r in K)_B.release(K[r]);this._updatedSkeletonDatas={},this._isSkeletonUpdated={},this._boneViewMatrices.length=0,this._boneViewMatrices._bufId=null},_renderBonesForDebug:function(r,K){0<this._boneViewMatrices.length&&(K.depth.enabled=!1,K.depth.mask=!1,this._prefabRenderer.render(r,{mesh:{type:"bone"},instances:{aMatrixInstanced:new Float32Array(this._boneViewMatrices)},mat:{type:"fixColor",color:"red",cullFace:!0}}))},updateSkeleton:function(r,K){var H=this;if(K||(K=K6(r.s("shape3d")))&&K.model3d){var B=r._animationId;if(B=SB.getAnimationMap()[B]){var b=B.clip;if(b){var f=B.iteration,h=(f!==(h=r._lastAnimIteration||0)&&(r._lastAnimIteration=f,r.fp("animationIteration",h,f)),B.time),U=r._lastAnimHashKey=B.animation+"|"+h;if(!this._isSkeletonUpdated[U]){this._isSkeletonUpdated[U]=!0;for(var Y,S,_,e,o,a,P,x,T,t=r.s("3d.bone.visible"),p=(t&&(S=D.requestVector3(),_=D.requestVector3(),e=D.requestMatrix4().fromArray(r.mat),o=D.requestMatrix4()),b.datas),q=SB.getAnimationTracks()[B.animation][0],y=D.requestMatrix4(),k=[],w={},v=(Y1.traverse(K,function(r,K){r.skeleton&&k.push(r);var B,b,f,h,U,a=r.name,P=(a&&(U=q[a])&&((h=U[0])!==P1&&(B=p[h]),(h=U[1])!==P1&&(b=p[h]),(h=U[2])!==P1&&(f=p[h])),(h=r.matrixWorld)||(h=r.matrixWorld=new Z),r.transformData);U&&P?vr(h,P,B||r.position,b||r.quaternion,f||r.scale):h.composeFromArray(B||r.position,b||r.quaternion,f||r.scale),K&&(h.premultiply(K.matrixWorld),t&&K.isBone&&(U=H._boneViewMatrices,K.matrixWorld.getPosition(S),S.applyMatrix4(e),h.getPosition(_),_.applyMatrix4(e),Y=2*S.distanceTo(_),o.lookAt(_,S).setPosition(_.set(0,0,0)).scale(_.set(Y,Y,Y)).setPosition(S),U.push.apply(U,o.getElements()))),w[a]=h,r.skeleton&&(r.skeleton._tempMatrixInverse=y.copy(h).invert().toArray())},null,"comps"),t&&(D.releaseVector3(S),D.releaseVector3(_),D.releaseMatrix4(o),D.releaseMatrix4(e)),D.releaseMatrix4(y),H._updatedSkeletonDatas),z=0,N=k.length;z<N;z++){var u,j,I,L,J=(L=(I=k[z]).skeleton.bones).length;for((a=v[(x=(x=I._skeletonId)?x:I._skeletonId=eB.next())+"|"+U])||(u=Math.sqrt(4*J),(j=D.nearestPOT(u))<u&&(j<<=1),j=Math.max(j,4),a=v[x+"|"+U]=_B.request(j*j*4)),P=I.skeleton.boneMatrixInverses,T=0;T<J;T++)Z.multiplyMatrixArray(a,w[L[T]],P,16*T,0,16*T);a.bindMatrixInverse=I.skeleton._tempMatrixInverse,delete I.skeleton._tempMatrixInverse}}}}}}}),{cullFace:!1,flipSide:!1,transparent:!1,uvRotation:0,uvScale:[1,1],uvOffset:[0,0],uvAnchor:[0,0]}),xB=function(r,K){if(PY(K))return K;var B,b,f=_1(K),h=f&&/.*\.material/.test(K);return(B=(B=h?r.s(K):B)||(f&&(b=r.s("matDef"))?b[K]:B))||(r=r.s("shape3d"),(r=_1(r)?Y1.getShape3dModel(r):r)&&r.model3d&&(f||(B=r.mat),(b=r.matDef)&&(!B&&f?B=b[K]:_1(B)&&B in b&&(B=b[B])))),B||!f||h?B&&_1(B)&&(B=Y1.getMaterial(B)):B=Y1.getMaterial(K),B},TB=(qY(JO,{getMaterial:UO=function(r,K){if(r=xB(this,r),K===P1||!r)return r;var B=r[K];return B===P1&&(K in oB?B=v9(oB[K]):(r=TB[r.type])&&(B=v9(r[K]))),B},setMaterial:r=function(r,K,B){var b,f,h=xB(this,r);if(h){if(_1(K))b=h[K],f=h[K]=B;else if(PY(K)){for(var U in b={},K)b[U]=h[U],h[U]=K[U];f=K}this.fp("material",H1,{material:h,materialName:r,property:K,oldValue:b,newValue:f})}}}),qY(AO,{getMaterial:UO,setMaterial:r}),{}),tB=(qY(TB,{pbr:{diffuse:[1,1,1],emissive:[0,0,0],roughness:1,metalness:0,opacity:1,map:null,alphaMap:null,alphaChannel:"A",alphaTest:P1,roughnessMap:null,roughnessChannel:"R",metalnessMap:null,metalnessChannel:"G",emissiveMap:null,aoMap:null,aoMapIntensity:1,aoChannel:"B",aoUvChannel:1,normalMap:null,normalScale:[1,1],lightMap:null,lightMapIntensity:1,envMap:null,envMapIntensity:1,displacementMap:null,displacementScale:1,displacementBias:0,rimColor:[0,0,0],rimPower:0,fresnelIntensity:1,enableTransmission:!1,transmission:1,thickness:0,ior:1.5,specularIntensity:1,specularColor:[1,1,1]},phong:{diffuse:[1,1,1],emissive:[0,0,0],specular:[17/255,17/255,17/255],shininess:30,opacity:1,map:null,alphaMap:null,alphaChannel:"A",alphaTest:P1,specularMap:null,emissiveMap:null,aoMap:null,aoMapIntensity:1,aoChannel:"B",aoUvChannel:1,normalMap:null,normalScale:[1,1],lightMap:null,lightMapIntensity:1,envMap:null,envMapCombine:"add",envMapIntensity:1,refractionRatio:.98,displacementMap:null,displacementScale:1,displacementBias:0,fresnelIntensity:1}},!0),{}),pB={aoMap:["aoMapIntensity"],normalMap:["normalScale"],lightMap:["lightMapIntensity"],displacementMap:["displacementScale","displacementBias"],enableTransmission:["transmission","thickness","ior","specularIntensity","specularColor"]};for(HB in TB){var qB,yB,kB=[],wB=[],vB=TB[HB],zB={},NB=[];for(yB in vB)"envMap"!==yB&&"envMapIntensity"!==yB&&yB.indexOf("Channel")!==yB.length-7&&"enableTransmission"!==yB&&"envMapCombine"!==yB&&("map"===yB||yB.indexOf("Map")===yB.length-3?(qB=pB[yB])&&qB.length?(kB.push(yB,qB.length),qB.forEach(function(r){zB[r]=!0,kB.push(r,vB[r])})):kB.push(yB,0):(qB=pB[yB])&&qB.length?(zB[yB]=!0,wB.push(yB,qB.length),qB.forEach(function(r){zB[r]=!0,wB.push(r,vB[r])})):NB.push(yB));kB.push(-1),(kB=kB.concat(wB)).push(-2),NB.forEach(function(r){zB[r]||kB.push(r,vB[r])}),tB[HB]=kB}M.Default.getMaterialDefaultStyle=function(){return TB},EQ.pbr=["?0t0w!/Imjbodujtt;z!ihqm=t!mf4e-v!mmdjohji$u\v\v!!\v\vS0C0Q!!$fQoSjFgGfJeY$\v\v!","~0!0<!eIJj!o>u!ts;p!mhpmDthmb4s-G!`mmjhh!i\vu?-z!eppjcu/\vt!g\v/0u0j!p$=Q!SfFeGvJmYd\vo!j\v$$\ve!f\vg?jzoefp!cQ/CtSg\v/!h\vp$ge=f!gfjeovfm!dToUjB$O\vE!B\vS?Ez\ve!p\vc$/jtgge/fqgb!NVxTpFm`gU=S!BfOeTvNmJdToTjJ$P\vO!\v<!*\ve$Je)fmgfjyoffU!uJvPqSu\vv!P\vp$Uesfbgfjoojfm!!T>Q!FeDJV!M\vB?Sz\ve!p\vc$/ftoge/jhgo\vj!q\vq$bjNofdompvue=f!!f=edvpmndnopjo$?\v\v!!\v\v?$zjeopdcm/vtegf/!u=vqqbudvlpj=o!hf?e\vv!m\vd$ojjo$d\vm!v\vegfj!e=ovfc$p\vt!/<iufbbped?s\vb!f\vm$dj/gmobejfsgf!uVbTnF!`+V!CsPb\vm!vvdofjqgTpusbnp!dnsbbuf5m!dv!W,j!f*xdNdbGu!s+j!yu<b!pvdosjbgfpmsdn/!mwbfjds4f!uebjng!g.v!t1f/<2!)v!o+j!gupishnj!Mwhfodj4p!hfunvjpt!t>j!wufi<h!jvMohjogjppshnu!vgpm!p<b*ud!dsWpOvuhpieo!f-t1t:<G!uvbopjdgspbsfnm!dg/mmpbbjus!fnufbunb!m-o1fGtutb<p!dvsobjfgmpds/nm!bgjmspfbuub!np)qlbddjjmuizd<T!`vGo!j>g!pdsdnG!!w4fddf4w!!s<j*n*DspjmEpxsf<j!wv/ozjsgupfsnnp!fghm!p-bmub!nssjpnOQupbxpfdss<b!f\vm$dj/gzesfugf!nVpTfFh`)BuMpQeI)BfUuFbTsUv\vu!bvto!j>g!pdsdnW!Ogumppeb!uu!bbpmmqgi!b\vUUfBtPuD<S!B\vF$MfDo`eFjTgV\v!!g\vf$efgoje$j\vg!\v\v!g\vj$ejogfe$f\vg!!<VsTbFm`vVdWf\vq!Twobfsfzijto!h,!!wqfndp3D!zwhVswf<o!F\vo$fjfgietf!g+!!VuWi`hDjMMJhQo\vj!pwhbusvzpj!o>h!!ugimhpjbMuh!owjVpwhMupvdpb!m<V*<s!p\vm$pfDooefjfgi\vt!/\vm$bfjosefjugb\vn!)\v4$yjbgn!!e+f!g8j6o2f/e1)!V.T!F1`/M2J!H>I!UqNnBpQD*z!h}s}f!oeFfogfjfoifte!)uVbTpFm`gB!P\vNOBFQF*I\vT!`wFbTsVz!jgofhe!gwjf$d\v3!!<wfVdwo3b<j!e\vb$Sffowejjtgt\vj!n\vF$mjbguepfug!!,V!TsFb`mNvBdQf\vq!Tvmobjugppus!n,!!tfbtnvqgmgfjsE3mEb!unpbuq!<>!!\vu$ifhojeMjhgo\vj!p\vh$ujvgpe!f4gd!fVwT!F\v`?BzMeQpIcB/NtBgQ/\vo!pvjotjtgjpnstno!btsbun=q!mffesv3mEd!objm$q\vi!b<Nsbbqm<v!d\vf$qfTouedjfgs\vj!e\vo$jj/gueifhgj!MVeTfFu`dBfPmNgBfQs\v!!,v!osjbgmpvsdnf!qtTbundqfmsfjse3/Eu!ibhpjNMbeqf<u!d\vf$mjggfose!f>g!!sVbTmFv`dVfCqPT\vm!bvuopjug!p4sdnf!wg!m<pfbtuv!gbgpjNEbuqdJfosujfeootjj/uuzi<h!j\vM$effouedjfgm\vg!f\vs$!f,o!efjtgv\vg!g\vj$Ejugdeffsgj!eV/TuFi`hMjJMHeIfUuNdBfQm\vg!fvso!j>g!pfstnv!gtgbjnEqmmbfusp3uE!!4mdjfhwi!u\vN?bzqe<p!c\v/$tjgg/oqebfNgp!bV=T!Ff`eVvCmPd\vo!jv$o\vj!g<p*ssnf!xgpmQpnbjus!!m-jnhjisu)NxbpqqJ!o+u!fsoptmjpuDzn<j!s\v!$>f,o!efjdgo\vb!j\ve$bfSofewjjgt\vt!j\vn$Fjmgbeufpgu!!V<T*F*`sFjNEJxTfTjJwW/FzNsBuQf\vn!pvfohj!g-pmsbnn!stpbon/qzmsfusf3nEp!ffhn)jutptej)wtfcNbb!q.<!!1\v/$2f!o>enjjgs\v!!u\vb$pjmogd!m\vv?ezfe!p=cc/ttegg/to?p\vn!n\vp$Djtgueifhgj!mV=T!Ff`eOvPmSdNoBjM$N\vB!Q\v\v?!zveopjcg/ptsgn/!StCbQntqumifhsj3mE=!!ofpesvnmbdmoNjb$q\v<!!\v\vg$jjegoofe$f\vg!!<VcThFs`/VsCpPm\vp!Dvfowjjgtptsjnn!fw!f>d+3!!fodposbnjbembTSdfbwmjft<t!j\vn$Ffmobeujpgu\v!!<\v{$zfyo/e*jsgp\vm!p\vD$fjwgj!tatejfngfj)osfbef)oVjTMFp`UUCBHOSHtF!O>U!*c!h%s%/!s)pemfpgDjfowfjet)tUjBnOfH!F<O*UwTVQwB!D-Fq`bONPfSwNjBtMtNjBnQf*)!E}3}f!sevfugyjfouf!e>!!)sVpTmFp`DDfMwFjBtStDjPnBfU!`5OdPfSwN!B\vMQNBBNQF*W*J\vT!TwJfNdF4`!FqTfVs!ugvfsecgOjp$s\vn!b\vmg3jBesocf)$w\vf!d<4*!ofpzjfu`dqfpstj-E!fwdfbdg4!!-tOvqsbgn`!o-pmsbnn-s!pwof!d-4o!pnjbuqjOt-p!QgxmfpjbWuw!!g.b)dcfsEBj3smfbdnusjppOoc*s!v|u!swffqd!4>!!rm1b!n>s!pwof!d<4f)mebGdeTym)bfnzsfp`oq!p>t+/!yz*y-/!OeqGbeny!)<f1z/f2`!q.p!t1//z3*!-+!!e{Gzeyy/)*fwzVfw`!q-pqtb/N{m*b*n<s!pwof)dE43!frs2v!u>y!fwuf!d>4!)OeqGbenz!)4fdzffw`!q\vpQtB/NyM*B-N!SePGOe`zF)TfVz!fg`fqepgtj/$z\v*!-<!oepGjeuzj)tfpzQfw`Nqwp.t!/>{!*o*p<j!uwjftdp3Q!xtfuj1W!w>!!4edGfewy!)<wmVbwn/stpuo*!<>!!wmfbdn3s!ptOuz2s!u>f!nepGfehz!)4wdVfww/!t\vug*j<e!owff$d\v4!!<Oo!p>j!utdvfssgj`Eofpdsbng<!!+w!fmdb4n!srp2oq!f>s!qm!b>n!sdpsop!t\vtE)FrE2J-T!`OF*M<C!VwPfEd!4g!fre1gqjf$s\vq!!<>*!mdbsnpstptO)wO)-f!{rj1m*b<n!swpfod!4>!!Um!b>n!srp2oq!f4sdqf!w+!!<t1u/12/!y.!!,;!!r11/q2f!s@q!!h+o!jtdub2G/uyo<p!swGf`dm4h!!C>!!>o!prj2uqdffssqj!E+f!dtbug1!/uzb!p,m!gr!1\vqgfjseqo!f+$!\vt!u\v2g/jze<o!fg$m\vp!b<uc!/etftuf!o>m!bnubfyN)mefpyuf)uU!->!+U!*s-p!uedpbuG)tCt-f!oCm*b*u<f!ng!m\vp*bCu`!MtFdObOmBfI!D>`!Q)BeNfTuT!F>O>M!B1U/F1N*)!e@f!o1j/g1f!e;!!ggjbmdff$E\vj!s<fhd/utjtpfoo!m+b!ujfoNwmffsytffut!r>s+u!)sepfuud*b<G!tstffuovmsbou!fonp!s\vn*bHm`jM{FfO)OUB!I+D!`)QnBbNqTOT/FyO!M+B!UtFdNb)meff*o!j,g!fCe!!+g!j)mnfb$q\vO!/<zs!/+t!ttfdobmmbfu*f!N,m!fOy!f+u!!n>b+q!Os/p{u*d<b!G~t!t\vf$ofmobeujfgn\v!!\v\v*$Sj`gMeFfOgO!BVITDF``QSBPNVTHTIFOOFMTBTUNFBNQ)\ve!fvoojjggfpes!ng!jt$b\vn!q<m*fwsV3wE!!-sqpbvNhtitoffotmtbNubfqn<)!E\v3$ffsoveujygf\vu!!\v>$!jtgteffogm!bVuTfFN`mNfFyUfBuM!O5FdTfTwN!B\vQQ\vB!NvToTjFgOpMsBnU!FtNb`nFqTmVf!sg3fEe!gnjf$u\vb!m<otfttftoNmbbqu<f!n\v!$>f!osepjugd\vb!Gwtbtsfzojmobhu!fwnf!du4b!pwmOgp!s\vngbjme<o!fw$b\vs!z\vjgojhe!owff$d\v4!!<wcN/wtQtpftojiuhjvppoS<m!f\vy$fjug!!>e+f!gsjpoufdeb)GVtTtFf`oFiOhWvNpBsQ!*\v!*}C}`!MNFBOYO`BCIPDY``QDBMNJTQTQFFOSI!H?V!P1S!)}e}f!oejfggfjeo!fgej)mVfT$F\v`!U<ShB/OtTtNfJoTiThJvPpOS*m\vf!ywfbus!z>j+o!hs!pwufddb4G!twtXfposimhevQppst!j\vu*jHp`oM<F!O\vO$BfIoDe`jQgB\vN!T\vT$FjOgI!HeVfPgSj)oeffeo)jDgMfJeQ!`gEjJmSfF$D\vU!J<PsO/*t\vt!fwobishzvjpoShm!fwyffdu4!!>w+M!psdpbumdQbpGttjtufjopioh<v!p\vs$!f\vo*eSj`gM\vF!O\vO$BjIoDd`mQvBeNfT!T=FdOmIjHqVEPjSs)fedfuojjpgof/eg!tg/ji$f\vb!e<?*\vw!V\vw$!j-oqdbmNvtetff!o=idhmvjpqsc)pEy3/fgstv/uiyffbue!?>\v!!t\vt$fjooidhmvvpeSfm!f=ygfpuh!/5gdtf/wi!f\vbQeB?N\vT!T\vF$OjIoHdVmPvSe`fF!T=Vt!igbfeepgxjN$b\vq!/<gttt/fiofibhev?p\vs!!\v>$!jsopdumdvbeGft!t=fgomiphxvNpbsq!/ugbtp/migf!b\veg?j\ve!o\vf$$j\vo!d<mevsebfd!t=jfeo!d*puetjfoUhb?i\vq!m\vb$!j=o!dbm/vsepfm!p=DdfvtcvfgFgojweS)f!ggmjf!d\vuUjTpFoUGBTI?Q\vM!B\v`$FjToVd!mgvfeefg!j=$f\vo!w\vngbjqeQoifz$t\vj!d\vbgmj/egotf/$i\vf!b<ec?/\v*!w\vV$wj!o-dqmbvNebfi!q=mmbj)hEi3uftsDvpunynfpuo!/>g+t!/bi/fsbpem?p\vD!f\vt$vjgogdjmev!e\vf*!C=`mMjFhOiOuBtIQDC`SQ/BgNtB/IiQfMbBe)?e\vf!o\vj$gjfoed!mgvjemff!$=\vu!s<bho/t*nwjVtwt!j-pqob/Ngbti/qimfbb)eE?3\vf!s\vv$ujyofdum!v>e+f!!b=/usppomfpNDbfqtqvjgoghj/eg!t\v/*iHf`bMeF?O\vO!B\vI$Dj`oQdBmNvBeIfQ!M=Bp)jeuf/ogjtg/fief!bgej?m\vf!$w\vp!j<es!/n*bwjVow)!*-!q|b!N\vb$ijqomdbm)vEe3ff!s=vdumyjfquE!j>s+f!dbu/jsppom/pgDtf/tcvpgegzj?e\v!!\v\v*$Sj`oMdFmOvOeBfI!D=`dQmBjNqBcIpQyM/Bg)te/fcopjegzf?e\v!!gwjfmdf5$!\ve!j<gbg/v*twfVDwp!m-pqsb!N>b!iwqfmdb5))Ee3jfgsgvvutyff-u!!p>q+b!dbj/uszp*m<p!DSfftgvmgfgdjuef!e\vM*jBh`iMuF!OsOfBgImDf`dQuBfNeBMIjQhMiBu)!e>f!oSjfggfmef!dgujf$e\vM!j\vhQiBuN)BwIfQdM4B)`1F/T1V*!-g!fwefgdj4$)\v1!/\v1g*j-e!owff$d\v4!)<1s/p1m*p-D!mwffydf4u)!1>/+1!*s*p<m!pwDffdt4v!gugpjueb!m<F*nsjptmtpjDwmffSybfeuj)bsobdffo!j>M!pfUnCjHtSttj!w>f!<s!p\vm$pjDgmeffygf!uV!T<F*`wNVBwQ!\v-!qwbfnd)5E!3uffsyvfumyDfpum!p>s!"],EQ.phong=["?0t0w!/Imjbodujtt;z!ihqm=t!mf4e-v!mmdjohji$u\v\v!!\v\vH0O0P!I$QQ!SfFoGjJgYf\ve!$\v","~0!0<!eIJj!o>u!ts;p!mhpmDthmb4s-G!`mmjhh!i\vu?-z!eppjcu/\vt!g\v/0u0j!p$=Q!SfFeGvJmYd\vo!j\v$$\ve!f\vg?jzoefp!cQ/ItPgO/Hh\vp!g\v=$!jfoedvmmvdeofj!$=\vd!p\vn?nzpeop?c\v/!t\vg$/jqobdNmxvpemfg!==!qfbedvlmjdoohj?$\v\v!!\v<$*jeoJd)mmvfeyff!U=uvvcqputv/PipfUbseb?f\vo!j\vm$!j>g!oeeJf!g\v!?VzTeFp`cV/CtPg\v/!hvoojjqgqpbsNnf!owpfud=4!!feejvgmgdvotjf$<\v!!v\vo?jzgeppscn/!twgf/du4v!qfunvjpt=t!jfwefv<m!dvoojj$g\vp!s\vn?!zwefpdc4/!ttgq/fhdovpmibQsq<b!nvwoojfg=p!sfne!vgmmdpobju$!\vt!i<jfodjoobfjtetb<S!fvwojjtgtpjsnnF!mgbmuppbuu!!,p!qsbbdmjvudzf<q!T\vu$djfgsejfego!jV/TuFi`hBjMMQeIfBuUdFfTmUg\vf!sv!o,j!gspbsmnv!dgfmqpTbuud!fbsmjqei/buUifhtjuM<e!f\vu$dffomegjfgs\v!!,v!ofjtgvpgsgnj!Ewufddf4s!jveDobjn/fusibhQjpMtejfuujdpfom<g!fvso!j,g!pfstnv!gngbjuE5u!dvfWsjjfex/NubiuhsjjMye<f!u\vd$ffmogefjsg!\v>!!\vu$ijhgjeMfhgo!jVpThFu`vVpW!\v4!dwfbws!z\vj?ozhe!pwcf/dt3g!/wqVbwN<p!b\v=$!jfgeevfmgd!oVjW$`\vD!M\vJ?Qz\ve!pwcb/stzgj/oohp!ngnmppDbtuu!iwhVjwmM=p!dfbemvVm<d!o\vj$$f\vo!e\vj?gz\ve!p\vc$/ftoge/jhgo\vp!i\vQ$tjugi!hejfmg=j!offeev)mVdToFj`$M\vJ!H\vIgUjNeBoQf*$!\v}!}<!cehfsg/jsopfmep)DVfTwFj`tBtPjNnBfQ!*>\v+!!wfbdsozbjjoehb!Swffwdj3t!twjVnwF3m<b!u\vp$uf!o<e{jzgy\v/!*\vs$pjmgpeDffgw!jVtTtFj`nNfB)Qs\vb!fvoojjMgppUsCnH!Sttb!n>q!mcfhss3/Es!pnmbpqD<f!w\vj$tftojenjfg!\v<!*\vw$Vjwg!e-fqgb!NVfTwFj`tBtMjQnIfB)NEB3Qf\vs!vvuoyjfgup!s>n!!stpbmnpqDmffwsj3tEt!jbnmfq!i5bdNfbwq!<\v!Q\vB$NfFoWeJjTgT\vJ!N\vF$`jFgTeVf!gg!fVeTgFj`$B\vP!N\vBgQj\ve!ovfo$j\vg!p<s*no!ptjbundqfmsfjsE3fEd!bbgp!N-bOqq<b!n\v!$-jmgbonesfpgo!!V-ToFp`jVuCjPt\vp!QvxofjjgWpws!n.!)gcmspBb3um!bbnpsNpbOqcJsovuufsoftqj!u>z!<m!b\vn$sfpooe!j<gf\vm!b\vd$Tfmobenjsgp\vo!!\v>$+j!gzeyf/gO!qVbTnF!`<M1J/H2I!U.N!B1Q/\v3!!v+o!j{gzpys/n*!wtVbwn!q-mqfbsN3mEb!nmsjphoi)uEN3bfqs<v!u\vy$fjug!o>e!fOgq!bVnT!F4`dVfCwP!\v\v!QvBoNjMgBpNsSnP!Og`mFpTbVu!!gmfjehgiju$N\vb!q<JoopujfuojttjpuQzw<N!w\v.$!f>o!eojpgj\vu!j\vt$pfQoxefjjgW\vw!!\v4$djfgwe!f<gm!bVnTsFp`oF!N>J!TmTbJnWsFpNOBzQs\vu!fvnopjfghp!s4nd!ftwb!n\vqgmjfeso3fE$!\vf!n<jotptjjuwdffNsbjqE<f!d\vb$gf!o+e!jmgb\vn!s\vp$oj!o>d!mmvbenfs!p=oc!t\veEgFtE?J\vT!`\vF$MjCgVePfEg!!gVfTeFg`jO$P\vS!N<B*MmNbBnQs\vp!Ovwo)jfg{pjsmnb!ntsbpnoq!m>f!sm3bEn!soppos!n4bdmfNwb!q<<1!/\v2$!j.g!o;e!f1g/!2V!T@F!`hVoCjPd\vb!GvuoojpgspGs`nm!hw!f>d!3o!pojpusdnfbsmjTEdfbdmbfg<!!u\vb$pfmoge!j\vgg\vj!e\vo$ff$o\ve!j<g1\v/!2\v!$>j!gi!uaheoffgsjuoTfseb)mVvTdFf`qUtB!O\vHfFtOmUf*$!\v%!%<!s)/esfbgmjvodffeq)TUmBfOyHfFuO!U>T!QiBuDhFo`fOsPuSTNsBbMmNvBdQf*q!t}!}<!*ewfVgwj!o-fqeb!N)sVbTmFv`dDfMqFtB)SED3PfBsUv`uOyPfSuN!B>M!NsBbQm*v*d\vf!qwTfmdf4y!fquf!s5udvfswc!O\vpQsBnNbSmB3MBVsDcF)QwTf`dF4T!Vf!zgff`eqgpjt$-\v!!w<fidu4h!otfvssugT`sobpmsvnd-f!qwtf!du4b!pnmbgq!O\v-g!jgemopfb$u\v!!g<bedsfbEdjtsjfed!u*juptof*U!b|i!qwmfbd!4=!!rb1/!s>p!mwpfDdf4t)vegGgejye))f!zgfj`!q\vpUtT/FyU*B-I!QeMGBe`yF)TfVz!fg`fqepgtj/$z\v*!-\v!gejGeeoyf)$f\vz!f\v`gqjpeto/f{$*\v*!<<!cw/f*dw4V!wr!2-!q>b!Nwbfidq4m)be)GEe3zf)sfvzufy`fqup!t>/+y!*b-/!sepGmepzD)fftzvfg`gqjpet!/\vz**C-`!MeFGOeOzB)IfDz`fQ`BqNpBtI/Q{M*B*)<e!fwofjdg3f!et!ug1j!m>f!$e\vG!e<yh)/w*VwwV/wt!u-*q<b!Nwbfidq3m!bt)uE23!f>s!veuGyefzu)!w>V+w!/bt/us*p<m!pwDffdt4v!gOg!j>e!!t\vv*sHg``MoFpOsOnB<I!Dw`fQdB4N!BrI2QqMfBs)qe!f>o!jdgsfpet!tg)jrm2f-$!\vO!*<<s!/w*fwdV4w!!r-1qqbfNsbqi!q>m!bd)sEp3tfts)vOu-y!fru1!*><+!!wbf/ds4p!mUp!D>f!trv2gqgfjseq!!\v+*!St`uM1F/OyO!B,I!Dr`1QqBfNsBqI!Q+M!Bt)ue2f/oyj<g!fwef!dg4j!mCf!$>\v!!r<2bq/f*swqV!w+!!-tqub1N/bzi!q,m!br)1Eq3ffssqv!u+y!ftuu!2>/+z!<b!/gsmppmbpuD!fetfvug!g>j!en!b\vy*)Be`pMuF)OUO-B!IUD*`-Q!BeNpBuI)QCM-B!)Ce*f*o<j!ggfmep!bguj!$t\vd!b\vmQfB!N>B!I)QeMfBu`!F>T>V!!1g/f1e*g!j@$!\v1!/\v1g!j;e!ogfb$d\vf!E<jsspfmdpuDjmpfoy!f+u!!j>o+w!fssptmfptDrfstuv)gegfjue*!<<!*ssfpumvpsDom!foypfsun)bsmbjf{ofj)MUp!U+C!H)Sntb!q>O!/syp!m+p!Dtmdfbymffu*!!<,*!wCV!w+!!-)qnbbnq)OE/3zf!s+v!utydfbum!f>*!!s,p!mOp!D+m!fnybfquO!/5{d*f<w!!~\v!Q\vB$Nf`oFeTjVg!\vg!fwebgsjz$j\vo!h<!fwwfjdt4t!jwnOfp!s>n!bfmd<o!bwjbesbzSjfowhj!twtfjdn4F!mwbNuwpQup!t4jdufjwp!o<<*!*\v1$/e1f)g4jdoffw!!F-O*W1N/B1Q)`4NdPfEwF!`-S*F1G/M1F)D4UdJfPwO!\v-!*\v1$/j1g)!4edffgwj)oufieh)jVMTeFf`uFdOfWmNgBfQS*!!>}!}u!iNhBjYM`eCfPuYd`fDmMgJfQsQ!FuSi!h?j!M1e\vf!uwdbfsmzgjfoSh!!<w*fzdu4j!dwbXqpps!m-efQtpvtgjgujjep)o5<d!f\vw$!f>o!esjpgm\vp!D\vf$tjvgg!gejfeg!j5odffew)!V\vT?Fz`eFpOcW/NtBgQ/*y\vp!cvqojjmgdp=s!nf!egvmmpdbouj!$f\vo!w\vN?bzqeJpocu/ftogt/joupzj<u!dvfosjjgEpqsjnm!dg=m!pfbeuv!mgdmojjq$F\vo!w|N!b*q)<o!j\vb$nj!geejfpgw!!F\vO?WeNbBfQi`/UtZgQ/Fu`jDpV=C!Ff\ve!vvmodjogjp$s\vn!!\vt?benbqfmif/stDgv/chfo!jfqoqwbnNbfqo<p!u\v=$!ffmetvfm\vd!ovjo$j\vg!p\vs?nT!Gtobpnjqumdffsm3gEf!SfwoowFnfbcqv<d!=\v!$ffeovemjdgo\vj!$\v\v$!j\vggojeefogf!$V\vT!F<`qVbCNPs\vb!mvvodjfgqpts!nE!3gsmfpmbqun!bstf!gnssbpdgujjopvo!S\vbQuBjNpS<B!M\vV$DfFoQeTj`gF\vT!V\v!$gffoeegjjg$\v\v!!\v\v$?jegb!feif/gtjgo/fheo)pDiMQJtQu`iEhJjSmF=D!UfJePvOm*d\vo!jw$b\vs!z\vj?oehb!fwif/dt4g!/woMppndnbpmDQtputijhujjmp=o!<f!e\vv$mfdooejj$g\v\v!!\v\v?$hjoojdempvdeoff!==!dfmejvqmEdjosjf$d\vu!j\vp?oe/bgfti//itfgb/eq?b\vN!x\vp$mjgo=d!mfveevfm!d=odjm$j\vq!c\vp?ye/bgfti//itfgb/eq?b\vN!x\vp$ejboidtm=v!effe!v=mgdpohj/$g\vt!/\vi?feb"],EQ.hueSaturation=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gxp/ssnp!mtpbdn!q-m*fmst3iE)!cjhnsb3hmft<i!)w5bdsfzwj!o>h!!swpfmdp3D!hwbVswG<`!m\vh$!e<f*g!j*offh!oNbBSYt`tSfBoOuHiFh!j8m\v!!-\v^$1e]ftgtjfoofu!iShBjOmH!F-`{B/MmMt!i1)\vt!tvfoojugiphsjnm!`gqmbpnb!u-!*ifvhfo]bNSBoYp`jSuBbOsHvFu^b<t!!v-o^j1g]pospnj!ugbmspvbuub!tt!b-uzv/smbtuij)poop]jNuBbYs`vSuBbOtH`Fq^b<n!!v-o*jfghposbnS!fgvmip!b-u^!1m]jfhviiu!o-fyt/tm]tNiB)Yf`vSiB`OqHbFn^!<)!4gdmfpwb!u>!!nmbtqi`!i~v!f~)!g<mlpbbfus!cj!o<W^bsmfvufo-v!pgdm`pfbvui!]itvtffBomumi-h!jgmm!p>b!uf!hiovbfSStbtofhofu*i!h|j!mg!m<p^bsuf!uwobvmpvdf`!f>v!ij]ooWpbjmuvbfs!v,u!b)ti!v>f!Bfmhmo!b,S!oipvjfuSbbsovhufb*t!!0<!^3s/f1u<o!vjpgd!`)fwvbim]vffv!i=!!>1!/f1h*o!bsSffuvvis!o|!!w*bfmhvofb!s,!!>2>/!1s<f!ufomvtpfd!`jfgv!i))w!bgmjv!f|!!?*!,2,/s1f*u!osvfpudv`sfov!iw!b<mFvHfO!B.S!`2Y/B1N<!!=f!mstffu!osvfpudv`sfov!iw!b<m1v!f><!!s~f!ugomvppbdu`!fnvbiq!`utobju)v!ssbpugj!p<o2)!g,m!pfbhuo!bjso!W>b!mfvhfo-b!sg!m<p1b!u>!!tfbhuovbssb!u*j7p!o>B?m!mf-h!ogbmsp)b!ug!jt!b~u!v~s!b<uljbpfosScb!o<hsff*u!o|v!pgdm`pfbvui!!w>b!mfvhfo!b>s!!j|o!W*b6m/v1f!!,+!!*)s2f/u1o!v,p!dt`bfuvvis)buubjppmogB!m=m!!i,)!!tgbju!v|s!b*u,j,psofSuboovhpfd*`<f!vsif!u<vFsHoO!BdSm`bYnBqN)!w=b!msvffu-o!v1p/d1`-f!v2i/!1<*1<!!>~!!sgfmupobvup!dn`bfqv`im!juhoiju)o!fstptg)!g<mfphboub!SjtotWfbomuvifh-j!mg!m-pfbhuo!bmSjohpijuuobfstvtuBbmtm!--!fghmopbbSuf!vmij!huibupomfgt!t<S1b!o>h!ff*h!o|b!sg!mupobju!!<we!m>p!imtjfhsiiuuo`fftvtiB!mumb!p,m!gm!j<h1i/u7o!f+t!tyS/bmothif!<>!!jig!!u)bwp!m=g!!1</*1{*z!ys/fsupvmspod!)jmotWib3mcvhfs!!+>!!)mwt!i,!!42d/f1w*!<<!*fwmVtwf!!-sffhubvnsjo)!Ej3ofWsbvmuvyff!u,!!>)!ws!p+m!p)d2!/51d!f.w!!j|o!W*b)movjfb*n*!<e!j~p!wg!m~p!b<u*!mi!v-ft3!s-hic))4gdmfpwb!uo!sgv2u-f!sg!m~p!b<u1!/g73!-0!!gim!p>b!ui!!i~v!f<*1!/|7!!j>g,!!)ii!v|f!!*=1!/11/!1=*!!ii)v!fg!j,!>~!!2</b1u<m!ffEmdt!f0!!j*gh!!).i!vsf)!!?,!!21//15*!!>i!vif!!|.!>f!t2m/f1!<~!!g<mbpubmuf!Esdf!t0<!!*jsg!!.)!)c7)/!1,!!+1!/i3v!f>*!!i=!!|2!/*1y*b!Nsdf!t>!>>!!hg)2!!g,j!!)fgt3m!f.!!~g!2<*b!u+m!f7E/d1!!0+!!*icv!f.<!!hf)m!t>f!!ij!g|!!)*)y3b/N1d!!+>!>i!vsf)*!!g=j!!2</*1**o!jsNfdt!!,>!!ygb3N<d!)f!m.t!f1!/j3g)!!)0)!4b/u1m!f+E!di!v;f!**!o=j!N3d/!1,*!!ysbfNtd!)>!!0g!2b!u,m!f)Egd3!!@.!!6g/21*!!=+!!m)!)>3!/t1!!<0o!j4N/d1!*.!!.y!biNvdf!*>!!+b!u7m/f1E<d!!fumbtpfm!gs!f|t!!*>o!jgN2d<!!?s!fyubvNsdo)!!sgfjt!<<!1~/!3w!f0d!4*!oijtNmd3!s,h!cy)bwNfdd)4!!>i!tmm!*<!*|*!cw!f-dh4)!ysbhnc!<-!sj)gy!b)ni!t>m!/yzb!N>d>!!u1b/p1m*g!!|<!*s*hcc!!->h!)wofjdn4!)-ist)mo/j{n*!<>!!~o!jfNmdt!fu!b|p!mggm!p<bcu/!dg!3><!!cj!gu!b)pimtgm!/<{h!/=d!!1>/!6h*!!ugb3p!m>g!!i<tsm//d{!!>+!!s)!2u/b1p!m,g!!i<t1m//1z!*><!!mf!mutbfp!mgg3!!<>1!/i1t!m>/!{t!!,u!biptmmg/!z<!1./!2i.t!m>/!zi!!+u!biptmmg/!{|<!!*gdm!p4bduf!wg)2m!t>i!33c/h1s!!+4!diftwm!/~{!!<.c!hgs3!<o!ssvhucf/ss!!~>!!<i*v*f13/s4h0c1)/g22)-!!.g!3y-/!mittim!/-y3!g,!!-)22g/)1c0h4s/31f*v*i<!!>s!hcc//chh!s>!!<i*vyf/3msthic!)-g32g-!"],EQ.blitScreen=["?$TjWoodfmfvsedfT!u=jcm","~v!o\vjggjpesonf!$t\vb!n<q*mcfhss3/Es!pjmnpbDhhfb<s!Gw`bmshz)jhoohj!swffidu3j!ew!V>w!<c!h\vs$/jsgpemfpgD!hVbTsFG``MmJhO!F\vBHSO\vJ!S\vF$IjUoJdEm!vgeffe!g=jf$o\vd!p\vegjjoeho?f\v$!\v\v!$<f*oweVjwg!\v-!f\vh$bjngje)fEg3!fEsJvUuIyFfSuJ!O>H!\vs!p\vm$pjDohdbmsvGe`fm!h=!d\vpfntnmpfo$?\v\v!!<w*f*dw4V!we!j-ufihfbsnjjo)hE)3wffsdv4u!ydfpum)pCsH*S!t|p!Ugsmbpfbouj!Mh!s>j!es`pqmpptDjhubjspGo`!m>h!!s\vbSoBeF)OhJmM``GFsTbVh!Dgpfpesgej/$y\vz!*|<!!*w)fodj4b!ne!jeujipfws!`\vtgijjegouf`$S\vH!C~!!><!CwHfSd`4u)g1j/i3t6`!s0f!i3u6j6e/!1,-!!s.p1m/p3d6!!o0s!v3u6f6s/!1<-*!o1p/j3u6j!t0p!q3`6e6j/s1h*!<-!CeHjSu`iufgsj`itti`jsgfui`uSjHeC!!+>!!1n/j3y.)!3-/C1H!S+`!uegjjuiitf`s"],EQ.pick=["~0!0<!e$fQnSsFpGgJtYo\vb!svuo!j+g!pysjns!ucbpNpxmf!jvWUmffyeupvNsvf!<+!!vyojjsgupbsNnu!dnfbkup4s!QvvV!w>N!boupsjjuyj<t!pvQo`jmghp!s\vng!jnebouf5$!\vv!Q~s!p<ksfpdmupNDbiudsujbyC<b!!v>o!jsgppmspnD!indbuub5C!wv!N|p!e*fsmpNmbpuDsijdyu<b!Cvvo)j!ggpjs!n\v!SnPbMuP5D!IvDNUpBeCf!mgWfjefgxjN$b\vu!s\vjgyj<e!obfu$u\vs!j~c!v<u*f*!1w/f2d!4-!wbVObp)s4ndbfmw<!!+b!uyujssjucbvNuwfV!vw)f3dd4f!wb!Q>p!twjVuwj!p|o!<*!fbsuvuusyjfcUvvu)f!!gwjf!d\v3f!tbmVfw$<\v!!\v<$*jyg/ewfVgb!!C-B*U*D1I/D2P!M-PwSV\vb!)v4odjfgwp!s+n!!ycjpspumb!NvwCVbvu)d3idDfpwm)p4sd<f!wb!u>u!swjVcwv!u\vfQ!JwMfDd`5W!Vb!CgbfuedgijD$p\vm!p\vsg<j!ewobfs$z\vj!o<h*!ewffnds5p!gwtCobbusdui!D+p!mypjss<u!b\vN$mffoeepjNgv\v)!4\vd$fjwg!e>f!go!pVjWu`jDtMpJQQe\vm!swpbXswz!j\vo1h!!>waf!dS4F!QwQVJwM<D!`\vY$PfCm`tYfB\vN!!wgbjs$z\vj!o\vhg!jwefodf3$!\vw!V~w!<<!e\vf$nfsopegjtgo\vb!s\vu$!j+g!eeffgd!oCbBuUtDoIJJyOjTsUuBbONDbF!\v>!!veofjngsppsgnt!ocbpspum!!|v!V*tffdJoobtuutbooJdfft<V!v\v)$!egfjg!j\voFfD!OVBTUFT`OJJOITDUUBBOCD!JgOfHe\vg!j\v$$\vj!o~d!m\vv?ezfe!p=cj/ottwu/bhoodjjooohj/lwtt=/!iffebvem?d\vo!j\v$$\vf!o|e!j*gh\vo!jwobosjzljTofht!Vwvf)d!4g!jw!X<p*smmbenQspptOjbu)j4pdof<w!!w>b!smzbjnoshp!Owufddf4k!cwpM!p4ddbfmwQ!p<t*joupjjpuoj<t!p\vQ$be)f4gdjfowf!!>V!ToFp`jTuLjJtOpOQJmObHd\vp!M\vw$!e<f*g1j/o2f!!-CoPpOjFu`jUtFpYQUbV)S5Fd\vf!wv!o>j!gepfsnns!pcgptpomb!svuV!t5fdTflwj!o|o!j*oehj<p!w\v)$ojjobdnm!veejfp!w=!t\vl?jeobofjio/ht/w","~0!0~!!$<QeSsFbGdJtYj\ve!!v|o!j*g1p/s1n!!>c>p!pbm/!svpEmjptDdhbbsseGT`fmmhf)d!ugbjc!m\vfg<j!evoofj$g\vp!s<ns!pwmfpdD5f!tvsGfjwyfQSjlddljSQfywjfGsvt!f>D!psmppmsp<D!hvbosjGg`pmshn!!\vgfmtpmbfu$!\vv!B~m!q<isbpUmfptDuf<t!svfowjfgSplsdnj!QcypjpGmv!!v>U!ssbpomtpqDbhsbfsoGu`<m!hv!o|j!gfptsmnf!!c~p!p<ms!pvmUpfDyiudvusbfC<w!!\v>$!jsgpemfpgD!hVbWs`GD`MmJhQ!\v|!!w*bsspzmjpoDhi!dwufbdC4v!)w!Vgwj<!!\v\vS$PfMmPtDfI\vD!UwBbCs!zgjfoehg!jw$f\vd!3\v!?wzVewp<c!/\vt$gf/oyepjcgq\vj!mvdo=j!gfpesvnm!dtobjn$q\vm!f\vs?3zEe!pvcT/btngq/mofpsj<u!d\vf$sejfEgqjjomfd!=D!MfJeQv`mEdJoSjF$D\vU!J~P!O~\v!!~\v!$<jeosdbmdvtejfe!!=|d!m*juqtEfjUsbfidqumjBpvo!/>g=t!/bi/fsbpem?p\vD!wwvb)s!zgjjo!h|!!wfftdm4f!!w~M!p~d!b<meQspbtdjtujjep!o|<!!*w1b/s1z!j>o>h!!bw/fsdp4m!pwDXwpvs)m!egQjp!t|j!u*jupoof<s!b\vq$tjogbesfUgv!)C!BgUjD!I\vDgPjMePoSf\v$!\vv!o<j*gwpVswn!!-cspfpmmq!nvbCTbvu)dEi3Dfpsmvpusy<f!uw!b>s!zsjpomhp!Dwwfvd!5\v!fwtCmbfu$d\vi!D<p*mzpys/<w!V\vw$!f-osefjmgq\vn!b\vT$vj)oEd3mfvsevfu!y=fdum!j>q!csppym/pgDtw/vi!f\vbQeJ?M\vD!`wWpVj!eg!fnebgjjo$)\v*!!||!!*wffmdc5b!uvdwfDmpfmTpess<b!djtgj!E)vvaU!f%y%u!vfs"],EQ.envmapDynamicCompose=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*g1p/s2n!!-tcbhnsq/m*fbsi3qEm!bu!f-ycuhvss/f32s<p!mvpodj!g-pcshns!/t2bsnpqmmpfds)3yEj!nu)f5ydufvws!f>3!<s!pvmopjDghpbssnG!`gmmhp!b<ub!/p3gsgptmfpud<!!>w!bbsizqjmobh!!uwbfpdm3g!!w<V*w*<w!V\vw$!j-o3dfmsvveufy!f=uf)oEd3pfesjvouhy?f\vu!)wspbjfeo!jnMbpjUoC)H*S!t|!!>w!f3ds5p!mdppdm!p5sd2f!w>!!<u*f*yzu/vwsVfw3!E-)uufftygugvps!f.2!-y!/wwfVdw3)"],EQ.blurH=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jngvpts!n>!!tsbpnmqpmDfhsb3sEG!`jmnhb!h<f2<6!1w/b1s!z+j!o*h*!zw/fwdV3w!!w-Vfwv<m!bvwo!j+g!p1s/n5!!g,m!pyb/uw!Vwwb)m3vdff<w!!w-pfjheb!nnjb)jEo3)f*s!v|u!ywffud!5>!,t!vnnv!t>!!<w9f2d:51)/11/!1+*!<*!*tzv/nw!V,w>!!-uffvymubvws!f+3!E1)/j4n!b,h!fy-/!wwVfwd)33)dwfVww!/-yf!h.b!n5j/)1E!3+f!swvbumyvffu-!!>w,V!wn/vzt*!*<!6+5!313/21/612!<+!!t*v*nz!/,w>V!wu!f-yfuvvmsbfw3!E+)!j1n/b3h!f,-!!yw/fwdV3w))w3Vdwf/wy!!-.f!h4b/n1j!)+E!3wfbsmvvufy-f!uw!V>w,/!zn*v*t!!+<!214/612:/219!<+!!t*v*nz!/,w>V!wu!f-yfuvvmsbfw3!E+)!j1n/b2h!f,-!!yw/fwdV3w))w3Vdwf/wy!!-.f!h3b/n1j!)+E!3wfbsmvvufy-f!uw!V>w,/!zn*v*t!!+<!414/7223/315!6+<!!*t*vzn/!w,V>w!!u-fyy/uwvVswf)33Ed)fjwn!b-hffh-b!nwjf)dE33)fwsVvwu/yyf!u.!!>2,/!1n!v+t!!w<b2m4v6f2-/!1w!V+w!/*z*"],EQ.blurV=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jngvpts!n>!!tsbpnmqpmDfhsb3sEG!`jmnhb!h<f2<6!1w/b1s!z+j!o*h*!fwvfmdb3w!!w+V!w1</!5v!o,j!gzp/swnV!wg!m-pyb/uw!Vwwb)m3vdff<w!!w-pfjheb!nnjb)jEo3)f*s!v|u!ywffud!5>!,t!vnnv!t>!!<w9f2d:51)/11/!1+*!<*!*tfvvnm!b,w>!!+u!f1y/u4v!s,f!3zE/)wjVnwb!h-fy-/!wwVfwd)33)dwfVww!/-yf-h!bwnVjw)/Ez3!f.s!v5u/y1f!u+!!>w,b!mnvvft*!*<!6+5!313/21/612!<+!!t*v*nf!v,m>b!wu!f+y!u1v/s3f!3,E!)zj/nwbVhwf!--!yw/fwdV3w))w3Vdwf/wy!--!fwhVbwn/jz)!E.3!f4s/v1u!y+f!uw!b>m,v!fn*v*t!!+<!214/612:/219!<+!!t*v*nf!v,m>b!wu!f+y!u1v/s2f!3,E!)zj/nwbVhwf!--!yw/fwdV3w))w3Vdwf/wy!--!fwhVbwn/jz)!E.3!f3s/v1u!y+f!uw!b>m,v!fn*v*t!!+<!414/7223/315!6+<!!*t*vzn/!w,V>w!!u-fyy/uwvVswf)33Ed)fjwn!b-hffh-b!nwjf)dE33)fwsVvwu/yyf-u!!w>V,w!/nzv!t.!!<22/416!2+/!1w!b+m!v*f*"],EQ.blurDownSample=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j1g/p5s!n0!!t*b*n*q1m/f2s!3-E1!/j1n)b3hdff<w!!w+b!sfz{jjoThm!fwyffdu3!!,w!VwwV<w!!v-ofjhgbpnsjn)!Ew3ffds3v!uuyffyuf!m,T!j*{*f1</!2w.p!j-e1!/n1b)j3od)f*w!!|+!!hfm{`jGTsmbfhyDfpum!p,s!!w>V!w)!u-ffyhubvnsjf)3EE3)fjsnvbuhyff-u!!w,V!w*!*,1!/u1f!y-f1m/T2j.{)f3!d+f!ww!f+d!3f){2j/T1m-f!y1f/u1!*,*!!w,V!wu!f-yfuhvbsnfj3)E"],EQ.flow=["~v!o<j*g1p/s2n!!-c1p/p1m!!-v1t/f3Y![+<!!wbVuwu)s5jdcfvwu!f>!!wofpdj4u!jqtpptQj`umjhp!o<<*!zw/bospzjjuojht!pwqf!d-3y!/woVpwj<u!jwtppjqe)!3ndbfjwo!)>*!!w|V!wj!gf!t)mvft!f<Y*[{*/!owpVjwu!j>t!pwqf!d-3y)/qopptjju","~d!p<oztuuj!tgomfpubouj!!q+j!3b!/>s!p7m/p3d9!4+2!9s6p4m<p!dv!o>j!gsppsmnp!DthbbnsqGm`fmsh3!E<!ejonfbmhcf!<+!!v*o*jzgyp/s*n*!1n/b2u!4-!wvvw)N4bdufswj!y+<!!yvjosjugbpNswnv!)j)o3ud!ftwi!b-qffh<b!nvjo)jEg3pfssnv!uwyffdu5!!>c!msfpomep<d!!v5odjfgwp!s~n!!<g*mfpmbhuo!bj!o-u!f*o3tjjqu!z+<!!fwmbhsozBjeophn!)wtfpdd3!!+w!V1w/<3!!w+p!j*ew!Vnwb)jiou)h*o!f|m!)w3fddf3w!!v>w!<w!vg!m<p6b/u1!!b+o!hqmffu!t>!!.b!u*bqof)uwtV!w-/fzm-h!owbV)we/pyn*!!>0!!fqmjh3o!B,e!p1n/!6u<b!pjmgg!!)<t*i2b!q,f!!f>q>b!i1t*)!u|b!pvmwg!!>0!!w1V/w2!!,>!!1q/f6u<t!!~u!bfpmmtgf!!|j!gf!t)mtfi!b~q!f<!*>f>m!h2o*b!!|-!1v/w3!!>+!!w*fwdV3w))mifuoh"],EQ.fxaa=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jbg/p*swnV!wt!b-nfqhmbfnsj3)EE!3jfnsbvhufy<f!uv!o>j!gbp/ssnp!mwpfDdh3b!ssGf`tmphm!v<u*j!p*o1</!1w)b5sdzfjwo!h-!1w/f1d!3-!1w/V1w!<-!1\v/$1e!f-g4j4o9f1!/G1Y!B-B7`7R2V/B1M!J-U6Z8`/Q11!!-2*/11/\v1!)\v5$deffwg!j-o*f1!/G1Y)B5Bd`fRwV!B-M*J1U/Z1`)Q52d!f2w/!6-\vo!p\vj$uevfmgpjtoffs!!G-YfBhBb`nRjV!B-MfJhUbZn`jQ!3-!f3h/b1n\vj!!\v-$*e1f/g1j)o5fd!fGwY!B-Bw`VRwV!B)MsJfUeZb`iQT4m!f5y/j1Q\vb!b\vy$Ge!f>g!jsopfm!pGDYhBbBs`GR`VmBhM!J|U!Z*`)Qo5j!b2n3!/e1j\vp!w\v!$~e!f<g*jNobfn!vGmy!b-b{Czpyp/m*!Nctpppqm!\v-!y\vf$ue)fqgpjUoyff!UGbybbybGG)m5pubbup!mgGmbpbbyuG\v!!o\vs$veuffgsj!o<fo!hGjyTbibuGhmopfbmu!3+!!wyfjdq3c\vv!T\vu$fetfgggjPomff!yGjyqb!b>G,m!pzb/uN4t!pwqf!d*4o\vb!q\vT${esfpgij)ogfj!!G<yobhbjGTmipubhuo5f!mw!f+d!5y\vj!q\vc$veTfugfjtogfg!PGmyfbybjTqb!u>),y!*y!/dNmtbpnqq!)*yo-b!q1T/{1s-p!i2a/)1g*j\v!!<\v*$Ieyfjgqjcovft!!G-yebpbpUHfuyf!ttgbgnPqmmffysj3qE)\vy!b\vn$!e>f!gyjjoqfc!vGTyubfbtUgfgyPUmpfqy)juq-!!uqb*p!muGfbybuyvGs!f<31E/)1u!-;!!qu-f!t1g/g1P*m\vf!y\vj$qe!f@g!joobfq!TGeypbpbhU!f>y!Pegpgp)Huu-f!tqg-g!Ppm-f!ysj*q!!uufbypumvGsbfb3yEG)!u<-y!jqq!c,v!T)zpu!j+m!bsv*R-b!b1y/g1!*+\v!!HGyyjbqbcGvmtp!b>u!!IGyyjbqbcMvvtn!bu)bGpymbGbbGbmypGb!u<56!/s1h!c,b!**!*|q!dsSfiuuvhsoof!Msohbcqbt/.z)<!!+~!!uGtyeb)b!G>m!pubfut5g!gGPymbfbyQjjqy!fumbTpimbGebfbsy)G!!G<yGbybjGqmcpvbtu!3+!!qGpytj-q!cGvytb!b>G!mHpybjuq5c!vgty!bubbDppmoGtbpbmyfGQ!p<tQQopbtq-T!eGpypbhb!U;f!yO!oubfqyT-e!pGpyhb!b@U!fOyo!pgjyubdbfDspjoet!p>m!fo4b7q1TUefpypFhy!qmCpjpbCtbObfyhGP!o<f*-Q!uGtyeb!b-UOfuyt!eg)yobjbnD!p>o!tuptmef!4u7b1pUmfGybFbyyqGC!j<bQtuOtfeh!U=x!pO-u!tGey!b>b!GOmoppbjuu3d!fgsyjbeb!RmvpbpmCjbubzySGd!q<Gisubhnoff-M!oGbyqbtb0G1m/p2b!u>5!!qgdySbibuDhpooftMpombfqStd!quGbspbmnGfbPbqyuG-!!<Gpysbfb[GUmMpNbbun5v!mg!y>bab!D*p1o/t1p!m=f!SQdeqoGFsbbnnvfmP)q!u>3!-Q!oGbyqbTbeGpmpphb!um5p!pgCybbbbyDGp!o<t*pOmuft4e7!1,S!dQquGtseb)n!f>P!qiuu3h-o!fGMyobbbqGtm!pubbup!mgGybbbbyRGv!b<mpjsufz[TUvMcNqbjnyv-m!!G>yab!b*G1m/p1b!u=!!gOyebobFRbvnbvmmj)u!z>F!eOhofbUqiTsefptpihp!mmep-p!CGbybbybGG!m<pzb/uN!tgpyqb!b.R!vzb/mQjtupzqF!e>h!fQUuitsef!t*iopbmqeTN{jsop-i!aG)ygbjb!G<mzp/bOut!pgqy!b.b!Dzp/oNttppmqf!F>e!hOfuTtieb!s*qoobfqtTt{-s!pGiyab)bgGjm!p<byu/!Ngtypbqb!D.p!oyt/pQmtfpFqe!h>f!UQiustfet!iupbmpem-G!bGbyybGb!G<myp/bOut!pgqy!b.b!Dyp/oNttppmqf!F>e!hOfuUties!futbippmmGebNbjyoG-!!~G!y~b!b~G!m<p5bQu`5Z!UgJyMbBbVDRp`oBtBpYmGf!4+7!1zD/pQoOtgugEpj!s>!,*!!z|/!QGtypbqb!G*mQpfboup3e!aq)pgtjN!<<!5qQp`tZNU/JyM!B>V!Rq`pBtB/YyG<!!+q!pyt/NQ/Ozg!g>p!!q>p,t!/yz/<Q!tGpyqb!b*GQmfpobpue5a!)sghjc!z<N*!Q>f!oGpyebab)U!f}y}U!p*qO)fuofpye-a!)q!p>t!NQ*O<f!o\vp$ee!f<g5jQo`fZ!UmJvMnBbVNR!`sBhBcYzGN!/+z!\vz!/GQyObgbgGpm!p>b.u!!zm/vOntbpTq!!>*!OGfyobpbeMav)ngbj)!G<y5bQb`UZfUyJPMgBgV)Ru`fByB-Y!Gq!p+t!Ny-/!QGOygbgbpG!m>p.b!uy3/)O1t/p1q-!!*2O/f1o*p-e!ag)ygbjb!R<vebfmmjbudzTSudoqfGjsebbnsfh/!y>z?*!**<Q!eGoyFbbbnGvmmp)btuc!bm!v>n!bQFf!o>p!eG!y<bebfMmvbndbT)uGoyfbjbeUbfsyhP!g>g?)!u*fOye-o!FqbpntvNm-)!tGcybb!b>G!mOpfboup3e)!2</61/-1!!1+/!1O*O-b!ngvymb!b.R!vQbemojFubznSvdmq!G>s!bQnefo/Fybzn*v*m<!!*GQyfbobpGemap)bguj!!m<v6n/b1O!!+>!!OGOybbnbvMmv!n.b!)OGeyobFbbUnfvymP!g>g!)OuefoyF-b!nqvpmt!N*-O!fGoypbebaG)mgpjb!u<3*)*1z/y1/-Q.t2p/q1!*--y!fguy)bqbpRUvybfmUjbubzySGd)qbGnsvbMnbfb/yyGz!*>*!<Q!eGoyFbbbnGvmmp!b*uQ!fmovpnebaX)!g>j!!G<y*b*bzMyv/nObt)pGqy!b-byUffuy)PqgpgU)yuffUyb-b!yqGp)tbNn-v!MGbybbybGG!m>p!bOue3o)F.b2n/v1m-!!*1O/f1o*p-e!ag)ygbjb!R|v!b*mQjOufzoSpdeq)Ggsjb!n<f4/Qy`zZ*U*J<M!BGVyRb`bBGBmYpGb!u+!!nzb/yQTONg!g>p!!n>b,y!)zm/vQntbpTq-!!*mQvfnobpNe*a<)!gGjy!b<b4GQm`pZbUuJ!MnBjVoRT`NB!B>Y!Gn!j+o!)ym/vQnObgTg-p!!m>v,n!byN/*Q<t!pGqy!b*bQGfmoppbeua!)ngbjy!F<T*NQ!f>o!pnebay))!m}v}n!b*FO-f!onpbeyaT)N!*><!!QGOyfbobpGem!p<b4uQ!`nZjUoJFMTBNV!R>`!BnBjYoG)!m+v!nzb/FQ-O!gngjpo!T>N.*!<z!/GOytbpbqG!m*pObfuo!pnebay)XgOj!!><!4nQb`yZ)UmJvMnBbVOR-`!BmBvYnGb!X+*!<y!/GQyObgbgGpm!p>b.u!!yn/jOotXpOq!!>*!Onfjoop)emav)ngbjO!-<!emfvmnbbdXT*u<o!fGjyebbbsGhm!p>b?u!!*sQbeoohFfbNnbvym!)>t!cnbb!y>)!nQbfyoXpOe-!!<nebfymFbTdNT*u<o!fGjyebbbsGhm!p>b?u!!*sObeoohFfbNnjvom!)>t!cnbj!o>)!nOjfooXpOe-!!<n6j/o1F!T+N!*O<O!bGnyvbmb!G.m!pQbeuo!Fsbbnovhmf!N>b!yQTedobFmbfnev!m>!!*sQbfoohpfeNab)yg!j+!!<g6y/b1b!R+v!bOmOjbunzvFme!h.f!UOiesofFtbinpvmme!<>!!GOyebobFGbmnpvbmu!!*sObfoohpfe!a>)!gsjb!o<h*f*Nzbyy/!Q.t!psqb!o-hyffNuj)oq<p!UGyyfbUbbGbmypGb)ub!nsvbMobhbfyNGb!y>D!mQbenoqFfben!v>m!!n*bQyf)ogpyebab)Rgvjb!m<j*u*zzFye/hOftUpiqs!f-tyifpum)eqNpjUoy-f!UsbbboyhGf)NbbnyvTMdbbbmyfGe!*><!!OGeyobFbbCnpvpmm!!*fObfsompzeFay)jguj!!>|!!s*bQoOhffo!p=e!)sgbjo!h<f3NQb`yZDUmJbMnBqVfRe`<B!BjYgG)!f+b!szm/zQFOygjgup*!!>s,f!uzv/sQot!psqh!c*zQNf<o!pGeyab)bgGjm!p<b3uQ!`mZvUnJbMOBXV!R>`!BGByYbGb!M+v!nyb/)QGOygbgbpU!f>y,P!gyg/)Qutfpyq-!!*qQpftoNp-e!aG)ygbjb!G<m*pQbfuo3p)e.a2)/!1}-}.!2*/O1f*o-p!egay)b!b>R!vQbOmfjoupzeS!d<q3GQs`bZnUfJ/MyBzV*R*`<B!BGYyGb!b+G!mzp/bQuO!gmgvpn!b>T.F!!z>/!OGtypbqb!M*vOnfbo)pGeyab)bgUjf!y<P3gQg`)ZuUfJyM-B!VqRp`tBNB-Y!GG!y+b!byG/mQpObgug3p)!2>/.1!-y!/2O/t1p*q-!!*gOyfbobpRevab)mgjju!z<SedfqmGbsdbTnufo/fyjze*b*s<h!!G>y?b!b*GQmepobFub!nmvvmn)btOcFb!!>>!!GQyfbobpMev!n<be)fGmybbdbTUufoyfPjgegb)suhf!y>-?!!q*pOteNo-F!bGnyvbmb)Gtmcpbb!u>3!)O2f/o1p-e.!2</61/*1-!!+g!yObObbRnvvbmm!j.u!zQSedoqFGbsnbvnmf!/>y!zQ*e*o<F!bGnyvbmb!G*mQpfboup!emav)ngbjT!X<!6>/!1G!y+b!bOMOvbnnbv)mG!y.b!bOUefoyFPbgngv)mu!f>y!-O!eqopFtbNn-v!mG!y*bObfGomppebau)3g)j.!2</*1*-z!y2//Q1t*p-q!!g-yybfbuR)vqbpmUjyufzUSbdbqyGGs)bbnnfv/Mybzb*y*G<!!>G!yQbeboGFmbpnbvum!!m*vQnfboOpTe!a>)!gmjv!n<b*O*!z,y!/mOvtnpbqT!<-!yGfyub)bqGpmUpybfuU!bmbvynGb)XbFn!v>M!bmbvynGb!X>!!,O!emovFnbbnFv<m!!G*yObfboGpmepab)ug!jt!v|c!q*jQyOSfdoqpSeb)oghjf!!<>2!Q2`/Z1U0JsMbBoVhRf`<B!BGYyGb!b+G!mzp/bQuO!gtgvpc!q>j,y!OzT/XQFt!p>q!!m*vQnfboOpTe!a,)!gmjv!n<b2XQF`<Z!UGJyMbBbVGRm`pBbBuY!Gf!e+h!fyI/pQsO{g2g!p>!!>),.!3y//1Q!t+p!qm!v*nQbfNo*p!e,a!)mgvjn!b<O*TQ<f!oGpyebab)G!m}p}b!u*!OffeohpfeWaf)s!u>2!!Q>O!f)o.p3e/!1m!p+p!CmbvbnybGN!*<!2,Q!`mZvUnJbMXBFV<R!`GByBbYbGG!m+p!bzu/!QmOvgngbpO!F>T.F!!z>/!Omtvpnqb!O*FO!f,o!pmevan)bgTjF!<<!2GQy`bZbUGJmMpBbVuR!`mBvBnYbGO!X+O!Fy!/>Q!Omgvgnpb!O>X.!!,y!/mOvtnpbqO!F*<O!fGoypbebaG)mgpjb!u<!effemhbfdITpuso{f3j!e>b!s)h.!3>/?1!!*+Q!emovFnbbnFv*m!),t!cmbv!n>b!OQFfToFp<e!!GmypbpbCGbmbpybGu!!<feefhmfbWdfTsuuo3f!j>e!b)s.h3!/>1?!!+*!OmevonFbbOn*v!m,)!tmcvbn!b>O!XOOfFo<p!eG!ymbpbpGCmbpbbyuG!!m<v6n/b1O!X+T!XO!O>b!nmvvmn!b>O.X!!Q,e!omFvbnnbvTmX!<<!6G/y1b!b+G!mOpObbun!vmmv!n>b.T!XOTeFo!F>b!nmvvmn!b<T1X/!1,!!=m!vNnNbbTnFv<m!!G>y!bpbsGfm[pUbMuN!bfnevhmf!Imppsp{C5b!b>y!G)!b<cFty)jfqechvftI!p+s!{E2y*j!q+c!v3t/!1>*!!G,y!jbqcctv)tf!euhbfpImpGsb{b3y*G<!!<G6y/b1b!G+m!pObOub!nfvemh!f.W!fNsbun5v!m>!!>)!bNcNtb)nfvemh!fuWbfpsmuG2b*b!y+G!!3</11/*5!0,1!/b2c!t+)!fueohffjWefbssuh3!*><!!eGfymbbbdGTmupobfuj!efbeshhf!Iupbsp{m4G!b>b!y)G.!3</T1T!b+n!vmmv!n>b!XO*O!b,n!vmmv!n*bOOsXjTbXq<a!)Ggyjb!b<G*m*pQbtup!qf!e-hyffWuf)squp4U!y>f!U)b.b3y/G1)!b+n!vmMvbnbbyTG*!!>,!!QmevonFbbTnXvTmF!<u!bGpymbGbbGbmypGb!u<!DfyejhqfcIvpts!{+!!>D!ybjcqtc)vfte!h>f!IFpysj{q4c*v!t,!!ufbephmfGIbpbsy{G5!<<!*G*yObtbpGqm!p-byuf!uf)eqhpfUWyffsUub!b>y!Gb)cbtn)vfMebhbfyWGf!s>u!4O*e!o,F!bfnevhmf!Wufbspum5G<b!bGyyGb!b<G1m/p4b!u,!!t*vDcyqjjqycOvXtT+X*O1F/T3F.!)>)!!m>v!nEbyOjXqTcXv!t,!!umbvpnmbGObFbTyFG<!!<G1yQb`bZGUmJpMbBuV!Rm`fBoBhYuGi!T+j!hzo/!Q>O!gggypb!b,R!vzb/mCjtupzqS!d>q!Gzs/bQntfp/qy!<<!1GQy`bZbUCJpMpBmV!Ri`pBsB{YTGq!b+o!!y>/!QfOeghgfpI!p,s!{y!/?C>t!pfqe!h>f!Wyf/sQut<p!qG!y<bQbtGpmqp!b3uu!btpvmcGqbjbyyBG!!><!1tQv`cZqUjJyMOBTVXRF`!B+B!Y3G/!1+!!,z!/tQvOcgqgjpy!O.X!TzX/OCFtTpFq<!!>j!gz)/aOitppsq{!T<q1bQo`*Z!UmJvMnBbVOR!`>B!BmYvGn!b+X!<y!/jQgO)gagipp!s.{!Tyq/bCot*p!qm!v>n!byT/!O>t!pmqv!n<bOFt<p!qj!g3)uibppsm{GTbqbbyoG*!!<m6f/o1h!u+i!TojhhjoT!i>u!hgoyfbmb!R>v,b!mzj/uCztSpdqq!G*sobbnqfT/{zs<p!iG)ygbjb!G<m6p/b1u!!+t!vochqjjTyiCu!h>o!f)mt!v>c,q!jyy/BC!t+p!q)!2*/o1b0q2T3{/s1p*i*a!).g!jm!v<nzb/Nf<n!bGsyGbqbdGSmzpubjum!bhvsRbbebjyfgo!u;O!!1>/!1m!v@n!b*Oo!b.q!Tm{vsnpbiN)<!!>G!yzb/bQGOmgpgbpu!!<hys/bfenjbfsoGuqTd!S>z!umjvmnbbvTR!b.b!ymgv!n;b!N1</!1G!y@b!b*GombpqbTu{!smpvinab)O!O>!!>y!/mQvOngbgOp!!,<!QmOvgngbpN!<3!uGbypbmbGGbmbpybGu!!<mzv/nNbtTpTq!!>>!!mzv/nCbtTp!q,!!<myv/nNbtNp<q!!G>y!byb/CCptppmq!!q<bCjtspOq!!>3!ubbcptm)GhbsbbyeGj!f<o*ufOh*o!b?S>q!dbScytj)qhcsvbte!j+f!o*uCTy*j<q!cGvytb)btGcmbp)buub!ThbsbbyeGj!f>o!uD!y>j!qncbvyt)!bucbtp)mhGsbbbeyjGf!o<uoOh*j-T!ibuchto)fhms.b!e>j!foohujTT*i*u<h!ojfgm)!q*bOjs"],EQ.points=["~v!o<j*g{p/sonp!jnubjut5p!Qnwpne!f.m!N0b!ufsmjbyd<t!)v!o>j+g!pfs{nj!Tnubouj5p!Qn`pmehf!m*WfjwfjxuNdbfuqstjsyf<Q!tvjo)j!ggpjs!n<!*n1b/u25!!.q!s>p>k!f^d!u4j!p]o^N!b3u!s]jyyj<s!uvboNjogppjsund!fnkbpus5q!)w!j>f!xfNwbjuusdjfyq<t!svfoQjtgjp!smnp!pgcm!p~b!u<!otpdjbumvfm<p!tvfosj!g+p!sfn{!jwtf!d>3!!fv{VjwTPugogjtpfQu`<m!hv!o|j!gfptsmnf!!c~p!p<mo!pvjtufvVmwpBtsfssb!z+<!!zbbusussBjfc{vjutf!!>w!ffd{4j!TqupotjjpuQj`pmoh<!!|v!o*jzgbpsssnB!fc{pjpTmf!tvvt)f!Dgpjm!p<so<p!jbuujutspjQcwvnu!f+!!wyfjds5u!bdNpomppjsu<d!fwkbpsszqj!o>h!!owpfjdu5j!twpDQp`mmphs!<<!obpujuusjjtcpvQuwfn!!w+f!dy3j!sbuVbwNPxgfgjtWfmuf<e!pwnb!s>z!joophj!uwjftdp3Q!wwnP!g<g*t1f/u2<!!-veofjngsppsgnt!ocbpspum)!5qdjfdwl!j>o!ho<p!jbuujutspjQcwvnu!f5!dwffwd!5<!*qojpdjluDjptmppqs)<4!dvfowj!g>p!senf!ngsmppgbtuo!btsju{!f4<d!fvwo!j~g!p<s*nu!fgtmgpgbPuw!Vsbf)t3pdmfvwu!j>p,o!<u!fvtogjggPpws!n|!!c*pzpbms!svBtwfVTfjt{vf)B!sgsjb!z<<*!ubfutugsgjPcwvVuvf)!3gdmfpwb!u>!!tujf{tfgBgsPswb!z~<!!<cspppmmp!dj!t>Q!fssptmqpfDdwu!j|w!f*NsbpumspjDyf)tnvb)u!5g!jn!*f!t|m!fs!f~u!v<ssop!mnp]D!l3d!j^q]!!>4!!s^p!m>p>D!w.!!|2!/*1h<o!j~l!dwjpqj)e!!gnjb!j|o!)*","~$!e~f!g<jsopfm!pVDTfFt`vNgBgQj\ve!!v>o!jsgppmspnD!hwbfsdG5`!mehj!g|g!vfttfm<f!!v~o!j<gsppsmnp!Dgwm!p>b!us!ppmqpbDdhjbuszG<`!mvho!j<gepssbnd!tgjmep!b*u1!/b1m!q>i>b!Ubf/tsup<m!pvDofjtgvpgsgnj!ec)p!pgmj!!v|t!f*Dhpomjplsd<j!qw)b!sgzjj!o<he!swbfddt5j!ew!D*pumtpfsU<b!ivqomjbg!p=s!nb!/cspppmmp!Dqfjtdvlgjgojhe<)!!vgojj!g\vpgsjne!ocfp$p\vm!!~e!j<t*dwbvs!e-Tqfbmnf)dEu3bfcsmvfu<y!f\vu$!j>o+d!msvpemfp!D=fctmvpgpgnjTef!m<fudfutjgwgfP/wg!t>/,i!fwbve!?<\vf!mvbodjTgwpvs!n+!!wefsdp3p!DvuwoTjdpbQm`fm<h!!w>b!swzvj!o3hd!fwwf!d|3!!*wfPmgcgbtufduf<m!f\vT$ejsgb!detfjgejao!f}e})!VhToFj`lNdBjQq*a\v)!!vgojj!g\vp*sQnB!Nt`bFnTqVm)fesf3oEj!gnfbeq!<g!j\v$$\vf!o~e!j<g*\vz!uwjpdjbeq!pn!b+j!ob)/*f!t|v!g\vg$jjeo!d-m{vzeyf/!f=tcvmgpgpjneT)f5mdffdwu!j>w!fs/pgmtp/Dcfptevzg?g\vj!ew!f|d!5f!temjfg!g~v!t<f*Dzpumjpdsb<q!pj!g+!!)ba/qsjpdmlpjDowh!!-%{%z!yv/tsfpDmppmDpws)*5!d|f!we!j>g!gsvptmfpD"],EQ.bokeh=["?$TjWoodfmfvsedfT!u=jcm","~w!b\vsgzjjeoohf!$w\vf!d<31!/w2V!w><!!bv/osjpgmppsDnh!btsbGn`qmmhf!s\v3BEI!QuMDBp`mFpEsJ<S!SvFoWjPg!pgsfne!gtjb$n\vq!m<f1s/32E5!!u0E!fmqpudi!<>!!vsopjmgppDshnb!sgGm`pmbhu!!<n*b5yscvmmvcsg<p!ev!o+j!g*pusdnf!sgsmppdbuud!fbqttqbf!d+u!<*!5v/o1j!g-p1s/n1!)g3mdpfbwu)!!b,q!fzsyu/vwsVfw<!!-vsopjmgppDsun)!Ec3pfpsmv!uvytffuH!3>e,<!!mvpodj!g<p*s5ns!vgmmcpgbpue!!u+i!s*futdifpsmsep<d!uvdofjqgtpbs!n+!!g*m:p3b/u1!.o!f-b:s3</!1v.o)j3gdpfswn)!!g,m!pzbyu/!wgVbws!<-!svpomjpgDpus)nE!3gfmspvbuuy!fgup!d>v,t!<m!pvdo!j<g*p5ssnv!mgcmgppbeu!!+s!b*ouhdff<s!svpodjugdpfsqnt!bg!m+p!b*u1!/e1f!o-t5j/u1z.<)!3\vd$fjwo)d!m,v!ezfy!/=wqVbwd!l-jsophm?p\vD!uw)pEj3ef!snvbujyof)u*!!>|,!!wmfpdd3!!<e*p5gscvmmvcsg<p!ew!f+d!3*!ubdtfqsfsdpuddupdsfsqftdbu!!+>!!*w:f3d/31)!2-/:13-/!1b.t)q3fddfuw*)<!!,\v!$zjyg/!weVfwg!j-osfpem)pVDTuF)`EE3FfQsUvIu*y\vf!u\v!$>j,g!!mepfdg!j<o*f5es)vVmTcFg`pPeS!U+I!P*`uDdBfNsFsSpBd*u\vd!f\vq$tjbg!!+e!f*g5j/o1f.e!)-V1T/F1`)G3MdPfBwU)`!U,F!YzUyV/SwFV*w\v!!-gsmppmbpuD!uw)jEf3xf[s!v>u!ypfsuu!i>p,h!smbpqdi!j<d*E5fsqvumicUgppWej!f+x![*)uudffysusvpsdfu3dEf)qutEbf!q+u!i*-:!3w/V1w.*!/-s:-3!/o1f)b3sd-f!wg)b!s,*!<z!y\v/$wfVmwt!f-\vs!pgmmppDbuu)!Ew3jffsxv[u!y>f!up!s>u,i!pmhpsdb!q<i*j5dsEvfmqcugipUep!W+j!f*xu[d)fvsosqpbdduldSfHqCtBbU!p+E!f*q1u/i1)!u-f5y/u1v)s3fd3fEw))u!E,f!qzuyi/-w!VwwV!w-*s*p-m!poDfub)sE-3!fgsbvsu*y<f!u\v!$>f,o!emjpgd\v!!<\v*$5fsmvtmfc\vg!p\ve$!j+g!!*eufdgfjsosfped)uVdTfFq`tGbM!P+B!U*`:U3F/Y1U!V-S:F3*/\v1!)g3mdpfbwu)!!w,j!fzxy[/!w>V!wq!f-sstpqmfpdDuuj)wEf3EffsqvuuiyUfpuW!j>f,x![m)pudf!y<u*v8ssfv3mEc)gupEef!q+u!i*-u!dwfVsws*p/dsu-d!foqftbbs!-+!!g*b5s/*1<!!-\v1$/f1m)t3fd\vf!wg)m!p,b!uz!yw/jwfVxw[!!->s!pqmfpsDtuq)fEd3ufjswvfuEyffquu!i>U,p!Wmjpfdx![<)*v8osqvbmdclgSpHeC!B+U!p*Eufdqfusis)pudfuydufvqstfb3!E+)!u*E:f3q/u1i.-!!-w:V3w/*1*.-)!3odffbws)-!!,g!bzsy*/<w!V\vw$!f-osepjmgp\vD!u\v)$Ef3ofesjvgu\vy!fgum!p>b,u!!mgpbdd!u<p*s8!s>v!m)cggppdev!t+!!,*!uwdjffsxs[p*d<u!djfgq!t)bg!b+d!u*p1s/!1=!!-15//11*.!)g3bddfuwp)s!!,>!!znyj/ow)Vgwb!d-usppsm!p,D!us)bEo3hffs-v!u1y/f1u*!<>!,f!mmtpfd!!g<b*d8uspvsm!c>g!pneb!y+)!g*buddufpsss!p.d!usdbfoqhtfb-!!+1!/*1:*3</!1g!b-d:u3p/s1!.>)!32d/f1w!).!!,f!yzqy)/.weVfwo!t-jsupzm!p+D!ue)fEo3tfjsuvzu!y+f!ug!b>d,u!pmsp!d+!!<g*b8dsuvpmsc*g<p!ee!p+g!c*muvdsf!s>s!pwdfudd3f!q)tdbm!b+n!q*)5g/b1d.u!p-s1-/!1.)n3bdyfcwm)v!s,-!!znyb/ywcVmwv!s-*s*p<m!p\vD$uf)mEt3ff\vs!vwufydf5u!!u>f,y!fmmp!d>!!<u*f8ysuvvmscfg3pEe)!u+E!f*quudif-s!swpfddu3d)fwqVtwb/!y+-!!*2:/31/!1..!!w-V:w3//z1*)*3<d!fgwm)p!b,u!!zbym/qwiVbw<!!-jsgp!m)pvDtuf)HE33ef*s!v|u!ybfmuq!i>b,!!>m!ptdn!p<p*u8istvumfcqg)puei!s+f!t*iupdmfes-s!pudiusdfftqitpbm!e+!!,*!11//11!2--1!5u/f1y)f3md/fbw*)<!!,~!!zfym/twfV!w|!!-bsmpqmipbD!u>)!Eu3ffysfvmu/ybf<u!!~>!,e!pmgpcdm!v<s*!8>s!vwmfcdg3p!e)!d+m!b*nuqd)fbsmsqpidbu!d+f!qbtqbf!s+u!v*s:f3-/!1.!n-b:y3c/m1v)s3-d!fnwb)y!c,m!vzsy*/*w<V!w\v!$-fsopemjpgD\vu!)wEf3df3s!veupygfcum!v>s,:!!m>p!de!p<g*c:msvvsm!c+g!p1e/!:+<!!*wufddf3s!seppdgucdmfvqst8b!!>+!!e*p8g4c/m1v.s!!-+6!21//18)<3!dwffwd)3!!,e!pzgyc/mwvVsw5!!->s!pemppgDcum)vEs3!f+s!v1u/y5f<u!!w>f,d!5m!pddp!m<!*>:!swvfmdc5g)p1e/!1+*!<*!uddpfms!s,p>d!uudffyqutvbs!f+3!E*)6u2D/p1m.p!s--8!4w/V1w./)y3zd*f<w!)d!p,m!!z,y>/!wuVfwy!u-vsspfm3pED)uu)DEp3mfpssv-u!ywfVuw!/>y,z!!m,p!d)!w<f*d:3s)v1m/c1g-p!e1!/+5!**!u+d!fbstsqpfdduuddfpqstsbf!d+u!**!6+2!/e1p!g-c8m4v/s1*)<3!ddfpwm)!!,,>!!zuyf/ywuVvws!f-3sEp)mupDDpum)pEs3-f!swvVuwy/fyuz!!>,,!!)mwpfdd!3<)*1:/s2v6m-c!g1p/e4!8+*!!*+u!dbftsqsfpdduuddpfsqstfbd!u+*!!*+8!4e/p1g!c-m6v2s/*1<.!)d3pdmf!w,)>!!,u!fzyyu/vwsVfw3!E-)supDmppmDpus)-E!3wfVswv/uyyzf!u,!!>),w!fmdp3d)!1</*3::s-v!m1c/g3p:e*!!++!!*butdqffsdsupddpusdsffqdtub*!!++!!*e8p4g/c1m.v!s-*6<2!/d1p.m)!3,d>f!wu)f!y,u!vzsyf/3wEV)wu!D-psmppmsp-D!uw)VEw3/fyszv!u,y!f)uw!f>d,3!)m.p1d/!4<8*-:!s1v/m2c6g*p!e+!!+b!t*qufddfusdsppsdsufddfuq*t!b+!!+e!p*g6c2m/v1s.*!<-!8d4p/m1!),3>d!fuwf)y!u,v!szfy3/Ew)VuwD!p-msppsm-p!DwuV)wE/3yfzs!v,u!y)fwuf!d>3,)!1m/p5d1!-<!*1:/s1v*m!c+g!pbet!q+f!d*uuddpfssssfpdduu*d!f+q!tebp!g+c!m*v6s2*/<1!!d-p8m4!/,1>.!)u3fdyfuwv)s!f,3!Ez)yu/DwpVmwp!s--s!pwmVpwD/uy)zE!3,f!s)vwufydf3u)!1>/,4!8m-p!d.!1</*2:6s*v!m+c!gbpteq!f+d!u*dupdsfssfsdpud*u!d+f!qetpbg!c+m!v*s8*4</!1d!p-m6!2,/>1!)u3fdyfuwv)s!f,3!Ez)yu/DwpVmwp!s--s!pwmVpwD/uy)zE!3,f!s)vwufydf3u)!1>/,3!:m-p!d.!1</*3s:v*m!c+g!pbet!q+f!d*uuddpfssssfpdduu*d!f+q!tebp!g+c!m*v8s4*/<1!.d!p-m6!2,/>1!)u3fdyfuwv)s!f,3!Ez)yu/DwpVmwp!s--s!pwmVpwD/uy)zE!3,f!s)vwufydf3u)!.>1,/!2m6p-d!!.<1*/s4v8m*c!g+p!eb!t+q!f*duuddfpsssspfdduud*f!q+t!be!p+g!c*m:v3s/*1<.!!d-p:m3!/,1>.!)u3fdyfuwv)s!f,3!Ez)yu/DwpVmwp!s--s!pwmVpwD/uy)zE!3,f!s)vwufydf3u)!1>/,1!-m!p.d1!/<5**s!v+m!cbgtpqef!d+u!d*pusdsffsdsup*d!u+d!feqptgbc!m+v!s**6<2!/d1p.m!!-,8>4!/u1f.y)u3vdsffw3)E!),u!Dzpym/pwsV-w!!w-Vswp/mypzD!u,)!E)3wffsdv3u)y.f1u/!2>6,-!!m1p/d4!8<**!s+v!mbctgqpfed!u+d!p*susdffdsus*p!d+u!defpqgtcbm!v+s!**<1!/d1p!m-!5,/>1!.u)f3ydufvws)f!3,E!)zuyD/pwmVpws!--!swpVmwp/Dyuz)!E,3!f)swvfudy3f)u.!1>/,3!:m-p!d1!/<3*:s*v!m+c!gbpteq!f+d!u*dupdsfssfsdpud*u!d+f!qetpbg!c+m!v*s6*2</!1d!p-m8!4,/>1!)u3fdyfuwv)s!f,3!Ez)yu/DwpVmwp!s-"],EQ.glitch=["?$TjWoodfmfvsedfT!u=jcm","~v!o~j!g<p*swnV!wj!o-uf!hcbznqj<)!!vEo3jfgspvsuny!ftub>nsqpmmfpsD3hEb!sjGn`bmhhf!<|!!vfotjmgfp!s~n!!<txbpnoqtm!f,ss3pEm!puDEhjbtsqG<`!mvho!j>g!psspnm!pgDmhpbbsuG!`bmnhp!v<o*u3</!1v+o*j*g/p1s6n+!egfmfptb!u+!!btozh-meff<f!tv!o+j!gtpys)n3!dgfmwp)beuo!btsf)f5ed<f!wv+oujogvppsnnb!+g/m1p1b3u!!>t!fxfpeo`ty!<5!dvfowj!g<p*sbn/!bghmdp!b-uc!/tcfdf!e-`hz/<b!hvdo!j-gsp/ssnd!)g5mdpfbwu!!>e!jstpumppsDuhjbpsoG``ym<h!!v<o*jugfptsgng!pg!m.p!bqu!!-efjhtbunpjs)uEj3pfos`vzu<y!fvuo!j>g!pcsdn!!5gdmfpwb!u<!*dqp!m-`fth<b!nwjb)sEz3jfoshv!uwyffdu3!!>w!Vbwh<d!!d5pdoftwu!!<g*mupfbtug!gVpo!q,b!dql!E-pfxhobtndjb)mEf3!f>s!v3u6y6f/u!!0>!!3s6d7!/5<d!fdwp!o<t*u*!fwmfhdo4b!)Qobjdtl!G-b*dfumphsotb!)>t!pwdf)d34d)f3w6!7+/!!u+o!v3p6n7b/!!>+!!u3f6t7g/g-p!!336d7f/w!!+<!*3/6670/e-f!f3t6)7+/z*`<e!fdfpto+tmub!nwsfpdo5>!,Vzo/qqb!d<l*G/b6d0uepfsftt!)>+!yV`oeqfbfdtl+Empbxnostpdob>m,fy!/0q!!w~f!d~5!)<Q*byd`loGpbjduusppsutt-j!e2!/,*!<y!/gqm)p!b.u!!/v2o!q>b!dyl/SqH!C|B!UfptEmffq!u~i!)<dyp`ootpuj!ujsop!uwtfjde5>!yw/*q!!||!*s/f1u?vzs`oe!fefptu))gwj-!!|V!o*qebfdfltG+btd`umppsdt.*z<`!o~p!jgumsppbuut!jseb?oye/)qw!f%d%3!!td`pm*p|d!,szf`uovpsjou!sgpsubtdjue)=tyj/oq))egpju!)~d!p~/!y<zz!`-owpfjdu3s)p2u3t/j:e9!:>9!-z8/9q/!3|4!4f*t*m*f!!+~!!5<4*8z6`9o/p6j5u6s4p*u<t!j~e!!w,p!jze/!qn)b!j.o!)/*2!!|>!!jzg/!q)!c|z*q/=12?*y!`|e!fwfftd)3g!jq!!|>!!*weVfwf<t!+gtm`pmbpud!.yyt`!o>p!jgumspppust)jhem?`zG/sqb!h%D%p!pts`em/pyd!,0y!`1o/p6j*u<s!pgumtpjbeu=!zz/tq!)>g!jg!m<p*p*se)fhfmt`+GesfbfhtD+pqp!s-eq/tzj!E0u!)1!/E63*f<s!vgumypfbuu)!ioupqsfnEbpmU!B>C!HvSolqdb"],EQ.bloomBlur=["?$TjWoodfmfvsedfT!u=jcm","~w!b\vsgzjjeoohf!$w\vf!d<3*!bw/Vywj<Q!fvsovjugypfsun!!-tnbvnTqumifhsj3fEx!!d0p!mnpvsTUfftyvugvgsjfe<)!5vdofjwg!p>s!ns!pwmfpdD3h!busfGy`Tmjh{!f\v<f!tvmofj$g\vp!s<n*!1w/f2d!3-!nevjTsufidhujjfpxo!<0!!gnmvpTbfut!vhgbgvjtet)j5bdofQwe!g>)!jsop!mgpmDphbbus!Gy`-m!hj!o\v!BgImQpMbBu`!FtEjJhSnSbF*W!P|!!gsffeugvjs$o\v!!1~/!4<:x9!:+5!!1+/!3f!y>q,)!.n1v/T6u!i+h!jyf!x+!!<yx!!0+!!)*t3jfhmnqbn!b+t!!t,j!h2nfbm*q*n!b0t!)t!j>h,n!bn<v!T~f!twvpgjgej!en!b<jcoh)s*/!*|u!fwtfgdg3P!wjvo!w.T!jw{Vfw!!>-!f2s/v1u!y0f!UusfpymTpjd{)fE<3!fgsmvpubyuf!ug!T>j!h3nfbm!q>n!bgtm!p4bduf)wT!J<HcNhBs*/<*!ugfmtpgbguP!wxvf!j,h!iwuVTwv!n-!f>s!vhubyvftUtsjpbmopQde)gE)31f/s1v-u!ygfTuj!h>n!b2*f<m!qwnfbdt5!!4udffywu!v<syf!Q+j!yf!{>j!Tuwfoyju!v+s!fo3pEj)uddpfmspjseU!f>y!uuvfstfg-g!PwwVvw!*3<d!fwwf!d<4*!benjhgjgTvgt!f-Tyv)ng!e>Q!oubfjytutvvsbfhQ!j>y!/xs!hucb!p+m!gx!f<j*hji)uuTbvpnm<g!!g>p!sy!!)ujbopum!gj!!|>!!*2,<,!jj!!<=T!VLJFESBOSF`M"],EQ.bloomHighPass=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gbpisqnm!bt!b-nmqfmyffsu3!E-!supEmjpgDguvvtqfu<v!pv)oyjjgnp!s>n!!sgpmmppbDuh!bmsvGn`jmohp!t<j*uwz!U-iisufetjiXpimuep<p!nvto!j,g!pesmnp!igtmfpsbiuU!ztunjptppuoijXnjvemu!i-<e!mwpbistzfjsoihU!zwufjdt3p!owjVnwv<m!)wqpfjuet!inubpjpon)t*!!>|!!bwifqdm5b!!uufbypfmmg!!><!*u1f/y1u!v-s1f/31E!)-u1E/j1g!g-v1t/f1-)!5wdVfww*!<>!!wsfpdm4p!Dmuvvnqbu!v>p!!w5fddf4w)!1</*3b:n:v-m!!1-/{6z9y8/-m!f1y/f2u2)5u*p<e!!g>m!pwb!u"],EQ.bloomComposite=["?$TjWoodfmfvsedfT!u=jcm","~w!b<s*z*jwoVhw!!w-f6df3s!vwuVywf<U!svvomjcg)pEs3nf!stvbunyqfmuf!s+3!E*!1c/m2v!s-UsfpymupvDsufo2j<U!nvpopjmgcp)s5nd!ftwb!n+q!m*f3s/31E)!scpmuvdsbUGfnypupvmsCfq3s<f!mv!o,j!g*pwsVnw!!t-b5nfqsmvfusy3fEU!scvmmvcs)UEf3yfusvvsufy4f<u!!v+o!j*g1p/s2n!!-tsbpnmqpmDfuso3jEU!ncpmpvmscU)f5ydufvws!f+5!<*!5v/o1j)gsppsund!btGbnnpqpmmfCsq3sEf!mc!m,v!s*UwfVywu!v-s4ff6s<v!uvyofjUgspvsmnc!)tEb3nfqsmvfusy3fEu!!e+j!s*u1U/f2y!u-vsspfm<p!DvuoojjgUpnspnp!mgcm)p5bduf!wc!m+p!p*n7T/u1s)fsophuudib<G!nvpopjmgCpqssnf!mg!m,p!b*uw!Vcwm!p-p3nfSsbveujyvftU<s!vvmocj)gEp3sfns!vwufydf4u!!c+m!p*p1n/U2j!o-usDppmmppDsu<o!jgUmnppbpum!cm)f5sdqfCwm!p+p!n*G9b/d1u)pssp)uddpboGtnup!pjmoC!qgsmfpmb!u,!!g*bwdVuwp!s-*2!f|s!vgumypfbUus!vnmjcs)sEp3sfGsbvduuypfsu!!>+!!2*/13/!2.!!-gsbpdmuppDsu<o!jsUfnupvpsmoc!)n5jdyf)wg!b+d!u*p1s/-2!)nsjpsusdpbsGGnbpdpumpCsq-s!fcmm)p!p+n!Sibuehjovfts*u<T!n~p!pwmpcj!e>!!nsbpjmop)D*h!b|s!Gh`m"],EQ.highlightHard=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jsgppmspnD!fthbenfq!m>f!ss3pEm!pjDnhbbhsfG<`!mvho!j~g!p<sens!bwdftdj3e!!u|f!y*u6v/s1f!T=j!{ffh<e!fv)o!jggjp!s<n*!fghmepfb!u-!1f/e2h!f-X:j/e1u)iq<f!uvtoijugpppsnnt!!w>f!df5h!effe!h<f*Dwp!m+p!sw<!!,w!bis!z+j!oih)!uwsfrdt3!!>w!Vfwh<e!fg!mupbbpum!gh!f<uuDiphmj)Swqfpdu3,!udiphpjsse+*1!/|3!,sufiuhvjsSon!puufuypucv,sufg3fEM)qjpnub.hufg-f!md+p1p/s3e.*u/gbf<M!n~p!uwuppjce.!!n>b!jio!)u*b!p|m!gw!f<du3i!hdjdS!n>p!uwuVpwc<,!ngpmupubpuc!+d1f/o3u,fusg!f>M!nhpfuuuDppcm,)udidh*j<S!qgpmup.bqup!ue+y1!/>3!.fueghffMXqjpeuu.i!!>0!!wu!fuybupvmsgf!T<j*{*fz/ey!<-!ygem)p3bduf!we,zd!d>)!mfpeDhuffXhj!e>u!iu!i0h!juSfnypuuvuspfcT!ju{bfp/mzg<!!<w*f*dz3e!!d-p1p/s1e)<3!dgfmwp,bdud!)umppqDMuffghu!!>>!!nhpfuuuDppcm!)udbdp,mwgf!d<3*)*.zeey!--!y.ee.z)*3*d<f!wg,mdpdb)um!puDpuqf!h>!!>h!fuugDfpMmn)pdudu,pwcf!du3b)p1m/g1!-<!*.*e1z/*1*!<-!ygem)p3bduf!wu,pdqdS)jmhpiDuu!f>h!!h>f!uuDiphmj)sd!du,bwpfmdg3!)<e*y*-1!/.1e!z-*y*e<.!)g3mdpfbwu,!dmdf)gmup!D>u!fh"],EQ.highlightEdgeDetection=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gep)s5nd!ftwb!n+q!msfpsm3pEd!!j>n!bshpfm<p!DwhbbsszGj`omhh!!w<f*d*33!gwgVjwe<!!-v2ogjggjpes)n3!dwffwd)3i!uuhfoyfTmj!{>f!<e!!vuobjpgmpgs!n<!6w/f1d+5*!sd/p5mdp!s.<!!sw/p4jde)!!n>b!j3og)g*j!e|!!uwbfpdm3g!!j<o6w/T1j+{*fs!/>3!d2!/.1!!s0/!2udf)y!T>j!{2fg<g!jwef!du5b!pvmwgP!g<g*txfzu/!u>f!twgfgdP5w)v2!/.1!-w!V1w/!1--f!h1b/n1j-)!E23/f1s*v!u+y!fwuf!d>5!)5jdo!w5Tdjf{wf!-<!*jxozw/Tujf{tfg*g<P!wwvf!d,5!!wdV2w!!>-!fuhfbynujv)sEf33fEs)vjunybfhuf!->!!w4Vdw!!5,d!fvww!P<g*gztyf/uu/fytzg*g<P!wwvf!d.5!!wdV3w!!>-!fuhfbynujv)sEf3"],EQ.highlightBlur=["?$TjWoodfmfvsedfT!u=jcm","~$!e<fngvjToufi!hNjBfYx`!S0B!EnJvVTTf!t5v\vg!gwjbes!z>j!oshp!mwpfDdh3b!swGV`wm<h!!v~o!j<gbpusmnf!et!b>n,q!muffst3gEg!Pjwnvb!h<f*<x!!v+o!j1g/p3s)n!!>w,f!dn3v!TuufiyhTjjf{xf!<<!*vxo!j+g!p*s3nf!mwqfndb3t!!e,j!s2ffdmuqjnpbot<)!)v!o>j,g!pnsvnT!fgtmvpgbguj!es!b<e*juvftt<g!ggPmwpvb!u.!!hwbVvwt!t-jfbhobQnejg))Ej3of!sgvmupybfuu!!y>-!!3jfom!qgnmbptb!u5!dtfjwh!n<b**u!f|t!gsgfPuwvvs!o,!!1w/V4w:!9-:f5h!b+n!jf)yEq3)f.s1v/u6y!f+u!!y>!!+2!fym!q0n!b)tt!j5hdnfbw!!+<!*ttjvhjnebb*s*!!-0y!/tujfhtngbg<P!w~v!)wgpejQeo!bnjbtjtov)b*h!!|>!!wxf!du3b!pjmogw!T|j!{*f,!,>j!!2</T1V!J0E!BuSf`yYTBjN{!f><=!!gjm!p<b2u!!>x!fjj!huioujT)v!ns!p>g!!h<bbvutmtfjeb!o>Q!eugf)t1g/g1P-w!vs!b3edjfvwt!*<<*!TwVfJdE5B!Se`jYgBgNv)tufbTpvmng!!>0!!utfvyjuevbssf!3+E!)fj{njbThwfo-j!!w+V!wo*p!j+u!dxffsjjhei!u>T!vbnu<m!fwef!d3"],EQ.highlightFinalBlend=["?$TjWoodfmfvsedfT!u=jcm","~w!b<sszpjmophD!mwbfodj3g!!w>V!ws<p!mvpoDjhgbpssGn`!mthb!n<qfmvfmsb3WEf!hjenfb!h+f!<w!wv!o+j!gipushno!ftsbunTqfmhfesf3!E>!!fsephmfpUDfmybuovjsgf!25<d!fvwo!j<gsp/s*nw!Vtwb!n-qfmhfbsn3jE)!Ef3efhsfvUufyyfuuv!s>f!3w<w!!vuobjpgmpgs!n<!xgpmmpHbfuh!effe!h+f!T3ufsvfmobhWufih<e!fv!o,j!g2pfsvnm!bgWmfphbeuf!!f>e!hffvHmmbpWxf<h!ewfp!j5ed!fnwb!j<o*)w*V!w|!!-w3ffds5v!ufyefhUffWhbemfv)fE23!f>s!vuufyyfuuv!s>f!33Ef)vfmebhWffUhfeyfu!v5sdff2w-!!<w*Vw"],EQ.fixColor=["~b!u<u*s1j/c2v!u-fe!fwnfsdp4g!tboQbpstuj)u5jdpfow<!!+\v!$yjjosdumbvNexff!j=WjmofteupbNovd!j+o!hy/jwstu/biNfubdef?k\vp!svQovj!g>p!sonp!jnubjut5p!Qv`Nmphe!f\vmgWjjefoxfN$b\vu!s<j*yo<p!jvuojjtgppQsbn)!4ndbfuw5!!>v!NoppejfumjNtbpuQsmjbyd<p!Mvwo!j\vggpjseno!fn$b\vu!5<!*vyQ/swpVkbf!d-u*N*b1u/s2j!y-<w!V\vb$)j4gd!fNwB!Y+`!CyPjYs`uDbMNJwQVQvF)S3!d?f!w1)\v4!dwfbws!z>j!owhV!ww!f\vdQ4J!MwDX`pWsVm!egQfpetgjju$j\vp!o\v<*!O\vP$JfUoDeFjSgJ\vE!`\vQ$JjMgD!)eeffgojjogffee)!DgMjJ$Q\v`!E\vJgSjFeDoUfJ$P\vO!*<\v*!*w1b/s2z!j-oehf!nwsfpdg4t!owbMspud)b5mdQfpwt!j+u!jypjos<u!b\vN$mjfgeepfNgv!)V4Wd`fDwM!J>Q!\vo!pbjuuujstjpcQveumfs!pwXfwd!3\v!1b!V?w!<S!FvQoQjJgMpDs`nY!PnCb`uY4B!Nv!VgwjN$b\vu!s\vjgyj<e!owfb$s\vz!j<o*h*!1w/f2d!4-!ewfVnws<p!g\vt$ofboseuj)g5\vd!f\vw$!f+o!eejfgd\vo!bwuptjoeJ!ynjbsjuob)N*b!)|4!dwffwd!4>!!uesfbnostpggptsonbfseu!!>\v!HwOfJdD4O)BbUQTpOtJj`uFjTpVo!*g<f!e\vg$j","~v!o<jsgppmspnd!!w>f!ds5p!mdppDmhpbss<G!`\vm$hj!g\v!?NzBeYp`cC/PtYg`/DyMpJcQqQjFmSd!=?!!f1e\vv!mwdbosjz$j\vo!h\v!?wzfedp4c!/wtXgp/sompejQupdtfjsujjEpqoj<m!d\v=$!ffoeevjmgd\vo!j\v$$\vj!g|!!e*f)gojjobfne!)eDjMpJwQ!`\vE?JeSbFfDiU/JtPgO/*y\vp!cwqbjsmzdj=o!hf!ewvfmdd4o!jw$M\vp!d\vb?meQbpftij/utjgp/oo<p!j\vu$djfgsejfEgq!jVmWd`=D!MfJeQv\vm!dwobjs$z\vj!o\vhg!jwefodf4$!\vw!V\vwg<j!e\vo$f"],EQ.shadowMap=["~0!0<!o$pQjSuFjGtJpYQ\vw!nv!o+j!gypjssnu!bnNboup5j!undpfekfpmsWqj!f>x!Nobpujsujjyt<p!Qv`omjhg!p\vsgnj!enobfu$5\v!!q<s*pekffndsupjgptooNbbsuus!j+y!<y!jbsuuubsNjmcfveupfn!)w4fddf4w!!q>p!tojpujjupjot<p!QveomjsgppXswn!!\vc1p!p?m!!SvFVQtQfJJMoDt`uYbPoCd`fY<B!Nb!ugujs$j\vc!v<ueff!nnsbpug5t!obbNsbuu!s+j!yyJjostuubbNoxdffjeW<m!f\ve$pjng!!>N!BoYp`jCuPjYt`pDQMwJnQ!Q5FdSf!w?!!~1!\v<!evfonjsgppgstno!bnsbuu!5+!!nepfedfombNubtuosJjyyj<s!uwbbNsbz!j>o!he!fwnfsdp4g!twoXbpssum!e|Q!p*tfjduojbpuot<o!J\vf$tfVove)j!gg\vj!!\v~$!e<f*g1j/o2f!!-V{TzFy`/T*LeJfOoOoJjOlHt\v!!+\v!$fetfsgfjwoofJ!yCjPsOuFb`NUeFoYjUcV)S)F5\vd!fvwo!j>g!pesfnn!scppgptmo!bvsVut!f<Txl/juoiohjjofhX<o!j\vl$tj!o+d!myvfeufs!f=Wtoljjloto!j+o!hX/uwbtN/fiofpbce!?>\v,!!webfsozojjolht!!w<f{d/4u!iwhMjpfdXbomjQlptt!j+u!jypfou<s!fwWpojjel!tn!b+j!o[)u*b!N|f!owpfcd!5>!,u!sebfootogjplstn!f<ez!/>u!iwhfjdf5X)oqjplttj!u+j!pyof-u!s2f/W1o*j<l!tw!M+p!dZbumbQNpftojpucj!p>o,!!>e!fwofodj4l)tq!p<tyj/uujiphoj*f<X!ojjgl!t)!v+V!tyffTulsjfoWoojjolht*!!+|!!YnubbuN5f!ocppco!f>N,b!ueYf!o>o!jhlftu!C<p*o1f/N1b)u5sdjfyw)!t>l!jeofJoooejflyt/!y5*d<f!wn!b<ue5f!ncsppogftNobbusZu!!>+!!hyfjusCupboNfeNobjucs!j>y!)ytflujsofJWooejflyt/!z5*d<f!wn!b<uy5j!scupboNfeNobjuc[!!+>!!yhjfsuuCbpNoofjNlbtu!s+j!yf)ttslfjwooJJoyejfsyu/b{N*e<o!jncb!u>5!!ycjpsoufbNNboujXl!t>!!<hXfuubCNpfoofpNcb!u+s!jxy/)utilhjjofJXooejflyt/!x>*,<!!ynjbsuu5b!NtoljjlotN!b<u[sujbyN!f>o!pncb!u+5!){1//u1i*h<j!ftXlojjolNtb!u>s,j!yy!j,s>u!btNlojjolXtf!j<hZiuub/Nyf!o+p!cc!p+o!fzN/buuiYh<j!ftXlojjolNtb!u>s,j!y","~0!0<!*${Q/SeFsGpJpYD\vh!b\vs$Ge`fmghj)oBfC!HDSMpJUQi`uEqJfSEFlDdUbJqP!O>\v!!swpbmspzDjhobhs!Gw`fmdh4!!\vw?Mzpedpbcm/Qtpgt/jyupjcpqoj<m!d\v=$!jfoedvmmvdeofj!$=\vq!b\vd?lzjeophc?/\vt!g\v/$ojpojdumdvfesfj!E=qdjmmjdq=E!jfsefvdmudjopjo$/\vg!t|/!i*f)boej?b\vn!!\ve$jjpowd!m\vvgejfe!o=fd$m\vj!q<coppyj/ugjtt/piQfebmes?p\vX!w\v!$4jdgf!wN!BhYo`jCzPsYb`wD!M\vJ1Q!Q?F!S"],EQ.reflector=["~b!u<u*s1j/c2v!u-ft!pwqf)d54d!fqwp!t+<!!yvjosjugbpNsmnf!enpbnu!5+!!uyfjysuuvbsNfxNfbjuws!j+y!<y!jvsoujbgNpospnj!undbfuk5p!snqp!e>f!moNpbjuusjjtyp<Q!`vmohj!g<p*s1n/!2n!b-ut5p!qw)j5fdxfNwb!u+s!jyyj<s!uvboNjmgfpespnn!!n+b!uy5j!squsbpNkffsdvuujypfouN!b>u!swjVyw<!!|w!b*s)zojjobhn!!wefjdp5w!!w<Vw","~v!o<j*gbp/sfnt!bwcf!d-4*!sdppmmppds!<-!cvhosj/gfptsbnc!)tzbbnmqsmffwsP3eEo!fumEcj)g5gdvftwf!<>!!wsbpsmzpjDohhb!swGf`dm5h!!w<Vews<b!dgtmjpeb!u*!/c2m!f?o!ezP/wwfVsum!b}z})!g/m2p!b?u!!yc/bwtVfu-!!}g}m!p1b/u!!=c!mzf/oweV*u!!|}!}s!f1u/v!s=o!)yc/bwtVfu!)=!!g1j/!6<!x@/!w)V3w/!10!!+z!yc/bwtVfw!!+>!!cwmVfuo!e3*d!f;w!!)<2*/w1V!w.!!-3f/t1v!g+g!j)E2u/)1k!p.s!QcEb3tffs*v!u+y!f)u2!/>1!!f.t!bccm!f5odef*w*!*|<!!*~)!owjfbdn4!!ecjmpfwo!e~P!w<f*s*mcb/ze)owffmdc4!!-ccb/tfft-b!cw)fzdb4m!scfmwfPoeeo*f!m|c!!s-f*uhv/seoo!fwmfcd!4-)hc/mfftobecP)wzfbsmmsbfzw)Pcebotffm/cs!--!*csm/feo"],EQ.envmapCubemap=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbssDGv`cmfh!!f\vogwjNeboqf<$!\v\v!$<jcohdsm/v*e*f*!{=zf/oodppjeujdofhs?j\vE!uwvpqjuev!Pnwb!j-oy)/*o!p|j!uhdmf`sGjsEbuhvDqpumvpPsw!!>)!4wdffdw5!)-1q/b1N-w!o1f/)1f-c!v1D/f1s-v!u2y/f1u*)<s!b\vf$ojjgMepfUgm!fVyTfFU`qMbJNOwFoBfS!\v>!!hcmh`sG/ssbphmDppDmhpbss/Gs`hmch!!>\v!fntbmqfU$f\vy!f<mcUhpsM/j*o*f*b{sz)/uofpyjuuvdsffsDjvEcufv)qfuovwPNwb!q--y!/wofpdj4u)d!fwsPjvEuuqv"],EQ.envmapEquirect=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbss3GE`!mfho!w<N*bzq/<g!!v-onjcg!p-snnu!)wyfjdn3!!>u!fcyhfsm/Tsjp{mfp<D!h\vb$sjGo`dmmhv!e<f*!y=/fgo!d-psecj!o-hm?c\v)!y\vj$ne!f>g!jnocf!!4SdFfDwJ!Q<S*PyD/BgM!`-QsJu!!1-/m4u2)9y4j1n:!9>9!7n2u9!448d:f1w8!\v\v!g\vj$eeoffg$j\vo!f<!cShFsD/J*Q*SwPvD!B-Mq`bQNJw3o!f1)/!2E63:f2s6v5u:y5f4u1):s2b9f:o6j4M6p\vU!mwffydf3U!qfbrNvwjosff!d>u!Vmwc)!j4od!fwwf!d<4y!/efj{sj*T!m|f!ygfmup!b>u.!!vy!/>w!vb!u<bcoh)se/j*s*/w{v-!!-.qebjNsw/oyf*)!!+E!3SfFsDvJuQySfPuD)BsMb`fQoJj3M!p,U!m1f/y6f<U!qgbmNpwbouf!!w>!!>s!c1!/46d!f.w!!b<tzj/of){djmTbmnfqy)feuj!s>/,z!-z!/.w!v2!/<1c-h!s2//*1**w*v!!+-!qSbFNDwJoQfS)P!DEB3Mf`sQvJu<y!fsuf)usvbsfoo!jwMfpdU3m)fvy-f!Uwq*b<N!w~o!fw!p>j!es!un!b4jdof)w*!!<|y!/hfm{`jGTsmbfhyDfpum!p>s,!!>y!/wwfvd!5<)c1h/s1/-*!*1w/v1!--!q1b/N1w-o!f2)/!1E*3<f!swvfudy4f!up)vsubqfvoujEMjpsUfmdfuyjfpUoq!b>N!woopfs!n>b!mmju{!f4)dwfPwv!u\vqfvtumEfj$s\vf!d<ucjhpso/**<*!wwvf!d-3q!bvNww!o>f!)f!rEv3jfssfvduuyVfwu))psvbufqovjuMEpjUsmffdyufjUpqob*n<!!>w!fmdc3!!4gd!f>w!!g<syb/dfu{)jvTwm!f0y!fuuf!y>f.m!Tyj/{wfv!!.<!c1h/s6/**<*!wvvw!!-.q>b!Ngw!o+f!)u!fEy3ffmsTvju{yff<u!)\vs$bjfgoejfMgp!UVmTfFy`fMUJqObFnB!S>\v!!swcf!d44d!fuwm!!<>z!/nfb{qjUTfmyffymfUup!M>j,o!fzb/sw)vu!f<ycuhvss/f*3*Ew!v)!f-oqwbNNbwqo-f!)v!wE*3*f/ssvhucy<f!uv)ws/byf!o,j>M!puUfmyffymfTUjq{bfn/!y><!!swuf!d4"],EQ.envmapBlur=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbss3GE`!mfho!w~N!b<q*<t!jvyobj!g-pbsunf!ijuo)uf!mtqbnnbqTmuffth<!!+v!o^j!gjp!s]nt!ugimhpjbfux!!x>f,j!hcihust/]s!pom!p^D<h!bvsoGj`gmphs!n<!*ctpjpymb!!m-bbuujfuivue!j+o!b1m/<2!.v)ofjmgqpnsbnT!ugfmhp!b+u!!^e!Uji!f]utbu<i!hvjofjxg!p>s,n!!cghmsp/bsup!mnpjDqhJbosuG<`!mvho!j<g*pjs)nu!bwpfmdg4!!+q!pbmuffBiyUjet!<>!!\vb$ujfoidum!vuebfp!m=gf!o~d!p<eljbofhs?c\v!!|\v!$*etffgmjqonfb!tF!O>W?N!BjQ)`!UgZjQ!F|`!D*V,C,Fj`!V<Wo\v!!=\v!$jj!o<d2m!v>e!fj!!=udovjc)f!FsopwgS!f<g*mtfjdyubj!p-o1G/T1?)\vf!mwqfndb4T!uhffhu!T+b!n^q!m1f!)]gtmupibhuj!fuxi!f>u,b!-c!hwsf/ds4p!mbpyDjhtb*s!G|`!mghm!p<b*u1!/d2p!t-U1i/f1u!b-!1>/!1d!p-t1)/u1i)f5udbf*w<!!>w!fsdp4m!ptDbhnbqsmGf`Emjhs!f<d*utjjpyob!)>f!{wjPmvbunqsvpuoE!j>s!ftdjuyjbp!o~!!+<!*dyp/toUpijfuudbf!s,j!Edusvpqtutv)Pbwy!j.t!--!1w/P1v!u-q{v/uoEpjjsufddfusjjpEou*v!q+u!vtPjwo))4udiffwu!b>*!!t,j!ybby!j|t!!*+*!*e*p1u/)1b)y4jdtf-w!!w-Ptvjuyqbv)umEbjvsrffd)umjmpbo)*!!g+j!!)<2*/o1p!j.u!ddfpstjUEiufvuqbu*v<P!ws!f-utvjsyoB!fcmjpmqj)otftbpssDdv!c;f!VtWj)yfBofwmNpbqq!-@!!tmbbnoqjmefvEujjsufbdmu!j>p!ot-j!ynbj!q4Jdofuw*!<|!!~*!)wopjjben!"],EQ.oitBackBlend=["?$TjWoodfmfvsedfT!u=jcm","~w!b~s!z<jeoshb!dwtfjde3!!|w!V*w1</!1v!o>j>g!pbs/ns!ptmbpnDqhmbfssG3`Em!hv)C!bgdjl!D<p*mwpVsw<!!-wsppjmep!DnlbdjboC)v*)!E|3!fhsmv`uGysfbuh!D>p!msp"],EQ.oitFinal=["?$TjWoodfmfvsedfT!u=jcm","~w!b<s*z!jbo/hs!pwmfpdD3l!dwbVcw!<,!!vbo/jsgppmspnD!utobpnsqgm!f-sc3hEs!/vsGpsmppoDulDdpbmcp!s+<!!svfojjmgqpjsunm!vtNbbniqqmmfbs!3,E!!cvhCsb/dslpDmppmDpuso<p!swgp!j)e5!dnfbwj!o>)!*s!p|m!pwDfhdb5s!Gg`smpho!u<Dbp/msppsm!p>D!uuofpysugv!s.f!31E/)2v!G>s!psofujDmpqmjpusm-v!NwbViwq*m<b!!wufbdp5m!gc!b<d*lwDVpwm!p-ss!p>m!puDflydubvCsvf)3E"],r6.common="~$!e<f*gwj!o-fv!)Q3Jd!f4w/!2o5s2v6u:f3s7!6<466/91:!8,:!4J\vQ!`\vM$BeDfPgSjQoJfD!FQSJ!3+!!7*/*319/422!9-614/128!2.8!:-6z9/7s\vj!e\v)$qenfbgmjdo)fo!jQtJb`!I>B!MwG!!u2b/p6m8g1!8<:67/413!7,8!:35J9Q:`7M7B\vD!P\vS$QeJfDgFjSo!f+!!S*FyD/JsQjSeP!D-B{M/`sQjJe!)1o/b4u2b9!4>1!:v9!9u7b2p9m4g8!:|1!8*\vs!j\ve$!e4fdgfjwo!fo!jS)FwDVJuQdSfPsDjBvMr`fQ!J33d!f1w/!2~6!:<216/52:!5.4!1>:>2!9^:!644!6]\v^!!\v3$!e]fng!joosfv!uFfQsT!J|M!P*On!!25fu.b7n\v)!y\vj$sjugboNeffwgj!utdbfuqvtssbfuQft\vj!!\vm$pepfcg!j~o!f<!*tcbhusv/ssbpumfp)db!*-!tdumibhnjqf)xb)-u!p1e/!1o-s!v2u/f1s*!\v<!*\v3$3f8o1e/j1g!\v-!3g6m2p8b/u1!!q-p7x332)3d/p1o)t4ud!fjwo!!>g!mtpubiuh!jyf*x!!|4!dsffwu!v|s!o*!syp+myp<d!!~4!dgfmwp!bouj!!quptxo4p)dd)pfodtoub!ojjon!vgMmfpwbjuu!bym*f!S|p!Ussfbufvosjom!!yu+byp+myg<!!~~!!<gqmnpub!uo!sqvpuxf5s)!d<p*o{t/u^!!j3o!!]gnm!p-b{u/!^y!*2!!|]!ng!m-p{b/u^!!y13!!]>n!)y4+dyf<w!!s>f!u^v!s3o!!]yq3n+uy!3<<*!z~/!^g!m3p!b]un!!n-bzy/4^)!d2p!o]tnu!!-jzo/!^w!f1d!4]!nw)*4!d|f!ws!f>u!v^s!o2!!n]bqyn)un!b<y*)yw//^y!-3!!w]/nz!*--y!/w^/!{2*!<]!n~!!-gym/p^b!u1!!b]wnf)s4bdhffw)!d>p!o^t!u1!!j]oq!nwuf!d<4q!ndup!m4pusb*n!!||!!s*fnu!v4suob!ne!pouj)!duptmoppsd-)!4wufbdN4f)t1p/q4t4o4b4s*u*!<4!u~b!ni!j~h!i<q*!{gzmyp/b*uy!jssbuoben)!d+p!o*t1u/!1j!o-!swjfed)35!dvfww*)!)|f!{djpmobtnus!pioj!hoisqv!ugfmsp!b|u!!*by!j>s!u2b3n/!:59u:b9n-!!ocj!!>-!s8j9e/!344d4f-w!!do!j>)!o5p4j8u6d9f/s6j5E6n4s<p!gitjohbisqU!fgtmspfbwuo!je!u4!d>f!we!p~u!)<v*w{/zyyz/-*!*w1f/d13!)-bs-jce*)*5-d!ftwo!!+>!!ynjpseu)benu)-)!fQ{Jj*m<b!nssfpuov!soos!vgusfbsd!u|)!t*jyoj)stuob*n!!+5!udb*n<!!o~j!!t-ussjved!u4!dJfowd!joejf)ooupMjjuhdifus!j|E!nwsfpdg4t!odbpsmup!s4<d!fwwf!d<4~!!e\vjgsjfedoufj$p\vo!<<!mcbpnpsmp!Owujbtpjdcsmbff<m!d~!<4!dtfuws!v\vdUuB!PSDfSgBmFfMdDu`fFeTMVj!hgifue!g|j!$w\vf!d<4s!jeEjxsffjdwu!E4jdgfgwv!t<fm<b!nwsfpdo4!!4edjfswf!d<uoTpqjfudjvtmpbqs!<4!dwffwd!4|!!juoyefjusofpdDudEjjsgugfvntpff<H!!wufddv4s!ujto!e<j~s!f<dsubTmqvfd",r6.packing="~w!f<d*4s!bqgb!d.l!O[pqsjnmbDmwUopjS!H+C!)*dspboftou!!.j!os!bwgf)d)4!!0o!p*ssnbbgm!*+!!|s!bsffou)v!soos!voupfssn!b|m!j*{sfb)go!pusbnpbmmg*!!o+j!!1u/t6o!p,d!!1-/s6b<f!o~!!uwbfpdm4g!!voojq!budtloSpHdC!U-p[OqpjsmnDbwmo)jd!puobtpum!gj!oo!jw!fudt4o!psdh)c[*x!f|j!WspfUuivusqof!E3f/w1j!u+d!fsqhtcs/fyqz!{u!b.p!m2g/!1~<!!<~*![dxpfojtwu!!+g!m*psbbuf!oQ!b.d!lsVbqgt)d)b!m0f!!*>s!b3g6!7+/!!*0[!x3f6j6w/!<,!!dspboftou)!)g!mopsbvuu!fVso!q|b!d*lsEbpgx!outbdpbmmgf!!o>j!!3u6t6o/p!d0!!-3s6b7f/o<!!udbppomtgu!!owjf!du4t!oQpbdd!l-G[bxdfujpws!tu!b>p!mwgf!do4j)!3u6t7o/p!d+)!i3u6q7f/E!f+w!j3u6d7f/q-t!s3f6Q7p/U![+x!f3j6w7!/u-b!p3m6g7!/~*!<<!sdbpfoot!u.!!w*fsdb5g!!V.o!qsbbdfloG)b!d+u!p[sqtj!m>D!sVbofqobjdml!Eopsxvoutfdsb!m|f!!*0s!bwgf!du5b)pQmbgd!loGjb!duutposptd-!!-2s/b*f<o!!dupboptmug!!gomjp!buut!oTpidj!g-u[SqjjhmiDus9b!f>o!j2m/!!u0b!p3m6g7!/o<j!!wuftdo5p!dq)b[dxlfEjfWqpuUiiUupqSfHECdBj)idqpbosthup!ijuos!pg!mupbbpum!gw!*~!!|<!*wsfbdg5!!.s!!s>b!fwof)d!50)!g*ssbbdfuo)!w,!!+[!xQfbjdwl)G!bodsuvpusfts*!-|!!w**s<b!gs!/uzb{pxm!g.!>o!js!/uytzo{p!d+!!-Tsibjfgou!Sujbhpimug9!<o!js!fuutvospod!!s-![+x!fQjbwd!luVbqptmdgb!mofj<!!u~t!ogpmdp)biuu!qvfoEqdbjdilqSbHsChBpUipuEsfPqpuUi[)xdfpjowt!uu!bjpom!gw!f~d!5<!*w**1!/|6!6s3f!u0v!sxo/!we)p!u,)!w{-/!wV!o-q*b1d/l6G6b3d!u0p!szt/*w<)!!~,!!wyf/dw5)!3qdbfdwl!3oIsbvmugfUsp!S|H!C*Bw)!w5fddf3w!)wg*m!b|I!3wpfUdB5C!HsS!l>d!bwqfodv5!)3wd/fyw-!!~g!s<b*dxu/)sw!/-y1!/+6!6336!60/!1x*/-s!!w./!z{-/!sg!s-bzd/us)!w-/1z/!6+6!33!606!/z1/*s*!<.!!syf/usv)s5od!fw",r6.bsdfs="~$!j<g*oEe!f+g!!HV)T!F+`!VGC!Po\vs!vvuofjsg!p<s*nI!Ogumppeb!u-!tgtsffotjoofjmiJto)uhfooptijQuozo<j!m\vC$`fEo!e>j!gE\v!!uwbfpdm4g!!C<S*E)Gu`jMdbjnmcqfnsJu`)hdoppoitQuo!ojjom!Cw`fHd!4>!!eHj!gugbvptmfgD!p<m*pIsW*u!p|e!!s-f1u/v2s!o-!sSpFmDpJDQsSbPmDvBdMf`qQtJ)!l+d!jemjigdgTv`tGf!D>p!mGp!s4<d!f~w!!w<f*d*4s!jGE`gTmdbiim!j-dslj)Edxpfojtwu)!ujpoe!)wffudb4s!vgu1b-t!!d>p!oItWuu!pjeo!!ugbmppmbgu!!<g*:*1s-j!Edgpmobtiu!!-jmob!ngsmppob)uu!peep)ufWuIb*s!v|u!bgtm!p>b!uI!Oguspfet!oufbmp!m>g!!f<y*qs3j)E)x.f!j6w/!6,6!5s8j4E!u+i!hejpmu)WfI{!j.m!b7n/s:p9o4!2>7!*s!j+E!gempbuiW!I4*d<f!ws!f|u!v*stot!fgosjfotjoiftm!Juobupfmogt!joujz!!u+t!o)pgd1!!-+s!p)m2p/D1s!b.m!vgdsffqtto!f4md*f!w,!!o)jg!:u1t!o+p!dg!s-fmtbonfsmp*o*!<4!d~f!wg!mopjb!uu!tWo`pHdH!Y-`sTjnEjxufijDwp!s4sdffmwb!uofje!)udtpooptdu!!-jsoj!Egumiphbjum!!b4mdqfiwb!-o!jd!puottoup!dj)oh!ogpmipQbouo!jempCu`OGME-S!Cd!p4odtfuw!!j~o!!<g*mtptbfuo!jeopjuiOtW!*-!I|O!ugpmep)bxup!qb!3+!!>*!1q/p2x!3,)!b6m/q1i!b+*!<t!tgfmopjbouj!ihtw)!!>+!!eJpQu`OMMB!D+P!StQrJsDuF)Sb!3o!s,v!u)f2s/!1|!!.*!IbO3u*p!e+!!uqbppxm3g)!eopju!OuWt*o*p<d!!g-mtptbfuo!jhomj!i>t!!eupbupOmWg!!+o!jt!rustuo)pbd3)!h,o!p)i2Q/o1o!j.m!Cb`3E*!!u+b!pqmpgx!3~)!e<p6u3O/M1*!*o<s!vsuffusv!s|o!!*1)/u6j!d0j!mnqbnyJ)`hhwo!p,i!Qhomo-j!mFCQ`THJ!MuPbOp*m<g!!~~!!g<m*pubmuv!tEf`sH)H4Yd)fdwp!ootsuv!ujfos!!g<m*psbpuu!dbbmGqnisbp-G!sdppuodtfuw!)jsop!ugdmbpGbnus!peGpfusOfIi*q!T|e!fgqmqpjbmuD!`bD3U!M>!!>q!puxm3v)tbfmsq!iubb*p<m!gg!m<p*b^u!!1e!f]otpens!p>p!dq!p-x^3!)4e!p]utOeIs*p!p+d!))sbp3u!d.b!G2n/s1p*G!s,p!u2d/f1W<f!hsefFu`vDsUoM!!S>F,D!JsQpSuPdDbBGMn`sQpJG!s+p!ubd3f!w0!!<q*p^x!34)!e]ftoepsnp*p<d!!~-!^w!f3d!4]!tCeSsEpGp`dH)HsYp)uddpboGtnus!pjGos!pwufddf4W!fmhjehFi`uDEUjMs!->!,d!psoptuud!bjGon!swpfGds4p!uwdjffwx!E<j*s^-!!3d!p]otteus!pjpod!!w-f^d!42!!o]ptsensbpmp-d!)dsppoutdub!Gjnos!pwGfsdp4u!dgf1W-f!hdepFo`tDuU!Mj!o>!,g!msppbuud!bgG:n1s-p!Gdsppoutduf!wj!o<!*g^m!p2b!u]!tsepsvphpido!f-t^t!*1!!|]!tgemsppbpud!)bsmpquidbb!G>n!sqppGxs3p)usdpfvWhfihoefFt`tD*U<M!!w>f,d!4s!piubdmbgGEnjssp!G>s!poupdsfnwb!m<j*{1f/)1m)j4hdifuwE!j>s!!s,p!uwdjbfGxnEsjpsG*s<p!ugdmfpwb!u4!defpwu!O<M*!^>!!4t!b]utvessbpupfd))efp{uj)mobpnssnpbom!->!!m^j!h4i!u]Etjess*p*p<d!!g<m*p^b!u3!!e]ptueOsWp!p>d!)tfb{ujvmsbbnusfp)oe!p>u!)^o!p3s!n]btme-s!pwpjdf!x<E*j^s!*2*!<]!tgemsppbpud!)efp{ujOmIb!n>s!ptob!u>v!s^b!u2f!)]etpeus)poppds!n<b*m^-!!1i!b]mtgeEsjpsp*d*)<f!{gjmmpbbnus!peop!u>W!I^!!>1!!t]btuevsspbpudf!)<e*pQu!).w!j^f!x4E!j]st-e!sipbpmDguEdjfss*)*!<+!!wufbdn4!!>G!!^>!!4G!`]Ttdeismpjpddl!)<g*1Q-!!.g!:^1!-3!!e]ptueWsIp*p<D!ugdmfpsb)u!!+W!!u>b!nW!`>H!H^Y!`3T!n]jtueisDpppsds!f<m*bQu!f.e!)^b!m2q!i]bt-e!sepppuDOuMd-f!se)p!u+O!Wu*b<n!!g>m!p^b!u2!!E]!t>e!sEp`pHdH!Y<)*bQm!q.i!b^-!!1e!p]utOeIs*p<p!Dsufdufvss)o!!+G!!u+b!n)!W>!!+^!!E1*!<]!t~e!swpfpdd3!!<M^U!D5`!V]wt)edsppoptdu!!4jdof!ww!f<d*4*!OO!--!3dUp!o-t2uU!)j4ou!bwnf)d44u!bWN-f!tdppqottoub!sjuo!!+g!mwpobJun!!s>p!vuhbino!f4tutb*n!!|<!*d2pUo!t-uO!)gtmtppbsud!!M.V!U>`!T3JU[!F<!*>*!O7!5-/W1)<u!pdep!o+t!uO!!g.m!pWb)uf!{MjVmUb`nTsDpBoM!F>!!>2!U)!M<V3UU`!T-J2[UF!!4.d!f2w/!1<**!10/!1M)V4Ud`fTwJ![oFs<v!udfpso!t*u1!/g1m!p=b!u*!^M!V1U!`]CtJeBsTp!p>D!u1d/f6s!!0.!!MQV!U-`mTbJn[sFp<O!ugimhpjbmu)!ueppeu)OgWj!!><!*t3bwu!v-s2bwu)ft)teppsud)!O>-!!mWb*n*s<p!Owufidh3j!mv!w4!d>f!ww!f<d^3!)1s!p]vtheisopfptDtu-d!ftsr!s.u!)^2!/41!!].t!eesppupODWu*d*f<s!!v>w!!3>w!!v4wd!f+w!!M<V^U!`1T!D]BtMeFs!p,p!DMuVdUf`sC!J.B!T^<!!2s!f]utvessop!pvDwu<d!f~s!!g>m!p2bwu!!4MdUfDw`!D|m!j*q^q!f5e!T]qtiefsspfpGDpusdnfGsb!d4udpfsw)!dopjo!tuut!ojpod!!w-fwdo4J!ng!*4!u|b!ng!mopjb!uu!tmo!p>d!!m-fQo!h4udif)wg!*o<j!!suftuovpsdo!!-nWb!y4)d)fmw!!+o!jm!!u,t!ogp/d{!*-!O0!!4)dmf!w,!!o2j/!1u*t-o!p1d/)1f*u<b!v~m!bwwfFd`4D!UMMU!D4`dFfewh!f~W!f<dbuupfsiGuposjntG`bbduufpisu)!d+p!o*t3uw!!j-o2!ww)ftdt4p!swd2!-o!sdvpuoftsu!!<jwo!!.w!f*d*48!.wf32*!!-|y!!g+m!pyb!u.!!y1!/>2!)eypbun))wu2s-r!twf3t*s<f!wgomjp!b+u!!6z/!1>!!;b!cwt!)@y!**<1!/g1m!p?b!uy!)b!!>>!!b1u/f9i6u5o4j:t9`6b!u,f!i)u1!/u5b:p7m6g2!6<6c!!,0!!1b/!1>2!5w6!3u1b7p!m+g!!z<*z!!++!!z*<z!!g,m!p5b3u8!7c2!7>2!/45/)5!2,8!61:5",r6["ubos.head"]="g$jjegoeff$g\v!!V<T~F!`\vVgCjPe\vo!fv$o\vj!g<pssbnm!vTddffqotf!!4|d!fnwb!u<5p!jvuQbsSpokpfjduudNbbsugsfjsy!<u!bnpbmug5!!<vtWtjffoxjNobjuistj!yu<b!pwmfgd!4\v!fvtDmbfn$f\vs!b<QspptmjpuDjspbom<v!dgfmqptb!u4!dvfUwj!n<fs<p!mgpmDpnbjus!!u4pdoffwN!b<qsqfjxophQFnyjqsp!tuvbspfm<g!!w<fzdu5j!tvoGfpuhoDJpsmbpmsv<d!fgqmtp!buub!pvmGgp!h<Esfpojt!juubzp<m!gg!m<ptbtuf!ovlGdpjhiOuf!busb<p!mggm!p<boup!jvtGtpjhnGtbosb<s!u~!<u!bvpomjgg!p<stnt!fNobmubfusfjnb!mu!b|p!mggm!p<btut!fbopiNhbvqpJso!uufboptmjgu!z\v<S!CgQm!pgbfue!gmjj$h\vi!u<NybjqsJuobuNf3owtVjvu!z4<u!bgnm!p<byuj!seujbtNqwmVbvd!f4nufbonu!T<dzbumjft<o!fgumopJbmuf!oetjftsqgm!budbfpnmfgo!u<CujtbftU<b!iwqfmdb4!!uebjpgmggv!t<fz<u!jwdfbdq4p!!funbjptmtgj!w<ff<m!bwdfTdm3b!nosp",r6["physical.vs"]="~b!u<uysfjucsvfuwf!!+w!fydj4s!ubbQNputdjfukjppsoQ<v!!b>u!uospjjcuvjutfp!Qw`fmdh4!!\vb?Ozpespncb/mt<w!/\vq$bjNgxepfmgg!=V!TfFe`vVmWd\vo!jb$u\vu!s\vj?czveupfc!/wtfwd/3q!bbNVxwp<e!b\vi$tj=g!effegv!mVdWo`jD$M\vJ!Q\v\vg!jwebosfz$j\vo!h<!*gomppjbuuj!twpVQwbM)p4ddbfmwV!<>!!\vo$pfjouejjtgp\vQ!mwbbdspzMjwo!h\v!*wOfPdJ3U!DwFVSwJ<E!`\vQ$JjMgDo)eeffgo!jVgTfFe`!VgCjP$\v\v!!v<o*jygfpussnf!wn)b4ud4f!wv!V>w!Nobpujsujjyt<p!Q\vw$Nfwo!e<jygf\vu!s\vf$wf!o+e!jygj\vs!u\vb$Njxgf!jeWfmgfjeopfNev)!V>T!Fy`fMuJsHfIwU!N\vBgQj*e!o}f}$!\ve!f<g*jyoffues)fVwT!F+`!ByPjNsBuQb*N\vm!fbeupuNsvj)c4vduffw!!w>f!do3p!jbuVjwt3p<Q!ewmbsspzXjwo!h\v!*wOfPdJ3T!TwJVNwT3O<B!S\vU$`jFgToVe)fegf!oVjTgFf`eV!C}P}\v!!1v!o?j!gSpFsQnQ!JnMbDu`4Y!PvCV`wY3BNNb!u}s}j!y*<Q!B\vN$WfOoFe`jFgT\vV!)\ve$ffoojegjfge\v!!g\vj$$j\vo!d<m*v1e/f2!!=-vecfpnts/pigftboeb?s\vu!)\v5$djfowd!m>v!eyff!u=sjfowt!u5bdofdwj!o\vhg/jweto/fi$f\vb!e<?m\vb!nvsopjOgwp!s.n!!>n!bmub5n!svpNOpwe!f\vmEWFjEfJxTN`bQuJsMjGy!<g!fveogjjg$p\vs!n\v!gnjbeuo5f!$v\vN!p<e*f*m*N1b/u2s!j-ym<b!nvsopjOgupdsfnk!cnpb)u55d!fvwO!p+s!nybjmsNubbuNsmjbyn<s!p\vO$vj)g4odeffwg)!fV{TjFm`bVnCsPp\vo!!v>o!jmgbpnssnp!Onwb!u\v5f!tvmQfs$p\vk!f<d*u*N1b/u2s!j-ym<b!n\vs$pfOowe!j+g!\vn!)w5bdsfzwj!o+h!!ywjfsdu4b!NwmObpnssnpbOmv<)!4wdbfswz!j>o!hm!bwnfsdp4O!ww!N<w*Q*p^t3j]unj!p-o^<3!]\vn$)jugp!ee!f-g*j^o2f]en)!V-T^F2`]FnO)WuNpBeQ!*-!*}^}1!]NnB!Y-`^C1P]Yn`)DuMpJeQ)Q4FdSf!w?!!01!!m}b}n!sepfOgujdoffkec)pV!T>F!`mUbSnBsOpTONwJ!T<T*JePfOd*o\vb!uwtbosJzyjjoshu!bwNfbd)44!uwbXnp!s>m!enQ!p4tujbunj!p<o*<*!1\v/$2f!o-eejfgn\vs!p\vg$tjogb!seuf)g5jdoffwe!)+D!MeJfQd`oEbJuStFoDJUyJjPsOu*b\vN!bw)b4sdzfjwo!h>!!weffdn4s!pwgMtpodbbsmuQ!p\vtHjOuJjDpOoB<U!T\vO$Jf`oFeTjVg!\vg!f\ve$gjjo$d\vm!v\ve?fz!e=pecj/ttqwm/bqdbfNnufoofunNfbdqb/mwqtt/jief=b!ef?e\vv!m\vd$ojjo$d\vm!v\ve?fz!e=ptcl/jtowo/jhoohj/owotj/litf=b!ef?e\vv!m\vd$ojjo$d\vm!v<e*fm!b=ntsipbOebp)x4Ndbfqw/!w>t!/mibfnbsep?O\vu!d\vf$kjcopd!m4vdeffw!!=<g*moppxjNubjqt/pwQtb/)i4fdbfew?!\v>!!wepfjnes!pngbtjoob)swup!j4ed*f!w|!!\v\vg$jjegoeff$g\v!!V<TzFy`/V*W*\v2!!w-V3ww!V>b!))4vdVfwwN!b+u!syjjys!u+b!Nw3fwdV4v))b!V>w!-3!w2V/w1!*\v**/QyBzN<P!B\v`$FjTgVe)fegf!oVjWg`fDeM!J}Q}\v!!*wQVBwNMUpIdHbJmMV`!F>T!Vb)Vewf/oyj<g!f\ve$!fgoje$j\vg!\v\v!g\vj$efo",r6["lightsCommon.fs.head"]="~v!o<jfgdposbnj!ewbfsds4j!!bonscvjuffosu!M<j*huiiuhDjpfmXpfst<v!gvgojjEgjpnsfni!!w-fsdp4m!pmDjzhlitu/QusiphcjfM]j:n^f<i!!w-fsdp4m!ptDieHofvupJsshs/bueijhbjoMdjfnBfui))jyoj!nw!f>d!4f!doopbsjnebbms-s!jj!o4!dwffwd!4<!6t/i1D!p,f!gMgOjudpjef!o+u!t6]/:1^!*>!!|u!ighmjpfbXuf!tyv!g>g!joEpjsnnfbim!/uyb-p!mzg!!><!*ooppsjnubdmf/szj-e!/{u!i>h!joMpjsnnfbim!/-{m<b!nwsfpdo4)!uspfet!v>m!uM!O>u!ptei!Dupbfpgmggj!d|j!f*omubtn]s1p^o!!+4!d1f/w9!9o7j3!3u8t<o!psdf!t-vumiuh!j,M>j!ntfiiD!pufighgjjMdfjsffoiuqtt]j2n^f!I+!!o3j/!1u!t+o!p1d/)6f2d2o7b7j5e!b+s!szJ<u!ishfjtMvfmsuf!i,q>t!jtnifDIpuffghg!j4ddjffwo!u<tu]i3h^j!M+f!s3f/i1q!t+j!n1f/i6!2u2i7h7j5M!f+s!f{i<q!tsjfntfvIm!un!s,p>g!jtoivD!p<f~g!g<jedfjmfcobuotf]!4m^p!p+c!!3</s1p!m+p!D1e/o6v2p2s7h7!54!d+f!wy!<<!sspfmtpvDmzul!t,!>4!dtfiwD!p<fogpgjjuddjffsojuet!]45d^f!w+!!|3!/u1i!h+j!M1f/s5f3i:q1t5j4n!f+I!!yu!d+v!szu<t!!s\vfgtjvemouf!$,\v>!!<t^iTDUpIfHgJgMj`dBjFfSoBu`tU]D6F^S!`+N!V3O/]1t!u+i!h1j/M5b3f:s1B5u4d!f+s!!zu!i+h!j{M<b!fssfBtuvdmfuS!!,n>s!ptgijDopvf!g<g3j`ddjufmo!uEt3]s7f^m!q+n!b)t1!/n8s5p4g2j3o6v!!+<!2{`!d+u!m{!!E.3!s1f/m3q5n8b8t1!9n*s<p!gsjfotvv!m<u~!!,<>s!btmivDdpffqgTgfjmdcjbftojuet!]m8p^p!c+!!<3e/f1m!c+b!o1f/!5m3p:p1c5!4<!u+i!hyj!f+I!g{m<b!is!f4tdvfmwu!!<,i>u!etjiXDgpmfbgig!j4ddjffwo!u<to]p9j^u!j+t!p1q/!543d:f1w5!4<!s+p!m)pyd!!+4!dyf!w.!!|z!!u+i!hzj*M<b!fssfBuuvdsfoS!!sufdtvvsmuut<!!\v~1!!w?f!dT4U!IhHfJuMM`jBhFiSuBQ`sUpDcFfSJ`sNsVbOe!jgbjo$d\vf!)\vdgpjoetouf!$j\vo!!~w!f~d!4<!fmtjmhbigu!Q>s!pfcmfc]j:t^j-w!/dupiohtjum!!j<o*!1w/f1d)44!dofpws!n>b!ms*p!m|p!dw/fudi4h!jxmp!s|m!efOtpmsfn!b~m!!<>*!*j1o/w1f)s4tdffUws!b>oat!gsppsmnpEdj/sufidhujjmp)o!)>o!pfsmncbjmt-j!wv/WujifhxjNmb!u<s*jzyb*d<f!ew/fudi4h!jjMsuspbqetj!b-ofddfo!b>u!ttjieH/fuuiJhsjsMbuepjqbto!d-ffBduo)bxuptsjmEeuOiphsjnmb)mo-p!jmujbhvioufQusupBcffd*o<b!ustfjuEvusfoh!!j>s+s!bsepjmbpodd/fu<i!h~j!mw!f<do4p!jhufbuvBonfcujufBouupMqjth!i+u!Jsspsmbpedj/buoidhfj)Mduppoqttu!!>j!os!pwmfpdd4/!ubinhcjjmf!o<u*MsjphuidufDWpmm)pisu*h!o|f!mw!f>d!4f!djosbsubtejjEbuoidhfj!m>!!ubbnpcmjgf!o|u!M*j1h/i1u!D?p!moppsj<u!bsvfoufvusuoB!ujpsqstb)e!jgbjo!d<f*<t!p~D!fgmmhpobbu!!-htfpuDEbjstcunbvoodffqB/uuuifhojvMbuupjqpto!)-dtppoDtfuo!pjdo/!ugimhpjbMuu!pmqjth)ioupEjjutbuvboofdufu-B!udppqoTtuuf!hj!o>!!gomppjbuub!vdovfuupugBguEpjqttu!buobdpfm-g!!d<p*ootpuj!ujdof!sgjmep/buui!hejfMdubpzqFty!q-poopfjouud*f!s|j!ej/gu!i)hdjvmu)pugpgeE!j>t!utbpoDdffm!h?o!b1!/u1b!p%m%g!!e<f*dsbpzuFdyfqWpmo)ffo{uj!m?b!n1s/p1o*!!>|!!ospfjuuvdsfos!jqep/xu)ithbjumv!s<boupfj)u.j!tmpjqh/izusEujftnupbfohd!f.!!0o!pdjvuujptgpgqE/jutiuhbjoMdufp!q,t!!2>/!1s*p-u!deffWdmb!z4Fdyfqwp!o|f!o*uu*i<h!j~m!!sufiuhvjsMou!o2f/e1j<d!o~J!!gumvppb!u-!zhsfuufTnqppfuhB!uuuyffouvobpuDjdpjos)udfpnoptfuH!!jooj!!gumtpobpud!!d-puoifhDjpMtujpoqft-!!udiphojtMuu!pjqoT!!gomjp!buut!oqpfdo)vpngcosJbuDiphtjjMoufp-q!Tdupfoht!ue!jjpow!!g<m^pTbUuI!HbJoMh`mUfPDQpTt`jNoVfO*]!t|u!ishfjuMvuspoq!tt!nupiphujiMtuupfqqT)!dnpsopfgDjpotvj!o<f~-!!<qeffomvcnbcosfb!Dmpptpjco!f<-t!pbDobhsmcfnDvpotfjqo!fu*b<p!m~g!!\v<$tjpgD!fOoVpNd`!EuJbSp`mMgJ!H<IzUbTd!f?e!!1u\vb!ptmugs!v<dfud!oEbjustfjdeu!jupbopbmmgM!j<hsipum!p|d!!w4fddf4w!!e<jospfjduudjfpsoj<e!!w4fddf4w!!d<pomppjsu<j!tcppqp!m4!dffowb!c|m!fuei<h!j~M<u!pvqoTj!gupdsvns!uEtj!s\vf1d!u?j!pToUbImHMJjMh`iUuP!QeTj`sNfVdOu!jgpjo$b\vm!M\vjghjieuotf]$O\vV!N~`!E<J*S*`1M/J1H)I4UdTf^w<!!>wap!jsep!mhpfdu/Eujishfjdmu)j!p>o!bfmmMcjjhtijuwJ/ougiph)jdmp!o<t*uz!bjdof!eE/jusifhdjuMjupoojbpmqM!j-hfiduo!beujtsjfed/uujiphojbMmuMojjhpiqu!--!fddpoobtuut!jjEou!iHhfjpmn)foupsjjudbDvpoofuufuyBuf!dhofbpuntfjuEsuzf-h!!p>v+u!!sJpomdpjde/fuoiuhMjjmh!i<us!pmmjphdi/uu*i!h|j!Mmujohjipuq/!d>p!msppsm!p>d!/eujishfjdmu!j<p*osbpmuMdjfhWimu)/iduphmopfsm<!!>m!jfhdioub/uetjjsEfudiuhjjpmo!!u>b!pemjgs!f<d*usjppuodbfmWMmj)hfi{uj/mebjnssfpdou!j>p!oo<p!jmujdhfisuj/ew/jutijhcjmmf!!<>o!pujsuvjft<p!q~/!z\vs$uffonepjfgh\v!!.\v!$ojpgj!uOjVtNp`qQ/PuJiOhUj`MMuJoHjIpUqT!!>?!!s1p\vu!dtfuWsmv!d4ud!fQwp!j|o!u*Mujihhijum!!|u!iwhfjdM4u!oqfpetjjduojJp!ou<v!pw!f-dz4s!udfpnmppfsh<!!ugymfpuboup!Dedjjtsuubfondpff<H!!gomjp!buut!oepfdd!b-zu<i!hcjpMpumo!jfpoqb!cumifhej<M!u~o<j!pvQo!jogjp!sunt!oQppdj)opugMojJhuiiuh!jqMpujoojupMQjuhfihu!te]jOpVwN!`<Q^PTJUOIUH`JM",r6["lightsCommon.fs.body"]="gHjfeponff$u\vs!j<d*DupiohujfMyeuf!uhdffpmngffuss!z-<m!bhjfspfnufbuns!z-/zqsputfjnupjfpho!!->f!d.o!bwjWejbfSxuQbpptdjsubjfpmod<!!-hffdponbfjuesbzs/soJpmscnjb!m-!f>d!oobpjsenbbsm)<s!bhmfvpdnffquTsuzd/fwsjjfexoEJj`sF!S>!!\vo*pssbnmbvmdjf{qfT)uwdWfjsfjxeQopJt`jFuSj)peof*o<j!g\vf$ej!ggejf$g\v!!V\vTgFj`eDoMfF$B\vS!D<P*BuUi\vh!jhMfepfnufdufsmzg/fdsm!f-bmsbdjpsbfuuObpns!n-bzms!u>f!ndpmffhb!s-dfpdboubOjpesbnsbsmj<)!f\vt$vfgogejjEgu\vd!fJsojdejoeJf`oFuSM!j\vh*ifut!vegjgsjfEduudMfjshjieuo<J!`\vF$Se)fegfjoojfg!fOeV!Ng`jQ$P\vJ!O\vUg`jMeJoHfI$U\v`!T\vIgBjEePoXfT$!\v1!\v<!*\vt$teffogijhovfp!SOuVbNp`dTsQbPfUm`dM/JmHbIjUs`fTuIbBnE!P-XmTb!n1s\vp!O\vu$bepfdgsjboffm!dO/VzNs`uEfJnSp`fMhJ!H-IsUj`ETxIfBjEwP/XzTs!u1f\vn!p\vf$hj)gf!d)oObVjNe`bQSPMJCOJUu`fMhJ!H>I,U!Tf!d?o!b1j*e!b%S%u!bepfdgsjboffmed)!S\vFU`BEPjDsSfBdFuM*D\v`!FQTpVj!ogufMejghji$u\v!!q<p*jtotufMojihhivup<s!/\vm$bjjgs!feufbgnj!o-fmeb)nVsTpFo`/TzIsBuEfPnXpNfBhQ!*-!s%j%E!xOfVjNw`/QzPsJuOfUn`pMfJhH)IfUd`oTbIjBeEbPSXMTC!J?u!f1h\v!!>Q,p!jfoduoMbjjheibusT!i\vb*espbxm!vqdpfjqoTuuMdjfhsijueToiJb`eFpSx)<e!f\vo$jfgofeej!g%\v%!!\v*$QVBONSWPOMFM``FMTPVP)Qe`fToUjBgSfUe\v!!ggjp$s\v!!)\vjgojue!ojf!$>\v!!1\v<g!jje!o=f!$O\vV!N<`*QmPbJnOsUp`oM/JzHsIuUfTn<p!fjh!),f,d*o!b|j!eqbpsjsoJuMMCjJhuifuh!!>>!,q!pfjdooubMjjehbisustJ]m!cjj!!^\v<*!WjVg`!F)CqVpDj`oFuQMZjUh`iQuB/NfWoObFc)meffeo*j!g|f!eh!f%u%Q!p*jEoSuBMEjOhBiUuTJ)oegfpo)jqgpfjeo!u%M%j!h*iQuB-N!WhOfFp`nFfTuVs)ze-f!oejjgsffed!ugMjj$h\vi!u\v*g<j!e\vo$fj$g\v!!e<ffgdjoobfjee)bVsTsFJ`qTbINBuEiPhXjNmB!Q>*,!!%f%d!o)b]jJe^b!s=s!jO!V<Nz`uQjPtJoOfUu`oMJJqHbINUu`iThIjBmE!P+X!Tc*h\vs!/q*pmjfoyufMUjqhbiNuuTiihbjemp)xs!b>f!oqjpMjpoUuCMHjShti!u>T!ifbdeopbxjte]b!sjs!J^q<b!Neujishfjdmu!M4jdhfiwu!/<d*p3mwpVsw!!+->q!bbNmumi)hcjwmf)dE33)fesjvsufydfuuM!j>h!imuf/ywfjUtqjbcNmufi-h!jsmf!d5fdjfwwf!T\viQbBeNpUxI*H*J!M@`!FhTfVu!QgpfjeogujT$i\vb!e\vp*xf)tqvpgjgojuETuidbfespjxeNobJq`]F!Sj)!e^f-o!jqgpfjeo!ugMjj$h\vi!u\vTgijbeeopfx$/\vt!i<b*e1p/x1N)b4qdTfjw{!f>-!!fqdpojbojueMbjShuibupTdisbbefpmxd/!t4idbfewp!x<C*j1b/t1-)!4qdpfjwo!u>M!jfhdioubTjiebbesp!x4/dtfiwb!e\vp*xsSbbmevjdvftq-T!uwdQfpsjjoeuoTJi`bFeSp)xeDfpopjsgef]e!!jg!j^$-\v!!q\vpgjjoeuoMfj$h\vi!u~T!i<b*eupixh/jtMiebfeupdxfDmbgnffss!b-Omfbbjss-f!uqbpnj!o-uzMsjuhfinupTfihb!e-puxi/htjiMbuedpfxsDjben)fusdbfGsbjsE*`!F;S!!2\v/g1j<e!o\vf$$f\vo!e~j!g<\vf!vSmFb`WExjpsefbdiut)!e+j!szfudjutMojfhuiouJ-x!phefbpintf!u.s!z1-/!2n!b>u+f!ssjpbmmp-d!/sufighmjfMduudffesMjjeh!i~u!*<<o!s~v!u~f!s\v!$<VeOsSbPdMtMj`eM!P|P!Q*`1F/O1E!\v>!>\v!$ffvomebjWgx\vp!e\vb$ijtg!!%)%O!VmNm`vTDQxPpUe`bMiJtH)I!UgTj!!?<!*1e*s!p%p%D!xepfegbjiotf!e-)tSvFj`eEbjSsxfpdeub*i\vt!!T-qtpbujMCjxhpieub!ittq!p-ufM{jjhTixup<e!b\vi$tj!g-!qebfNgxjpoefbei)tV)TxFp`eTbIiBTEuPfXhN!B.Q!*1!/%2%!!>O!VfNv`mTbQWPxUp`eMbJiHtI!Uu`bTpImBgE!P|X!T*!f?w!j1f\vd!fTSqxppueMbjihti)u!Tgijb!e\vpQxB!NtXqPpEuBMIjTh`iFuTTVi!bgefpexg<j!$\v\v$!f<ofevjsgu\v!!>\v!$fVmOcSjPtMjMw`/MuPiPhQj`MTuUdBfSsUj\ve!!g<posp!j)ujdofus!jje!/>u!i1h<j!Mjf!s=f!iOqVtNj`nTfQiP!U>`!MoJpHjIuUdTf<s!jje!/,u,i*h!j|M!utdqfpsujMej!h<i<u*!m>b!ntsqppou/Mzjshuifuntp]f!hj!!-^u<i!hjjgM!f)stfqipqutMjjnhfiiu)/ffdoobbcjmefbes*s!J|u!ihhfjuMTfqspfuiMqjthjinufJIougfph)!t,q!psupMmjphDiuui-h!jhMfuponffjucsnzb-!!>e!jsspfmdpudM/juhiihuj*M<u!d\vf$sjjge!!e|f!g*jeoffmec)bVoTfF/`uTiIhBjEMPfXsNfBiQq*t!j%n%f!i))]!Jg^j!!=\v!*OuVdNf`sTjQEP`UF`SM)JeHfIoUj`gTfIeB!EgPjX$T\v*!\v\v!gtjqepoufM$j\vh!i<u*Tmibbnesppxo!/>z!stuqfpnupMfjhh!i-ufTcipbseQpuxith]j!mj)!f^d<o!bejjesbfsdsuJMfjchpisuQ/udiphmjpMsu!f+h>!!>b,m!mf)dcowbfjde3b)sesjjs!f<d*u1M/j1h)i4ud/fwwj!t>j!cfmdfo-b!jsefbdsfsjjw!f4Tdifbwe!p<x**1*/!1@)!4hdffuwT!i>b!efpdxo)btjqepbusTsiJbmecpjx!N4bdqf]w!!j\v!*^f-t!vtgqgpjuEMujdhfisujTeiobJe`pFxS/)teifboejpgxfNeb!qgTjj${\vf!-\v!gtjqepoufM$j\vh!i\vuETOiFb`eQpPxP/Mt`iMbMePpSxOCVj$b\vt!-~!!t~q!p<u*MujihhijuMTeifbuedpfxm/gtfisb!e-pmxbSjbsefjuvbtn-!!-wzTsqupfunTpifbhe!p-xuDiphpjsMeb]f!sjB!u^d*f!s;)!b2f/s1B<u!d\vf$Sf`ouedjfgs\vj!ES`FF`SE!j|s!f*deuf)mecjbsoffd/uuMijhhjiMub-f!shBfupdnffsu)s!zg-j!!n<b^ujf]stjubimh-j!MsbffgsmBfudduffse!M>j!huiiuh*j<M!b~f!s~B!u\vd$fVsO!S|P!M*M,`,MjP!P<QT`UFIOHEJ\vM!`\vB$FfSoBe`jUgD\vF!S\v`$NjVgO!!)=O!VjN!`<E1J!S>`!MjJ!HuIoUjT)!!?s!p1g*!!\v%U%S!BeUfTg`jQoPfPeM)`SMFM`PESjOsVf$d\vu!*<\vu!iEhjjsMfbdfusjBpuodbfmsM!juhiihuj!MebjfssfBduudjfpSo!b\vm*MbjfhsiBuu<d!f\vS$`jugd!fesfjgEj`oFfSe))eVfToFj`gTfIeB!E%P%X!N*B1Q!*?!!%T%U!IOHVJNM``EBJFSS`BM`JUHDIFUS``TNIVBOE)P!XgTj!$?\v!!1\v\vg!jEejosff$d\vu!j\vpEoObFm`MQjPhPiMu`TMiMbPeSpOxV!$e\vj!s~f!d~u!j<p*oubimhMjjMheifuuTdifbmegpfxs<!!-\vm$bfjosefjugb\vn!!\v-$zVsOuSfPnMpMf`hM!P-PuQi`hTjUMBuSdUf\vs!jgep)su!d)fjsojuE!`jF!S>!!\v1g<j!ejo!f=$!\vO!V<N1`/E2J!S;`!M*J^H!IjU!T]<e!sjp!p,D,x*p!e|b!ieTjmsbfodpujjupdofbsmjMEjwh!i-ut!v>j!eebjSsxfpdeubjipto/bxmpMejbhiiTuuti]h!jjM!m^b<o!pjjgu!d)fesjjsef!d-utjbpjoCbxmpMejbhiitu//xfpoebbcimTfuei*h!j|M!mhbfoupEjjusdffdsujjep!o-bfm{MjjThqibuNJxopgepb)ietj/sxfpdeubjipToubimhMjjMhmibuo-p!jhufdpfnsfjues!z--^!!ejj!s]fqdbuNMxjpheibui*T<m!b\vo$pjjgu!deffsgjjeo)fxep)eVbTiFT`uTfIhB!E@P!X*N*BxQp*e!b%i%T!f)w]jJf^d!f=s!!O-VfNm`cEjJtSj`wM/JuHiIhUj`MTuIdBfEsPjXeT)*3\vd!fewjcs)fmdmubj!p>o+b!msMpjmhpidu/TuiibhejpMxu!d>f!sejjes!f<d^u!jjp!o]btmxMpjehbiiuT",r6["lightsPBR.fs.head"]="~t!u<s*vodpuj!tQvimzdtdjPdubomfNjbcunfbs!j,b!m1!/|2!!w.f!d*4*!1e/j2g!g.v!ttftDfpomiphsv<p!sg!m+p!b1u/!7s2p!v.h)i3oqfytft!<-!owpfjdt4v!mtdqdfPduvomfbjscDnpbm!p,s!<W!Ogumppeb)ux!ptqq)ffduvbmsbvsuGb:t1!<o!s\vv$ujfgse!f|g!!*VtTtFf`oDiMhFvBpSsD!PuBbUp\vm!gg!mopjb!uu!tdompfdb!s-doppbjut<v!mgdmdpPbuuo!fdjmcfnbbs!dupbbpumSgp!vohji!oufttotp<d!!w-fWdO4u!pdem!fubbspdmpgb!uoGj1!<u!tgomppdb)uo!pdjmtfvbmsdddpPbsubGm:v1d<f!q\vT$ffuoveqjngp\vd!!\vu$bjpgmegf!g\v!mVbTdFj`tTzIiFQF`Os\vb!mwvfddf4q!TtuidfffsojDepomJp`sF<S!!gsmbpmbvud!ftqiTfufdofSspjvehoiJo`fFtSt!<f!o\vj$gffoee$j\vg!\v\v!m\vb$djjgtezfigQ!`JfPtSv\vg!ggjmEpubduf!sjjpeso<J!`\vF$Sf!ofetjvgg\vg!j\vE$ujdgfesfjge!oVJT`FF`SU!SfBoOjTgNfJeT$T\vJ!P\vOm\vb!dgjmtpzbiuQ!`ubsfbsoBtundjftSt`jupdof<s!jgEm`pFbSu!!bufssbBoutdnfjSt`tujdpfosBjmEq`iFbS<!!fgomjpgbfue!$u\vi!j\vdmlbodfjtttz<i!Qg`mupdbfus!jbEu`uFfSo!vubdufjspjoEE`jFtSu!bfoodjfg<f!ew$f\vd!4\v!gbjueuoffo$v\vb!u~j!p<o*Dtpemsppsp<D!u\vd$ffso!e-j*g1\v/!2~)<4!uwbfnd!4-!odpmjfubjstdppqb!u-TsqjfEdxvfmjbws!!->m!bwnfsdp4o))1f/u1b*v<m!bwwfFd`4D!UtMi!f+f!osTpqmfpdDvfmtbvsg!g>j!ew/fmdb4j)s1f/u1b*n<!!+g!msppbmup!DJuCiMhTjimf!f>o,C!SfEtGv)gdgpjoEtuud!fjsoj!ew/fudi4h!joMpesfnubdmf-m!gdfpso!t~u!!<j*ot!ewsfpdp4D!uwdjffsx!E-jwso-J!nd!p-ootpuj!ujjot!pgqm!p-bsuj!Esxpfvjhwi!o-fmtbtn*s!p|o!)gfmupbbvum!bewpFu`ODWU!M>!!+t!bmufvostbfusfg)!e+p!us)pomppsDnubimh-j!mw!j>f,x!Esjbsm*v*d<f!qgTmupdbfus!jse3/!u>i!hsjpMvehfiuodfftmtg!f+s!!s<p*vzh/i3ouf!t+t!<*!sgpmmppbDus!bbm!v>d!fsqptv/hmibojfstftu!b=n!!1./!3*61!/@2!).44d4f:w/)3!!,+!!ys/33!u,!!+2!7s2p/m5p!D+s!bsmpvvdhfiqotf/tmtb!j.s!f3u6b/n:)!!;>!!.m9f/o5t9f!s+g!!s43d!f,w!!2<5*/!4*!x+/!2sup!v-h1i!o-f{t/t2!u.)!4:d/f:w6!<-!*g1m!p-b2u!!-c1!!>)!4sdpfvwh!i-o*fzt/t2!u=!!-11/!3-6y!/@2!u5)54/d1f!w+!!)s43u!b.n!!3>4!/w8o!J+n!!s4puvbhni!o<f*twtv!!,-!34`/d3u7m!);E!32f/s:v8u!y+f!us!3>!!.3!u4!/53d8f!w+!!<s*pwvvh!i-o2f`tdtu!m,)!E13/f8s3v<u!ygfmup!b>u!!2EuH!!5>d!ffwy!q<)*bt!t+f!oeiphuvOpWs!/,m!bcj*s!f,u!b)ns!p-vshjiEoxfftjtw!!=-!m1b/n3s6p!o@)!w1V/`1D!U;M!!1>/!2w!v+!!3)dsfpwv!h|i!o*fstbtm!v.d!f1q/T3f6m*c*b<t!jsef/uuvishoj!MtbbfusvBsubduffs)aE)H!!g+j!!S<FuDiJhQjSfPIDgBmMb`iQ!J,*!<i!u~e!jwXfgdm3b!iE!G,H!BtqpqQsupiyh)jdmp!o>t!u^!!j4o!!]wtfeds4p!poDpusdnfbsm!-<!udiphojtfuI!gjmob!iw!f,d!4i!uwejjfXxgEmjbsi-!!.d!ptoptQuu!ijhoj!mg!m>p!b^u!!3s!p]vtheisopfptDtu*d!f|s!!g<mupibhuj!feIpgumObWi!!>.!!tibuuevjsXbgumfb)ie!p.u!)toppQsunibhmj-m!!w>j!f^x!E2j!s]*t*e<s!pdppDoutduf!sw!f<du5i!hdj1f!I>g!mwbfid!5.)!.i!u2e-j!X.g!m1b/i1!3,8!6t-p!Q.u!i1h/j6m8!3>-!!^1!/11!3]3t*e<s!pdppDoutduf!sw!f<d^5!!5d!2]!t>e!swpfpdD5u)d2f-s!!14/d1f5w3!6<-s!p2m/p1d5/-u!i.h!j1M/b1f5s*B<u!dwffsd!5>!!ss!p>m!psDpuvihhijomf!t4td!f+w!!d<1u!i,h!jdf2I<g!mgbmip/buui!hbj1M1b5f!s>B!undjfos)!s>/!yu!i+h!jsf/Iyg-m!bfiy!q43d)f.w!!:</i3u9e!j+X!gempbuiO/Wu*i*h!j+M!bsf/syB!u,d!fss/!z><!!iwufedj3X!ggmbbci!!>4!dwffwd!3<)o.p!j2u/j1t5p-q!/2u/i1h5j*M!b+f!sbB1u1d5f!s,!!>s!/t{pxQ<u!ishfjumv!s4od!fgwb!c<<o!p~j!uwjftdp4q!/Fzoswujfsnppofnhf!o>u!CoSpEjGu)jdtppoqt!u4!djfow!!w<fsdj4E!xofpjswn/bzms-u!fdnppofthu!!>j!os!jwEfxdf4j!ww!j4fdxfEwj!s<-m!bdnpsoptou/!zjsou!fwnfpdf4h!!t>q!fmdbvnmsbpsoD!p4mdpfsw-!!|d!p*outiuh!jjMoe!fgumdpfbmug!ftsq!fudivhmjbMseGf:u1d-f!mdgpfoSt!uu!vjpoo!jg!m-pmbbuj!ssfpuvbhni!omfbtjts*f!u|b!Nwmfbdd3j!tgzbicQ!!>o!jE!GuHtBoqpqds!p-yz)soupfsnnpbfmh-!!uwyjffuxoEpjDsd-j!ssupfvnhpifoHf!totj*!<u!tsofpudv!s-ou!ithqjfMdbvfmsbBsuDdpfmsp!su!i+h!jgMbbcf/syB!u,d!ftSq!fodjv!mubtsoGp:d1)!m+b!dgjbtcz/izQ<`!b~f!swBpujdef!Sd`pundqfvsujfEN`vFmSu!jetjdpbwu!u\vf1s!j?o!hT)UdIpHoJtMu`!BjFoS!Bw`fUdD4F!So`pNsVnOb!mg-j!$d\vp!o~t!u<!fjdoo!bwjfedb4s!swJjeffxuEijhsj-f!Xdfpoojttup!dj!o+!!wfftdv4g!gtjqef!d>v,m!bfstDvpgmgpjsE-u!ddfpsojteuo!jj/ou!ighmjpMbeuf!utdqffmdgvfmsb!s<Gf:d1o-b!jdepbostsuJ!ejfou!ighmjpfbXuf!osjptvphdi!o+f!thto-j!sjfoupuvbud!Twjfudm4v!nt!j>o,h!msfbTmdvbdufuqfTsu-d!fjsojpevouj!/wufidh4j!MnevfmuudjfTmdgbfusu!f<sh*o!j|s!fwufudb3d!Tgfbmch!o>j!tE!G+H!Bfqdqosbpjye)bosp!s>n,b!ms-b!mwvjdffxqETjusd-f!ssjpevohji/oufithtj*M<e!fwufddf4m!gGftst!F<t*t*!h>o!jtsqffuduvbmdbTsjDupmmvpns!!,+!!hgobjcs/fyu!u,b!dtTqffmdhvomjbts)G!:.1!!1+/!2g)b!c+/!zs<p!mgpmDpfbtuv!gFgtjte!/>m!bgjbscf/uyb!n,!!>g!bfct/vzg<g!jgem!p4bduf!wF!n<t*!h>o!j2s/f1u!u.b!dFTtjtu<m!vwnf!d-4h!oGjbswfhu!u>b!dtTqffmdhvomjbts!D-ptmtpfso!i,h!v)p2s//1m!b.j!stfqufbdnv!m-b1s:DGpsmbpmsv*d!f+q!t1//m1b5j8s7f2u:b<n!!w-fsdp4m!pGDnstb!m>v!dGftqttF/tmtb!j+s!fGubbwnh!!-0s!j)E2x/f1j!w./!zFsnutf!n+p!fGhb!w-hm*b<n!stpjoo/hzmsfuTfdnbpufuhf)sh!o,j>s!fGututbFdtttj<u!mnvvNmfuujvTqdnbpudu!f<sJ!Q,`>M!BGDnPtS!Q+J!DFFnSt!<+!!~f!dwopbjjee!bSsFs`jE!j>s!ffdduo`bQjiezbtsjsdJbemf)udiphojtfuX!fjooj!tJpodd!j4edffowu!M<j*h1i/u1!)e4jdsffwd!u>M!jhhoijus-f!udupbodtTuj!ujmov!nH!f4pdnffwu!s<j*d1D/p1o)u4fdyfuw!!h>f!phnofjussfzu-u!bddpToftmuh!ojjot!!Q4idzftwj!d\vbgmjNebouff$s\vj!b<m*!tntbfuofishjvbpmS-o!fjfoiptv/um!bSjfsgfmufbdnu!f-esMjjEhxifuj!ws/fzgsmuffdnupffehM!j-hmibun*s!p|o!/gzmspubfun!pefphu)OGME!S>C!otfbfuivTsMbCuJf!)+e!psup)mhpfDponfffuistz//mobpjssnfbumb-n!!e+j!sffddoubMjjehbisus/je!j>s,f!dsubjmpvod*f*q<T!owfffdi4t!!j\vsOsFbFeIjTb`oFdTfV!!>g!feepgujO$M\v!!+\v!gejjesoffd$u\vM!j<h*itut/fdopimhpvsp<S!u\vb$pjdgsebffgm!dV/TmFb`jDsMfFuBbSnD!P-B1U:\vG!ugbmppdbsub!fempdu/OmMbdjds!f>u!btnb!u-v1sGbuubfp)despbuf)mhdf/pmnbfjussfzu/bdnm!f-bssjdEpxbfujOwp/sznsbumf-n!pefjhs!f-dmubMnjshpiOuu/bepjdssfbdfumjdp/oz*s*u<f!nwpffdh4)!GdEdSJCsusobfenjobposdjfw!o>F!!e+p!ufOdModbdj!e+b!SeujbspfddsubMfjmhdi!u>/,d!psmbpmsv<d!fdqmTfubbspddpsbbufTmqdf!d\vvUmBbPsD!S,B>F!MdDd`JFsTsVb!egjfbeogdjf$!\v+!!|C!S*EuGi`hHjHMYe)feujdsffmdgufMsj!huiiuh/jeMjesffuddufjmpgof-S!!hufvppnofju!s-zm/bwjjsffxuEbjns!-m!bhjfspfnufbuNsmzb/ddjmtfzbisQd!pobju!Ouptsonpbdm!--!znsbuuffnspjfbhm!/udymffubospdDpdbjusGu1f-n!pnfbHu!fosjj!bumt/odpmdf!b-sfddpobbujGe:b1S-u!bnpbdusfbsfjmbdm!/4ddmffwb!sodjp!buutSoppvdh!i-offdtotb*j<e!b\vs$sfjo!e4jdgf\vw!!\vo$jj!guetfogp!dV!T-Ff`dToIbFjFeOb\vs!!t4idfffwo!Toqjf!duvtmobpsd!),m>b!djjstszbieQj`bsobdmfv!d+f!qCTSuEdGf`sTjiefofJo`)FeSj!sefjdpuwM!j~h!i<u*/sepjmspfDdfutjvpgog-j!eh/fmpbnjfsufsuzb/nw)jufsxfEcjnsb-M!`hGfEpSnCf!u+s!zf/doopbsjnebbms-s!jn!b>u,f!sfjtbvmg/gtjiEfufdofDspjmeposj-/!unibhujfMsejfbumd/ftmigfffso!S|p!v*huiiohfjtMte*f<u!d\vf$mfgofesj!gu\vi!hsjfMgemffudduffmegMfjSh!iuuv/peojjs!f-dmubTjqsffduvbmnb!sm!b,j>s!fjusbsNbmebjdbjotdzfi!Q+!!oCjS!EuGt`oHpHdY!)-ezjssuffdnupMfjhh!iuuy/feujospfDddujjspuof-n!phffHp!nofju!suzt/owpjdf!x-Efjdso-b!jhefbpsnsfju!s4zd/fowp!sonjb!mu-t!onpbdu)fmsbjdbjmt/ztiqQf`dfvtmvbgsgDjpEmupdsf-s!jnebouJf`sFjSb!me/jtpqwf!d~v!m<b*ssGp:m1p-D!fntbvugfgsjjeb/mm/bsjpsvfhuibonf)tuts*f<c!nsbfMg`mGfEdSuCf!e+M!jfhdioub/jeejbssfsdju!E>j,g!gfvt",r6["lightsPBR.fs.body"]="gQjiezotfj$d\vb!m\vNgbjuefosfj$b\vm!!<nbb/u*fwsVjwb!m-<q!bnNbtutffsojibhmv/peSjogfgfvittf)DEp3mfpssv!u>y!feuj!g>g+v!ttftDfpomiphsv/psShocf!f+i!t)/2m/b1j!s.f!unbfnu!b\vmQoBfNtTtTGFbOdIuHpVsP*S<O!FwFfIdT4`!FeTyVz!!g>f!engbjy$)\vb!c<t*)1e/G2e!y-)8h1f/p1n!f-utstzfOopishnvbpmS*o*f-f!ibtc)tq)nebGmedz!)>h!ftptnffouishzvOppSsonfbfmi*t*/*m<b!jgsmfpubbun!!h\vfgpjnefoufs$z\vS!p<vchhiso/f*t*tw!V>w!!n-bqyb)Nnsbpym)peDyozf/fyi-t!)eEy3zf/szv*u-y!feuy)zs/b{f*o<j!MnpbUumffsyjfbUmq/bsNpsvphmipoDfotftf!i>t!!n>b+y!)ssppmvphDiooffftittG/bmdbujpssf-u!b1n/!1\v6Q3B6N*S<P!MnPbDuOfFsFjIbTm`/FsTpVv!hgifoefgtjt$!\v,!><!shpfmppnDfoufsfziStp!v>h!isopfmtptD<o!fnfbiutf/smjbbjms/fsupbvnh!i\voOfFtFtI!T>`!FnTjVo!)gnfbeugfjs$j\vb!m\v/gsjpevohfi$o\vf!t<t*-1!/22/!1-*t<t!fnobiuhfvspjSbumb/ptdqsfbdfvmmdb/smDbpjmspfsu!b>n!)nojjyn)!w>f!dt4t)f1o/i1h5v*p-S!uebjpgdgsvbtffmDdp/mmpbsj/ssfhucb-n!!n<ftutbfmooifhtvtpGSbzdsuupfsn*p<f!hn!b>u,f!stjtbfmo/ithqvfpdSvumbbpsdGs:b1f!m>d!/2m/b1j<s!f\vu$bjng!e<f*g6!3J6P1S/\v1!!n-btutffsojibhmv/pjSpusb!p>d!sjbpfsm<d!/\vm$bjjgseffugb!nT)QyFbDnV!M>B!St\vt!fgomiphbvup!StuqbfpddvsmbbfsmJdo/umfbojtsjfuuzbGnb!d<u*pusb!p>d!stbqffmddv/mmbbsjJsofuufbont)jfuuzb<s!vwufbdt4!!>t!qufbdpvdmsbbsfDmpdm/pmsbGjbsdfuupbsn!!>\v!gtjqefodfv$m\vb!s<Dzp/m*pwsV<w!!n-bqubfNstjtbfmo/ithqvfpdSvumbbpsdGs:b1f!m>d!)nEj3yf)stvqufydfvum!b>s+J!otutffootijhuvzpGSbudbuppdss-b!f2m/d1/-m!bnjfsufbumbonf!t\vtQGBbNdTuTpFsO*I<H!V\vP$Sf`mUtBfP\vD!SgBmFpMbDu`!FtTqVf!dgvfmebgsjJ$o\vu!f\vogtjjeuozfG$b\vd!u<pys/!*>w!V2w/!1-<q!bwNfudb4p!dtsqbffdmvdm)bEs3DfpsmvpusyGfbud!u>p+s!!u>b!pwdfsdb4f)m2d//1m*b<j!snfbuubfns!j\vbQmB/NtUqBfPdDvSmBbFsMGD:`1F!T>V!!2g/f1e<g!j\v$$\vf!o<e1j/g2\v!!>n!b1u:fGsujbbpmd/stbqffmddv/mmbbsjDspfmupbsn!!><!*n5j1y/)1n)j4od)fqwp!x>3!)1)Gnubbupfdssjbbfmm/dj/pmsb!j.s!f2u/b1n*!!<0t!t)fnobiuhfvspjSbumb/pjdpssb!f,m!d2!/>1!*t*t!f+o!ithqvfpdSvumbbpsdDspbmfpmsdG/bmdbujpssf-u!bwnf!d<4u)b2p/d1s*b*f!m+d!!t>q!fudbvpmdbssbJfomudf/omtbjjuszfGubbdnu!p\vsU-B!PeDjSgBgFvMtDf`DFpTmVp!sg/fsehgcj-$!\vn!f\vugbjmeoofft$t\vG!b<d1u/p2s!*><!!1\v:$Gfsmbtmfv\vd!fnqbtu/fmsbjjbsmf/utbqnf!d<v*msbpsuDdpbmGptst!f>o!mnbjuyf)nw!f-dc4h)s1//s1p5m*p-D!fetjvgg",r6["toneMapping.fs.head"]="g$jjego!fa$e\vf!g~j!o<f*es)pVmTpFd`)VfCuPb*s!v%u%b!t)!eofsgvjuoffse!)<VstpfmMpjdo!f+b!suUbpNoufvNqbuqvqPjToFhD*B!!}>}!!sepfmgpjdo!f<e*)sVptmfpSdf)juojiGbUsEePUepooBfUNSbSq!q>j!oshp*m!p}d}!!<esfpgmjpodf!e+)!VutbfNDujvoqfopJoTUFpDoBf!N>b!qsqpjmophd*!!<}7}/!1e!f0g!jfosfvet)pVqtyfFBhDoFjTqGqjbmNnfjodpUup!o>f+N!bsqpqmjpodh!*<**\v!!*v3o1j7g8p1s/n2!!g-m6p1b7u1!1u/p1o.f!N-b8q7q4j8o1h/F1y.q)p4tdvfswf!<-!*\v7$8f3o8e1j/g1\v.!!\v-$4j2g9!1e2f/g2j!o-f9e1)2V4t6f/M1j.o)f4bdsfUwp!o-f*N8b3q4q1j1o/h1*.\v!!-w9f1d341!2M/j1o.f!b-s6U8p5o1f7N/b2q)q4jdofhw)!w)f4du4b!nd!p>m!pusb*N!u|v!qsufvuPvTsFoD!Bu!p4oufbNnb!quqtjoophdF!y<q*p!t*v8s8f8!4+9!/d1p!m-p7s7<6!2~1!/\v1$!f-o4e3j9g5\v1!/\v1$)j4gd!fewf!g-j*o4f9e4)4V2t/f1S!f-j5o4i9b1s:e/U1p!o-f9N6b5q6q4j/o1h)*4\vd!fwwf!d-4*!1S5f9j3o1i/b1s!e-U1p1o7f8N1b/q1q!j-o:h2)8w:f6d/41!)d4pdmfpws!*)!4|u!bdnp!m>p!su!b+N>u!vuqpooJfTNFbDqBq!j4ouhbFny!qupttovpsdf!<|!!s*fsupvmspod!!t4bdufvws)bhuofj)qdqpbmNpfso!p0U!d)jwnfmdj4G)T2F/D1B*!!4,d!fdwp!m~p!s<*c*!<0!!~b!!\vo$sfvouefjsg!\v<!2\v9$1j9g4!3e/f1g!j,o!f*e1)2V6t:f3D4j5o/f1p!o,U!pwo!f+N!b:q3q8j4o9h:*/\v1!)w!f+d!4w!!P>q!ucj!n4jd{ffwe!D<j8o4f6p1o:U1p1o1f1N/b1q!q.j!o*h7)9w8f6d543!1d/p1m!p,s!*w!)|!!+d!pwm!p>s!!b+!>4!dufpwo!f|N!b*qwq!j4odhfFwy)qupjtGvUsEfP<e!odBpUmSpSs!!4>d!fnwb!y\v)*whfodj4q)q1b/N1f*o-p!Uddpjmnpmsj!G.T!F1D/B1f1t5V*)<e!fsofjugvfseo!!gqjp$x\v)!)\vdgpjmeposf!$+\v!!)~7!/<3*!*+3!/d3p)m4pdsf!w,!!-1*/761*/*1!!0,!!)*d8p/m2p!s,!!+s!p)m7p/d3!!+",r6["toneMapping.fs.body"]="g$jjego!fe$f\vg!j<o*fceh)sV/tefJM)jhoofjbqsqUbpNoffoNpbUqdqjjnomhj*G\vT!FJDeB/!s>h!cc!h>s!/MejJo!f\vb*shUopjoqfqNbbNqfqojpoUhd)jJnem/jsGhTcF*D<B!f\vt$Vf)mejfgo!jegffgej!ogfjem)fV$t\vf!S<f*jcohisb/seeJU)phoofjNqbqqbqNjfoohp*U\vo!pJfeo/jsDhecf!{>j!nSjfujqoPi!b>s!ecUhpso/feNJb!q\vq*jhoohj)qJqeb/Nsfhocp*U<o!p\vf$ofjmDjfgt!Ve)fegfjo",r6["output.fs.body"]="g$jjegoeff$g\v!!V\vTgFj`eUoSfB$O\vT!N<J*TbT/JsPpOm\vp!D\vf$tjvggegfjge!!P-QuBiRhVjFM\vh!owjfpdh5u!vJpe)!5>d!fwwf!d>5!)epJv!u5hdpfjwo!h\vMfjthmifu$-\v!!n<b*u1f/s2j!b-mu/iuhsjbMohtonjjpthtujvppo)B5mdqfiwb!!>,!!e1J/!25*d<f!w\v!$\vfFmVtRfB\vQ!Pw!fgdf5e!gJje$!\v>!!\vwfftdm5f)$p\vv!u\vhgpjjeoohfM$j\vh!i<u*-*!2e/j1g!g,v!tbfiDqpmmBposp/jbt!t+j!n)tnobbusfus/jmb",r6["instancing.vs.head"]="g$jjegoeff$g\v!!V~T!F<`*J{OzTyU/B*O*D1J/O1H!\v-!sbjueu)s5jdcfvwu!f+!!nybjus5u!bbnN)b)ufs{jjymJbontsupboo!dofsev<u!fwsf!d|4!!*uysjbsoutbgnp!s5nuEbjns!fodju!j-psoj)ej!o4!dwf",r6["envmapPhong.fs.body"]="g$jjegoeff$g\v!!V\vTgFj`eFoOfW$N\vB!Q<\vz!uwjftdo4f!udobJnqfbsNbwUopfG!s+b!hi!u>h!oofpssunTbsmbjm{vfd)fwqXtp!s+m!e{Qzpyt/jsupjmppoD!w.o!fv!D>b,n!fusibhQjpMthjoujjpphou*v<p!!w\vf*dE4E!Bx`pHsOmJeEOOpFsMnCb`mQ!B>N!WjOoFw)fesftofjUgsfbeo!tggjpmsfn$E\vj!s<f*dzuujjptoo)fouposJnqbbmN-w!ovfW!j+f!xiNubhuosfjsyu*T<s!b\vm$vjdgfeqftg!!-F{OzWyN/BsQp`mNpPDEwFo`fS!F-GuMiFhDjUMJhPoOj\vp!hwufvdp4)!ysjfng!m>f!duuiWhfjdM!h>o!jspfhgumvfpd!u\v)*dYbJnNf`sHbOUJpEGOsFbMhC-`!QxBpNsWmOeFO)pesfnobjmg*f<e!!\vg$jfmmft$f\v\v!!<w*fzdu4j!tsoffgumofJdqubWNfwdo!f>!!+s!figushbodfus)udTbsnbfmsvbdUfpqGts!b-h{-z!yx/psspmmepODpwsonfb!m+-!!usifhgjsMbhdoujjpphouSvbpu!j-pu*i<h!j\vM$hfoojepjhgu\vv!p\v)$yjjgne!f>g!!uFiOhWjNMBhQo`jUpZhQuFv`pD!V\vCZFM\vQ!JwUfMdV5N!`fHoOwJDEpOmFpMsC!`>Q!BuNfWyOuFv!sgffDevgcjf$)\vf!o\vwgnjbeqo-f!$w\vf!d<4*)1g/m1j)q5FdofwwN!b>q!!s+p!mspfDgwmoffd!u5Wdffdw/!y\v-f!tsmffg$m\vf!d<u*W1f/d1/!z-{d*f*W<u!d\vf$mfgmfjsg!!-eqfbgnjwooffe))WFVOfWcNvBDQf`sUvZuQyFf`uD!V>C!Fs`pVmWp*D\vw!owff!d5",r6["lightsPhong.fs.head"]="htoupsivQdouo!jCmmCj`ofotQvigpgojhENubduffssjjebomJ!`|F!Sw!ffdt4v!gegjjgEguvdtffsDjpemopJs`<F!Sw!ffdo4j!gtfqef$d\vv!m\vbhsoDppimQposo<j!mgCm`pubduf!stjqEf`dFvSm!busdTfisjjoEj`oFfSt!tf<o!jggmfpeb$u\v!!t~q!f<d*vsmpbmspTDufstfvoghgujie</!m~b<j!swfpujben!)SuFs`fEcjnsbfMd`uG`ECSmCj!o+o!Qfidpoobhj)edbpsostju!!>j,o!!fJtovdgjgejfEouudMfjshjieuo!je/jusifhdjuMMejfhuiduf-m!gdfpso!t|u!!*juoi!hHjfMpenffuudsfjmdgDfpso!uufiyhuj!Mheffpundffumsgzf-S!!dupvoptouj!!j-om!bCjmsjfouobQni!pmobhjNsbfuufbsNjhbomp!inQbouofjsmjCb!mo-j!!juotpovpud!!S-fzgsmuffdnupffehM!juhyifuu!ospfDgdmjfsduuffnepMfjHh!iouj*!!u|t!ogpmdp!b-uf!deopbujOeMb!s>s!jt!b4udvfswb!uofj)!euptuo)phdf)phnofpuisQzo/oojpmsCn`bfmt-v!gegjjsEfuddufMsjjheiouJ/`eFjSs!fedjupjwp!o~*!*<<i!uwhfodf4s!ujTsssbbmevjdbfoqdtf/!m>b!jespfuuObMn!!++!!e*jtstffdoujMojjhiiTus/bdmpvmdpfsq<t!/smfbgjmsffduubfne!M-jshpimup/DesjbsmfvddufEqjtg/gmvbtjfs!f,u>b!nj!s-smbbenjsbpood/fz!s+u!fCnSpEfGh`!M-bsnjcEfxsfuj)wn/bzusfusfjnbpmf/he!j-gogpvjtufdDfpsmjpes/*u<i!hsjfMgumdffdsujfee)MhjohpiiuQ/oeojjsmfCd`uGTEqSfCd!v+m!bfsd!o,b>j!ejbss",r6["lightsPhong.fs.body"]="<CimujhooofQsiupToshbNmbvudffsqjtb!m>!!nibuuhfosfjsbumT<s!bnmbvudffsqjtb/mm/bejjsgfguvbtnf!D<ptmtpfso!j>o!jeijtg!g>v!ttftDfpomjposj/isThscb<m!vndbfuqfts/jmbbmj/stfqufbdnv!m<bssbDmpvmdpfsq!t>!",r6["aoMap.fs.body"]="g$jjegoeff$g\v!!V\vTgFj`eBoPfN$B\vQ!\v<!*\vt$tjfgo!iehfvgpjso/fmeb)jBsPfNuBbQn`!S-`o2p*j\vt!vgmmdpdbPuu!obfnjccjnfbo!u-PWdOdumpvet)joppoj!t>v!m)dudfPysubvmsvfd3fEq)TbfpuNvbqqn-p!dw!V>w+*!/ssb!m.v!d2f/q1T*u!d+f!sbjpeNobjq/JuoiuhfjoMtejfuuzd!f,m!g2f/s1!<<!*\v*$sfjmEjxgf!jewf/gzjsouffen)pBfPhN!B-Qm`bSn`s3p*o\v/!zgsmupfbnup!fbhn)cujpfeo)ufPudbdsmvvutbjtp!o>!!>W!O)uupfey!uuvbspfm3gE!)\vb*pSNCbQq)-e!fwoVjwg3f*e/!s%!%.!!*2Q/B1N*W!O+F!`bFpTNVb)qeJfooujfgoftej!ugzj!$,\v!!2</o1p<j!t\vv$mfdmdjPgu!oeffjgcjnobf!e>)+B!PfNtBvQg`gHj`E2u*d\vf!sgjmepobju/!ubinhcjjMfeofuuPddfdmmgvftsj!p\vog!j>e!o)fu$f\vy!u<v1s/f23!E,)!bzpuNjbtqo-f!uwoVJwq*b/Nhp!b.!!+2!/*11*/!2+!!.b!pcN/b*q3JwoVuwf!o-tqjbuNzp!b,)!E23/f1s<v!u\vy$ffum)j!g>!!eofpgjjtovfmed)dBPPuNoBfQj`cHn`b3!*u\vb!pgmmgp!b\vu*!3b`nCc`jQfBoNuPPBd)demfvotjjgpfoe!!>g!j)muff$y\vu!v<s1f/32E!),b!pzNubjqt-o!fwuVowJ3q*b/Nhp!b.!!+2!/*11*/!2+!!.b!pcN/b*qwJVowu!f-oqtbjNupzb!),E!32f/s1v<u!y\vf$uf)m!j>g!!oepfjgtjvomfded)PBuPoNfBjQc`nCb`!2u*b\vp!mg",r6["transmission.fs.head"]="g$jjegoeff$g\v!!V~T!F<`*UbS/BuOiThNjJMTeTfJuPuOj\vn!tvoobjsgup!s-ns!pgmmppDbfut!vbgugujfeo!v+b!usjppmopEDjetfuubbovdoff<u!uvbo!j+g!p*sGn!!.w!f1d/42!)b)u5udffowv!bousjvpuofDsp!m<p*st<t!f\vo$ijhgvepfsg!!-V1T:FG`sUbSmBvOdTfNqJtT!T-JsPpOmNpBDQs\vb!mvvodjfgqpts!n-!wt!b-noq)mGfEsS3CEu!oufsnbooptsnjjwtotFj!p>o!NGb!q4<d!f\vw$!f<o*efjdgo\vb!u\vt$jjEgoepfjgu!bVvToFf`uUuIbJ!D-LsOpFmTpTDNoBpQj\vu!bvvoojfgupusbn!!-t*bznbqSmofpsj3tEt!junitjodblsouf)tituNhboqf<m!!\v-$cfhose/jugi\vh!jvMoejfgupusjnn!twofbds3u!)uospbjoutbnvjotftujupBofTnbvnmqpmWfzsmTqjq{bf!<>!!vsopjmgppDsenf!utbbvnoqfmufusb3!E4!dufswb!o<t*nsjptjt!j-ptotTfboniqhmvfpssN!b-qt<e!svpopjDgoppsjnu!dnbbsug5f!sv)NfpmeqfnmbNTboupsjjtyt<j!n\vt$ojbgsoUeuffgh!!V>T!Fu`iVhCjPM\ve!f\vu$ujjgnetfogb!sJuP!S5\vd!fvwo!j<g1p/s3n!!>g0m!ptbeus!pjppDso<p!j\vu$dfbosegjfgs\v!!<\v1$/j2g!e>f,g!!tTeQsFpDpVDMoBpSj\vu!dvbosjggfpss!n<!xg/mtppbQud!etoq!f0d!vzmyb/stJpoQudfeoot!j>u!zt<e!svpopjDgoppsjnu!dwbfsdg4f!st!q3fddfvwm!b<s*D1p/m2p!s-<u!j\vy$FfzobeSjegf\vu!dvbosjggfpss)n5!dgfmwp!b+u!!yujssbuobtNnxjftjtwj!p+o!<y!jvsoujbgNpkspns!qg!m>p!btup!Qudiejod!l5odfftwt!<<!zvboSjogppjstnt!jnnbtuo5b!svuQ!s,p!kofpdjuuNjbtupsqj!y><!!uvjoyjFgzpbsSne!fwufddb4s!gvfDsb!n4fdsfbwQ!p<t*jyujjspuob<N!m\vf$efpone!j-gs\vp!jw!f-dt4t!fhofludWjpimuv!n-fwU!s-boo)tznbjStotpjjptotSjbnzt)odbpsoUtfun!vjmop!Wwuffdh4!!>o!-z!bdSpooptjut!tjjon!twofbds4u!!w4-d!fdwp!o|t!u*!fjdoo!bgumtpjbEuo!pujiujbdvlooffututb-!!udbppomtgu!!ojjo!!ugtmoppbdu!!-jsppsm-p!Ddoppojtuub!vjoof!unubbu!54!dnfpwe!fomjN!buutsojpyd*!!-|t!twffodl4d!jsifug!subbdpumjgp!ooWjf!duutposp!d>!!-ssfpgjs!budbup)m.g!!wo-j!!ouptsonpbdm!j-{yfj)sou*b-N!k2p/s1q!!05!ujbpns!*o<j!!wuftdo4p!dn!p-eyfjmsTudbbNmxff<j!wn!p5eufbmnT!dobjm!fu/tyo!p>d!!m-fyojhsuuib)Nwmffde4p)nn!p5eufbmnN!boujs!juyt]o!p1d!!^-/oypzj{u*j*t<p!qn!p4edffmwT!dobjm!fu/tzo!p>d!!m-f1o:hGusib)mwvfddf4q)tn!puebfpmmNgb!uosjj!yu]t!o2p!d^!/-yszp{m*p*D<s!bnmpvedffmqTtd!b4mdff/w{!!o>j!!muftoohpudi!)-wsfpdm4p)DnfptevfgmgNjbeu!s4jdyf]w!!3o!j^!/uytzo{p*d*!<-!tstffuovishov!posp!sunbbpmmjg{!fo)js!fugtsobpddu!j-pwo!W4fddfuwp!so*j!!+u!tuoipjdd!l-oof!t4td!f+w!!nopje!fumtTodpbdm)fo<p!j~u!dgbmspgbfuS!fbnqvqmmpzWJMpCsJUupfShp!v5hdifowf!t~t!)~d!p<oftduo!bjjoe!bgsm!p+b!uf!dsopbvuhuijonfttotb-s!ud!poostvuu!fjso!!<g*mfpdboub!ujtpjsE*o!p|j!tstfjunvtsoob!ssup!v+h!iuoofftjtd!j+g!gdfmpbDnoqp)jjupbsv!o+f!u3u/b1!!..)!q3y/f1!->!!1f/d1o-b!u2u/j1n*t<o!b~s!uw!f4dd5f!wh!f<ufUdsobbouttnjjEtotpjjpuobTvbonfqumufb)!d0p!o*tsup!mjpoD!owpfjdu3b!vgosfbuhuDbp)phspem-.!!d>p!outouf!jjdoj!gggmfppbDuo!psjpuvbhviooffututb-!!4ddpfowt!u|!!jfot!mgfm!p~b!u<!fjdposb*j!e|b!sg!mopsbvuu!fgss!b|n!f*c1v/g1g!f>s>M!pfed!o>b!umtpjhE3o)pujsubbovtonfjututbj)p!ogTjb!n|q!m*ffsdTojb{uft/jyE*o!p+j!ubbqvqomfzuJupbs!UupbSppmvgh!ioojf!tutt)osppdv!h-isopfmtptD-o!pjjpusb*v<o!f\vu$ujbg!e4fdgf!wu!foyju!vustfo3pEdM!p-efFdYoUb\vu!tsjfEuovpsjot!ttjSnHtCoUbpsMuj!oufbbpsm)gu!foyju!vustfo3pEdM!p-efFdYoUb)juesbbso!t4ndjftwt!jopjo!Tubtnoqpmdf)soNpbjqu-b!vgosfbuhuDBpfpnsvem/pyWzz-m!qgqsbb!n4fdcfvwg!g~f!s\vMgpjee*o*f<$!\v\v!$<f*m*tefp\vM!ssffgugvvscof!ntbSsHgC!U-pzMyj/oefsbpsp)Duhfbysugv!s-fq3bEN)sufsmbqontbnTjotptj",r6["transmission.fs.body"]="g$jjegoeff$g\v!!V<T*Fo`pUjStBtOjTnNtJoTbTsJuP/Om\vb!jnsbfuufbsnj!b-mc/huss/booptjntjttjtnjtpoob!s>u!!u-sfbtovtgngjjtEtmjbpuop<u!)nybjunf!s>j!bfmt/vugsgbjoEtmnbjutptuj!p<o*Bompqjitbt!j>n!t2o/b1s<u!/nmbbujfssfjubbmn/!u-ibj/dolpojfttttj!n>t!oubisjud!l-obfitqtm<B!onpbjutftsjjnbtmo/bbsuuu/fmobvjbsufjupbonE)jytjunb!o>d!fb!i>q!mbBuoupfjotvtbjunjtpoobEsjut/umbbojdsff<u!bnnb!u<f*sfjdbomb/ubtujuEfoopvjbuubjvpoofDupumbp/sm!b>j!sbfuuubfno!v-bsupjmppoDDoppmjpusb<v!o\vf$ujugbe/fmgb!jVsTfFu`bUnS!B-OtTtNfJoTlTdJjPiOuN/BmQb\vj!snfbuubfns!j-bsmp/ju/smbbojtsnfjutbtnj!p-oy!j+s>u!buNfuydufvkspfs3QEv)!u-s!byojtsnujbtNtxjfpjoWNvb!q--y!jwsVuwb*N/msf<e!p\vN$vf!o-etjpgq\v!!-\v1$:jGgsebfmgv!dVfTqFt`/UmIbJjDsLfOuFbTnT!N-BsQp\vm!pnDbsubfmsvjdbfmq/tu/imjbdjlsoffutbtn!!+->s!pumfpyDufvtsvfg3gEj)eu/imjbdjlsoffutbtnN!b-qt-t!fwoViwh*v/phs</!m\vb$jfsofeujbgn\v!!-wwf!d-4o!!q)potp!j>u!dwbXspgsfmSefQnpvtmjpuWjMpCoJ<u!fwhf!d>4!!owp!j>t!tojpnstnobbmsju{!f5)dvfDwb!n<f*sybjQsputbjNuxjfpjoW!v.!!-qmpbtn*s<p!ow)fodp4j!uod!f>s!jjEonwsfpsgttfoUbs",r6["oit.fs.head"]="g$jjegoeff$g\v!!P<JsUf\vm!q\vn$beTfsgpjmopfD!uNoBpYs`GEuFjQpU!IE!3:s:f:m:q:n/b1t\v!!n\vs$pegfjgojvo!f<!shfmm`qGnsbbThiDupqmfpEsu!jnpz!`EG3ssbfhmDqpnmbpts!\vn!svpogj",r6["oit.fs.body"]="g$jjegoeff$g\v!!P~J!U<\ve!Jg!m>p,b!us!pgmspbDhlEdfbqcu!i|!!>f!thmmf`!G~s!b<h*Dbp/pesJe!/.{!<1!/\v2$)j!g+e!fsgf!jPmJqUj`u2m7vCNJbUiTq\vm!bv!j.o!u1!/i2b!m>g!Gbm/psbpum!p>D!uqobpdslgI!b<msgf3jym2q7j)uwmfvdN3b)igqsmbbh!E+f!qbu/ie*J*!<+!!wcfhds3/!egJv!m>m,!!>c!hvso/qsbpdmlpIDbumogp3syg2!7|)!i*bimugqGfmEpubtuf*s<b!fgos!b>h>E!fiquuqif!E>h!bgsvgm)m!/gyj<!!~\v!$<foosevjugf\vs!!j<w*fidu3q!fgEshbbhsDgp!p-sieu!q>f!Ejhwbfsdg3.))h3md`fGws!b>h!Dhpsp/sieu/qyfze*!<\v!gwjfedo3f!$m\vb!t|u!E*fiquuqif!E>u!tuffiyufsmvGgf!u=d!ii)upqjfuEEhfbqsugi!T%b%n!qimufqsf-E!ugtsfbshbDfpop!s?e!-i!u1q*f/Eshhb<s!gw)f!dg5j!!m\vbfttumGfs$p\vo!u|D!p*mipusq!f>E!uutffyifumsGvfgu!d?i!)ipujqufGEshpbosugD!p%m%p!siTubqnfqEmuftsf-s!bgfsob!h=D!pipusqef-E!h1b*s<g!)e!fgqju!i\v/SsFhG!G>V!CwIfUdQ3F)E.`NFBTYS`FEWFFQSU`IF*T<V!!ggsfpeogujD$p\vm!p~s!!<>o!smvbutfusG!s\vpgojueDopfm$p\vs!<|!!c*bidulqDfpEmuptsf!i>u!swvfgd!5?)!1i/u1q*f<E!h\vb$sjgg!e}f}g!!iVuTqFf`ESuFtWfFsSbTfFo`!E=F!QiUuIqCfVEGhGbFsSg\v)!!ggmjp!b\vuf!tgmvfs$u\vi!f|t!u*EifuqqufiE!u>t!f.imubstvugE!f=q!uiiu/qyf<E!hgbmspgb!u}!}o!fibusqfftEuuEtffqsubif!o>!!?m!bituuqEffEqhubis/gz)<!!g\vj$!f\vmStFfG\vG!VgCmIpUbQuF!Eo`fFbTsSfFtWuFESf`qFuTiV!!>g!f.emgbjt$u\vE!f<qbu/is/pym<p!DgumoppbsuG!ugtvbsmu!i.f!t1u/E2f!q>u!is!f>j!mmqbjtuumEvfNqbuiiq/mzb<!!u\vb$pfmoge!j\vg",r6.blitScreenVS="~b!u<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<t!pwqb)s3zdjfowh!!>w!fwdV3w!!w<V*w1</!2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/",r6.encoding="~w!f<d*5s!pMmjpodf)bssbUfpoMjjMopfUbmsf)yjfoU!uwvfqdo5j!!wobsmvvuff*s!!||!!s*fsupvmspod!!w5bdmfvwf)<s!b~f!owjfMdp5U!mnfbyqfUUfqybfNmwUopfM!j5odffbws!)~w!f<d*5f!vwmbbmwv)fC*H!S|t!psUfsubvfsooj!MM!joosfvbusfUsp!M|j!o*ffbvsm)bwwb!m5vdff*w<)!m~f!ywffUdu5v!qtuSvHPCpUUpsMbjfoofjbms!)5jdof!ww!f~d!5<!*wfbvmmvbfw*)!s|b!fsofjuMvpsUoC!HwSftd!5o)snvjuyf)sq!p|x!)*wfbvmmvbfw/!s5hdcf!w+)!s1b/f:o5j8M9p7U8m3f:y9f7U!u,v!qwofjd!45)d1f/w1!6~3!2<4*3b8/1f2v5m*b-w!!w-f*d*4*)*39/154*2*4-1!1w/b1m)v4fd/fswh!c-!c+h!s1//f1v8m8b4w:):m4b9v1r9F-o!bwifUdt4t)fmmf)t4tdUfiwb!o-F3r:v/b3m2)!w+b!mcvhfs//sfhvcm-b!ww!f-d*46)611//115)145d6f*w*!*.*!-6!6w1b/m2v!f+/!b***<7!7~7!2w5f/d15)!4Mdjfowf!b-scUhpst/SfHvCm)bjwo)!xwpfqd)5y!jwnb)m5vdff*w!!|o!ssvfu",r6.cubeEnvReflectionFS="g$jjegoeff$g\v!!F~O!W~N!B<Q*`1U/Z2Q!F-`*DGVqCjFn`!V-W2\vs!p\vm$pedf!g-j1osfp!mdpvdc)fyVjWn`)n5bdyfNwj!qoMsfvwuffms!!9</*11\v/!2\v!$,e!fugojJoqfj!nd!v-csfjVEWf`mnqjnobNtj!q-MqfbwNfwmo!f5)/W1V\vf!c\vv$Desfbgfjoojfm!jdcv!c>f!V2Ws`pnmbpydU!j4mdffTwj!{|f!!f3t6m7f/!1~\v!!<\v*$1e/f2g!j-o1fs!pdmvpcdf)V5Wd`fnwj!ooUsjvmuffTsj!{|f!!*217//11!\v>!>g!mGpqbjun!)h!fgujG!b<d*fu)owJfqdj4n!!e-jssjfEdfumjqpnob*t!!|-!qwbfNdw4o!fb)cWtVEfjcsvfDdsubjfpooj!m>j!cb!c>t!)1esjpsmfpddu!j4pdof*w<!!<g*mqpjbnu)!sgpbpdmfg!!>>!!.u!o2J/q1j<n!!jugb!p)mbgc!t<E*jqsjfnd)uujdpbos/gy!!>?!!GbqcjtnE!jusbfpdmugj!p<o*/m{f*w!f|M!qjjgN!y)bbnc`tWEVjfscfvddu!j-p1on/!y-!*?t!tbfcotiEhjvspfsd)uqjjpNop/Uzt*t!fgobidhfv!p>s!)eqjnsbfmddu!j>p!oq/jyn!!?u!b1p/m1g!!@|!!1*/t1t!f;o!i4h/v1p<s!!fumbtpfm!gg!b-dsfj!E>f!meqjnsbftd!u4jdpfow/!z-!q?b!N1w/o1f!!@E!32s/f1m!q;n!b5t/)1W<V!f~c!vfDmftsfv!u|y!fjug!!5)dbfcwt!E~j!s<fqdjunj!poos/v{u!f?s!!b~c!t<E*jtstffdouijhpvop/sz!*+!!g7b2d/f2!)>3!hepjms!f+d!u1j/p3o!/.{!!>?!!q1j/n1!!|@!!f3t/m1f!!;~!!6</61n<!!,f!m*t7fs!!g.b!d6fs!)>!!0e!j*s6fnd!u.j!p7on/)z!!+?!!*1t/t1f!o@i!h2v/p1s!!;.!!56/s1)<!!>~!!qsjfnu!v|s!o*!7gsb!d>f?<!!t~t!fwofidh3v!phsf)u!VgWj)!wfftdm4f!!e~j!s<f5dnu!j,p!o*-6!sg!m.p!b5us!)g!b0d!f**5!n|!!.w!f6dn3)!!v+w!<*!tjtgf!o)ighbvdpfs!!>.>!!51s/)1!*>!!|q!jvnw!!|>!!*w6fsd!3>)?e!jtstffdouijhpvop/s{)-!!gejj!sfftdmufj!p~o!/<z2*n!!0,!!b*c5ts)!e.j!s2fsd)u!j0p!o*/2yn*!<.!!~5!nf)m!t+f!!*jtgt!f)ogibhdvfp!s>!>.!!22/s1)*!!>|!!qvjwn!!>|!!w*f5ds3!)>.?!!etjtsffodiuhjvppos/)y!-g!j.!!fetjmsff!d~u!j<p1on/!{,*!!*02!sb!c.t!)1esj)s!f0d!u*j1pno!/.z!*2<n!)~!!+f!m*ttft!fjogi!h)vgpbsd!f.!!>1>s!)3!/>1!*q!j|n!!v|w!!*>2!sw!f>d?3!)t.t!feojishfvdpusj)p!og/jy!-<!1e/j1s!f>d!uqjjpno!/uzb*p!m0g!!b|c!t*)tetjfsofidhuvjppso!/u{b*p<m!g~)!qfjmNtpfU!tjtgf!o)ighbvdpfs!!>u>b!p4m/g1!*\v!1|/!5v!w7!n>!!fwofjdg3f)e.$!\ve!j\vs9f4d1u1j/p1o!/7{w-!!feojjsgffdeu$j\vp!o\v/2z3*/!10!!7bsc!tf)oejjgsffed$u\vj!p\vo1//y4*!<6!n~!!ffomjtgff!ej$g\v!!)\vg7b2d1f/!1>!>6!w5!/f1o*j!g|f!ev$w\v!!>\v!6w1f4d/31)!.6!se!jfsofjdgufjep$o\v/!y\v-1!/e3j!s5fnd!ufjopjog/f{e*$!\v0!!\vb7c5t1)/e1j!s5fwd!ufjopjog/fze*$<\v!!~\v!5f/m1t!f5!s|!!fvowj!g>f!ew$f\vd!3\v)1e/j2s!f.d!u2jnp!of/oyj-g!feej$s\vf!d\vu7j8p3o//1z!*2!w0!!fbocjtg)feej$s\vf!d\vu9j/p1o!/2{s*!<f!o~j!gsffeu$v\vs!o\v!11//36!!.+!!1)nv!wf!o,j!g2f/e1$*\v<!!\v~:!4w4f/d14!!1cwj!mfjoojfgbfseD$v\vc!f\vV1W/)2t!b1nsq!mffosj3gEf!ef$o\vw!N~b!q\v-g!jwefodf4$!\ve!j<s*fzd/ugj!p-on-c!!g-mnpub)uy!jnnj!qoJsovuu*f!s|!!<g*myp/bgu!!-gsbcd!f-!m>c!)hyfjunG!b>d!fn)ce!j4sdffdwu!j<p*oy*/<g!!g-mspub!u-!mguj)myujfns!J>o!un!u>!!4ndbfyw)!d<vcchfsV/W*`*nwjvo!N-jqqbMNfwwoffm)!E.3!fnsjvquJyofuu-)!s1b/f1o*j<M!pnUjmqfJyofuU!q>b!Nnwboyf)!n>j!qmJco!u4-d!fdwv!c<ffV{Wj`TnmjfoyNfjuq!M>f.w!fym/*w<v!!g<mcphbsu/!*g*bwdvf!T-jq{bfN!w>o!ff)yEq33f)snvjuqyJfouu)*s<b!fgomjpMbpuU!muffyyffUmqTbjN{wfo!f>!!>2!/s1c!!04!d)f4w/!1<!f+{!jdTvmcffyVfWu`!n>b,y!Uzj/mwfvT!j<{cfh*s</!*\v*$wjvg!e-fqgb!NQwCoSf`)FEO3WfNsBvQu`yGfBuM)TsFb\vf!owjfMdp3U!mvfwy!f>U!qhbfNuwVoWf)!e>j!ssfud!u4jdpfow-!!<gfb{djfT*m!f+y!f)ug!b>d,f!Tyj/{wfv!!.<!c2h/s1/**!*,w!v1!/-6q<b!N\vw$offm)tEf3\vf!swvfudy3f!uv)ws!b>f!ohjfMupVUWm)feyjfsUfqdbuNjwpoof-!!>g!bmduf!*4!d+f!w)!g\vbfdtfmTfj${\vf!!<.c!h2s//1**w<v!!w-fqdb3N!wgo!f>)!Eg3sfbsdvuu)yvfwu*!<o!svvwu!f,s>!!\v1F/T6M!B.G!`gQ<B!N\vW$OfFo`eSjCgQ\v!!gjfge!g)jg$b\vd!f<!f?{!j3T/m1f*y!f|u!!v>w+/!zw!v,!><!*gfb{djfTTfjd{bfg<!!+g!b1d/f3!!..>!!f4{/j1T<f!m~j!Uvywb/ny`!W,V>f!cgvbdd!f-!1+/!1g)bydbfnT!j+{!f1</!4j!g>!,)!nyj/qwJvo!u<!f={!jdTvfcmfjVUWo`jnnb`yWNVjfqcMvfdw!f+m!*1!/|3!!v+w!/uzo!J,s>f!u3m/j1g!!+>!,d!vzc/fwVvW!`~n!b<yfU{jjmTf",r6["clipDirection.fs.head"]="g$jjegoeff$g\v!!D<MuJoQf`dEsJfSQFqDjUmJDPvO!\vu!bvpomjgg!pnssnp!gjjoouv!!v<DompjjquEdjfs",r6["clipDirection.fs.body"]="g$jjegoeff$g\v!!D~M!J\vQg`jEeJoSfF$D\vU!J~P!O<\ve!sjbgd!t)jveD!m|j!q*E*jssjfed!u-j*puoo!f?d!s1f*Q!q|j!mwDfvd)44!defjws)!u>p!ew!f?d!4*)o1p/j1u-j!t1p/Q1m-b!d1p/M1w*!<-!s\vj$ej)guepfeg)!!VgWj`!D\vMfJtQm\vf!$w\vf!d~4!!<demsjbqdQtpjtej!u|j!p*o*!s>j!ew!M-p*dubomfQdpstfjQuqjjpmoD<v!)\v4$dffowe)jugp\ve!!j?g!!*)ovpDjmujjqtEpjQsqfjdmudj!p-os!j=e!)3u*p!e|)!!egjjs!/~y!!\v>g!j2e/o1f<$!\v~!!<f*m1t/f1!!j-g1!/)1v!D-m{j/qwEVjws)f4ddufjwp!o>!!=o!p4j*u!j|t!peQjqsj/myd!!>\v!f.t2m/f1$<\v!!~<!*f1m/t1f!!-j1g/!1)!v-DVmmjbqdEpjMswfVdwu)j4pdof!w=!!>5!*o!p|j!uejjtsp/Qzq!j>m!d2!/\v1*<S!C~Q!)femftofj!gjfge!!)}v}D!m*jHqOEPjIsQf)deufjopjog!f=e!!6g*j!$|\v!!e<j1s//2z.!!>>!!.y2//s1j<e!!~|!!f*m:t!f=!!jogp!j)uvdDfmsjjqEEqjjsmfDdvu)j!pgoj!!=f!t7m*f!!|~!!e\vjgsj/e{o!f>$!\v2!/<1*<1!/~1!!f-m1t/f1!!j-g{!/)wvVDwm)j4qdEfjws!f>d!uojppjou!j=t!p8Q*q!j|m!de!j\vsf/t{m!f>$!\v.!2</*11</!1~!!-\v1$/j1g!e-fVgm!bVdWp`MDwMVJwQ)\v4!dffmwt!f>!!jogp!j)uvjDtmpjQqqEjjmsdf!d\vu*jSpCoQ!)=e!f9o*j!g|f!ee!j}s}/!y*!H>O!P2I/Q1)<e!f\vo$jjggf!e",r6["clipbox.fs.head"]="g$jjego!fN$B\vY!`<C*P6Y/`1D!M-J6Q/Q1F!S-!6?/!11)\v4!dvfowj!g>p!synb!Njqojum!dv!D4mdjfqwq!fustToipbdq!f<]*N6B/Y1`.C!P-Y6`/D1M.J!Q-Q6F/S1^.<)!4vdofjwg!p>s!no!jcNpqpjmm!dv!D4mdjfqwq!fustDompjdq!J<o^oSfFsQ]QNJBMYD``CYPPYC``DYMBJNQ]QyFjSs^u<b!NvsofjqgqpjsmnD!vn!b5u",r6["clipbox.fs.body"]="g$jjego!fN$B\vY!`~C!P<Yo`sDvMuJfQsQ!F<Se!s?b!d1t\vj!ew!f|d!4*!ewfMepsdbbdmt<j!Ectpjp)m!!gjjt!E\vjEtOdFb`sQePfPeM!`>M!MgPbSmOtVf$<\v!!w~f!d~5!!<wfXvpssum!e>U!fenfqe!s>b!dwtfjdE5t)jw!X|p!s*m*e6Q/p1t.j!u?j!pzo/-m!b2d/p1M*w<!!%\v%$!V6O/S1P!M=M!`zM/PmPbQd`pTMUwB!S%U%\v!!6g/p1s!!+)!j*ozu/!mjb!d>p!M1w<!!.j!!6=/!1N)B!Y=`!C*P{Yy`/DmMbJdQpQMFwS)<i!ujh,o,f*m!)|!!>waM!p^djb]ms!f>o!o)JvqDjmmjDqsqffqsqNjbmuDsvj!y%]%j!^5!!+>!>w!X^pjs]mfeqUbfinTqs*f/qyqzj{m<D!vj!g}!})!v*D6m/j1q.q!f?s!Tzi/bmqbfd]pjM^w!!>%>%!!26!/%1%!!=v!Dzm/jmqbqdfpsMDwm!j%q%J!o6o/f1s!]=j!^*!{ay>/!m)bbdmpmM)wm)fituthUoifbmo))!w>Map!d^bjm]-s!fdomojJqqNjbmyD*s*f!q%q%j!mbDmvm!)%h%s!f4b!u>f>s!U^ijb]of)qwbMipTdsbfmq-q!jdmmDjvq!N}j}o!***6*/!1}!}=!!v*DmmbjdqpqMfws)Tiiubhqoff]mj)^!!>>a>!!^3j!]%s%f!ovoDJmqjjqmqDfs",r6["fog.fs.head"]="g$jjego!fe$f\vg!j\vogfjee)oGfP$H\v*!\v\v!gvjoejogfp$s\vn!!<cspbpGmh!pvGGvp!hu<b!p\vm$gj!gn!sap)gejfogvj!o<fseb)fVOThFp`GVvC!Pu*b!p%m%g!!)nesfpggjjoofve!)\vQfItPmOfH$*\v!!}<}z!uejftgojfoEfhep)GQvC!Su*b*p*m\vg!!vnosjpggpjsonv!!w\vf3dQ5Y!Fv`GHpPhGD!pgmfpesg<j!$\v",r6["fog.fs.body"]="g$jjegoeff$g\v!!G~P!H<\v*!sjpgu!d)bvGGhpphg*!!-|*!xg/mepJb!u-!cehfsq/usip!m>p!D.hwpNGwvQ)p5tdjfuwj!p-oe/J{)<y!j\vn$!j>g!eefJg!!\vGgPjHe`oFfY$Q\v3!\v<!*gimupqbfue!!g-pshbGGbhdpuGpvs!!->s!b2f/O1h!p.G!vf)yqqf)u.t!ivuGppphnEtf!o>t!jsupzu!d+b!GvhGppgh!Eufboptmjgu!z\v!f+t!meff$q\vu!i<!*+i!ueqf",r6["skinning.vs.head"]="g$jjegoeff$g\v!!V\vTgFj`eToLfJ$O\vO!J~O!H<\vf!ovpocj!gopssvnu!fnsb!u<5^!*cjj)oueoNjb]utsfjdyj<s!uvboNjfgoppscn!!>n!bfuo5p!cc!j5ouebNnb!u|s!j*yjJ!ouwbfpsmtgf!<o!jb!uuutsojpcdv)uyfj!swufbdN5f!otplCjuofJho!e5fuyb<n!!b<u^uTsFjOcPvCu`fY!BwNf]dt5f!dtjlsjuobXNffjohpicu!<5!u\vb$nj!gnesfpgg!jCoPvO!F\v`fUtFmYfU$V\vS!F~\v!!<vfoojpgcp!sons!viujfhsi!q<!*t5bwn!q-m4fws!3-E3!wc!p-o2fwU)f5yuubvns!f><!!fvoopjcg!p5sunb!nj!o<u*!*czp!o-f*U6f/y4u!v,s!fyT)j!{+f!<y!en)b3ud5f!wh!f-ufCspvoufyNfbUufsojpyc))dEp3oftsuv!ujyof!ug!m>p!b5uw!!j5*d!f|w!!g<m*p*bzu!!-k*!6>/!3j!!,+!!y5)/!1+<!!ygem)p3bduf!wy!!->f!snvpuey)fkU-f!ogpmcp)bEu3)fcspvoufyUffuy!u>v!s4fwT!j5{dff*w*!<<!*g*mzp!b-u*!6z/!2>!!,g!myp)p!s+)!ky!e0)!3gdmfpwb!u-)fcspvoufyUffUyfuovpscf)TEj3{ffs*v*u<y!fgum!p>b!u3!we!y5!d>f!w2!/<1*!*0z!!g-m*p6b/u1)!c,p!oyf)U!f+y!uyves)f3Tdjf{wf!*-<f!sgvmupybfuU!feozp!c>)!E23/f1s!v0u!ygfmup!b>u!)2cwp!o5fdUffwy!u<v*s6f/T1j!{,f!*z<)!!z+!!>z!e",r6["skinning.vs.body"]="g$jjegoeff$g\v!!V\vTgFj`eToLfJ$O\vO!J<O*Hx\v/!enfbnus5p!gctpoobfsNub!u-Y{!z>y!/h*feufCopoojflNtb!u+s!jfyt)stflwjooJJyojesfuyb/Nye*o<j!cn)b)u55d!fcwp!o>f!NebfunZs!p>g!thofbusCup!o\vffNtbmufs$j\vy!)<t{lzjyo/J*oeeffoyo/jzl*t<!!+n!bfut5s!fcwpooJfyNjbsuu[b!N>e!ohjfcu)C!p>o!feNfbnusspjgyt)otblsjuo!J\vo*eSfCyQ/){e*f<o!jngbfue5!!}c}p!o*fHNObPuIXQ!)>e!fhofjugCfpeo!fgNjb$u\vs!j<yx)/tulijhojJfoXeofjyl/tx!*+<!!ynfbuus5f!WtoljjlotN!b+u!sXjuyb!N>f!onpbcu!5>),1!/e1f*o<o!jtlltj!o<N{b/uusijhyj!f,X>o!jtlltj!o+X!fyjfhuisuf/Wyo!j+l!tc!p+o!f[NubbuNYf<o!ptcl!j>o,N!beufsojoyj!l,t>!!<tzl/juoiXhfjjfhXiouj/lzt!!++!!cypfoufsNfbWuoZj<l!tt!l+j!oZNubbuNsfjoyp!c,!>>!,t!lejfooXofjjlhti!u</y{/!u+i!hcjpfoXfoNjblut[!<+!!tylfjuosNfbWuosjjlyt!!,+>!!YtulbjNofXofpjch!i>u,/!xe!f+o!ocjplotf!N<b*u1X/<1!)t5ldjfowN!b>u!sejfyo!o>j!lctj!o5edNfbwu!s<j*y1J/o2w!f-s{tzfy!/+e!ftnlsjpogNtboubssjuy)!5+d!fcwj!o+e!NybjussujbyN<e!opjcck!f>d!uyOfpussnfbWmo!j>l!tw!f5dd5f)wt!l\vjgojNeboufs$j\vy!!<+{!zwyf/d*5*)1p/c1k!f-duuoOfphsonbbUmu-d!f1k/c1p*)*5/dyfzw{!<+!!\vy$jjsguebfNgo!jVlTtF)`5UdBfOwH!F>O!Uu\vo!fphcokbfUdu",r6["shadowMap.vs.head"]="g$jjegoeff$g\v!!V<TeFs`pTpIDBxEpPeXbNiBtQ!\v5!dvfowj!ghposjnz!snbbwu!5<!ytjisbuebpNx",r6["shadowMap.vs.body"]="g$jjegoeff$g\v!!V<T*F1`/T2I!B-E{PzXyN/BeQf\vn!stpigbteopbxsDup)p5sdef!w>!!+t!iybjespuxbNNbmufsejpyN!v+!",r6["shadowMap.fs.head"]="g$jjegoeff$g\v!!V~T!F\v`gTjIeBoEfP$X\vN!B<Q*\vq!ev!o-j*gzp/sfn{!jcTpmpfmy!ftui!b-eEp4xeDcv)mWmV<p!Uvfocjvgdp!s-nq!btNbxnpqembfist3)Ef!stbiqbneppDxEN3bfqs<v!uvyofjug!possnv!uwffsd!3\v!fttimbfe$p\vx!T<j*{1f/<:!!v0o!j1g/p2s)n!!+g!m*p!b*uq!et!i-b*ezp/xfJ{ojuTfmoftyjfuuz!<-!yvyozj/gupfstng!ggpm!p,b!uE!4teicb)eWpVxpCUjfbctv<d!!v-oqjbgNpxspne!bgimtp)bfus!btqinbpeDpEx3Sfbsevjuvytf<u!!v,o!j*gqpes!n-!*czp/pfm{!jtTimbfeypfxuS!f-dyfyjyw/fu<f!twgbgspz!j,o!hE!4wefcd)5W!VtpiUbfecpvxdD!p-pqsbeN<x!pgembpibtu)!fusfbyqunvpsDfE33EfDspvnuqybfsuf!),t!b*nqqem!f-s*3zE/!fe{fjqTumifty-f!uw!f-dz3y!zv/wu-f!tggmgppb!u,!!dEp4neqcb)sWfV*p!U|f!csvfdu!v-sqob!Ntxupfeqb)idtp)nfqsbbsqfn-p!DvEo3qfbsdvluSyHfCuB!U,p!E*fqqeu!i-)*uzf/yfu{vjsTfm3fEy)feuf!q-uziyty-/!uvfwt*g*g*p<!!,~!!Eg4mepcb)uW!VupfUyfucvvsdf!3-EqTbiNbxeppexbMifts)qf)stbbqnnqpmDfEs33fEs!veufyqfuui!t,-!!*wqfed!3-!*tzj/{ff{-j!Twmffdy3f!uv!w--E!4gemcp)bWuV!pdUpfncqvbds!f-*q!b|N!xdppeobtiut!)wffsdb3q!nppgDgEt3ffus!v>u!ywffud!3,)!1*/q1e-!!-2*/z1/*f<{!jwTfmdf3y!fuuf!y-fymzTzj/{uff!t>g!gwpf!d,3!)E24/e1c*)!W0V!ptUjf{cfv<d!!w-fqdb3N!xdpfeobuistp)jfesVbWq!n>p!DgEm3pfpssv)uvywf!u+!!,t!j*{qfe!!,-!*1z//6f*{!j0T!mtfjy{ffu<!!-gymzpyb/uu!fmtcg!g>p!!u,f!yEu4vescf)3WEVDppUnfqcbvsdf!)-eqfbqNuxipte-b!idtf)ofussbpqjnepVDWE!3,f!suvfuyyffmuT!j,{!f*!q+e!!p-g*gzt/ffu{/jyTym-f!ydfpun!q-bzszfz*/<u!fgtmgpgbpu!!,m!uE!4>e!cu)fWyVupvUsffc3vEdD!p-nqqbbNsxfp)eebfiqtu)ifts-b!qdnfpoDuEs3pfjsevVuWy!f,u!!u,f!y*fqmeT!j-{*fz!/+f!{pjgTgmtffyuf/uy!z--z!zdyp/nuqfbtsgfg*p<!!,g!mEp4beuc!)sWcV!p>U!fucfvydu!v-sqfb3NExDppenbqibts)ff)sebfqqnupiDtE-3!fdsfvouuysfpuj!e)V!Wo!s,v!uuffsy!f<mzT/jf{{fj!T+m!fpygfgut!f+u!/tzvyj-e!bdSpxnpqebbsift*!<+!!g*m2p!b-u2!!s.u)!3>d!fuwf!y>u!vusfft3gEgDpp!n3qdbfswf!)\ve*fUqGuPiTt`-G!DdQf`oFuQsZpUj`eQVBWN!X,P!EuBfIyTf)meTfjo{jfg!f+e!!p}g}g!t*fGuD/Qz`zF-Q!ZdUp`nQqBbNsXfP*E<B!IwTf)de3f!ogj!g>f!eg!sgbjd$u\v)!v<w*!o+p!jtujj{tfp!Q,p!U1u/i6h*j<m!)gfm{pjbmub!nbs!p>o!!n>j!yE)4mecc-!!4mduf-w!!g</tzb*j<C!xgpmepbbiut!!c>!,>!!qnej!y<)*sscb-f!Osbus-f!ngb/Dzx*p<e!bgimtp!b.u!!sdb!G>b!snfjnyb)Dbx-p!ecb-i!tg)/!y0*!<*!ssbffuOvbssof!ndb<D!x~p!egbmiptb!u.!!h*foupTjiubjetppxQ)ptUbuniqhmjfms)3iEu!htoifbme)p!x>N!bqqe-!!uwbfpdm3g!!t<i{bzeyp/xeNsbpqpTDjx{pfe-b!igtm!p>b!uo!ptjiubjetppxQCpjUbuti-h!jgmm!p4bduf!wt!i<b*e*p1x/S3b!e-j1v/t5-)!3wdffdw5!!+t!ifb{ejpTxqDbpNpxspee*b!i|t!)g!m0p!b*u1!/t2i)b3edpfxw!!>>!!2f/{1j<T!mtfiybfeup!x3Ddpfpws!e|/!{*!s,b>G!btsifbnebpDxxCpjebbti<t!!tuibbpempgx!D-pspbsfeO/b{s!f>n!bnDjxop)etbiibte!puxbDppmpgs!e-/e{s-p!p1D/x:p:e:b:i:t:!*5<d!fcww!f-dt5v!jjeobGSsxvpteubvintW!fudb!p>m!gc!w-ftdb5j!C)xtpiebbeiptx!Dupbppsmeg/!y-!f?{>j!T1q/b1N-x!pteibbietp!x3Ddpfpws!e-/qyb!N=x>p!e2b/i1t-!!Et3isbfempqxnDbptp)sxep/ezb!i?T>u!o1j/p1Q-u!fthi!buebppxmDgp!p~s!e</*z6!8=/>1!!2-/618*4</!1c)p3pdmf!wj!o,G!ssvbtoubvmnq!!>+!!b*m6m3)/j1o!G-s6v3t2u/v1n)W3fddf*w<!!ocswvfudf3s!!g~s!v<t1u/v3n!U.f!tZuoWhfjdt!!>+!!c{w/fwd!3>)!jzo/Gssbvotbumvqn!-<!1t/i3b!e,p!xZDophpjste!/+{!!1=/>3!!2,/!1y*/<w!!c>p!pym/!sgbsovbtmuqv!n<U*fzt/uw!)>o!hbjmtm!)>g!sZvothujvtn!UufbtpumWgf!d|*!<*!fjogP!u)tgpsnvmtbu!v>n?U!fzt/uW*t!c|b!)\v!$gjjg!!fetfmgfj!o~f!e<)YToIhBjEtP!X+N!B1Q/`3U!Z,Q!FY`oQhDjGt*!\v+!!w{f/dw3!!>u!fyy/fsmbTojb{mfq!!><!*wyf/dw3))o2h/j1t*!!>0!!Ytoihbjetp!xuNbbpqmTgj!{|f!<*!fgomPpubtup!nemyb1!!>>?!!.y!/uWftycfbm)T!jg{jf!/fyt!m+f!!t~i!b<eyp/xwS!b.e!j1v/t5<!!>g!myp/bsub!oebzm1q!!>*!1./!1u!f?y!f{m/Twj){!fg/jz!!|+!!*tfiobPeuptxpSnbmebj!v>t?<!!{g/mWptbcub!)e!yg2j!!><!m,f!yuffUyBfumtTpjn{mfb/!y.!!+1!/t2i!b>e!pfxoSPbuetjpvntm<b!!gumbppbmug!!e<zZ2f!{>j!T,m!fuyffyuf!m+T!j6{/f2/!z>!!+m!ftyifbUeBpuxtSpbnemjbv!tu<b!ptmigb!e<pzxy!/>w!!)>!!usfbyoubvmsqf!33EdDfpwn!q<b*sZff){tjiTbmefpyxfNub!q+-!!1t/i3b!e.p!x1D/p2p)s!e+/!yfzc!v,D!pwUffdm3b)dety!1>-+!!ewz!1<*f-c!vtDipbUefpmxbDdptp!s>e+/!{W*t!c,b!!u<f*y*u{v/sWft3cEbD!p-nzq/bWstfc)bt)iybbenp!x-Nyb/qW-t!ctbi)byebpnx!D0p!p1s/e2/!y>z!!f,c!vwDfpdU3f)m1b/d1t-!!uebzp1m*g-!!<t*iwb)etpcxbD!p>p!sWet/c{b*!!4,d!fuwf!y|u!v*sZff3{EjDTpmnfqybfsuf!)utbipbmegp!x-Nwb!q4-d!ftwi)bWeVppxUDfpcpvsde!/3ydzf!w,!!~w!f<dx3p)eebyi2t-!!oeszv1u*f-s!!t~i!b\vegpjxeDopfp$s\ve!/<{**{!/,e!supfpyDuxvpsefb3iEtD!p-nzqyb/sefs)ptpiDbxeppexbNibtq!--!qtbiNbxeppexbDiptp)sfes/byqzn!p,D!Ew3ffds3v)ueyyf1u-!!>1!/x1p*e-b!itti!b\vefptxmDfp$p\vs!e</*{1*/!:,!!0u!f1y/u2v)s!f+3!E*D!p*n{q/bessfp)ptDixbpeepbxiNtb!q--*!2tzieb!e-p2xyDep)p3sdef/wy!z,-!!ztyi/beesppxpDDpxppseeb/i{t*!!-,f!{ujfTyqubvNsxfp3eEbDiptn!q-bqsbfN)xtpiebbeiptx)Nqbsqf-M!xtpiebbeipTxED3pfpssveu/yyfzu!!,,!!w*f{d/3e)sepyp2D-x!p1e/b1i*t-!!-t*i2bzeep!x-D1p/p1s)e3/d{f*w!!,,!!uzfyy/uevsspfp3DExDppenbqibts!f-)ft{ijbTeqpbxNNxbpqe-b!itti!b-eqpbxNDxpppesbei/ty)zq!s,f!Mwxfpde3b)ieTyE13-f!sevzu2y*f-u!!t,i!b*e{p/xeDsppppsDex/p{e*b!i,t!!u-f*y2uzves!f-31EyDep)n3qdbfswf!),t!izbye/pexsNpbpqD-x!pteibbietp!x-Dfp{pjsTeq/byNzx!p,e!bwiftd!3-)q1b/N1x-p!eebzi2t*)-q!stfiMbxeppexbDipTpEs3ef/s{v*u!y,f!uu!f,y!u*v{s/fe3sEpDppDnxqpbesbfi)tt!i-b*e1p/x1N!b-q2-y!et)i3bdefpwx!D,p!pzsye//eyszp!p,D!xwpfedb3i)te!y-2f-{!jeTzq2b*N-x!pteibbietp!x-DqpbpNsxep/e{b*i!t*)!q+s!f)M2x/p1e!b0i!T:E/31f*s<v!u\vy$ffum!j,g!!*e{f/gejsopfpeD)xTpIeBbEiPtX!N-BzQy`/UeZsQpFp`DQxDpGe`bTiPtG!U-*f\v{!jwTfqdb3N!xupfeybfimtT!j-{qfb!N>x!pwefbdi3t))2q/s1f*M!x0p!etbiibTeEp3xfNsbvquTyjf{uf!<,!!g*m{p/beus!pepyD1x!p>e!b.i!tu!f-y*f1m/T1j!{-f1/yye!)+3!dtfiwb!e,p!xzSyb/eejsvptp<D!xgpmepbbiut!!e-zf1{!j>T!q.b!NuxfpyefbmiTtj!{-fq/bzN!x+p!etbiibte)pqxsSfbMexjpvetb<i!TgEm3pfbsuv!ueyyf2u!!>,!!,*!{u/feysfpmpTDjx{pfe/byi!t+!!-t*i1bzeep!x-S2byeej)v3td<f!wg!m,p!bzuy!/eezs2p!p>D!x,p!eubfiytf!m-Tfj{{jfT/qzb!N+x!pteibbietp!x-SqbbeNjxvpte<b!itti)bqespfxM!x>p!e)b!iuTfEy3ufvssvfu3yEfTui!b,e!p*x{M/fessqp)ptDixbpeepbxiNtb!q--*!1tzieb!e-p1x/N1b)q3Tdjf{wf!-,!!tziyb/eepsxpDppDpxspee/byizt!!,-!fw{fjdT3q)beNyx1p-e!beizt1!*--q!btNixbpeepbxiDtp)pqssef/M{x*p!e,b!iuTfEy3ufvs",r6["flowMap.vs.head"]="g$jjego!fN$B\vY!`<G^MUPDXF`KPCCPK`FXDPUM!G?`!Y1B\vN!]vwoVjxgppmsgn!!3ndbfuw5!!hgomjpzxsNbbwu!s<j^yU]DNFBKYC`PG`MXP",r6["flowMap.vs.body"]="g$jjego!fN$B\vY!`~G!M<P6X/`1P!C,K!F*D{U/!m?b!d1p\vM!wwVfxdp4m!gg!m,p!xzV/wmMbpddpbMmw<V!xgppmsg!.)!j-oyu/!mjb!d>p!M1w<V!xjp!m=g!)N3BdYf`wG!M>P!X^`jP]CwKVFxDpUm<g!!j<,{,z*y!/|*!*g1m/p2x!V-w{Mzpyd/bemf!n>s!p)ggtmopbxsNub)u5sdjfyw]!j+^!!y+j!svuNbpNemf",r6["flowMap.fs.head"]="g$jjego!fN$B\vY!`<G^MUPDXF`KPCCPK`FXDPUM!G?`!Y1B\vN!]vwoVjxgppmsgn!!3tdbfnwq!mhfosj3zEs!bgwm!p<x^UUfDyFuKvCsPf`]XNPBMYG``GYMBPNX]`ePfCmKcFbDoUF^x<p!mvgo!jmgpppscn!",r6["flowMap.fs.body"]="g$jjego!fN$B\vY!`\vGEMOPFX``QPPCPKMF`DMUM!P?S!O1V\v$!\vw!f~d!5\v!ggjmepoxfU$f\vy!f<mc<h!s\v/$mVfOySfPUMxMp`mMgP!P>Q,`!TcUhBsS/Ue\vJ!!g\vpfst!m)fj$o\vu!!<jb>c1h<s!/jm!f=y!fNUBxYp`mGgM!P>X,`!PbCcKhFsD/Ue<J!!j\v,*,!*B!C|H!Sg`mEpExBU`fFyEfPmN!`>E!OuFfMyCu`vXsPfM3GE!))gemfpoxjUgffyeu!vgsjfm]fJ$^\v-!!<gbmcphxsV/wm]fjy^f*U<x!pjmgg!!)>g!mbpcxhFso/becJm!f\ve*]!jB^C!H%S%`!FbEmJmS)SmFfWtPt`UFiEbPoN)`gEmOpFxMVCw`]XjP^M-G!!w)fedf3o)j2g/f1e*!*g*j!m%f%$!\vb!m<mb)/hmsffybfuUfxspUmigb!o>)!gbm/pexJV!w\v]*j!^B-`!FwEfJdS3S)F1W/P1`*F*E*P*N!`\vE$OjFgM!Ce`fXgPjMoGf!e))e!fGoMjPgXf`eC!MgFjOmEf`$N\vP!E<Fc`hNsV/MmUfJyQfMUZx`pSmHgC!!>*!\vc!hJse//esJh!c\v!*+!>C!HgSm`pFxEUJfSySfFmW/Ps`hFcE<P!N\v`$EfOmFjMgC!`eXfPgMjGo!f)ee)f!oGjMgPfXe`!CgMjFmOfE$`\vN!P<EbFc`hNsV/MmUfJyQfMUZx`pSmHgC!B>!+*!\vb!cJhes/",r6["envmapPhysical.fs.head"]="g$jjegoeff$g\v!!V~T!F\v`gFjOeWoNfB$Q\v\v!!<v*o1j/g1p)s4nd!fgwm!pobsuv!uffosw!N\vbfqtJmofu$f\vo!t<jzuuzj<t!ovfoujogJpqsbnN!wgomfp!b+u!!cghmsj/qsFpomwpNDbqqb<N!w\vo$fj!goesfvgu!fFsO!W<N*BtQt`fUoZiQhFv`pDsV!C-Fd\vf!Wvuodjfgmpgsfns!!t-bqnbqnmwfosfD)vWcVff!cfvoDwfnsbvqu<y!f\vu$!f>m!tsfp\vm!pvDoqjbgNpwsonf!!t5bdnfqwm!f<s*3yEj!sfuobwNnxbfqj<W!v\v!$-fdofeWjugd\vf!mwgffds4)!ohpfjuuJdCfMsJjsEsnbsepjgbtoodbfs)Udfptostfuw!ojjo!!>w!fddf4W!uodpfsmngbfms*!!<|*!*\vt$tjfgo!iehfvgpjso!f+e!)tFtOfWoNiBhQv`pUsZ!Q-Fm`bDnVsCpFo`!V-Wd*f\vW!uwdffdm4g!fxsp)symjenO)pfs{njbmmb!n>s!pjoo!w>f!sdtffWUusdbfomtggfpss!n<E*jmsbfndsupjop!o-)sojpEsxnfbjmw-!!.v)WujdffxmNgbfuss!j>y!*d<f!Wwufddf5m!gffosw!N<bdqfDWpumdpfsm!g>f!su!f4ydufvws!f\vD*vWcVf`VFWC)VfDo`wFnQbZqU-`!QxBpNsWmOeFO)pesfnobjmg-f!e2!/g1j*$<\v!!s|f!u*vtstof!oQiJh!v+p!sf!ouwbNpbmqgD!pomjp!su/tsohpcd!!+-!mfbonwsNpboq!J4oduffwo!tojju!zu<t!o\vp$df!m-tsfj\vE!xsffjuwv!s4od!fwwf!do4j)!1u/t1o*p<d!)\vf$dfoobejjegb\vS!M~C!Jwuffdh4!",r6["displacementMap.vs.head"]="g$jjegoeff$g\v!!V\vTgFj`eEoJfT$Q\vM!B<DtFbNjFCOuUoNfBnQf\vd!bvmoqjtgjpes!nu!btpbmngq!mnfssp3gEj!oevj!t<qfmmbbddfTnufoofunNfbdqb<m!q\vt$jjeg!ouebfpgm!gV!TnFs`pVgCjPo\vv!",r6["displacementMap.vs.body"]="g$jjegoeff$g\v!!V<T*Ft`bEjJCTuQoMfBnDfFdNbFmOqUtNjBeQ!\v,!!ufsmbbodtTguposfnnffed!b,m>q!tojpes!n+b!myj/{*fw)Vpwc!k-fqdbuNOuposfnnbfmd*b!m+q!t)juef)yEu3vfs",r6["bloomSelective.fs.head"]="<vuovjpglpdsbnm!cc!pmp",r6["bloomSelective.fs.body"]="~j!g<!o)scvmubfdsl!p<v*u1*/!2|!!-h1m/`1G!s-b1h/D1p!m-p1s/!1>)!5wdf";var uB=M.graph3d.PostProcessing=function(S){var _,e=this,o={},x=!1,T=!1,a={model3d:!0,mesh:{is:[0,2,1,1,2,3],pos:new aA([0,0,1,0,0,1,1,1])},mat:null},t={type:"blitScreen"},p={type:"fxaa"},q=(A.keys(uB).forEach(function(r){o[r]=new uB[r](S)}),e.getModule=function(r){return r?o[r]:e},e.getModuleList=function(){return A.keys(o)},e.resetModules=function(){for(var r in o)o[r].resetProperties()},e._serializable=!0,e.handleDataModleChange=function(r,K){r&&(e._serializable&&r.setPostProcessingData(e.serialize()),r.removeSerializeListener(e.onDataModelSerialize,e)),K&&(K.addSerializeListener(e.onDataModelSerialize,e),e.deserialize(K))},e.onDataModelSerialize=function(r){"serialize"===r.type?e._serializable&&(S.dm()._postProcessingData=e.serialize()):"deserialize"===r.type&&e.deserialize(S.dm())},e.isDeserializeDisabled=function(r){return!e._serializable||r.a("sceneBloom")!==P1},e.isSerializable=function(){return e._serializable},e.setSerializable=function(r){(e._serializable=r)||S.dm().setPostProcessingData(P1)},e.serialize=function(){var r,K,B,b,f={};for(K in o)if(b=(B=o[K]).serializeProperties){for(var h in r={},B.enable&&(r.enable=!0),b){var U=B[h];U!=b[h]&&(r[h]=U)}A.keys(r).length&&(f[K.toLowerCase()]=r)}return f},e.deserialize=function(r){var K,B,b={},f={};for(K in o){var h,U,a=(h=o[K]).serializeProperties,P={},H="scene"+K;for(U in(Y=r.a(H))!==P1&&(P.enable=Y),a)(Y=r.a(H+U[0].toUpperCase()+U.slice(1)))!==P1&&Y!==a[U]&&(P[U]=Y);zY(P)||(f[K[0].toLowerCase()+K.slice(1)]=P)}if(f=zY(f)?r.getPostProcessingData():f)for(B in f)if(B&&(K=B[0].toUpperCase()+B.slice(1),h=o[K])){b[K]=!0;var Y,S=!!(a=f[B]).enable;for(U in e.enableModule(K,S),r.a(K="scene"+K,S),h.resetProperties&&h.resetProperties(),a)"enable"!==U&&(Y=a[U],h[U]=Y,r.a(K+U[0].toUpperCase()+U.slice(1),Y))}for(K in o)b[K]||((h=o[K]).enable=!1,h.resetProperties&&h.resetProperties())},e.getRenderTarget=function(){return _},e.blitScreen=function(r,K,B,b,f){var h=S.getGL();if(null==r)b=K,f=B;else{var U=r instanceof vq;if(U){if(K&&(K.type||K.model3d)&&(b=K,f=B,B=K=null),0==K||0==B)return;K&&B&&r.setSize(h,K,B),r.bind(h),f&&f.viewport?S.setViewport(h,f.viewport[0],f.viewport[1],f.viewport[2],f.viewport[3]):S.setViewport(h,0,0,r.width,r.height)}else b=r,f=K}f&&!1===f.clear||h.clear(16640),f&&f.preRender&&f.preRender(h),b&&b.model3d?S._prefabRenderer.render(h,b):(a.mat=b||t,S._prefabRenderer.render(h,a)),f&&f.postRender&&f.postRender(h),U&&r.unbind(h)},e.enableModule=function(r,K){for(var B,b=r.split(","),f=0,h=b.length;f<h;f++)B=b[f].trim(),o[B]&&(o[B].enable=K);for(B in x=!1,o)if(o[B].enable){x=!0;break}},e.isEnabled=function(){return x},e.dispose=function(){for(var r in T=!1,m6(S,_),_=null,o)o[r].dispose&&o[r].dispose()},!(e.resetBlendState=function(r){x1.for(r).glState.blend.apply({enabled:!0,equation:32774,func:[770,771,1,771]})}));e.isRenderingScene=function(){return q},e.render=function(r,K,B,b,f){if((x||f)&&(T||function(){var r;if(!T)return r=S.getGL(),r&&(_=new Fr.RenderTarget(S,r,null,null,{samples:T1.renderTextureSamples||1,minFilter:9729,magFilter:9729,depthFormat:S.isWebGL2()?36012:null}),T=!0)}())){_.setSize(r,K,B),q=!0,_.bind(r);(f=l6(r,!0))&&0===f[0]&&0===f[1]&&0===f[2]&&0===f[3]?f=null:C6(r,[0,0,0,0]),r.clear(16640),S.setViewport(r,0,0,K,B);var h=!1!==(b=b||{}).renderAxis,U=!1!==b.renderEdit;b.renderAxis=b.renderEdit=!1,S.renderScene(b),q=!1,_.unbind(r);for(var a,P=0,H=S._glCapabilities.maxAttributes;P<H;P++)r.disableVertexAttribArray(P);var Y=_;for(a in o)Y=o[a]._42(r,Y)||Y;return S.setViewport(r,0,0,K,B),f&&C6(r,f),b=e.getModule("Fxaa"),f=S._attributes&&!1===S._attributes.autoClear?{clear:!1}:null,e.resetBlendState(r),b&&b.enable?(p.resolution=[1/K,1/B],p.image=Y.texture,e.blitScreen(p,f)):(t.image=Y.texture,e.blitScreen(t,f)),(b=e.getModule("Bloom")).blendAtFinal&&b.composeFinalBloom(r),r.useProgram(S._prg),S._renderAxisAndEditHelper(h,U)||(K=S.getGLState())&&(K.depth.enabled=!1,K.blend.enabled=!1),!0}}},jB=(M.graph3d.PostProcessing.HueSaturation=function(b){var f,h=!1,U=!1,a={type:"hueSaturation"},P=[],H=[],Y=[];this.serializeProperties={hue:[0,0,0,0,0,0,0],saturation:[0,0,0,0,0,0,0],lightness:[0,0,0,0,0,0,0]},this.resetProperties=function(){var r,K=this.serializeProperties;for(r in K)this[r]=K[r]},this.resetProperties(),A.defineProperties(this,{enable:{get:function(){return h},set:function(r){!!h!=!!r&&(h=r,b.iv())}},hue:{get:function(){return P.map(function(r){return z1(180*r)})},set:function(r){if(P!==r&&7===r.length){for(var K=0;K<7;K++)P[K]=r[K]/180;b.iv()}}},saturation:{get:function(){return H.map(function(r){return z1(100*r)})},set:function(r){if(H!==r&&7===r.length){for(var K=0;K<7;K++)H[K]=r[K]/100;b.iv()}}},lightness:{get:function(){return Y.map(function(r){return z1(100*r)})},set:function(r){if(Y!==r&&7===r.length){for(var K=0;K<7;K++)Y[K]=r[K]/100;b.iv()}}}}),this.dispose=function(){U=!1,m6(b,f),f=null},this._42=function(r,K){var B;if(h&&(U||(B=b.getGL())&&(f=new Fr.RenderTarget(b,B),U=!0)))return a.image=K.texture,a.hue=P,a.saturation=H,a.lightness=Y,b._postProcessing.blitScreen(f,K.width,K.height,a),f}},M.graph3d.PostProcessing.Bloom=function(H){var Y,S,_,K,e,o,x,T,t=this,p=!1,q=!1,y=(this.serializeProperties={strength:1.5,threshold:.55,radius:.4,overrideAlpha:!0,blendAtFinal:!1,selective:!1},this.resetProperties=function(){var r,K=this.serializeProperties;for(r in K)this[r]=K[r]},A.defineProperties(t,{enable:{get:function(){return p},set:function(r){!!p!=!!r&&(p=r,H.iv())}},strength:{get:function(){return Y},set:function(r){Y!==r&&(Y=r,H.iv())}},threshold:{get:function(){return S},set:function(r){S!==r&&(S=r,H.iv())}},radius:{get:function(){return _},set:function(r){_!==r&&(_=r,H.iv())}},overrideAlpha:{get:function(){return K},set:function(r){!!K!=!!r&&(K=r,q&&N(),H.iv())}},blendAtFinal:{get:function(){return o},set:function(r){!!o!=!!r&&(o=!!r,H.iv())}},selective:{get:function(){return e},set:function(r){!!e!=!!r&&(e=!!r,H.iv())}}}),this.resetProperties(),[256,256]),k=[],w=[],v=5,B=[3,5,7,9,11],z=[];function N(){for(var r=0;r<v;r++)z[r]={type:"bloomBlur",defines:{KERNEL_RADIUS:B[r],SIGMA:B[r],OVERRIDE_ALPHA:!!K},internalDefines:!1}}t.dispose=function(){q=!1,m6(H,x,T,k,w),x=T=k=w=null},t.composeFinalBloom=function(r,K){var B,b,f;p&&q&&(B=H._postProcessing,b=x1.for(r).directState(),f=b.depth.enabled,B.blitScreen(K,{type:"blitScreen",image:k[0].texture},{clear:!1,preRender:function(r){f&&(b.depth.enabled=!1),x1.for(r).glState.blend.apply({enabled:!0,equation:32774,func:[770,1]})},postRender:function(r){B.resetBlendState(r),f&&(b.depth.enabled=!0)}}))},t._42=function(r,K){if(p&&(q||function(){var r=H.getWidth(),K=H.getHeight();if(r&&K){var B=H.getGL();if(B){y=[r,K];var b,f=Math.round(y[0]/2),h=Math.round(y[1]/2);for(T=new Fr.RenderTarget(H,B,f,h),k=[],w=[],b=0;b<v;b++)k.push(new Fr.RenderTarget(H,B,f,h)),w.push(new Fr.RenderTarget(H,B,f,h)),f=Math.round(f/2),h=Math.round(h/2);return N(),q=!0}}}())){var B,b=H._postProcessing;e&&((x=x||new Fr.RenderTarget(H,r)).setSize(r,K.width,K.height),x.bind(r),(B=l6(r,!0))&&0===B[0]&&0===B[1]&&0===B[2]&&1===B[3]?B=null:C6(r,[0,0,0,1]),r.clear(16640),H.setViewport(r,0,0,K.width,K.height),r._blooming=!0,H.syncRenderState(),H.renderScene({renderAxis:!1,renderGrid:!1,renderEdit:!1}),r._blooming=!1,B&&C6(r,B),x.unbind(r)),b.blitScreen(T,{type:"bloomHighPass",smoothWidth:.01,luminosityThreshold:S,tDiffuse:(e?x:K).texture});for(var f,h=T,U=Math.round(y[0]/2),a=Math.round(y[1]/2),P=0;P<v;P++)(f=z[P]).texSize=[U,a],f.colorTexture=h.texture,f.direction=[1,0],b.blitScreen(k[P],f),f.colorTexture=k[P].texture,f.direction=[0,1],b.blitScreen(w[P],f),U=Math.round(U/2),a=Math.round(a/2),h=w[P];return b.blitScreen(k[0],{type:"bloomComposite",blurTexture1:w[0].texture,blurTexture2:w[1].texture,blurTexture3:w[2].texture,blurTexture4:w[3].texture,blurTexture5:w[4].texture,bloomStrength:Y,bloomRadius:_,bloomTintColor:[1,1,1]}),o||t.composeFinalBloom(r,K),K}}},M.graph3d.PostProcessing.Dof=function(H){var h,Y,K,B,b,S,_,U,e,a,P,o,x,T=!1,t=!1,p=0,q=!1,y=D.generateUUID();this.serializeProperties={useDepth:!1,aperture:.025,maxblur:1,overrideAlpha:!0,image:null,focus:1e3,range:100,density:10},this.resetProperties=function(){var r,K=this.serializeProperties;for(r in K)this[r]=K[r]},A.defineProperties(this,{enable:{get:function(){return T},set:function(r){!!T!=!!r&&((T=r)||(q=!1),H.iv())}},image:{get:function(){return K},set:function(r){K!==r&&(K=r,q=!1,Y&&(H.deleteTexture(y),Y=null),H.iv())}},maxblur:{get:function(){return B},set:function(r){B!==r&&(B=r,H.iv())}},overrideAlpha:{get:function(){return U},set:function(r){!!U!=!!r&&(U=r,H.iv())}},aperture:{get:function(){return b},set:function(r){b!==r&&(b=r,H.iv())}},useDepth:{get:function(){return!!a},set:function(r){!!a!=!!r&&(a=r,H.iv())}},focus:{get:function(){return P},set:function(r){P!==r&&(P=r,H.iv())}},range:{get:function(){return o},set:function(r){o!==r&&(o=r,H.iv())}},density:{get:function(){return x},set:function(r){x!==r&&(x=r,H.iv())}}}),this.resetProperties(),this.dispose=function(){t=!1,Y&&(H.deleteTexture(y),Y=null),m6(H,h),h=null},this.setImageFromGraphView=function(r,K,B){this.image=null,function r(K,B,b,f){e=null;var h=K.getCanvas(),U=h.width,a=h.height,P=(((b=b||1024)<U||b<a)&&(P=b/Math.max(U,a),U=Math.round(U*P),a=Math.round(a*P),S=S||mY(),h=Y1.resizeImage(h,U,a,S)),H.getGL());_=_||P.createTexture(),Y=d6(H,P,h,_),p=B||.01,q=!0,H.iv(),f--&&(e=e||Y1.callLater(function(){r(K,B,b,f)}))}(r,K,B,2)},this._42=function(r,K){if(T&&(t||(B=H.getGL())&&(h=new Fr.RenderTarget(H,B),t=!0))){var B=K.width,b=K.height;if(B&&b){if(a)Y=H.grabDepth();else if(!Y){var f=g(this.image);if(!f||!f.comps&&!f.tagName)return K;M.Default.setImage(y,f),Y=H.getTexture(y)}return f={OVERRIDE_ALPHA:!!U},K={type:"bokeh",tColor:K.texture,tDepth:Y,aspect:B/b,maxblur:this.maxblur,defines:f},a?(f.USE_DEPTH=!0,H.isOrtho()&&(f.USE_ORTHO_CAMERA=!0),H.isFloatDepthTexture(Y)&&(f.USE_FLOAT_TEXTURE=!0),A.assign(K,{near:H.getNear(),far:H.getFar(),focus:P,range:o,density:x})):A.assign(K,{aperture:this.aperture,useG2d:q,threshold:p}),H._postProcessing.blitScreen(h,B,b,K),h}}}},M.graph3d.PostProcessing.Custom=function(a){function K(r,K){return(r.priority||0)-(K.priority||0)}var P,H,Y=!1,S=!1;this.serializeProperties={materials:[]},this.resetProperties=function(){var r,K=this.serializeProperties;for(r in K)this[r]=K[r]},this.resetProperties(),A.defineProperties(this,{enable:{get:function(){return Y},set:function(r){!!Y!=!!r&&(Y=r,a.iv())}},materials:{get:function(){return H},set:function(r){(H=r)&&H.sort(K),a.iv()}}}),this.dispose=function(){S=!1,m6(a,P),P=null},this._42=function(r,K){if(Y&&H&&H.length&&(S||(B=a.getGL())&&(P=new Fr.RenderTarget(a,B),S=!0))){for(var B,b,f=K,h=P,U=0;U<H.length;U++)(b=H[U]).image=f.texture,a._postProcessing.blitScreen(h,f.width,f.height,b),delete b.image,b=f,f=h,h=b;return f}}},M.graph3d.PostProcessing.Blur=function(o){var x,T,t,p,q,f,h=this,U=!1,y=!1,k={type:"blurDownSample"},w={type:"blurH"},v={type:"blurV"},K=(this.serializeProperties={value:0,downSample:!1,iterations:1,layer:"main"},this.resetProperties=function(){var r,K=this.serializeProperties;for(r in K)this[r]=K[r]},A.defineProperties(h,{enable:{get:function(){return U},set:function(r){!!U!=!!r&&((U=r)?o.addRenderLayerListener(K,this):o.removeRenderLayerListener(K,this),o.iv())}},downSample:{get:function(){return p},set:function(r){p!==r&&(p=r,o.iv)}},value:{get:function(){return t},set:function(r){t!==r&&(t=r,o.iv())}},iterations:{get:function(){return q},set:function(r){q!==r&&(q=r,o.iv())}},layer:{get:function(){return f},set:function(r){f!==r&&(f=r,o.iv())}}}),this.resetProperties(),function(r){if(U&&r.layer===f&&"post"===r.phase){var K=o.getGL();if(!o._picking&&!o.isReflecting(K)){(r=o._postProcessing.getRenderTarget()).unbind(K);for(var B=0,b=o._glCapabilities.maxAttributes;B<b;B++)K.disableVertexAttribArray(B);h.drawImpl(K,r),r.bind(K),K.useProgram(o._prg)}}});h._42=function(){},h.dispose=function(){y=!1,m6(o,x,T),x=T=null},h.drawImpl=function(r,K,B,b,f){if(y||(H=o.getGL())&&(x=new Fr.RenderTarget(o,H),y=!0)){var h,U=K?(h=K.width,K.height):(h=o._viewport[2],o._viewport[3]);if(h&&U){for(var a,P=o._postProcessing,H=("boolean"!=typeof b&&(b=p),B==H1&&(B=t),f==H1&&(f=q),f=Math.max(1,Math.round(f)),x1.for(r).glState.depth),Y=H.enabled,S=(H.enabled=!1,b?(B/=2,a=[h,U],h/=2,U/=2,T=T||new Fr.RenderTarget(o,r),k.image=K.texture,k.texelSize=[1/a[0],1/a[1]],P.blitScreen(T,h,U,k),K.setSize(r,h,U)):T&&T.setSize(0,0),x.setSize(r,h,U),[]),_=0;_<f;_++)S.push(B),B=Math.max(1,Math.floor(B/2));for(_=0;_<f;_++){var e=S[f-_-1];w.image=(b&&0===_?T:K).texture,w.value=e/h,P.blitScreen(x,null,null,w),b&&_===f-1&&K.setSize(r,a[0],a[1]),v.image=x.texture,v.value=e/U,P.blitScreen(K,null,null,v)}return H.enabled=Y,K}}}},M.graph3d.PostProcessing.Glitch=function(a){var P,B,H,Y,S,_,e,b,o,x=!1,T=!1,t=D.randomFloat,p=D.randomInt,f=0,q={type:"glitch"};function y(){if(o&&b){H=Date.now(),B=1e3*t(b[Y=0],b[1]),S=[];for(var r=1,K=o.length;r<K;r+=2)S.push((1<r?S[S.length-1]:0)+B*o[r]/f)}}function k(){a.redraw()}this.serializeProperties={onlyReflector:!1,period:[2,3],intensity:[3,.3,1,.1,0,.4]},this.resetProperties=function(){var r,K=this.serializeProperties;for(r in K)this[r]=K[r]},A.defineProperties(this,{enable:{get:function(){return x},set:function(r){!!x!=!!r&&((x=r)&&y(),a.iv())}},onlyReflector:{get:function(){return e},set:function(r){!!e!=!!r&&(e=r,a.iv())}},period:{get:function(){return b},set:function(r){b=r,y(),a.iv()}},intensity:{get:function(){return o},set:function(r){f=0;for(var K=1,B=(o=r=r||[1,1]).length;K<B;K+=2)f+=r[K];y(),a.iv()}}}),this.resetProperties(),this.dispose=function(){T=!1,m6(a,P),P=null},this._42=function(r,K){if(x&&(T||function(){var r=a.getGL();if(r){P=new Fr.RenderTarget(a,r);for(var K=RN(64,64),B=K.getImageData(0,0,64,64),b=B.data,f=0;f<4096;f++)b[3*f+0]=p(256),b[3*f+1]=p(256),b[3*f+2]=p(256),b[3*f+3]=p(256);return K.putImageData(B,0,0),_=d6(a,r,VN),T=!0}}())&&!!a.isReflecting(r)==!!e){var B,b,f,h=K.width,U=K.height;if(h&&U)return B=a._postProcessing,b=(r=x1.for(r).glState.depth).enabled,r.enabled=!1,Date.now()-H>S[Y]&&++Y>=S.length&&y(),f=o[2*Y],q.seed=Math.random(),q.byp=f?0:1,q.tDisp=_,f&&(q.angle=t(-Math.PI,Math.PI),q.distortion_x=t(0,1),q.distortion_y=t(0,1),q.amount=Math.random()/30*f,q.seed_x=t(-1,1)*f,q.seed_y=t(-1,1)*f),q.image=K.texture,B.blitScreen(P,h,U,q),r.enabled=b,requestAnimationFrame(k),P}}},M.graph3d.PostProcessing.Fxaa=function(K){var B=!1;A.defineProperties(this,{enable:{get:function(){return B},set:function(r){!!B!=!!r&&(B=r,K.iv())}}}),this._42=function(){}},qY(Y1,{accordionViewExpandIcon:rY(Ls),accordionViewCollapseIcon:rY(Ls,!0),accordionViewLabelColor:A1,accordionViewLabelFont:B9,accordionViewTitleBackground:Is,accordionViewSelectBackground:Ms,accordionViewSelectWidth:3,accordionViewSeparatorColor:P1,splitViewDividerSize:1,splitViewDividerBackground:Is,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:ou,rect:[2,2,12,12],background:Ls}]},propertyViewLabelColor:K9,propertyViewLabelSelectColor:A1,propertyViewLabelFont:B9,propertyViewExpandIcon:rY(Fs),propertyViewCollapseIcon:rY(Fs,!0),propertyViewBackground:Js,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:ns,propertyViewColumnLineColor:ns,propertyViewSelectBackground:Ms,listViewLabelColor:K9,listViewLabelSelectColor:A1,listViewLabelFont:B9,listViewRowLineVisible:!1,listViewRowLineColor:ns,listViewSelectBackground:Ms,treeViewLabelColor:K9,treeViewLabelSelectColor:A1,treeViewLabelFont:B9,treeViewExpandIcon:rY(ss),treeViewCollapseIcon:rY(ss,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:ns,treeViewSelectBackground:Ms,treeViewDoubleClickToToggle:!0,tableViewLabelColor:K9,tableViewLabelSelectColor:A1,tableViewLabelFont:B9,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:ns,tableViewColumnLineColor:ns,tableViewSelectBackground:Ms,treeTableViewLabelColor:K9,treeTableViewLabelSelectColor:A1,treeTableViewLabelFont:B9,treeTableViewExpandIcon:rY(ss),treeTableViewCollapseIcon:rY(ss,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:ns,treeTableViewColumnLineColor:ns,treeTableViewSelectBackground:Ms,tableHeaderLabelColor:K9,tableHeaderLabelFont:B9,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:ds,tableHeaderBackground:Js,tableHeaderMoveBackground:x,tableHeaderInsertColor:Ms,tableHeaderSortDescIcon:KY(Fs,!0),tableHeaderSortAscIcon:KY(Fs),tabViewTabGap:1,tabViewLabelColor:A1,tabViewLabelFont:B9,tabViewTabBackground:Is,tabViewSelectWidth:3,tabViewSelectBackground:Ms,tabViewMoveBackground:x,tabViewInsertColor:Ms,toolbarLabelColor:K9,toolbarLabelSelectColor:A1,toolbarLabelFont:B9,toolbarBackground:Js,toolbarSelectBackground:Ms,toolbarItemGap:8,toolbarSeparatorColor:Gs},!0),{translateX:1,sortColumn:1}),IB={sortable:1,sortOrder:1,sortFunc:1},LB={focusData:1},JB={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},FB={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},GB=function(r,K){K.add(r),r.hasChildren()&&r.eachChild(function(r){GB(r,K)})},dB=function(r,K,B,b,f,h,U,a,P,H,Y){var S,_,e,o,x,T,t=B.getValueType(H),p=B.getAlign(H);if(B.getEnumValues(H))return S=B.toEnumLabel(K,H),_=b9||0,e=0,o=h,x=Y1.getTextSize(b,S).width,(T=g(B.toEnumIcon(K,H)))&&(e=h+b9/2,"center"===p?e+=(a-(_+x))/2:"right"===p&&(e=e+a-(_+x)),t9(r,T,e,U+P/2,H,Y),o=e+b9/2),void(S!=H1&&(T?I9(r,S,b,f,o,U,a-(o-h),P):I9(r,S,b,f,h,U,a,P,p)));if((K=B.formatValue(K))!=H1){if(t!==Zn)return t===Dn||!t&&aY(K)?(T=g(K?Nu:uu),void t9(r,T,h+a/2,U+P/2,H,Y)):void I9(r,K,b,f,h,U,a,P,p);QN(r,h,U,a,P,K)}},sB=function(B,b){var f=b.view,h=SN(B),U=b.column||b.property;f.getDataModel().beginTransaction(),(b.editor=B).info=b,f.setCurrentEditor(B),f.getView().insertBefore(h,f._79O),L(B,b.editorRect),B.setFocus?B.setFocus():YN(B),B.commitValue=function(r,K){B._17Q&&(B=B._17Q),K||f.setValue(b.data,U,B.getValue?B.getValue():B.value),B.close&&B.close(),O9(h)},U.onEditorCreated&&U.onEditorCreated(b)},nB=function(r,K,B,b,f){var h=Q9(r,B),U=K.value,a=K.view,B=f.getValueType(K.data);return h.onblur=h.onchange=function(r){a.endEditing()},"input"===r?((U=f.formatValue(U))!=H1&&(h.value=U),h.onkeydown=function(r){dN(r)?a.endEditing():sN(r)&&a.endEditing(!0)},B!==gn&&B!==Wn||r1(h,hK,Y1.numberListener)):r===Qu&&b.forEach(function(r){var K=_.createElement("option");K.innerHTML=f.toEnumLabel(r),K.value=r,f.isEnumEqual(U,r)&&(K.selected=!0),gY(h,K)}),sB(h,K),h},AB=M.widget={},K=function(r,K,B){BA("ht.widget."+r,K,B)},VB=(qY(DH,{ms_value:function(r,K){r.getValue=function(r){var K=(r=this.getItemById(r)).element;return _1(K)?K:K?K.getValue?K.getValue():K.value:r.selected},r.setValue=function(r,K){var B;(r=this.getItemById(r))&&((B=r.element)&&!_1(B)?B.setValue?B.setValue(K):B.value=K:(aY(K)?r.selected=K:r.element=K,this.iv()))},r.v=function(r,K){if(2===arguments.length)this.setValue(r,K);else{if(!PY(r))return this.getValue(r);for(var B in r)this.setValue(B,r[B])}return this}},_46o:function(r,K){r._icon=H1,r._accessType=H1,r._valueType=H1,r._editable=!1,r._batchEditable=!0,r._align=ru,r._nullable=!0,r._emptiable=!1,r.setParent=CK,r.formatValue=function(r){var K=this._valueType;return this.getEnumValues()?this.toEnumLabel(r):K===Dn?!!r:r!=H1&&K===gn?v1(r):r},r.setEnum=function(r,K,B,b,f,h,U){r&&!YY(r)&&r.values&&(b=r.editable,B=r.icons,K=r.labels,f=r.strict,h=r.maxHeight,U=r.dropDownWidth,r=r.values),SY(r)&&(r=r._as),SY(K)&&(K=K._as),SY(B)&&(B=B._as),this._enumValues=r,this._enumLabels=K,this._enumIcons=B,this._enumEditable=b,this._enumStrict=f==H1||f,this._enumMaxHeight=h,this._enumDropDownWidth=U,r&&r.length&&UY(r[0])&&(this._valueType=Wn),this.fp("enum",!1,!0)},r.getEnumDropDownWidth=function(){return this._enumDropDownWidth},r.getEnumMaxHeight=function(){return this._enumMaxHeight},r.isEnumEditable=function(){return this._enumEditable},r.getEnumValues=function(){return this._enumValues},r.getEnumLabels=function(){return this._enumLabels},r.getEnumIcons=function(){return this._enumIcons},r.isEnumStrict=function(){return this._enumStrict},r.isEnumEqual=function(r,K){return this._enumStrict?r===K:r==K},r.toEnumLabel=function(r,K){var B=this.getEnumValues(K),b=this.getEnumLabels(K);if(B&&b)for(var f=0;f<B.length;f++)if(this.isEnumEqual(r,B[f]))return b[f];return r},r.toEnumIcon=function(r,K){var B=this.getEnumValues(K),b=this.getEnumIcons(K);if(B&&b)for(var f=0;f<B.length;f++)if(this.isEnumEqual(r,B[f]))return b[f];return P1}},_45o:function(r,K){r._87o=function(r,K,B,b,f,h){var U,a;r&&(U=this._90I,a=CY(1),this._columnLineVisible&&--f,this._rowLineVisible&&--h,f<=0||h<=0||((U=this._90I?U:this._90I={})[K]||(U[K]=new $),L(a,this.tx()+B,this.ty()+b,f,h),gY(a,r),this._view.insertBefore(a,this._79O),r.onParentAdded&&r.onParentAdded(a),U[K].add(a)))},r._76o=function(){var r=this._90I;if(r){for(var K in r)r[K].each(function(r){O9(r)});delete this._90I}},r._77o=function(r){var K;this._90I&&(K=this._90I[r])&&(K.each(function(r){O9(r)}),delete this._90I[r])}},_47o:function(r,K){r.getValue=function(r,K){return K.getValue?K.getValue(r,K,this):FY(r,K.getAccessType(),K.getName())},r.setValue=function(r,K,B){var b,f,h,U;K.isEmptiable(r)||""!==B||(B=P1),!K.isNullable(r)&&B==H1||(b=this,f=K.getName(r),h=K.getAccessType(r),(U=K.getValueType(r))===gn&&_1(B)?B=n1(B):U===Wn&&_1(B)?B=parseFloat(B):U===Dn&&_1(B)&&(B="true"===B),b._batchEditable&&K._batchEditable&&b.isSelected(r)?b.sm().each(function(r){K.setValue?K.setValue(r,K,B,b):GY(r,h,f,B)}):K.setValue?K.setValue(r,K,B,b):GY(r,h,f,B))},r.setCurrentEditor=function(r){this.endEditing(),this._currentEditor=r,this.redraw()},r.isEditing=function(r,K){var B=this._currentEditor;return!!B&&(!K||!!(B=B.info)&&(B.column||B.property)===K&&B.data===r)},r.endEditing=function(r){var K=this._currentEditor;K&&(delete this._currentEditor,K.commitValue&&K.commitValue(K.info,r),this.redraw(),this.getDataModel().endTransaction())},r.beginEditing=function(r){this.endEditing();var B=this,b=r.column||r.property;if(b.beginEditing)b.beginEditing(r);else{var K,f,h=r.data,U=r.value,a=B.getSelectBackground(h),P=b.getEnumValues(h),H=b.getSlider(h),Y=b.getColorPicker(h);if(H)return(K=o9(AB.Slider,H)).setValue(U),K.getView().onblur=function(r){B.endEditing()},K.isInstant()&&(K.onValueChanged=function(){B.setValue(h,b,K.getValue())}),void sB(K,r);if(Y||b.getValueType(h)===Zn)return(H=o9(AB.ColorPicker,Y)).setValue(U),f=H.onClosed,H.onClosed=function(){B.endEditing(),f&&f.call(this)},H.isInstant()&&(H.onValueChanged=function(r,K){B.setValue(h,b,K)}),sB(H,r),void H.open();if(P)AB.ComboBox?((Y=new AB.ComboBox).setValue(U),Y.setValues(P),Y.setLabels(b.getEnumLabels(h)),Y.setIcons(b.getEnumIcons(h)),Y.setEditable(b.isEnumEditable(h)),Y.setStrict(b.isEnumStrict(h)),Y.setMaxHeight(b.getEnumMaxHeight(h)),Y.setDropDownWidth(b.getEnumDropDownWidth(h)),Y.onClosed=function(){B.endEditing()},sB(Y,r),Y.open()):nB(Qu,r,a,P,b);else{if(b.getValueType(h)!==Dn&&!aY(U))return b.getItemEditor(h)?(((Y=(H=new(z9(b.getItemEditor(h)))(h,b,B,r)).getView())._17Q=H).setValue(U),iY(Y),sB(Y,r),void(H.editBeginning&&H.editBeginning())):void nB("input",r,a,H1,b);B.setValue(h,b,!U)}}}},_44o:function(r,K){r.init=function(r){var K=this,B=K.th=new OB(r),b=K._view=lY(1,K);K.tv=K._tableView=r,gY(b,B.getView()),gY(b,r.getView()),B.mp(function(r){r.property===vu&&K.iv()}),K.iv()},r.getTableView=function(){return this.tv},r.getTableHeader=function(){return this.th},r.getDataModel=function(){return this.tv.dm()},r.getColumnModel=function(){return this.tv.getColumnModel()},r.setColumns=function(r){this.tv.setColumns(r)},r.addColumns=function(r){this.tv.addColumns(r)},r.endEditing=function(){this.tv.endEditing()},r.validateImpl=function(){var r=this.th,K=rN(r),B={x:0,y:0,width:this.getWidth(),height:K};L(r,B),B.y=K,B.height=B1(0,this.getHeight()-K),L(this.tv,B)}},ms_vs:function(r,K){r._41o=function(){return this._29I.height<this._59I},r._43o=function(){var r=this;r._41o()&&(r._58I||(R1(function(){r._94O()},U9),r.iv()),r._58I=new Date)},r._94O=function(){var r=this;r._58I&&((new Date).getTime()-r._58I.getTime()>=U9?(delete r._58I,r.iv()):R1(function(){r._94O()},U9))},r._93I=function(){var r,K,B,b,f,h,U,a=this,P=a._27I;a._58I||!a._autoHideScrollBar?(P||gY(a._79O,P=a._27I=CY()),r=(b=a._29I).height,K=a._59I,B=a.getScrollBarSize(),b=b.width-B-2,f=r*(-a.ty()/K),h=r*(r/K),U=P.style,r<K?(h<a9&&(r<(f=(f=f+h/2-a9/2)<0?0:f)+a9&&(f=r-a9),h=a9),U.visibility=$u,U.background=a.getScrollBarColor(),U.borderRadius=B/2+Su,L(P,b,f,B,h)):U.visibility=Wu):P&&(P.style.visibility=Wu)}},ms_hs:function(r,K){r._40o=function(){return this._29I.width<this._91I},r._42o=function(){var r=this;r._40o()&&(r._95O||(R1(function(){r._94I()},U9),r.iv()),r._95O=new Date)},r._94I=function(){var r=this;r._95O&&((new Date).getTime()-r._95O.getTime()>=U9?(delete r._95O,r.iv()):R1(function(){r._94I()},U9))},r._92I=function(){var r,K,B,b,f,h,U,a=this,P=a._28I;a._95O||!a._autoHideScrollBar?(P||gY(a._79O,P=a._28I=CY()),r=(b=a._29I).width,K=a._91I,B=a.getScrollBarSize(),b=b.height-B-2,f=r*(-a.tx()/K),h=r*(r/K),U=P.style,r<K?(h<a9&&(r<(f=(f=f+h/2-a9/2)<0?0:f)+a9&&(f=r-a9),h=a9),U.visibility=$u,U.background=a.getScrollBarColor(),U.borderRadius=B/2+Su,L(P,f,b,h,B)):U.visibility=Wu):P&&(P.style.visibility=Wu)}}}),g1(Nu,QK(16,16,[{type:R,rect:[1,1,14,14],background:Ms},{type:eu,rect:[1,1,14,14],width:1,color:As},{type:tu,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),g1(uu,QK(16,16,{type:eu,rect:[1,1,14,14],width:1,color:As})),g1(ju,QK(16,16,[{type:xu,rect:[2,2,12,12],borderWidth:1,borderColor:As,background:"#FFF"},{type:xu,rect:[4,4,8,8],background:Ms}])),g1(Iu,QK(16,16,{type:xu,rect:[2,2,12,12],borderWidth:1,borderColor:As})),DH._15Q=function(r,K){r._29I=DK,r._59I=0,r._91I=0,r._5o=function(r){var K=this;K._30I=new $,K._rows=new $,K._rowMap={},K._31I=0,K._14I=0,K._view=lY(1,K),K._canvas=mY(K._view),gY(K._view,K._79O=CY()),K.dm(r||new HP)},r.getCheckIcon=function(r){var K=this.sm(),r=K.co(r);return K.sg()?g(r?ju:Iu):g(r?Nu:uu)},r.checkData=function(r){var K=this.sm(),B=K.co(r);K.sg()&&B||(this._32o=1,B?K.rs(r):K.as(r),delete this._32o)},r.getDataAt=function(r){r.target&&(r=this.lp(r));var r=z1(r.y/this._rowHeight),K=this._rows;return r<0||r>=K.size()?H1:K.get(r)},r.onDataDoubleClicked=function(r,K){},r.onDataClicked=function(r,K){},r.adjustTranslateX=function(r){return 0},r.adjustTranslateY=function(r){var K=this.getHeight()-this._59I;return 0<(r=r<K?K:r)?0:v1(r)},r.onPropertyChanged=function(r){r=r.property,JB[r]?this.ivm():LB[r]||this.redraw(),r===vn?this._42o():r===zn&&this._43o()},r.getLabel=function(r){return r.toLabel()},r.getLabelFont=function(r){return this._labelFont},r.getLabelColor=function(r){if(this.isCheckMode()){if(this._focusData===r)return this._labelSelectColor}else if(this.isSelected(r))return this._labelSelectColor;return this._labelColor},r.getStartRowIndex=function(){return this._31I},r.getEndRowIndex=function(){return this._14I},r.getRowDatas=function(){return this._rows},r.getRowIndex=function(r){return this._rowMap[r._id]},r.getRowSize=function(){return this._rows.size()},r.getViewRect=function(){return v9(this._29I)},r.isVisible=function(r){return!this._visibleFunc||this._visibleFunc(r)},r.getCurrentSortFunc=function(){return this._sortFunc},r.setDataModel=function(r){var K=this,B=K._dataModel,b=K._selectionModel;B!==r&&(B&&(B.umm(K.handleDataModelChange,K),B.umd(K.handleDataPropertyChange,K),B.umh(K.handleHierarchyChange,K),b||B.sm().ums(K.handleSelectionChange,K)),(K._dataModel=r).mm(K.handleDataModelChange,K),r.md(K.handleDataPropertyChange,K),r.mh(K.handleHierarchyChange,K),b?b._21I(r):r.sm().ms(K.handleSelectionChange,K),K.fp("dataModel",B,r))},r.validateModel=function(){var r=this,K=(r._rows.clear(),r._rowMap={},r.buildChildren(r._dataModel._roots),r._rows=r._rows.toList(r.isVisible,r)),B=0,b=r.getCurrentSortFunc(),f=K.size();for(b&&K.sort(b);B<f;B++)r._rowMap[K.get(B)._id]=B},r.buildChildren=function(r){var K=this;r.each(function(r){K._rows.add(r),K.buildChildren(r._children)})},r.handleDataModelChange=function(r){this.ivm()},r.handleDataPropertyChange=function(r){"parent"===r.property?this.ivm():this.invalidateData(r.data)},r.handleHierarchyChange=function(r){this.ivm()},r.handleSelectionChange=function(r){r.datas.each(this.invalidateData,this),this.onSelectionChanged(r)},r.onSelectionChanged=function(r){var K=this.sm();!this.isAutoMakeVisible()||1!==K.size()||"set"!==r.kind&&"append"!==r.kind||this._32o||this.makeVisible(K.ld())},r.handleBackgroundClick=function(r){J9(r)&&!this.isCheckMode()&&this.sm().cs()},r.makeVisible=function(r){r&&(this._23I=r,this.iv())},r.scrollToIndex=function(r){var K=this._29I,B=K.height,b=this._rowHeight,f=b*r;0<=r&&r<this._rows.size()&&0<B&&(f+b>K.y+B?this.ty(-f+B-b):f<K.y&&this.ty(-f))},r.autoScroll=function(r,K){var B=this,b=B._rowHeight,f=b,h=b/4,U=B._29I,r=B.lp(r),a={x:B.tx(),y:B.ty()};return 0<b&&U&&(r.x-U.x<f?B.translate(h,0):U.x+U.width-r.x<f&&B.translate(-h,0),r.y-U.y<f?B.translate(0,h):U.y+U.height-r.y<f&&B.translate(0,-h)),a.x=B.tx()-a.x,a.y=B.ty()-a.y,K&&(K.x+=a.x,K.y+=a.y),a},r.getTopRowOrderSelection=function(){var r=this.sm().getTopSelection(),K={},B=new $;return r.each(function(r){K[r._id]=r}),this._rows.each(function(r){K[r._id]&&B.add(r)}),B},r.getRowOrderSelection=function(){var K=new $;return this._rows.each(function(r){this.isSelected(r)&&K.add(r)},this),K},r.ivm=function(){this.invalidateModel()},r.invalidateModel=function(){this._96I||(this._96I=1,this._32I=1,delete this._24I),this.iv()},r.redraw=function(){this._32I||(this._32I=1,delete this._24I,this.iv())},r.invalidateData=function(r){i1?this.redraw():this._32I||(this._24I||(this._24I={}),this._24I[r._id]=r,this.iv())},r.getFocusData=function(){return this._focusData},r.setFocusDataById=function(r){this.setFocusData(this.dm().getDataById(r))},r.setFocusData=function(r){var K=this._focusData;K!==r&&(this._focusData=r,this.fp("focusData",K,r),K&&this.invalidateData(K),r&&(this.invalidateData(r),this.isAutoMakeVisible()&&this.makeVisible(r)))},r.drawRowBackground=function(r,K,B,b,f,h,U){var a=this.isCheckMode();(K===this._focusData&&a||B&&!a)&&QN(r,b,f,h,U,this.getSelectBackground(K))},r.drawData=function(r,K,B){var b=this._rowHeight,f=b*B,h=(U=this._29I).x,U=U.width;r.save(),r.beginPath(),r.rect(h,f,U,b),r.clip(),this._87o(this.drawRow(r,K,this.isSelected(K),h,f,U,b),B,h,f,U,b),r.restore(),this._rowLineVisible&&QN(r,h,f+b-1,U,1,this._rowLineColor)},r._12I=function(r){var K=this._31I,B=(h=this._29I).x,b=h.y,f=h.width,h=h.height;for(r.beginPath(),r.rect(B,b,f,h),r.clip(),r.clearRect(B,b,f,h),this._76o(),this._93db(r);K<this._14I;K++)this.drawData(r,this._rows.get(K),K);this._92db(r)},r._13I=function(K){for(var r,B=this,b=B._rowHeight,f=B._29I,h=f.x,U=f.width,a=B._31I,P=B._30I;a<B._14I;a++)r=B._rows.get(a),B._24I[r._id]&&P.add({data:r,index:a});P.isEmpty()||(K.beginPath(),P.each(function(r){K.rect(h,r.index*b,U,b)}),K.clip(),P.each(function(r){K.clearRect(h,r.index*b,U,b)}),P.each(function(r){B._77o(r.index)}),B._93db(K),P.each(function(r){B.drawData(K,r.data,r.index)}),B._92db(K),P.clear())},r.preValidateModel=function(){this.endEditing&&this.endEditing()},r.validateImpl=function(){var r=this,K=r._canvas,B=r.getWidth(),b=r.getHeight(),f=r._rowHeight,h=r._32I,U=(B===K.clientWidth&&b===K.clientHeight||(ZY(K,B,b),h=1),r._96I&&(r.preValidateModel(),r.validateModel()),r._29I),B={x:-r.tx(),y:-r.ty(),width:B,height:b},b=r._rows.size(),K=bN(K),a=r._23I,U=(h||uY(B,U)||(h=1),r._29I=B,r._59I=b*f,r._31I=z1(B.y/f),r._14I=N1((B.y+B.height)/f),r._31I<0&&(r._31I=0),r._14I>b&&(r._14I=b),r._99I&&h&&r._99I(),r.tx()),B=r.ty();(r._40o()||r._41o())&&(r._59I+=r.getScrollBarSize(),r._99I&&h&&(r._91I+=r.getScrollBarSize())),fN(K,U,B,1),h?r._12I(K):r._24I&&r._13I(K),r._93I(),r._92I(),K.restore(),r._32I=r._24I=r._96I=H1,a&&(r.scrollToIndex(r.getRowIndex(a)),delete r._23I),r.tx(r.tx()),r.ty(r.ty())},r.canHandleSelectMode=function(r,K){return!0},r.isDraggable=function(r){return!0}},DH._48o=function(r,K){r._rootVisible=!0,r._rootData=H1,r._35o=function(){this._expandMap={},this._levelMap={}},r.validateModel=function(){var r=this,K=r._rootData;r._rows.clear(),r._levelMap={},r._rowMap={},r._currentLevel=0,K?r._rootVisible?r.isVisible(K)&&r.buildData(K):r.buildChildren(K):r.buildChildren(),delete r._currentLevel},r.buildData=function(r){var K=r._id,B=this._rows;this._rowMap[K]=B.size(),B.add(r),this._levelMap[K]=this._currentLevel,this.isExpanded(r)&&(this._currentLevel++,this.buildChildren(r),this._currentLevel--)},r.buildChildren=function(r){var K=this,B=r?r._children:K._dataModel._roots,b=K.getCurrentSortFunc();b&&K.isChildrenSortable(r)?B.toList(K.isVisible,K).sort(b).each(K.buildData,K):B.each(function(r){K.isVisible(r)&&K.buildData(r)})},r.getLevel=function(r){return this._levelMap[r._id]},r.getToggleIcon=function(r){var K=this._loader,B=this._collapseIcon;return K&&!K.isLoaded(r)?B:r.hasChildren()?this.isExpanded(r)?this._expandIcon:B:H1},r.isCheckMode=function(){return this._checkMode!=H1},r.isChildrenSortable=function(r){return!0},r.handleDataModelChange=function(r){r.kind===yu?delete this._expandMap[r.data._id]:r.kind===ku&&(this._expandMap={}),this.ivm()},r.toggle=function(r){this.isExpanded(r)?this.collapse(r):this.expand(r)},r.isExpanded=function(r){return 1===this._expandMap[r._id]},r.expand=function(r){var K=this._loader;this.isExpanded(r)||(K&&!K.isLoaded(r)&&K.load(r),this._expandMap[r._id]=1,this.ivm(),this.onExpanded(r))},r.onExpanded=function(r){},r.collapse=function(r){this.isExpanded(r)&&(delete this._expandMap[r._id],this.ivm(),this.onCollapsed(r))},r.onCollapsed=function(r){},r.expandAll=function(r){var K;r?(this.expand(r),r.eachChild(function(r){this.expandAll(r)},this)):((K=this)._dataModel.each(function(r){r.hasChildren()&&(K._expandMap[r._id]=1)}),K.ivm())},r.collapseAll=function(){this._expandMap={},this.ivm()},r.makeVisible=function(r){if(r&&(!this._rootData||r.isDescendantOf(this._rootData))){for(var K=r._parent;K;)this.expand(K),K=K._parent;this._23I=r,this.iv()}},r.checkData=function(r){var K,B=this._checkMode,b=this.sm(),f=b.co(r);if(!b.sg()||!f){if(this._32o=1,B===X1)f?b.rs(r):b.as(r);else if(B===wn)(K=new $(r)).addAll(r._children);else if("descendant"===B)K=new $,GB(r,K);else if("all"===B&&(K=new $,GB(r,K),!f))for(var h=r._parent;h;)K.add(h),h=h._parent;K&&(f?b.rs(K):b.as(K)),delete this._32o}},r.drawTree=function(r,K,B,b,f,h,U){var a=this,P=a._indent,H=a._levelMap[K._id],Y=a.getIconWidth(K),S=g(a.getToggleIcon(K));S?(t9(r,S,(b+=P*H)+P/2,f+U/2,K,a),b+=P):b+=P*(H+1),a._checkMode&&(t9(r,a.getCheckIcon(K),b+P/2,f+U/2,K,a),b+=P),a.drawIcon(r,K,b,f,Y,U),a.drawLabel(r,K,b+Y,f,U)}},DH._14Q=function(r,K){r.getIcon=function(r){return r.getIcon()},r.getIconWidth=function(r){return this.getIcon(r)?this._indent:0},r.drawIcon=function(r,K,B,b,f,h){var U,a;f&&(U=this.getBodyColor(K),(a=g(this.getIcon(K),U))&&(h-=this.isRowLineVisible()?1:0,p9(r,a,Mn,B,b,f,h,K,this,U),as(r,this.getBorderColor(K),B,b,f,h)))},r.drawLabel=function(r,K,B,b,f){I9(r,this.getLabel(K),this.getLabelFont(K),this.getLabelColor(K),B,b,0,f)}},DH._50o=function(r,K){r._98I=function(){var r=this._39o=new HP;this._60I=new $,r.mm(this._17o,this),r.md(this._18o,this),r.mh(this._19o,this)},r.setColumns=function(r){this._39o.clear(),this.addColumns(r)},r.addColumns=function(r){var B=this._39o;r.forEach(function(r){var K;r instanceof MB||(K=z9(r.className),r=o9(K||MB,r)),B.add(r)})},r.onColumnClicked=function(r){},r.onCheckColumnClicked=function(r){},r._3Q=function(r){for(var K,B=0,b=this._60I,f=b.size();B<f;B++)if((K=b.get(B)).column===r)return K;return H1},r.getColumnAt=function(r){return(r=this._4Q(r))?r.column:H1},r._4Q=function(r){for(var K=(r.target?this.lp(r):r).x,B=this._60I,b=0;b<B.size();b++){var f=B.get(b),h=f.startX;if(h<=K&&K<h+f.column.getWidth())return f}return H1},r.getToolTip=function(r){var K=this.getDataAt(r),r=this.getColumnAt(r);return K&&r?r.getToolTip(K,this):H1},r.adjustTranslateX=function(r){var K=this.getWidth()-this._91I;return 0<(r=r<K?K:r)?0:v1(r)},r._99I=function(){var B=this,b=B._29I,f=B._60I;f.clear(),B._91I=0,B._39o._roots.each(function(r){var K;r.isVisible()&&(K=B._91I+r.getWidth(),B._91I<=b.x+b.width&&K>=b.x&&f.add({column:r,startX:B._91I}),B._91I=K)})},r.drawData=function(b,f,h){var U=this,a=U._rowHeight,P=a*h,H=U.isSelected(f),r=(K=U._29I).x,K=K.width;U.drawRowBackground(b,f,H,r,P,K,a),U._60I.each(function(r){var K=r.column,r=r.startX,B=K.getWidth();0<B&&!U.isEditing(f,K)&&(b.save(),b.beginPath(),b.rect(r,P,B,a),b.clip(),U._87o(U.drawCell(b,f,H,K,r,P,B,a),h,r,P,B,a),U._columnLineVisible&&QN(b,r+B-1,P,1,a,U._columnLineColor),b.restore())}),U._rowLineVisible&&QN(b,r,P+a-1,K,1,U._rowLineColor)},r.drawCell=function(r,K,B,b,f,h,U,a){if(b.drawCell)return b.drawCell(r,K,B,b,f,h,U,a,this);B=this.getValue(K,b),dB(r,B,b,this.getLabelFont(K,b,B),this.getLabelColor(K,b,B),f,h,U,a,K,this)},r.getColumnModel=function(){return this._39o},r._17o=function(r){this.redraw()},r._18o=function(r){r.data===this._sortColumn&&IB[r.property]?this.ivm():(this._42o(),this.redraw())},r._19o=function(r){this.redraw()},r.getCurrentSortFunc=function(){var B,b,f=this,h=f._sortColumn;return h&&h.isSortable()?(b=h.getSortFunc(),B=pn===h.getSortOrder()?1:-1,b=b||w9,function(r,K){return b.call(f,f.getValue(r,h),f.getValue(K,h),r,K)*B}):f._sortFunc},r.isCellEditable=function(r,K,B){return!(!K.isEditable()||!this.isEditable())&&(!K.isCellEditable||K.isCellEditable(r,K,B,this))},r._37O=function(r,K){if(J9(K))for(var B=this,b=B.lp(K),f=B._60I,h=B._rowHeight,U=B._29I,a=U.x,P=U.y,H=U.width,Y=U.height,S=0;S<f.size();S++){var _,e,o=f.get(S),x=o.startX,T=(o=o.column).getWidth();if(o!==B._31o&&o!==B._4o&&b.x>=x&&b.x<x+T&&B.isCellEditable(r,o,K))return T={x:(x={x:x,y:B.getRowIndex(r)*h,width:T,height:h}).x+B.tx(),y:x.y+B.ty(),width:x.width,height:x.height},e=_=0,x.x<a?_=x.x-a:a+H<x.x+x.width&&(_=x.x+x.width-a-H),_&&(B.tx(B.tx()-_),T.x-=_),x.y<P?e=x.y-P:P+Y<x.y+h&&(e=x.y+h-P-Y),e&&(B.ty(B.ty()-e),T.y-=e),void B.beginEditing({data:r,column:o,value:B.getValue(r,o),event:K,rect:x,editorRect:T,view:B})}}},AB.BaseItemEditor=function(r,K,B,b){this._data=r,this._column=K,this._master=B,this._editInfo=b},K("BaseItemEditor",A,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}}),M.Tab=function(){vY(VB,this)}),MB=(Cs("Tab",PP,{ms_ac:["view","closable","disabled","visible"],_icon:H1,_closable:!1,_disabled:!1,_visible:!0,setParent:CK}),M.Column=function(){vY(MB,this)}),RB=(Cs("Column",PP,{_46o:1,ms_ac:["accessType","valueType",$u,xn,Tn,wu,"align",Zn,"sortOrder",on,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:pn,_sortFunc:H1,_sortable:!0,_clickable:!0,setWidth:function(r){var K=this._width;this._width=r=r<16?16:r,this.fp(wu,K,r)},getToolTip:function(r,K){return this.formatValue(K.getValue(r,this))}}),M.Property=function(){vY(RB,this)}),lB=(Cs("Property",PP,{_46o:1,ms_ac:["accessType","valueType",xn,Tn,"categoryName",Zn,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:H1,getToolTip:function(r,K,B){return K?this.formatValue(B.getValue(r,this)):B.getPropertyName(this)}}),AB.AccordionView=function(){this._20o={},this._21o=new $,this._10o=H1,this._9o=H1,this._11o=H1,this._view=lY(0,this),this.iv()},K("AccordionView",A,{ms_v:1,ms_fire:1,ms_ac:[Sn,_n,"titleHeight",Ru,Mu,"titleBackground","selectWidth",V1,"orientation","separatorColor"],_expandIcon:Y1.accordionViewExpandIcon,_collapseIcon:Y1.accordionViewCollapseIcon,_titleHeight:h9,_labelColor:Y1.accordionViewLabelColor,_labelFont:Y1.accordionViewLabelFont,_titleBackground:Y1.accordionViewTitleBackground,_selectBackground:Y1.accordionViewSelectBackground,_selectWidth:Y1.accordionViewSelectWidth,_orientation:"v",_separatorColor:Y1.accordionViewSeparatorColor,onPropertyChanged:function(r){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(K,r,B,b){var f=this,h=CY(),r={content:r,div:h,canvas:mY(h),icon:b};if(f._20o[K])throw K+" already exists";var U=r.downEventFunc=function(r){x9(r)},a=r.upEventFunc=function(r){x9(r),J9(r)&&(f._10o===K?f.collapse():f.expand(K))};[BK,Qn].forEach(function(r){r1(h,r,U)}),[fK,rK].forEach(function(r){r1(h,r,a)}),h.style.cursor=cn,gY(f._view,h),f._20o[K]=r,f._21o.add(K),B&&f.expand(K),f.iv()},remove:function(r){var K,B=this._20o[r];B&&(K=B.div,O9(K),[BK,Qn].forEach(function(r){K1(K,r,B.downEventFunc)}),[fK,rK].forEach(function(r){K1(K,r,B.upEventFunc)}),delete this._20o[r],this._21o.remove(r),this.iv())},clear:function(){this._21o.toArray().forEach(this.remove,this),this._20o={},this._21o.clear(),this.iv()},isExpanded:function(r){return this._10o===r},expand:function(r){this._20o[r]&&this._10o!==r&&(this._10o=r,this.onExpanded(r),this.iv())},onExpanded:function(r){},collapse:function(){this._10o&&(this.onCollapsed(this._10o),delete this._10o,this.iv())},onCollapsed:function(r){},initCanvas:function(r,K,B){return ZY(r,K,B),r=bN(r),fN(r,0,0,1),r.clearRect(0,0,K,B),r},drawTitle:function(r,K,B,b,f){var h=this,f=g(f.icon),U=h.isExpanded(K),a=h._titleHeight,P=h._titleBackground,H=h._selectWidth,Y=h._separatorColor,S=g(U?h._expandIcon:h._collapseIcon),_=H+4;QN(r,0,0,B,b,P),U&&H&&QN(r,0,0,H,b,h._selectBackground),!U&&h._21o.get(h._21o.size()-1)===K||QN(r,0,b-1,B,1,Y||u9(P)),f&&(t9(r,f,_+DA(f)/2,a/2),_+=DA(f)+2),I9(r,K,h.getLabelFont(K),h.getLabelColor(K),_,0,0,a),S&&t9(r,S,B-DA(S)/2-4,a/2)},validateImpl:function(){var U=this,r=U._view,a=0,P=0,H=U.getWidth(),Y=U.getHeight(),S=U._titleHeight,_=U._21o.size()*S,K=U._11o,B=U._9o,b=(delete U._11o,delete U._9o,U._21o.each(function(r){var K,B,b=U._20o[r],f=b.content,h=U._10o===r;BY(U)?(L(b.div,a,0,S,Y),K=U.initCanvas(b.canvas,S,Y),hN(K,0,Y),UN(K,-F1),U.drawTitle(K,r,Y,S,b),K.restore(),h?(B=B1(0,H-_),f&&(U._11o=f,U._9o=SN(f),L(f,a+S,0,B,Y)),a+=S+B):a+=S):(L(b.div,0,P,H,S),K=U.initCanvas(b.canvas,H,S),U.drawTitle(K,r,H,S,b),K.restore(),h?(B=B1(0,Y-_),f&&(U._11o=f,U._9o=SN(f),L(f,0,P+S,H,B)),P+=S+B):P+=S)}),U._9o);K&&K!==U._11o&&K.endEditing&&K.endEditing(),b&&b!==B&&gY(r,b),B&&B!==b&&O9(B)}}),AB.SplitView=function(r,K,B,b){var f=this,h=f._dividerDiv=CY(),U=f._60O=mY(),a=f._61O=mY(),U=U.style,a=a.style;f._view=lY(1,f),gY(f._view,h),U.msTouchAction=On,U.pointerEvents=On,U.cursor=cn,a.msTouchAction=On,a.pointerEvents=On,a.cursor=cn,r&&f.setLeftView(r),K&&f.setRightView(K),B&&f.setOrientation(B),b!=H1&&f.setPosition(b),f.setStatus(qu),new lB(f)},K("SplitView",A,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:Y1.splitViewDividerSize,_dividerBackground:Y1.splitViewDividerBackground,_dragOpacity:Y1.splitViewDragOpacity,_toggleIcon:Y1.splitViewToggleIcon,onPropertyChanged:function(r){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(r,K){var B=this._position;isNaN(r)||(K||(this._82O=r<0?-1:1<r?1:0),this._position=r,this.fp(yn,B,r))},getLeftView:function(){return this._leftView},setLeftView:function(r){var K,B=this._leftView,b=this._view;this._leftView!==r&&(B&&B!==this._rightView&&(K=SN(B)).parentNode===b&&O9(K),(this._leftView=r)&&(K=SN(r)).parentNode!==b&&b.insertBefore(K,this._dividerDiv),this.fp("leftView",B,r))},getRightView:function(){return this._rightView},setRightView:function(r){var K,B=this._rightView,b=this._view;this._rightView!==r&&(B&&B!==this._leftView&&(K=SN(B)).parentNode===b&&O9(K),(this._rightView=r)&&(K=SN(r)).parentNode!==b&&b.insertBefore(K,this._dividerDiv),this.fp("rightView",B,r))},validateImpl:function(){var r,K,B,b,f=this,h=f._draggable,U=f._position,a=f.getWidth(),P=f.getHeight(),H=f._dividerSize,Y=f._dividerBackground,S=$1?18:8,_=f._dividerDiv,e=f._82O,o=f._60O,x=f._61O,T=f._toggleIcon,t=f._status,p=_.style,q=null,y=$1?20:4,k=T.comps[0],w=(S<=H||0===H?f._coverDiv&&(O9(f._coverDiv),delete f._coverDiv):f._coverDiv||(f._coverDiv=CY(),D1&&(f._coverDiv.style.background=ln),gY(_,f._coverDiv)),f._togglable?o.parentNode||(gY(_,o),gY(_,x)):(O9(o),O9(x)),f._coverDiv),v=f._leftView,z=f._rightView;BY(f)?(a<H&&(H=a),t===qu?1===e?(b=b1(U,a),B=B1(0,a-H-b)):-1===e?(B=b1(-U,a),b=B1(0,a-H-B)):(b=v1((a-H)*U),B=B1(0,a-H-b)):"cl"===t?B=B1(b=0,a-H):"cr"===t&&(b=B1(B=0,a-H)),v&&L(v,0,0,b,P),z&&L(z,b+H,0,B,P),L(_,b,0,H,P),f._22o=b,w&&(L(w,H/2-S/2,0,S,P),w.style.cursor=h?$n:""),_.style.cursor=h?$n:"",B=_.clientHeight/2,b=_.clientWidth,ZY(o,b,b),L(o,0,B-b-y,b,b),q=bN(o),fN(q,0,0,1),k.rotation=-F1,ZA(q,T,0,0,b,b),q.restore(),ZY(x,b,b),L(x,0,B+y,b,b),q=bN(x),fN(q,0,0,1),k.rotation=F1):(P<H&&(H=P),t===qu?1===e?(r=b1(U,P),K=B1(0,P-H-r)):-1===e?(K=b1(-U,P),r=B1(0,P-H-K)):(r=v1((P-H)*U),K=B1(0,P-H-r)):"cl"===t?K=B1(r=0,P-H):"cr"===t&&(r=B1(K=0,P-H)),v&&L(v,0,0,a,r),z&&L(z,0,r+H,a,K),L(_,0,r,a,H),f._22o=r,w&&(L(w,0,H/2-S/2,a,S),w.style.cursor=h?Xn:""),p.cursor=h?Xn:"",B=_.clientWidth/2,b=_.clientHeight,ZY(o,b,b),L(o,B-b-y,0,b,b),q=bN(o),fN(q,0,0,1),k.rotation=0,ZA(q,T,0,0,b,b),q.restore(),ZY(x,b,b),L(x,B+y,0,b,b),q=bN(x),fN(q,0,0,1),k.rotation=F),ZA(q,T,0,0,b,b),q.restore(),p.background=Y}}),function(r){this.sv=r,this.addListeners()}),CB=(BA(lB,A,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(r){var K=this.sv,B=K._dividerDiv,b=K._60O,f=K._61O,h=K._status,U=r.target;U===b?h===qu?K.setStatus("cl"):"cr"===h&&K.setStatus(qu):U===f?h===qu?K.setStatus("cr"):"cl"===h&&K.setStatus(qu):!yN(r)||U!==B&&U!==K._coverDiv||(x9(r),K.isDraggable()&&(K.getLeftView(),K.getRightView(),(b=this.maskDiv=CY()).style.left=0,b.style.top=0,b.style.width=K.getWidth()+"px",b.style.height=K.getHeight()+"px",K.getView().appendChild(b),K.isContinuousLayout()||((f=this.resizeDiv=CY()).style.left=B.style.left,f.style.top=B.style.top,f.style.width=B.style.width,f.style.height=B.style.height,f.style.opacity=K.getDragOpacity(),f.style.background=K.getDividerBackground(),gY(this.getView(),f)),this._lastAbsPosition=K._22o,this._86o=BY(K)?V9(r).x:V9(r).y,c9(this,r)))},handleWindowTouchMove:function(r){yN(r)&&this.update(r,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(r){this.update(r,!0),this.sv.setStatus(qu),this.maskDiv&&O9(this.maskDiv),this.resizeDiv&&O9(this.resizeDiv),this.maskDiv=this.resizeDiv=H1},handle_mousedown:function(r){J9(r)&&this.handle_touchstart(r)},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowMouseUp:function(r){this.handleWindowTouchEnd(r)},update:function(r,K){var B=this.sv,b=BY(B)?B.getWidth():B.getHeight(),f=B._dividerSize,h=this._lastAbsPosition-this._86o;BY(B)?((h=b-f<(h+=V9(r).x)?b-f:h)<0&&(h=0),this.resizeDiv&&(this.resizeDiv.style.left=h+Su)):((h=b-f<(h+=V9(r).y)?b-f:h)<0&&(h=0),this.resizeDiv&&(this.resizeDiv.style.top=h+Su)),K&&b!==f&&(1===B._82O?B.setPosition(h,1):-1===B._82O?B.setPosition(h-b+f,1):B.setPosition(h/(b-f),1))}}),AB.TabView=function(){var r=this,K=r._view=lY(1,r),B=r._91O=CY(1),b=r._tabModel=new HP,f=b.sm(),h=r.invalidate;r._7o=new $,r._canvas=mY(B),gY(K,B),gY(K,r._92O=CY(1)),f.setSelectionMode(c1),f.ms(r.handleSelectionChange,r),b.mm(h,r),b.mh(h,r),b.md(h,r),r._interactor=new CB(r),r.iv()},K("TabView",A,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Ru,Mu,"tabHPadding","tabBackground","selectWidth",V1,"moveBackground","insertColor"],_tabHPadding:0,_tabPosition:Bu,_tabHeight:h9,_tabGap:Y1.tabViewTabGap,_labelColor:Y1.tabViewLabelColor,_labelFont:Y1.tabViewLabelFont,_tabBackground:Y1.tabViewTabBackground,_selectWidth:Y1.tabViewSelectWidth,_selectBackground:Y1.tabViewSelectBackground,_moveBackground:Y1.tabViewMoveBackground,_insertColor:Y1.tabViewInsertColor,_movable:!0,handleSelectionChange:function(){this._selectionChanged=!0,this.invalidate()},getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(r,K,B){var b,f=this._tabModel;return r instanceof VB?(b=r,K&&b.setView(K)):((b=new VB).setName(r),b.setView(K)),f.add(b),B&&f.sm().ss(b),b},getLabel:function(r){return r.toLabel()},onPropertyChanged:function(r){this.iv()},_7Q:function(r){this._23o=r,this.iv()},get:function(K){var B,b=this,r=b._tabModel;return UY(K)?r._roots.get(K):_1(K)?(r.each(function(r){K===b.getLabel(r)&&(B=r)}),B):K instanceof VB?K:H1},select:function(r){this._tabModel.sm().ss(this.get(r))},remove:function(r){var K;(r=this.get(r))&&(K=this._tabModel._roots.indexOf(r),this._tabModel.remove(r),this.selectByIndex(--K))},getCurrentTab:function(){return this._8o},hideTabView:function(r,K){K.parentNode===this._92O&&(TY(K)?(K.style.display=Yu,K._tab_=r):O9(K),OH())},showTabView:function(r,K){TY(K)&&(K.style.display="block",K._tab_=r),K.parentNode!==this._92O&&(gY(this._92O,K),OH())},_24o:function(){var r,K=this._8o,B=this._9o,b=this._tabModel.sm().ld();(r=b?SN(b.getView()):r)!==B&&(B&&(K.getView()&&K.getView().endEditing&&K.getView().endEditing(),this.hideTabView(K,B)),r&&this.showTabView(b,r)),this._8o=b,this._9o=r,K!==b&&this.onTabChanged(K,b)},onTabClosing:function(r){return!0},onTabChanged:function(r,K){},onTabClosed:function(r,K){this.selectByIndex(--K)},selectByIndex:function(r){var K=this._tabModel,B=K.size();if(B&&!K.sm().ld()){for(var b=r=(r=B<=(r=r==H1?0:r)?B-1:r)<0?0:r;0<=b;b--){var f=this.get(b);if(!f.isDisabled())return this.select(f),f}for(b=r+1;b<B;b++)if(!(f=this.get(b)).isDisabled())return this.select(f),f}},getTabWidth:function(r){var K=4+2*this.getTabHPadding(),B=g(r.getIcon());return B&&(K+=DA(B,r)+4),(B=this.getLabel(r))&&(K+=L9(this.getLabelFont(r),B).width+4),r.isClosable()&&(K+=10),K},drawTab:function(r,K,B,b,f,h,U){var a,P=this._tabPosition,H=B+4+(q=this.getTabHPadding()),Y=this._selectWidth,S=g(K.getIcon()),_=K.isDisabled(),e=this.getLabelColor(K),o=this.getLabelFont(K),x=this.getLabel(K),T=this._selectBackground,t=P===ru+"-vertical",p=P===Ku+"-vertical",q=((t||p)&&(H=b+4+q),_&&(r.globalAlpha=ZH),QN(r,B,b,f,h,U),K===this._8o&&Y&&(P===Bu?QN(r,B,b+h-Y,f,Y,T):P===ru?QN(r,B+f-Y,b,Y,h,T):P===Ku?QN(r,B,b,Y,h,T):t?QN(r,B+f-Y,b,Y,h,T):p?QN(r,B,b,Y,h,T):QN(r,B,b,f,Y,T)),f/2);return t&&(hN(r,q,b+h/2),UN(r,F),hN(r,-q,-b-h/2)),S&&(U=iA(S,K),P=DA(S,K),t||p?(hN(r,Y=B+f/2,T=H+U/2),UN(r,F1),hN(r,-Y,-T),t9(r,S,B+f/2,H+U/2,K,this),hN(r,Y,T),UN(r,-F1),hN(r,-Y,-T),H+=U+4):(t9(r,S,H+P/2,b+h/2,K,this),H+=P+4)),t||p?(hN(r,f/2,H+f/2),UN(r,F1),hN(r,-f/2,-H-f/2),I9(r,x,o,e,B,H,h,f),hN(r,f/2,H+f/2),UN(r,-F1),hN(r,-f/2,-H-f/2)):I9(r,x,o,e,H,b,f,h),t&&(hN(r,q,b+h/2),UN(r,-F),hN(r,-q,-b-h/2)),K.isClosable()&&this.drawCloseIcon(K,r,e,a=p?{x:B+f-12,y:b+h-12,width:12,height:12}:{x:B+f-12,y:b+2,width:12,height:12}),_&&(r.globalAlpha=1),a},drawCloseIcon:function(r,K,B,b){var f=b.x,b=b.y;K.strokeStyle=B,K.lineWidth=1,K.beginPath(),K.moveTo(f+2,b+8),K.lineTo(f+8,b+2),K.moveTo(f+8,b+8),K.lineTo(f+2,b+2),K.stroke()},getTabAt:function(r){return(r=this._interactor._8Q(r))?r.tab:null},validateImpl:function(){var b=this,r=(b._24o(),b._canvas),K=b._tabPosition,B=b._91O,f=b._92O,h=b._tabModel,U=b.getWidth(),a=b.getHeight(),P=b._tabHeight,H=b._7o,Y=b._tabGap,S=K===Bu,_=K===ru,e=K===Ku,o=K===ru+"-vertical",K=K===Ku+"-vertical",x=b._23o,T=0;if((_||e)&&h._roots.each(function(r){T=B1(b.getTabWidth(r),T)}),S=S?(L(B,0,0,U,P),{x:0,y:P,width:U,height:B1(0,a-P)}):_?(L(B,0,0,T,a),{x:T,y:0,width:B1(0,U-T),height:a}):e?(L(B,U-T,0,T,a),{x:0,y:0,width:B1(0,U-T),height:a}):o?(L(B,0,0,P,a),{x:P,y:0,width:B1(0,U-P),height:a}):K?(L(B,U-P,0,P,a),{x:0,y:0,width:B1(0,U-P),height:a}):(L(B,0,a-P,U,P),{x:0,y:0,width:U,height:B1(0,a-P)}),L(f,S),o||K){b._9o&&(S.x=0,L(b._8o.getView(),S)),ZY(r,P,a);var t=bN(r),p=0;if(fN(t,0,b.ty(),1),t.clearRect(0,0,P,a),H.clear(),h._roots.each(function(r){var K,B;r.isVisible()&&(K=b.getTabWidth(r),x&&x.tab===r||(B=b.getTabBackground(r),B=b.drawTab(t,r,0,p,P,K,B)),H.add({_75o:B,tab:r,startY:p,endY:p+K,height:K}),p+=K+Y)}),b._23Q=B1(0,p-Y),x&&(k=x.position,b.drawTab(t,x.tab,0,x.startY,P,x.height,b._moveBackground),QN(t,0,k,P,1,b._insertColor)),t.restore(),b._selectionChanged){b._selectionChanged=!1;for(var q=b.ty(),y=0;y<H.size();y++)if((v=H.get(y)).tab===b._8o){if(v.endY+q<0){b.ty(-v.startY);break}if(v.startY+q>a){b.ty(a-v.endY);break}}}b.ty(b.ty())}else if(_||e){if(b._9o&&(S.x=0,L(b._8o.getView(),S)),ZY(r,T,a),t=bN(r),fN(t,p=0,b.ty(),1),t.clearRect(0,0,T,a),H.clear(),h._roots.each(function(r){var K;r.isVisible()&&(x&&x.tab===r||(K=b.getTabBackground(r),K=b.drawTab(t,r,0,p,T,P,K)),H.add({_75o:K,tab:r,startY:p,endY:p+P,height:P}),p+=P+Y)}),b._23Q=B1(0,p-Y),x&&(k=x.position,b.drawTab(t,x.tab,0,x.startY,T,x.height,b._moveBackground),QN(t,0,k,T,1,b._insertColor)),t.restore(),b._selectionChanged)for(b._selectionChanged=!1,q=b.ty(),y=0;y<H.size();y++)if((v=H.get(y)).tab===b._8o){if(v.endY+q<0){b.ty(-v.startY);break}if(v.startY+q>a){b.ty(a-v.endY);break}}b.ty(b.ty())}else{b._9o&&(S.y=0,L(b._8o.getView(),S)),ZY(r,U,P);var k,t=bN(r),w=0;if(fN(t,b.tx(),0,1),t.clearRect(0,0,U,P),H.clear(),h._roots.each(function(r){var K,B;r.isVisible()&&(K=b.getTabWidth(r),x&&x.tab===r||(B=b.getTabBackground(r),B=b.drawTab(t,r,w,0,K,P,B)),H.add({_75o:B,tab:r,startX:w,endX:w+K,width:K}),w+=K+Y)}),b._64I=B1(0,w-Y),x&&(k=x.position,b.drawTab(t,x.tab,x.startX,0,x.width,P,b._moveBackground),sY(t,b._insertColor,k,0,P)),t.restore(),b._selectionChanged){b._selectionChanged=!1;for(var v,z=b.tx(),y=0;y<H.size();y++)if((v=H.get(y)).tab===b._8o){if(v.endX+z<0){b.tx(-v.startX);break}if(v.startX+z>U){b.tx(U-v.endX);break}}}b.tx(b.tx())}for(var N=[],u=f.children,y=0;y<u.length;y++){var j=u[y],I=j._tab_;I&&!h.contains(I)&&N.push(j)}N.forEach(function(r){f.removeChild(r)})}}),function(r){this.tv=r,this.addListeners()}),mB=(BA(CB,A,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(r){this.handleScroll(r,r.wheelDelta/40*10)},handle_DOMMouseScroll:function(r){this.handleScroll(r,10*-r.detail)},handleScroll:function(r,K){x9(r);var B=(r=this.tv)._tabPosition;!r._40o()||B!==Bu&&B!==bu||r.tx(this.tv.tx()+K),!r._41o()||B!==ru&&B!==Ku&&B!==ru+"-vertical"&&B!==Ku+"-vertical"||r.ty(this.tv.ty()+K)},_8Q:function(r){var K,B=this.tv,b=B._tabPosition,f=B._7o;if(b===Bu||b===bu){for(var h=B.lp(r).x,U=0;U<f.size();U++)if((K=f.get(U)).startX<=h&&h<=K.endX)return K}else if(b===ru||b===Ku||b===ru+"-vertical"||b===Ku+"-vertical")for(var a=B.lp(r).y,U=0;U<f.size();U++)if((K=f.get(U)).startY<=a&&a<=K.endY)return K;return H1},isClickable:function(r){var K=this.tv,B=K._tabPosition,r=this._73o=this._8Q(r);return!(!K._40o()||B!==Bu&&B!==bu)||!(!K._41o()||B!==ru&&B!==Ku&&B!==ru+"-vertical"&&B!==Ku+"-vertical")||r&&(!r.tab.isDisabled()||K.isMovable())},handle_mousemove:function(r){xN?this._74o=this._8Q(r):this.getView().style.cursor=this.isClickable(r)?cn:""},handle_mousedown:function(r){this.handle_mousemove(r),this.handle_touchstart(r)},handle_touchstart:function(r){var K=this.tv,B=K._tabPosition;x9(r),J9(r)&&this.isClickable(r)&&(B===Bu||B===bu?(this.x=V9(r).x,this.lp=K.lp(r),this.tx=K.tx()):(this.y=V9(r).y,this.lp=K.lp(r),this.ty=K.ty()),c9(this,r))},handle_mouseup:function(r){this.handle_touchend(r)},handle_touchend:function(r){var K,B,b;F9(r)&&(r=this._73o)&&(K=this.tv,B=K.getTabModel(),!(b=r.tab).isDisabled()&&b.isClosable()&&K.onTabClosing(b,r=function(){var r=B._roots.indexOf(b);B.remove(b),K.onTabClosed(b,r)})&&r())},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowTouchMove:function(r){var b,f,h,U,K=this,a=K.tv,B=a._tabPosition,P=K._73o;B===Bu||B===bu?(f=V9(r).x-K.x,!K._25o&&!K.moving&&2<j1(f)&&(a._40o()&&!A9(r)?K._25o=1:P&&a.isMovable()&&(K.moving=1)),K._25o?a.tx(K.tx+f):K.moving&&(b=K.lp.x+f,U=a._tabGap/2,a._7o.each(function(r){var K=r.endX,B=b-r.startX<K-b;b>=r.startX&&b<=K&&a._7Q({tab:P.tab,startX:P.startX+f,width:P.width,front:B,insertTab:r.tab,position:B?B1(0,r.startX-U):b1(a._64I,K+U)})}))):(f=V9(r).y-K.y,!K._25o&&!K.moving&&2<j1(f)&&(a._41o()&&!A9(r)?K._25o=1:P&&a.isMovable()&&(K.moving=1)),K._25o?a.ty(K.ty+f):K.moving&&(h=K.lp.y+f,U=a._tabGap/2,a._7o.each(function(r){var K=r.endY,B=h-r.startY<K-h;h>=r.startY&&h<=K&&a._7Q({tab:P.tab,startY:P.startY+f,height:P.height,front:B,insertTab:r.tab,position:B?B1(0,r.startY-U):b1(a._23Q,K+U)})})))},handleWindowMouseUp:function(r){this.handleWindowTouchEnd(r)},handleWindowTouchEnd:function(r){var K,B,b,f,h=this,U=h.tv,a=U._tabPosition,P=U.getTabModel(),H=P._roots,Y=h._73o;h.moving?((b=U._23o)&&b.insertTab!==b.tab&&(B=b.tab,f=H.remove(B),0<=(K=H.indexOf(b.insertTab))&&(b.front||K++,K<=H.size()&&(H.add(B,K),P._38I(B,f,K)))),U._7Q(H1),delete h.moving):!h._25o&&Y&&(B=Y.tab,(b=h._74o)&&b.tab!==B||(!B.isDisabled()&&m9(Y._75o,h.lp)?U.onTabClosing(B,f=function(){var r=H.indexOf(B);P.remove(B),U.onTabClosed(B,r)})&&f():B.isDisabled()||U._8o===B||P.sm().ss(B))),h._25o=h._73o=h._74o=a===Bu||a===bu?h.x=h.lp=h.tx=H1:h.y=h.lp=h.ty=H1}}),AB.PropertyView=function(r){var K=this,B=(K._view=lY(1,K),K._canvas=mY(K._view),gY(K._view,K._79O=CY()),K._rows=new $,K._28o=new $,K._26o={},K._26Q={},K._propertyModel=new HP),b=K.ivm;B.mm(b,K),B.md(b,K),B.mh(b,K),K.dm(r||new HP),new mB(K)},K("PropertyView",A,{ms_ac:[Ru,lu,Mu,xn,Tn,"categorizable",fn,on,Yn,Sn,_n,Bn,bn,Kn,"selectRowIndex",V1,"background",hn,Hn,an,Pn,Un],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:DK,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:b9,_background:Y1.propertyViewBackground,_expandIcon:Y1.propertyViewExpandIcon,_collapseIcon:Y1.propertyViewCollapseIcon,_scrollBarColor:ls,_scrollBarSize:T,_autoHideScrollBar:$H,_selectBackground:Y1.propertyViewSelectBackground,_rowHeight:Rs,_rowLineVisible:Y1.propertyViewRowLineVisible,_rowLineColor:Y1.propertyViewRowLineColor,_10I:.5,_columnLineVisible:Y1.propertyViewColumnLineVisible,_columnLineColor:Y1.propertyViewColumnLineColor,_labelColor:Y1.propertyViewLabelColor,_labelSelectColor:Y1.propertyViewLabelSelectColor,_labelFont:Y1.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(r){var K=this._10I;this._10I=r=1<(r=r<0?0:r)?1:r,this.fp("columnPosition",K,r)},getPropertyName:function(r){return r.toLabel()},getLabelFont:function(r,K,B){return this._labelFont},getLabelColor:function(r,K,B){return B===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(r,K){return this._labelFont},getPropertyColor:function(r,K){return K===this._selectRowIndex?this._labelSelectColor:r.getColor()||this._labelColor},getCategoryFont:function(r){return this._labelFont},getCategoryColor:function(r){return this._labelColor},adjustTranslateX:function(r){return 0},adjustTranslateY:function(r){var K=this.getHeight()-this._59I;return 0<(r=r<K?K:r)?0:v1(r)},isExpanded:function(r){if(!r)return!0;var K=this._26o[r];return K?K.isExpanded:!(!1===this._26Q[r])},toggle:function(r){this.isExpanded(r)?this.collapse(r):this.expand(r)},expandAll:function(){for(var r in this.validate(),this._26o)this.expand(r)},expand:function(r){var K;r&&r!==Yu&&(K=this._26o[r])&&!K.isExpanded&&(K.isExpanded=!0,this.onExpanded(r),this.ivm())},onExpanded:function(r){},collapseAll:function(){for(var r in this.validate(),this._26o)this.collapse(r)},collapse:function(r){var K;r&&r!==Yu&&(K=this._26o[r])&&K.isExpanded&&(K.isExpanded=!1,this.onCollapsed(r),this.ivm())},onCollapsed:function(r){},getCategoryName:function(r){return this.isCategorizable()&&(r=r.getCategoryName())||Yu},getPropertyModel:function(){return this._propertyModel},handleSelectionChange:function(){this.ivm()},setDataModel:function(r){var K=this,B=K._dataModel;B!==r&&(B&&(B.umd(K.handlePropertyChange,K),K._selectionModel||B.sm().ums(K.handleSelectionChange,K)),(K._dataModel=r).md(K.handlePropertyChange,K),K._selectionModel?K._selectionModel._21I(r):r.sm().ms(K.handleSelectionChange,K),K.fp(Nn,B,r))},isVisible:function(r){return!this._visibleFunc||this._visibleFunc(r)},onPropertyChanged:function(r){r=r.property,FB[r]?this.ivm():this.iv(),r===zn&&this._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:UP},handlePropertyChange:function(r){this._27o===r.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){this._96I||(this.setSelectRowIndex(-1),this._96I=1,this.iv())},redraw:function(){this.iv()},validateModel:function(){var r,b=this,f=b._rows,K=b._28o,h={},U=new $,B=b._27o;for(r in b.updateCurrentData(),B!==b._27o&&b.endEditing(),f.clear(),K.clear(),b.getRawProperties().each(function(r){b.isVisible(r)&&(U.add(r),r=b.getCategoryName(r),h[r]||(K.add(r,r===Yu?0:P1),h[r]={isExpanded:b.isExpanded(r),properties:new $}))}),b._sortFunc&&U.sort(b._sortFunc),b._26o)b._26Q[r]=b.isExpanded(r);b._26o=h,K.each(function(K){K!==Yu&&f.add(K);var B=h[K];B.isExpanded&&U.each(function(r){b.getCategoryName(r)===K&&(B.properties.add(r),f.add({property:r,data:b._27o}))},b)})},validateImpl:function(){var r=this,K=(r._76o(),r._96I&&(r.validateModel(),delete r._96I),r._canvas),B=r.getWidth(),b=r.getHeight(),f=-r.ty(),h=r._rowHeight,U=r._indent,a=B-U,P=r._rows,H=P.size(),Y=r._9I=U+a*r._10I,S=r._59I=H*h,_=(ZY(K,B,b),r._29I={x:0,y:f,width:B,height:b},r._31I=z1(f/h),r._14I=N1((f+b)/h),r._31I<0&&(r._31I=0),r._14I>H&&(r._14I=H),bN(K)),e=r._background;fN(_,0,-f,1),_.beginPath(),_.rect(0,f,B,b),_.clip(),_.clearRect(0,f,B,b),r._93db(_),e&&QN(_,0,0,U,S,e);for(var o=r._31I;o<r._14I;o++){var x,T,t,p,q=P.get(o),f=h*o;_1(q)?(e&&QN(_,U,f,a,h,e),(T=g(r.isExpanded(q)?r._expandIcon:r._collapseIcon))&&p9(_,T,Mn,0,f,U,h),_.save(),_.beginPath(),_.rect(U,f,a,h),_.clip(),r.drawCategoryName(_,q,o,U,f,a,h),_.restore()):(x=q.property,q=q.data,T=g(x.getIcon()),t=r._selectRowIndex===o?r.getSelectBackground():H1,T&&p9(_,T,Mn,0,f,U,h),t&&QN(_,U,f,a,h,t),_.save(),_.beginPath(),_.rect(U,f,Y-U,h),_.clip(),r.drawPropertyName(_,x,o,U,f,Y-U,h),_.restore(),r.isEditing(q,x)||(t=Y+1,p=B-Y-1,_.save(),_.beginPath(),_.rect(t,f,p,h),_.clip(),r._87o(r.drawPropertyValue(_,x,r.getValue(q,x),o,t,f,p,h,q),o,t,f,p,h),_.restore())),r._rowLineVisible&&QN(_,U,f+h-1,a,1,r._rowLineColor)}r._columnLineVisible&&(QN(_,Y,0,1,S,r._columnLineColor),QN(_,B-1,0,1,S)),r._92db(_),r._93I(),_.restore(),r.ty(r.ty())},drawCategoryName:function(r,K,B,b,f,h,U){I9(r,K,this.getCategoryFont(K),this.getCategoryColor(K),b,f,h,U)},drawPropertyName:function(r,K,B,b,f,h,U){K.drawPropertyName?K.drawPropertyName(r,K,B,b,f,h,U,this):I9(r,this.getPropertyName(K),this.getPropertyFont(K,B),this.getPropertyColor(K,B),b,f,h,U)},drawPropertyValue:function(r,K,B,b,f,h,U,a,P){if(K.drawPropertyValue)return K.drawPropertyValue(r,K,B,b,f,h,U,a,P,this);dB(r,B,K,this.getLabelFont(K,B,b),this.getLabelColor(K,B,b),f,h,U,a,P,this)},isPropertyEditable:function(r,K){return r.isEditable()&&this.isEditable()},setProperties:function(r){this._propertyModel.clear(),this.addProperties(r)},addProperties:function(r){var B;r&&(B=this._propertyModel,r.forEach(function(r){var K;r instanceof RB||(K=z9(r.className),r=o9(K||RB,r)),B.add(r)}))},getRowIndexAt:function(r){return 0<=(r=z1(this.lp(r).y/this._rowHeight))&&r<this._rows.size()?r:-1},getPropertyAt:function(r){return 0<=(r=this.getRowIndexAt(r))?this._rows.get(r).property:H1},getToolTip:function(r){var K=this.getPropertyAt(r),B=this._27o;return K&&B?K.getToolTip(B,this._9I<this.lp(r).x,this):H1}}),function(r){this.pv=r,this.addListeners()}),DB=(BA(mB,A,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(r){this.getView().style.cursor=r},clear:function(){this._62O=this.cp=this.ty=this.p=H1,this.setCursor(X1)},handle_mousedown:function(r){this.handle_touchstart(r)},handle_touchstart:function(r){var K=this.pv;x9(r),K.setFocus(r)&&(J9(r)?(this.cp=V9(r),this.ty=K.ty(),this.p=K.getColumnPosition(),this.handle_touchmove(r)):K.setSelectRowIndex(K.getRowIndexAt(r)))},handleWindowMouseUp:function(r){this.clear()},handleWindowTouchEnd:function(r){this.clear()},handle_mouseup:function(r){this.handle_touchend(r)},handle_touchend:function(r){var K,B,b,f,h,U,a,P,H,Y;this.cp&&!this._62O&&(H=(P=(K=this.pv).lp(r)).x,P=P.y,a=K._indent,B=K.getRowIndexAt(r),b=K._9I,0<=B&&(Y=(f=K._rowHeight)*B,U=(h=K._rows.get(B)).property,_1(h)?(g(K.isExpanded(h)?K._expandIcon:K._collapseIcon)&&0<=H&&H<=a&&Y<=P&&P<=Y+f||s9(r))&&K.toggle(h):b<H&&K.isPropertyEditable(U,r)&&(P={x:(a={x:b+1,y:Y,width:K.getWidth()-b-1,height:f}).x+K.tx(),y:a.y+K.ty(),width:a.width,height:a.height},H=0,Y=K._29I,a.y<Y.y?H=a.y-Y.y:a.y+f>Y.y+Y.height&&(H=a.y+f-Y.y-Y.height),H&&(K.ty(K.ty()-H),P.y-=H),K.beginEditing({data:h.data,property:U,value:K.getValue(h.data,U),event:r,rect:a,editorRect:P,view:K}))),K.setSelectRowIndex(B)),this.clear()},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowTouchMove:function(r){var K,B,b=this.pv,f=this.ty,h=this.cp,r=V9(r),U=this._62O;"p"===U?b.setTranslateY(f+r.y-h.y):"c"===U?16<(B=b.getWidth()-b._indent)&&(K=this.p-(h.x-r.x)/B,b.setColumnPosition(K=1-(B=16/B)<(K=K<B?B:K)?1-B:K)):"s"===U&&b.setTranslateY(f+(h.y-r.y)*b._59I/b._29I.height)},handle_mousemove:function(r){this.handle_touchmove(r)},handle_touchmove:function(r){var K,B,b;!xN&&J9(r)&&(B=(K=this).pv,b=j1(B.lp(r).x-B._9I)<=($1?8:3),K.cp?K._62O||(b?(K._62O="c",c9(K,r)):2<=j1(V9(r).y-K.cp.y)&&(K._62O=K.isV(r)?"s":"p",c9(K,r))):(b?K.setCursor($n):K.setCursor(X1),K.isV(r)&&B._43o()))},isV:function(r){var K=this.pv,B=K._29I;return K._41o()&&B.x+B.width-K.lp(r).x<P9},handle_mousewheel:function(r){this.handleScroll(r,r.wheelDelta/40)},handle_DOMMouseScroll:function(r){2===r.axis&&this.handleScroll(r,-r.detail)},handleScroll:function(r,K){var B=this.pv;x9(r),B.endEditing(),B.translate(0,K*B.getRowHeight())},handle_keydown:function(r){var K=this.pv,B=K._rows.size(),b=K._selectRowIndex+(LN(r)?-1:1);(LN(r)||FN(r))&&K.setSelectRowIndex(b=B<=(b=b<0?0:b)?B-1:b)}}),AB.ListView=function(r){this._5o(r),new DB(this)},K("ListView",A,{ms_ac:[Ru,lu,Mu,hn,fn,Hn,an,on,Yn,Bn,bn,Kn,rn,V1],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:b9,_rowHeight:Rs,_rowLineVisible:Y1.listViewRowLineVisible,_rowLineColor:Y1.listViewRowLineColor,_scrollBarColor:ls,_scrollBarSize:T,_autoMakeVisible:Ds,_autoHideScrollBar:$H,_selectBackground:Y1.listViewSelectBackground,_labelColor:Y1.listViewLabelColor,_labelSelectColor:Y1.listViewLabelSelectColor,_labelFont:Y1.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(r){var K=this._checkMode;this._checkMode=r,this.fp(en,K,r)},drawRow:function(r,K,B,b,f,h,U){var a=0,P=this._indent,H=this.getIconWidth(K);this.drawRowBackground(r,K,B,b,f,h,U),this._checkMode&&(t9(r,g(this.getCheckIcon(K)),a+P/2,f+U/2,K,this),a+=P),this.drawIcon(r,K,a,f,H,U),this.drawLabel(r,K,a+H,f,U)}}),function(r){this.list=r,this.addListeners()}),iB=(BA(DB,A,{ms_listener:1,getView:function(){return this.list._view},clear:function(r){var K=this,B=K.list;r&&"d"===K._62O&&!K.dragCancel&&B.handleDragAndDrop(r,"end"),B.draggingData&&(B.draggingData=null,B.redraw()),K.dragCancel=K._62O=K._isV=K._isH=K.cp=K.tx=K.ty=H1},handle_mousedown:function(r){this.handle_touchstart(r)},handle_touchstart:function(r){var K,B=this.list;x9(r),B.setFocus(r)&&(K=B.getDataAt(r),this.cp=V9(r),this.tx=B.tx(),this.ty=B.ty(),J9(r)?K&&B.handleDragAndDrop&&!this.isV(r)&&!this.isH(r)&&B.isDraggable(K)&&(B.draggingData=K,B.redraw(),B.handleDragAndDrop(r,"prepare")):(K?this._33o(r,K):this._cancelDataDoubleSelect(),this.clear(r)))},handleWindowMouseUp:function(r){this.clear(r)},handleWindowTouchEnd:function(r){this.clear(r)},handle_mouseup:function(r){this.handle_touchend(r)},handle_touchend:function(r){var K,B=this.list;this._isV||this._isH||!this.cp||this._62O||((K=B.getDataAt(r))?(B.isCheckMode()?this._34o(r,K):this._33o(r,K),s9(r)?B.onDataDoubleClicked(K,r):B.onDataClicked(K,r)):(this._cancelDataDoubleSelect(),B.handleBackgroundClick(r))),this.clear(r)},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowTouchMove:function(r){var K=this.list,B=this._62O,b=this.tx,f=this.ty,h=this.cp,U=V9(r),a=K._29I;"p"===B?K.setTranslate(b+U.x-h.x,f+U.y-h.y):"v"===B?K.ty(f+(h.y-U.y)*K._59I/a.height):"h"===B?K.tx(b+(h.x-U.x)*K._91I/a.width):"d"!==B||this.dragCancel||K.handleDragAndDrop(r,"between")},handle_mousemove:function(r){this.handle_touchmove(r)},handle_touchmove:function(r){var K,B;!xN&&J9(r)&&(B=(K=this).list,K._isV=K.isV(r),K._isH=K.isH(r),K.cp?K._62O||R9(V9(r),K.cp)<2||(K._isV?K._62O="v":K._isH?K._62O="h":B.draggingData&&!this.dragCancel?(K._62O="d",B.handleDragAndDrop(r,"begin")):K._62O="p",K._62O&&"d"!==K._62O&&B.draggingData&&(B.draggingData=null,B.redraw()),c9(K,r)):(K._isV&&B._43o(),K._isH&&B._42o()))},isV:function(r){var K=this.list,B=K._29I;return K._41o()&&B.x+B.width-K.lp(r).x<P9},isH:function(r){var K=this.list,B=K._29I;return K._40o()&&B.y+B.height-K.lp(r).y<P9},handle_mousewheel:function(r){this.handleScroll(r,r.wheelDelta/40,r.wheelDelta!==r.wheelDeltaX)},handle_DOMMouseScroll:function(r){this.handleScroll(r,-r.detail,1)},handleScroll:function(r,K,B){var b=this.list;x9(r),b.endEditing&&b.endEditing(),B&&b._41o()?b.translate(0,K*b.getRowHeight()):b._40o()&&b.translate(10*K,0)},handle_keydown:function(r){var K,B,b,f,h,U,a;Y1.isInput(r.target)||(B=(K=this.list).sm(),f=(b=K._rows).size(),wN(r)?K.selectAll():vN(r)?K.handleDelete&&K.handleDelete(r):sN(r)?"d"!==this._62O||this.dragCancel||(K.handleDragAndDrop(r,"cancel"),this.dragCancel=!0):GN(r)?K.isCheckMode()&&(a=K.getFocusData())&&K.checkData(a):(LN(r)||FN(r))&&((a=(h=K.isCheckMode())?K.getFocusData():B.ld())?0<=(U=K.getRowIndex(a))&&(LN(r)?0!==U&&(a=b.get(U-1),h?K.setFocusData(a):B.ss(a)):U!==f-1&&(a=b.get(U+1),h?K.setFocusData(a):B.ss(a))):0<f&&(a=b.get(0),h?K.setFocusData(a):B.ss(a))))},_34o:function(r,K){var B=this.list;0<=(r=B.lp(r).x)&&r<=B._indent?B.checkData(K):B.setFocusData(K)},_33o:function(r,K){var B=this.list,b=B.sm(),f=b.ld();if(B.canHandleSelectMode(r,K))if(A9(r))B.isSelected(K)?b.rs(K):b.as(K);else if(n9(r))if(f)for(var h=B.getRowIndex(f),U=B.getRowIndex(K);h!==U;)b.as(B._rows.get(h+=h<U?1:-1));else b.ss(K);else J9(r)?(b.contains(K)?B.handleDataDoubleSelect&&(this._handleDataDoubleSelect(r,K),s9(r)&&this._cancelDataDoubleSelect()):this._cancelDataDoubleSelect(),b.ss(K)):b.contains(K)||b.ss(K);else this._cancelDataDoubleSelect()},_handleDataDoubleSelect:function(r,K){this._cancelDataDoubleSelect(),this._doubleSelectTimer=R1(function(){this.list.handleDataDoubleSelect(r,K),this._doubleSelectTimer=P1}.bind(this),Y1.doubleClickSpeed)},_cancelDataDoubleSelect:function(){this._doubleSelectTimer&&(l1(this._doubleSelectTimer),this._doubleSelectTimer=P1)}}),AB.TreeView=function(r){this._35o(),this._5o(r),new iB(this)},K("TreeView",A,{ms_ac:[Ru,lu,Mu,"rootVisible",en,"rootData",on,Yn,Bn,bn,Kn,fn,hn,Hn,an,Sn,_n,rn,V1,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:H1,_indent:b9,_rowHeight:Rs,_rowLineVisible:Y1.treeViewRowLineVisible,_rowLineColor:Y1.treeViewRowLineColor,_scrollBarColor:ls,_scrollBarSize:T,_autoHideScrollBar:$H,_expandIcon:Y1.treeViewExpandIcon,_collapseIcon:Y1.treeViewCollapseIcon,_autoMakeVisible:Ds,_selectBackground:Y1.treeViewSelectBackground,_labelColor:Y1.treeViewLabelColor,_labelSelectColor:Y1.treeViewLabelSelectColor,_labelFont:Y1.treeViewLabelFont,_doubleClickToToggle:Y1.treeViewDoubleClickToToggle,drawRow:function(r,K,B,b,f,h,U){this.drawRowBackground(r,K,B,b,f,h,U),this.drawTree(r,K,B,0,f,h,U)},isOnToggleIcon:function(r){var K=this.getDataAt(r);if(K){var B=this.getIndent(),r=this.lp(r).x;if(g(this.getToggleIcon(K))&&(K=B*this.getLevel(K))<=r&&r<=K+B)return!0}return!1}}),function(r){vY(iB,this,[r])}),ZB=(BA(iB,DB,{toggle:function(r,K,B,b){var f=this.list,h=f.lp(r).x;return g(f.getToggleIcon(K))&&(b*=B)<=h&&h<=b+B?(f.toggle(K),!0):!(!f.isDoubleClickToToggle()||!s9(r)||(f.toggle(K),0))},_34o:function(r,K){var B=this.list,b=B.lp(r).x,f=B._levelMap[K._id],h=B._indent,U=h*(f+1);U<=b&&b<=U+h?B.checkData(K):this.toggle(r,K,h,f)||B.setFocusData(K)},_33o:function(r,K){var B=this.list;if(!this.toggle(r,K,B._indent,B.getLevel(K)))if(n9(r)){var b=B.sm();if(0<b.size()){for(var f=B._rows,h=null,U=0,a=f.size();U<a;U++)if(B.isSelected(f.get(U))){h=U;break}for(var P=null,U=f.size()-1;0<=U;U--)if(B.isSelected(f.get(U))){P=U;break}for(var H,Y=B.getRowIndex(K),S=Y<h?(H=Y-1,h):P<Y?(H=P,Y):(H=h,P);H!==S;)b.as(B._rows.get(++H))}else b.ss(K)}else iB.superClass._33o.call(this,r,K)},handle_keydown:function(r){var K,B,b,f,h;IN(r)||JN(r)?(B=(K=this.list)._rows,b=K.isCheckMode(),f=K.sm(),(h=b?K.getFocusData():f.ld())?h.hasChildren()&&(IN(r)?K.collapse(h):K.expand(h)):0<B.size()&&(h=B.get(0),b?K.setFocusData(h):f.ss(h))):iB.superClass.handle_keydown.call(this,r)}}),AB.TableView=function(r){this._98I(),this._5o(r),new gB(this)}),gB=(K("TableView",A,{ms_ac:[Ru,lu,Mu,"sortMode",xn,Tn,hn,Hn,an,Pn,Un,"sortColumn",on,Yn,Bn,bn,Kn,rn,V1],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:tn,_editable:!0,_batchEditable:!1,_rowHeight:Rs,_rowLineVisible:Y1.tableViewRowLineVisible,_rowLineColor:Y1.tableViewRowLineColor,_columnLineVisible:Y1.tableViewColumnLineVisible,_columnLineColor:Y1.tableViewColumnLineColor,_scrollBarColor:ls,_scrollBarSize:T,_autoHideScrollBar:$H,_autoMakeVisible:Ds,_selectBackground:Y1.tableViewSelectBackground,_labelColor:Y1.tableViewLabelColor,_labelSelectColor:Y1.tableViewLabelSelectColor,_labelFont:Y1.tableViewLabelFont,getCheckColumn:function(){var r;return this._31o||((r=this._31o=new MB).setEditable(!0),r.setWidth(40),r.getValue=this.getCheckColumValue,r.drawCell=this.drawCheckColumnCell),this._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(r){var K=this._39o,B=this.getCheckColumn();r!==this.isCheckMode()&&(r?K.add(B,0):K.remove(B),this.fp(en,!r,r))},getCheckColumValue:function(r,K,B){return B.isSelected(r)},drawCheckColumnCell:function(r,K,B,b,f,h,U,a,P){t9(r,P.getCheckIcon(K),f+U/2,h+a/2,K,P)}}),function(r){vY(gB,this,[r])}),WB=(BA(gB,DB,{_34o:function(r,K){var B=this.list,b=B._31o;if(B.isCellEditable(K,b,r)){var f=B._3Q(b),h=B.lp(r).x;if(f&&h>=f.startX&&h<f.startX+b.getWidth())return void B.checkData(K)}B._37O(K,r),B.setFocusData(K)},_33o:function(r,K){this.list._37O(K,r),gB.superClass._33o.apply(this,arguments)}}),AB.TreeTableView=function(r){var K=this._4o=new MB;this._35o(),this._98I(),this._5o(r),K.setDisplayName("Name"),K.setEditable(!0),K.setWidth(180),K.drawCell=$B,K.getValue=XB,this._39o.add(K),new cB(this)}),$B=function(r,K,B,b,f,h,U,a,P){P.drawTree(r,K,B,f,h,U,a)},XB=function(r,K,B){return B.getLabel(r)},cB=(K("TreeTableView",A,{ms_ac:[Ru,lu,Mu,"sortMode",xn,Tn,fn,en,"rootData","rootVisible",on,Yn,"sortColumn",Sn,_n,Bn,bn,Kn,rn,an,hn,Hn,Pn,Un,V1,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:tn,_checkMode:H1,_editable:!0,_batchEditable:!1,_indent:b9,_rowHeight:Rs,_rowLineVisible:Y1.treeTableViewRowLineVisible,_rowLineColor:Y1.treeTableViewRowLineColor,_columnLineVisible:Y1.treeTableViewColumnLineVisible,_columnLineColor:Y1.treeTableViewColumnLineColor,_expandIcon:Y1.treeTableViewExpandIcon,_collapseIcon:Y1.treeTableViewCollapseIcon,_scrollBarColor:ls,_scrollBarSize:T,_autoHideScrollBar:$H,_autoMakeVisible:Ds,_selectBackground:Y1.treeTableViewSelectBackground,_labelColor:Y1.treeTableViewLabelColor,_labelSelectColor:Y1.treeTableViewLabelSelectColor,_labelFont:Y1.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}}),function(r){vY(cB,this,[r])}),OB=(BA(cB,DB,{_34o:function(r,K){var B=this.list,b=B._4o,f=B._3Q(b),h=B.lp(r).x;if(f){var U=B._indent,f=f.startX+U*B.getLevel(K);if(g(B.getToggleIcon(K))&&f<=h&&h<=f+U)return void B.toggle(K);if(B.isCellEditable(K,b)&&(f+=U)<=h&&h<=f+U)return void B.checkData(K)}B._37O(K,r),B.setFocusData(K)},_33o:function(r,K){var B=this.list,b=B.lp(r).x;if(g(B.getToggleIcon(K))&&(f=B._3Q(B._4o))){var f,h=B._indent;if((f=f.startX+h*B.getLevel(K))<=b&&b<=f+h)return void B.toggle(K)}B._37O(K,r),cB.superClass._33o.apply(this,arguments)}}),AB.TableHeader=function(r){var K=this,B=K._view=lY(1,K),b=K._39o=r.getColumnModel(),f=K.iv;K.tv=K._tableView=r,K._60I=new $,K._canvas=mY(B),B.style.background=Y1.tableHeaderBackground||"",B.style.height=f9+Su,b.mm(f,K),b.md(f,K),b.mh(f,K),r.mp(function(r){jB[r.property]&&K.iv()},K),new QB(K),K.iv()}),QB=(K("TableHeader",A,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Ru,Mu,fn,"moveBackground","insertColor",Pn,Un,"resizable","movable"],_checkIcon:uu,_movable:!0,_resizable:!0,_labelColor:Y1.tableHeaderLabelColor,_labelFont:Y1.tableHeaderLabelFont,_columnLineColor:Y1.tableHeaderColumnLineColor,_columnLineVisible:Y1.tableHeaderColumnLineVisible,_sortDescIcon:Y1.tableHeaderSortDescIcon,_sortAscIcon:Y1.tableHeaderSortAscIcon,_moveBackground:Y1.tableHeaderMoveBackground,_insertColor:Y1.tableHeaderInsertColor,_indent:b9,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(r){return r.toLabel()},getLabelFont:function(r){return this._labelFont},getLabelColor:function(r){return r.getColor()||this._labelColor},getLabelAlign:function(r){return r._align},onPropertyChanged:function(r){this.iv()},_5Q:function(r){this._61I=r,this.iv()},getLogicalPoint:function(r){return $9(r,this._canvas,this.tv.tx())},validateImpl:function(){var r,b=this,K=b._canvas,B=b.getWidth(),f=b.getHeight(),h=b.tv,U=b._60I,a=b._61I,P=-h.tx(),H=0,Y=(B===K.clientWidth&&f===K.clientHeight||ZY(K,B,f),U.clear(),b._39o._roots.each(function(r){var K;r.isVisible()&&(K=H+r.getWidth(),H<=P+B&&P<=K&&U.add({column:r,startX:H}),H=K)}),bN(K));fN(Y,-P,0,1),Y.beginPath(),Y.rect(P,0,B,f),Y.clip(),Y.clearRect(P,0,B,f),U.each(function(r){var K=r.column,r=r.startX,B=K.getWidth();0<B&&(Y.save(),Y.beginPath(),Y.rect(r,0,B,f),Y.clip(),a&&a.column===K||b.drawColumn(Y,K,r,0,B,f),b._columnLineVisible&&QN(Y,r+B-1,0,1,f,b._columnLineColor),Y.restore())}),a&&(h=a.column,H=a.startX,K=a.position,r=h.getWidth(),Y.save(),Y.beginPath(),Y.rect(H,0,r,f),Y.clip(),Y.fillStyle=b._moveBackground,Y.fill(),b.drawColumn(Y,h,H,0,r,f),Y.restore(),sY(Y,b._insertColor,K,0,f)),Y.restore()},_6Q:function(r){var K=this.tv;return K._31o===r&&K.sm().getSelectionMode()===O1},drawColumn:function(r,K,B,b,f,h){var U,a,P,H,Y,S=this,_=S.tv,e=g(K.getIcon()),o=S.getLabelAlign(K);S._6Q(K)?(Y=g(S._checkIcon),t9(r,Y,B+f/2,b+h/2,K,S)):(Y=S.getLabel(K),U=S.getLabelFont(K),a=S.getLabelColor(K),P=L9(U,Y).width,H=e?S._indent:0,o===ru?(e&&p9(r,e,Mn,B,b,H,h),I9(r,Y,U,a,B+H,b,f,h,ru)):o===Ku?(e&&p9(r,e,Mn,B+f-P-H,b,H,h),I9(r,Y,U,a,B,b,f,h,Ku)):(e&&p9(r,e,Mn,B+(f-P-H)/2,b,H,h),I9(r,Y,U,a,B+(f-P+H)/2,b,0,h,ru))),K.isSortable()&&_.getSortColumn()===K&&(e=g(K.getSortOrder()===pn?S._sortAscIcon:S._sortDescIcon))&&(Y=DA(e,K)/2+2,t9(r,e,o===Ku?B+Y:B+f-Y,b+h/2,K,_))}}),function(r){this.th=r,this.tv=r._tableView,this.addListeners()}),EB=(BA(QB,A,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(r){this.getView().style.cursor=r},handle_mousemove:function(r){if(!xN){delete this._29o,this.setCursor(X1);for(var K=this.th,B=K._60I,b=K.lp(r).x,f=B.size()-1;0<=f;f--){var h=B.get(f),U=h.column,a=h.startX+U.getWidth();if(K.isResizable()&&j1(a-b)<=($1?10:3))return this._29o=h,void this.setCursor($n);b>h.startX&&b<a&&(this._29o=h),(U.isClickable()||U.isSortable()||K.isMovable()||this.tv.getCheckColumn&&U===this.tv.getCheckColumn())&&b>h.startX&&b<a&&this.setCursor(cn)}}},handle_mousedown:function(r){this.handle_touchstart(r)},handle_touchstart:function(r){x9(r),this.tv.endEditing(),this.handle_mousemove(r),this._29o&&(this.x=V9(r).x,this.lx=this.th.lp(r).x,this.w=this._29o.column.getWidth(),c9(this,r))},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowTouchMove:function(r){var b,K=this,f=K.th,B=K.getView().style.cursor,h=K._29o,U=V9(r).x-K.x;K.resizing||K.moving||(B===$n?K.resizing=1:f.isMovable()&&B===cn&&2<j1(U)&&(K.moving=1)),K.resizing?h.column.setWidth(K.w+U):K.moving&&(b=K.lx+U,f._60I.each(function(r){var K=r.startX,B=K+r.column.getWidth();K<=b&&b<=B&&((r={column:h.column,startX:h.startX+U,front:b-K<B-b,insertColumn:r.column}).front?r.position=K:r.position=B,f._5Q(r))}))},_16Q:function(r,K){var B=this.tv,b=this.th,f=b._checkIcon;if(b._6Q(r)){var h=g(f),U=this.lx,a=r.getWidth();if(K+a/2-(h=DA(h,r))<=U&&U<=K+a/2+h)return b.setCheckIcon(f===Nu?uu:Nu),U=B.sm(),K=B._rows,f===Nu?U.rs(K):U.ss(K),B.onCheckColumnClicked(r),!0}return!1},handleWindowMouseUp:function(r){this.handleWindowTouchEnd(r)},handleWindowTouchEnd:function(r){var K,B,b,f,h,U=this,a=U.tv,P=U.th,H=U._29o;U.moving?((B=P._61I)&&B.insertColumn!==B.column&&(K=B.column,f=(b=a.getColumnModel()._roots).remove(K),0<=(h=b.indexOf(B.insertColumn))&&(B.front||h++,h<=b.size()&&(b.add(K,h),a.getColumnModel()._38I(K,f,h)))),P._5Q(H1),delete U.moving):!U.resizing&&H&&(K=H.column,B=P.lp(r).x,b=H.startX,f=!0,(f=(!P.onColumnClicked||!1!==P.onColumnClicked(K,r,b))&&f)&&b<=B&&B<=b+K.getWidth()&&(U._16Q(K,b)||(K.isSortable()&&(h=a.getSortMode(),H=K.getSortOrder(),h===tn?a.getSortColumn()===K?(H===qn&&a.setSortColumn(H1),K.setSortOrder(H===pn?qn:pn)):a.setSortColumn(K):"bistate"===h&&(a.getSortColumn()===K?K.setSortOrder(H===pn?qn:pn):a.setSortColumn(K))),a.onColumnClicked(K,r,b)))),U._29o=U.resizing=U.x=U.lx=U.w=H1}}),AB.TablePane=function(r){this.init(new ZB(r))},K("TablePane",A,{ms_v:1,ms_fire:1,_44o:1}),AB.TreeTablePane=function(r){this.init(new WB(r))},K("TreeTablePane",A,{ms_v:1,_44o:1}),AB.Toolbar=function(r){var b=this,K=b._view=lY(1,b),B=K.style;B.background=Y1.toolbarBackground||"",B.height=h9+Su,b._canvas=mY(K),b._30o=new $,b._90I=new $,b.setItems(r||[]),K.handleGroupSelectedChanged=function(K){var B;K.isSelected()&&null!=(B=K.getGroupId())&&b._items.forEach(function(r){(r=r.element)&&r!==K&&r.setSelected&&r.getGroupId&&r.getGroupId()===B&&r.setSelected(!1)})},new EB(b)},K("Toolbar",A,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[pu,Ru,Mu,lu,V1,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:Y1.toolbarLabelColor,_labelSelectColor:Y1.toolbarLabelSelectColor,_labelFont:Y1.toolbarLabelFont,_selectBackground:Y1.toolbarSelectBackground,_itemGap:Y1.toolbarItemGap,_separatorColor:Y1.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(r){return this._64I},getToolTip:function(r){return(r=this.getItemInfoAt(r))?r.item.toolTip:H1},getLabelColor:function(r){return r&&r.selected&&r.type!==Nu&&"radio"!==r.type?this._labelSelectColor:this._labelColor},onPropertyChanged:function(r){this.iv(),r.property===pu&&this._items.forEach(function(r){RY(r)})},redraw:function(){this.iv()},addItem:function(r,K){var B=this._items;K==H1?B.push(r):B.splice(K,0,r),this.fp(pu,H1,B)},removeItem:function(r){if(r)for(var K=this._items,B=0;B<K.length;B++)r===K[B]&&(K.splice(B,1),this.fp(pu,H1,K))},removeItemById:function(r){if(r!=H1)for(var K,B=this._items,b=0;b<B.length;b++)if(r===B[b].id)return K=B.splice(b,1)[0],this.fp(pu,H1,B),K},getItemById:function(r){if(r!=H1)for(var K=this._items,B=0;B<K.length;B++){var b=K[B];if(r===b.id)return b}},setItemVisible:function(r,K){(r=this.getItemById(r))&&(r.visible=K)},getItemInfos:function(){return this._30o},getItemInfoAt:function(r){var K=0,B=this._30o,b=(r=this.lp(r)).x;if(0<=(r=r.y)&&r<=this.getHeight())for(;K<B.size();K++){var f=B.get(K);if(f.startX<=b&&b<=f.endX)return f}return H1},drawItem:function(r,K,B,b,f){if(!1===K.visible)return 0;if(HY(K.visible)&&!K.visible())return 0;var h=K.disabled,f=(h&&(r.globalAlpha=ZH),this.drawItemImpl(r,K,B,b,f)),U=this._itemGap;return h&&(r.globalAlpha=1),this._currentItem!==K||"separator"===K||!0===K.separator||K.unfocusable||as(r,this._separatorColor,B-U/2,0,f+U,b),f},drawItemImpl:function(r,K,B,b,f){var h,U,a=this,P=a._view,H=a._itemGap,Y=b/2,S=K.type,_=K.element,e=K.label,o=(_1(_)&&(e=_,_=H1),a.getLabelFont(K)),x=a.getLabelColor(K),T=K.selected,t=g(K.icon),p=DA(t,K),q=p+(e?L9(o,e).width:0);return"separator"===K||!0===K.separator?(sY(r,a._separatorColor,B,b/4,Y),1):_?(t&&t9(r,t,B+p/2,Y,K,a),I9(r,e,o,x,B+p,0,0,b),U=SN(_),f||a._90I.add(U),U.parentNode!==P&&gY(P,U),_.iv&&_.iv(),_.validate&&_.validate(),P=(f=U.getBoundingClientRect()).width,_=U.style,iY(U),_.left=a.tx()+B+q+Su,_.top=(b-f.height)/2+Su,q+P):("radio"===S?h=g(T?ju:Iu):S===Nu&&(h=g(T?Nu:uu)),h?(U=DA(h,K),t9(r,h,B+U/2,Y,K,a),B+=U,q+=U):T&&QN(r,B-H/2,0,q+H,b,a.getSelectBackground(K)),t&&t9(r,t,B+p/2,Y,K,a),I9(r,e,o,x,B+p,0,0,b),q)},validateImpl:function(){var B=this,r=B._canvas,K=B.getWidth(),b=B.getHeight(),f=B._30o,h=B._items,U=(ZY(r,K,b),bN(r)),a=B._itemGap,P=a/2,H=(fN(U,B.tx(),0,1),U.clearRect(0,0,K,b),B._90I),H=(B._90I=new $,f.clear(),h.forEach(function(r){var K=B.drawItem(U,r,P,b);f.add({item:r,startX:P,endX:P+K,width:K}),K&&(P+=K+a)}),H.each(function(r){B._90I.contains(r)||O9(r)}),B._64I);B._64I=B1(0,P-a/2),U.restore(),B._stickToRight?(B._65O=0,U=bN(r),P=K-B._64I+a/2,fN(U,0,0,1),U.clearRect(0,0,K,b),f.clear(),h.forEach(function(r){var K=B.drawItem(U,r,P,b,!0);f.add({item:r,startX:P,endX:P+K,width:K}),K&&(P+=K+a)}),U.restore()):B.tx(B.tx()),H!==B._64I&&B.onSumWidthChanged(H,B._64I)},onSumWidthChanged:function(r,K){},handleClick:function(K,r){var B=K.type,b=K.action,f=K.groupId,h=K.selected;K.disabled||(f!=H1?h||(K.selected=!0,this._items.forEach(function(r){r.groupId===f&&K!==r&&(r.selected=!1)}),b&&K.action(K,this,r)):(B!==Nu&&"toggle"!==B||(K.selected=!h),b&&K.action(K,this,r))),OH(),this.iv()}}),function(r){this.tb=r,this.addListeners()});BA(EB,A,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(r){this.handleScroll(r,r.wheelDelta/40*10)},handle_DOMMouseScroll:function(r){this.handleScroll(r,10*-r.detail)},handleScroll:function(r,K){x9(r),(r=this.tb).isScrollable()&&!r._stickToRight&&(r.tx(r.tx()+K),oN())},handle_mousemove:function(r){xN||this.setItem(r)},handle_mouseout:function(r){r.target===this.getView()?this.tb.setCurrentItem(H1):this.handle_mousemove(r)},handle_mousedown:function(r){this.handle_mousemove(r),this.handle_touchstart(r)},handle_touchstart:function(r){var K=this.tb,B=r.target;!J9(r)||B!==this.getView()&&B!==K._canvas||(x9(r),K.setFocus(r)&&(this.setItem(r,!0),(K.isScrollable()||this.info&&!this.info.item.disabled)&&(this.x=V9(r).x,this.tx=K.tx(),c9(this,r))))},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowTouchMove:function(r){var K=this.tb;K._stickToRight||(r=V9(r).x-this.x,!this._25o&&2<j1(r)&&K.isScrollable()&&(this._25o=1),this._25o&&K.tx(this.tx+r))},handleWindowMouseUp:function(r){this.handleWindowTouchEnd(r)},handleWindowTouchEnd:function(r){var K=this.tb,B=this.info,b=this.tb.getItemInfoAt(r);!this._25o&&B&&(B=B.item,b&&b.item===B&&K.handleClick(B,r)),this._25o=this.x=this.tx=H1,this.setItem()},setItem:function(r,K){var B=this.tb,b=(b=this.info=r?B.getItemInfoAt(r):H1)?b.item:H1;B.setCurrentItem(b),K&&b&&HY(b.onDown)&&b.onDown(r)}}),AB.BorderPane=function(){this._view=lY(1,this),this.iv()},K("BorderPane",A,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(r,K){this._12o("leftView",r),K!=H1&&this.setLeftWidth(K)},getRightView:function(){return this._rightView},setRightView:function(r,K){this._12o("rightView",r),K!=H1&&this.setRightWidth(K)},getTopView:function(){return this._topView},setTopView:function(r,K){this._12o("topView",r),K!=H1&&this.setTopHeight(K)},getBottomView:function(){return this._bottomView},setBottomView:function(r,K){this._12o("bottomView",r),K!=H1&&this.setBottomHeight(K)},getCenterView:function(){return this._centerView},setCenterView:function(r){this._12o("centerView",r)},_12o:function(r,K){var B="_"+r,b=this._view,f=this[B];f!==K&&(f&&(f.getView?O9(f.getView()):O9(f)),(this[B]=K)&&(K.getView?gY(b,K.getView(),1):gY(b,K,1)),this.fp(r,f,K))},onPropertyChanged:function(r){this.iv()},validateImpl:function(){var r=(x=this)._topView,K=x._bottomView,B=x._leftView,b=x._rightView,f=x._centerView,h=x.getWidth(),U=0,a=0,P=h,H=o=x.getHeight(),Y=0,S=0,_=0,e=0,o=(r&&(a=Y=x._topHeight==H1?rN(r):x._topHeight),K&&(H=o-(S=x._bottomHeight==H1?rN(K):x._bottomHeight)),B&&(U=_=x._leftWidth==H1?EY(B):x._leftWidth),b&&(P=h-(e=x._rightWidth==H1?EY(b):x._rightWidth)),B1(0,P-U)),x=B1(0,H-a);r&&L(r,0,0,h,Y),K&&L(K,0,H,h,S),B&&L(B,0,a,_,x),b&&L(b,P,a,e,x),f&&L(f,U,a,o,x)}})}function rt(r){x9(r),r.stopPropagation()}function Kt(r){x9(r)}function Bt(r,K){var B=r.length,b=r[0];if(_1(r)||b&&1!==b.length)return r;for(var f=new Array(B),h=0;h<B;h++)f[h]=r[h];var U=f[b="L"===f[0]?5:7],a=f[1+b],P=f[2+b],H=f[3+b],Y=f[4+b],S=f[5+b],_=K[0],e=K[1],o=K[2],x=K[3],T=K[4],K=K[5];return f[b]=_*U+o*a,f[1+b]=e*U+x*a,f[2+b]=_*P+o*H,f[3+b]=e*P+x*H,f[4+b]=_*Y+o*S+T,f[5+b]=e*Y+x*S+K,f}function bt(r,K){return K===r.substring(0,K.length)}function ft(r){return parseFloat(r)||0}function ht(r,K){K==P1&&(K=new e1),r=(r=r.split(/\s+/)).map(ft),K.set(r[0]||0,r[1]||0,r[2]||0)}function Ut(){CH.apply(this,arguments)}function at(){CH.apply(this,arguments)}function Pt(){CH.apply(this,arguments)}function Ht(){CH.apply(this,arguments),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:"ZeroCurvature",endingEnd:"ZeroCurvature"}}function Yt(){CH.apply(this,arguments)}function St(r){var K=r.substr(r.lastIndexOf(".")+1),B=(r=Y1.beforeLoadURL(r),DL[K]||K);return{postfix:K,url:"url("+r+') format("'+B+'")'}}function _t(r,K){return iL[r.postfix]-iL[K.postfix]}function et(r,K,B){r.x=K.x,r.y=K.e||B,r.z=K.y}function ot(r){r.duration&&(r.startTime=OK()),r.timeId=y9(r.tick,H1,H1,r.interval)}function xt(r){r.details=0,r.timeout=null,r.lastPoint=null}function Tt(B,b){B.getValue&&B.getValue.compType===b||(B.getValue=function(r){var K=m(B,r);return K===P1&&b.properties&&(r=b.properties[r])?r.defaultValue:K},B.getColor=function(r,K){return tt(!0===K?r:B.getValue(r))},B.getValue.compType=b)}function tt(r,K){return K=K?m(r,K):r,C&&C.compGray&&K?Y1.toGrayColor(K):T$&&K?CN(K,T$,t$):K}function pt(r){if(YY(r)){for(var K=new $,B=r.length,b=0;b<B;b+=2)K.add({x:r[b],y:r[b+1]});r=K}return r}function qt(r,K,B){if(K){var b,f,h,U={x:K.x,y:K.y,width:K.width,height:K.height},a=p$(r),P=m(r,"layoutH"),H=m(r,"layoutV"),Y=1,S=1,_=0,e=0,o=1,x=1,T=U.x+a.x*U.width,t=U.y+a.y*U.height;switch(P){case"left":break;case"right":T+=B.width-B.rw;break;case"center":T+=.5*(B.width-B.rw);break;default:(b=m(r,gu)||0)&&(_=Math.abs(e=Math.sin(b)),o=Math.abs(x=Math.cos(b))),"leftright"!==P?(Y+=o*(B.widthScale-1),S+=_*(B.widthScale-1),T*=B.widthScale):(f=m(r,"scaleX")||1,h=m(r,"scaleY")||1,Y+=U.width?o*(B.width-B.rw)/U.width/f:0,S+=U.height?_*(B.width-B.rw)/U.height/h:0,T+=(B.rw-B.width)*Math.min(-a.x*x+a.y*e,-a.x*x-(1-a.y)*e,(1-a.x)*x+a.y*e,(1-a.x)*x-(1-a.y)*e))}switch(H){case"top":break;case"bottom":t+=B.height-B.rh;break;case"center":t+=.5*(B.height-B.rh);break;default:b==H1&&(b=m(r,gu))&&(_=Math.abs(e=Math.sin(b)),o=Math.abs(x=Math.cos(b))),"topbottom"!==H?(Y+=_*(B.heightScale-1),S+=o*(B.heightScale-1),t*=B.heightScale):(f==H1&&(f=m(r,"scaleX")||1,h=m(r,"scaleY")||1),Y+=U.width?_*(B.height-B.rh)/U.width/f:0,S+=U.height?o*(B.height-B.rh)/U.height/h:0,t+=(B.rh-B.height)*Math.min(-a.x*e-a.y*x,-a.x*e+(1-a.y)*x,(1-a.x)*e-a.y*x,(1-a.x)*e+(1-a.y)*x))}return 1===Y&&1===S||(U.width*=Y,U.height*=S,U.width<0&&(U.width=0),U.height<0&&(U.height=0)),U.x=T-a.x*U.width,U.y=t-a.y*U.height,U}}function yt(r){return YY(r)?new $(r):r}function kt(r,K,B,b,f,h,U){var a=C.interactiveInfo,P=r.transform;if(P)return C.save(),C.setTransform(P.a,P.b,P.c,P.d,P.tx,P.ty),a&&a.compInfos.push({comp:r,rect:K,matrix:P.clone(),prefix:nA,refRect:a.refRect}),!0;if(f===P1&&(f=1),h===P1&&(h=1),P=m(r,"clipPercentage"),uY(B,K)&&!b&&1===f&&1===h&&P==P1)return a&&a.compInfos.push({comp:r,rect:K,matrix:a.matrix.clone(),prefix:nA,refRect:a.refRect}),!1;var H=K.x+K.width*(U=U||CA).x,Y=K.y+K.height*U.y,S=B.x+B.width*U.x,U=B.y+B.height*U.y,f=B.width?f*(K.width/B.width):1,h=B.height?h*(K.height/B.height):1;return C.save(),a&&(a.matrix.appendTranslate(H,Y).appendRotate(b).appendScale(f,h).appendTranslate(-S,-U),a.compInfos.push({comp:r,rect:K,matrix:a.matrix.clone(),prefix:nA,refRect:a.refRect})),hN(C,H,Y),UN(C,b||0),aN(C,f,h),hN(C,-S,-U),P!=P1&&(K=dY(B,m(r,"clipDirection"),P),C.beginPath(),C.rect(K.x,K.y,K.width,K.height),C.clip()),!0}function wt(){C.restore()}function vt(r,K,B,b){var f,h,U,a,P,H,Y,S,_,e,o,x,T,t,p,q,y,k,w,A,V,v,z,N,u,j,I,L,J=m(r,Lu,pt),F=m(r,gu),G=p$(r),b=(J&&b.fitSize&&(f=new $,b=qt(r,d=l9(J),b),h=d.x+G.x*d.width,U=d.y+G.y*d.height,a=b.x+G.x*b.width,P=b.y+G.y*b.height,H=d.width?b.width/d.width:1,Y=d.height?b.height/d.height:1,J.each(function(r){f.add({x:a+(r.x-h)*H,y:P+(r.y-U)*Y})}),J=f,r.unionRect=null),m(r,"scaleX")),d=m(r,"scaleY"),s=K===tu,n=H1;!B&&s&&((B=r.unionRect)||(B=l9(J),r.points.func||(r.unionRect=B)),n=B),B&&(s?(n=n||r.unionRect)||(n=l9(J),r.points.func||(r.unionRect=n)):n=B,B=kt(r,B,n,F,b,d,G),F=m(r,"borderPattern"),b=jA(C,F),d=tt(r,"background"),G=g(m(r,"repeatImage"),T$,t$),S=m(r,"gradientPack"),_=m(r,"borderGradientPack"),e=tt(r,"borderColor"),o=m(r,"borderWidth"),x=g(m(r,"borderRepeatImage"),T$,t$),T=m(r,"segments",yt),L=m(r,"gradient"),t=tt(r,"gradientColor"),p=m(r,"border3d"),q=tt(r,"border3dColor"),y=m(r,"border3dAccuracy"),k=m(r,"closePath"),w=m(r,"fillRule")||"nonzero",A=C.lineJoin,V=C.lineCap,C.lineJoin=m(r,"borderJoin")||r9,C.lineCap=m(r,"borderCap")||EH,s?d||G||S?((j=m(r,"fillClipPercentage"))!=P1&&(I=dY(n,m(r,"fillClipDirection"),j),C.save(),C.beginPath(),C.rect(I.x,I.y,I.width,I.height),C.clip()),$N(C,J,T,k),S?gN(C,S,tt,!1,n):G?Ks(C,G,T$,t$,e$,o$,m(r,"repeatImageStretch"),n,m(r,"repeatImageRotation")):rs(C,d,L,t,n),C.fill(w),S&&C.restore(),j!=P1&&C.restore(),b!==C&&$N(b,J,T,k)):$N(b,J,T,k):("roundRect"===K?v=m(r,"cornerRadius"):"polygon"===K?(v=m(r,"polygonSide"),z=m(r,"cornerRadius"),N=m(r,"regular")):"arc"===K&&(v=m(r,"arcFrom"),z=m(r,"arcTo"),N=m(r,"arcClose"),u=m(r,"arcOval")),d||G||S?((j=m(r,"fillClipPercentage"))!=P1&&(I=dY(n,m(r,"fillClipDirection"),j),C.save(),C.beginPath(),C.rect(I.x,I.y,I.width,I.height),C.clip()),EN(C,K,n,v,z,N,u),S?gN(C,S,tt,!1,n):G?Ks(C,G,T$,t$,e$,o$,m(r,"repeatImageStretch"),n,m(r,"repeatImageRotation")):rs(C,d,L,t,n),C.fill(w),S&&C.restore(),j!=P1&&C.restore(),C!==b&&EN(b,K,n,v,z,N,u)):EN(b,K,n,v,z,N,u)),(I=m(r,"borderWidthAbsolute"))&&(C.save(),C.setTransform(1,0,0,1,0,0)),o&&(e||x||_)&&(C.lineWidth=o,_?gN(C,_,tt,!0,n):x?Bs(C,x,T$,t$,e$,o$,m(r,"borderRepeatImageStretch"),n,m(r,"borderRepeatImageRotation")):C.strokeStyle=e,C.stroke(),_&&C.restore(),p&&cN(C,e,q,o,x$,y)),IA(C,F),m(r,"dash")&&0<(G=m(r,"dashWidth")||o)&&(F=m(r,"dashPattern")||QH,b=jA(C,F,m(r,"dashOffset")),L=tt(r,"dashColor")||tt(js),b!==C&&(s?$N(b,J,T,k):EN(b,K,n,v,z,N,u)),C.strokeStyle=L,C.lineWidth=G,C.stroke(),m(r,"dash3d")&&cN(C,L,tt(r,"dash3dColor"),G,x$,m(r,"dash3dAccuracy")),IA(C,F)),I&&C.restore(),K===R&&Ps(C,d,m(r,"depth"),n),C.lineJoin=A,C.lineCap=V,B&&wt())}function zt(r){C=r[0],e$=r[1],o$=r[2],x$=r[3],T$=r[4],t$=r[5]}function Nt(r,K){if("function"!=typeof K&&null!==K)throw new TypeError("Super expression must either be null or a function");r.prototype=A.create(K&&K.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),K&&gA(r,K)}function ut(r){return"Array]"===(r=A.prototype.toString.call(r)).substring(r.length-6)}function jt(r,K,B,b,f,h){K=K||[],B=B||[],b=b||[];try{K.push(r);var U=Function.apply(0,K);return B[B.length]="return "+U,Function.apply(0,B).apply(0,b)}catch(r){return h&&h(r),f}}function It(r){return r}function Lt(r,K){return K}function Jt(r,K,B,b){var f=r?r.path.slice(0):[];K&&f.push(K),this.desc=B,this.name=K,this.path=$A(f),this.getter=(B=f)&&B.length?new Function("o",["return o['",B.join("']['"),"'];"].join("")):It,this.setter=(K=f)&&K.length?new Function("o","v",["return o['",K.join("']['"),"'] = v;"].join("")):Lt,this.isLeaf=b,this.parent=r,this.children=[],this.childMap={}}function Ft(r){var K=[];return r.forEach(function(r){K.push({x:r.x,y:r.y}),K.push({x:r.x+r.width,y:r.y+r.height}),K.push({x:r.x+r.width,y:r.y}),K.push({x:r.x,y:r.y+r.height})}),K}function Gt(r,K){return 0<r.dot(K)}function dt(){this._vertexMap={},this._lineMap={},this._lineList=[]}function st(r,K,B,b,f,h,U){B=[B,f],r[0]===b&&B.reverse(),f=[B[0]._key,B[1]._key].join("|"),(b=r._triangles[f])||(r._triangles[f]=b={}),b[B=[h._key,U._key].join("|")]||(b[B]=[h,U])}function nt(r,K,B){var b=r._planes[B._key];if(!b)for(var f in r._planes)if((f=r._planes[f])._normal.angleTo(B)<.001){b=f;break}b?b._vertices.indexOf(K)<0&&b._vertices.push(K):r._planes[B._key]={_normal:B,_vertices:[K]}}function At(r,K){return 0===K?"0|0|0":(Math.abs(K)===1/0?[r.x,r.y,r.z]:[Math.round(d$.angleTo(r)*K),Math.round(s$.angleTo(r)*K),Math.round(n$.angleTo(r)*K)]).join("|")}function Vt(r){for(var K=r.length,B=0,b=K-1,f=0;f<K;b=f++)B+=r[b].x*r[f].y-r[f].x*r[b].y;return.5*B}function Mt(r){return(r%=h1)<0&&(r+=h1),F<r?h1-r:r}function Rt(r,K){return Mt(r[0]-K[0])+Mt(r[1]-K[1])+Mt(r[2]-K[2])}function lt(r,K,B,b,f,h){K=new i(K.get(B)),h=h.apply(K),r.push({local:K,world:h,type:f,index:B,realIndex:b})}function Ct(r,K){var B=r.x-K.x;return B*B+(r=r.y-K.y)*r}function mt(K,B,r){return{def:K,getter:r?function(r){return 1<WQ.for(r).version?r.getParameter(B):K}:function(r){return r.getParameter(B)},setter:r?function(r,K){1<WQ.for(r).version&&r.pixelStorei(B,K)}:function(r,K){r.pixelStorei(B,K)}}}function Dt(r){return"string"==typeof r?DN(r):r.r!==P1?(_U[0]=r.r,_U[1]=r.g,_U[2]=r.b,_U[3]=r.a,_U):r.red!==P1?(_U[0]=r.red,_U[1]=r.green,_U[2]=r.blue,_U[3]=r.alpha,_U):r}function it(r){return ut(r)?Array.prototype.slice.call(r,0):r}function Zt(r,K,B){this.gl=K,this._record=B||{},this._branches={},this._leafSync={};for(var b=(this._struct=r).children,f=b.length;f--;){var h=b[f],U=h.name;h.isLeaf?(this._leafSync[U]=!1,this._record[U]=it(h.desc.def)):this._record[U]={}}}function gt(r,K){K&&(K.isRenderTarget?K.release():b6(K)&&r.deleteTexture(K))}function Wt(r){for(var K=1;K<arguments.length;K++){var B=arguments[K];r.push(B.x,B.y,B.z)}}function $t(r,K,B,b,f){var h=-b*S1(f),b=b*f1(f);return new e1(r.x+h*B.x+b*K.x,r.y+h*B.y+b*K.y,r.z+h*B.z+b*K.z)}function Xt(r,K,B,b,f,h,U,a,P){P=P||h1;var H=K?r.top_vs:r.bottom_vs;if(H)for(var Y,S,_=K?r.top_uv:r.bottom_uv,e=P/U,o=0;o<U;o++)K?(Y=o*e+a,S=(o+1)*e+a):(S=o*e+a,Y=(o+1)*e+a),Wt(H,$t(B,b,f,h,Y),$t(B,b,f,h,S),B),_&&_.push(.5-.5*S1(Y),.5-.5*f1(Y),.5-.5*S1(S),.5-.5*f1(S),.5,.5)}function ct(B){var b={};return{get:function(r){if(b[r]!==P1)return b[r];var K;switch(r){case"WEBGL_depth_texture":K=B.getExtension("WEBGL_depth_texture")||B.getExtension("MOZ_WEBGL_depth_texture")||B.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":K=B.getExtension("EXT_texture_filter_anisotropic")||B.getExtension("MOZ_EXT_texture_filter_anisotropic")||B.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":K=B.getExtension("WEBGL_compressed_texture_s3tc")||B.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||B.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":K=B.getExtension("WEBGL_compressed_texture_pvrtc")||B.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":K=B.getExtension("WEBGL_compressed_texture_etc1");break;default:K=B.getExtension(r)}return b[r]=K}}}function Ot(K,B,r){var b;function f(r){if("highp"===r){if(0<K.getShaderPrecisionFormat(35633,36338).precision&&0<K.getShaderPrecisionFormat(35632,36338).precision)return"highp";r="mediump"}return"mediump"===r&&0<K.getShaderPrecisionFormat(35633,36337).precision&&0<K.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}r=r||{};var h,U="undefined"!=typeof WebGL2RenderingContext&&K instanceof WebGL2RenderingContext,a=r.precision!==P1?r.precision:"highp",P=((P=f(a))!==a&&(console.warn("WebGL:",a,"not supported, using",P,"instead."),a=P),!0===r.logarithmicDepthBuffer),r=K.getParameter(34930),H=K.getParameter(35660),Y=K.getParameter(3379),S=K.getParameter(34076),_=K.getParameter(34921),e=K.getParameter(36347),o=K.getParameter(36348),x=K.getParameter(36349),T=0<H,t=U||!!B.get("OES_texture_float"),p=(U||!!B.get("OES_element_index_uint"))&&"undefined"!=typeof Uint32Array,q=T&&t,y=U?K.getParameter(36183):0,k=U||!!B.get("EXT_shader_texture_lod"),w=!1;return U?w=!0:(h=B.get("ANGLE_instanced_arrays"))&&(w=!0,K.vertexAttribDivisor=function(r,K){return h.vertexAttribDivisorANGLE(r,K)},K.drawElementsInstanced=function(r,K,B,b,f){return h.drawElementsInstancedANGLE(r,K,B,b,f)},K.drawArraysInstanced=function(r,K,B,b){return h.drawArraysInstancedANGLE(r,K,B,b)}),U?B.get("EXT_color_buffer_float"):(B.get("WEBGL_depth_texture"),B.get("OES_texture_half_float"),B.get("OES_texture_half_float_linear"),B.get("OES_standard_derivatives"),B.get("OES_vertex_array_object")),B.get("OES_texture_float_linear"),B.get("EXT_color_buffer_half_float"),B.get("WEBGL_multisampled_render_to_texture"),{isWebGL2:U,getMaxAnisotropy:function(){if(b!==P1)return b;var r=B.get("EXT_texture_filter_anisotropic");return b=null!==r?K.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:f,precision:a,precisionString:"precision "+a+" float;\nprecision "+a+" int;\n",logarithmicDepthBuffer:P,maxTextures:r,maxVertexTextures:H,maxTextureSize:Y,maxCubemapSize:S,maxAttributes:_,maxVertexUniforms:e,maxVaryings:o,maxFragmentUniforms:x,vertexTextures:T,floatFragmentTextures:t,elementTypeUint:p,floatVertexTextures:q,maxSamples:y,shaderTextureLod:k,instancedArray:w}}function Qt(K,f,r,B){if(B||!r.isWebGL2||"undefined"==typeof WeakMap)return{supportsUbo:!1,setCurrentFrameRenderId:q};var b,h={},B=f.getParameter(35375),U=new WeakMap;return(b=h.scene=new hq(f,0,"scene","Scene")).addUniform("uProjectMatrix",16),b.addUniform("uViewMatrix",16),b.addUniform("uCameraPosition",3),b.addUniform("uTime",1),b.addUniform("toneMappingExposure",1),b.addUniform("uFogColor",4),b.addUniform("uFogDensity",1),b.addUniform("uFogNear",1),b.addUniform("uFogFar",1),b.attachSource(),["pbr","phong"].forEach(function(r){(b=h[r]=new hq(f,1,r,"Material")).addUniform("aoMapIntensity",1),b.addUniform("lightMapIntensity",1),b.addUniform("displacementScale",1),b.addUniform("displacementBias",1),b.addUniform("diffuse",3),b.addUniform("emissive",3),b.addUniform("normalScale",2),b.addUniform("opacity",1),b.addUniform("alphaTest",1),b.addUniform("fresnelIntensity",1),b.addUniform("uUvMatrix",12),b.addUniform("uUv2Matrix",12),"pbr"===r?(b.addUniform("roughness",1),b.addUniform("metalness",1),b.addUniform("transmission",1),b.addUniform("thickness",1),b.addUniform("ior",1),b.addUniform("specularIntensity",1),b.addUniform("rimPower",1),b.addUniform("rimColor",3),b.addUniform("specularColor",3)):(b.addUniform("shininess",1),b.addUniform("refractionRatio",1),b.addUniform("specular",3))}),{supportsUbo:!0,maxBindingPoints:B,setCurrentFrameRenderId:function(r){(r=h.scene).attachSource(),r.uProjectMatrix=K._projectMatrix,r.uViewMatrix=K._viewMatrix,r.uCameraPosition=K._camera?K._camera.p3():K.getEye(),r.uTime=K.__uptime,r.toneMappingExposure=K.getToneMappingExposure(),r.uFogColor=DN(K._fogColor),r.uFogDensity=K._fogDensity,r.uFogNear=K._fogNear,r.uFogFar=K._fogFar},updateAndBind:function(r,K){var B,r=h[r],b=U.get(K);b===P1&&(b=new WeakMap,U.set(K,b)),b.get(r)===P1&&(B=f.getUniformBlockIndex(K,r.name),f.uniformBlockBinding(K,B,r.bindingPointIndex),b.set(r,B))},attachUbo:function(r,K,B){return h[r].attachSource(K,B)}}}function Et(){return cU.length?cU.pop():new Z}function rc(r){cU.push(r)}function Kc(r,K,B){return B&&(B=B[$U+K])!==P1?B:r[K]}function Bc(r,K){if(r)return(r=r.s("matDef"))&&r[$U+K]}function bc(r,K){var B=Et();if(f=r.composedMatrix)return B.copy(f),B;var b,f=!1,h=(K&&(U=r.name)&&(h=K._animationId)&&(h=SB.getAnimationMap()[h])&&(b=h.clip)&&(h=SB.getAnimationTracks()[h.animation][0][U])&&(U=b.datas,f=!0,(b=h[0])!==P1&&(a=U[b]),(b=h[1])!==P1&&(H=U[b]),(b=h[2])!==P1&&(P=U[b])),r.transformData);if(f&&h)return vr(B,h,a,H,P);var U=gU&&K instanceof PP&&K.s("model3dBindings"),a=a||Kc(r,"position",U),P=P||Kc(r,"scale",U),H=(H=H||Kc(r,"quaternion",U))||(H=Kc(r,"euler",U))&&D.eulerArrayToQuaternionArray(H,EU);return B.composeFromArray(a,H,P),B}function fc(r,K){return ZU=r,iU=K instanceof PP?(o1=K,null):(o1=null,K),[ZU,o1,iU]}function hc(r){ZU=r[0],o1=r[1],iU=r[2]}function Uc(r){if(r)return YB(r="string"==typeof r?{type:r}:r)}function ac(r,K){return[r[0]*K,r[1]*K,r[2]*K]}function Pc(r,K,B){return(K=K[r])!==P1?K:B?B[r]:null}function Hc(r){var K=((K=r.s("light.intensity"))==H1?1:K)*Math.PI;return[(r=DN(r.s(cQ)))[0]*K,r[1]*K,r[2]*K]}function Yc(r,K,B,b){if(b!==r._lastHeadlightAmbientIntensity&&(r.hemisphereLight.skyColor=ac(h5.color,1-b),r.ambientLightColor=ac(h5.color,b),r._lastHeadlightAmbientIntensity=b),B!==r._lastLightMask&&(r._lastLightMask=B,b=K._lastLightUploadInfo)){for(var f,h=b.g,U=h.length,a=new Array(U),P=0;P<U;P++)f=h[P],a[P]=!(f<0||32<=f||!(B&1<<f));r.hemisphereLight.enabled=a[0];var b=K._59O,H=K._spots,Y=K._dirs,K=K._87I,S=1;if(U=b.length)for(P=0;P<U;P++)r.pointLights[P].enabled=a[S++];if(U=H.length)for(P=0;P<U;P++)r.spotLights[P].enabled=a[S++];if(U=Y.length)for(P=0;P<U;P++)r.directionalLights[P].enabled=a[S++];if(U=K.length)for(P=0;P<U;P++)r.rectAreaLights[P].enabled=a[S++]}}function Sc(r,A,V,K,B){var b=B?K.cacheShadow:K.cache;if(b.length===K.length&&b.version===(B?K.shadowVersion:K.msVersion)&&b.id===A._id&&V.equals(b.matrix))return b.buffer;var f,h,U,a,P,H,Y,S,_,e,o,x,T,t,p,q,y,k=K.ms,M=B?K.shadow:null,w=(U5.fromArray(r.getData3dUI(A).mat),a5.copy(V).premultiply(U5.getInverse(U5)),(r=a5.getElements())[0]),v=r[4],z=r[8],N=r[12],u=r[1],j=r[5],I=r[9],L=r[13],J=r[2],F=r[6],G=r[10],d=r[14],s=r[3],R=r[7],l=r[11],C=r[15],r=16*K.length;b.buffer&&b.buffer.length===r?delete(y=b.buffer)._bufId:y=new aA(r);for(var n=0,m=r;n<m;n+=16)M&&!M[n>>4]?y[n+0]=y[n+1]=y[n+2]=y[n+3]=y[n+4]=y[n+5]=y[n+6]=y[n+7]=y[n+8]=y[n+9]=y[n+10]=y[n+11]=y[n+12]=y[n+13]=y[n+14]=y[n+15]=0:(f=k[n+0],h=k[n+4],U=k[n+8],a=k[n+12],P=k[n+1],H=k[n+5],Y=k[n+9],S=k[n+13],_=k[n+2],e=k[n+6],o=k[n+10],x=k[n+14],T=k[n+3],t=k[n+7],p=k[n+11],q=k[n+15],y[n+0]=f*w+h*u+U*J+a*s,y[n+4]=f*v+h*j+U*F+a*R,y[n+8]=f*z+h*I+U*G+a*l,y[n+12]=f*N+h*L+U*d+a*C,y[n+1]=P*w+H*u+Y*J+S*s,y[n+5]=P*v+H*j+Y*F+S*R,y[n+9]=P*z+H*I+Y*G+S*l,y[n+13]=P*N+H*L+Y*d+S*C,y[n+2]=_*w+e*u+o*J+x*s,y[n+6]=_*v+e*j+o*F+x*R,y[n+10]=_*z+e*I+o*G+x*l,y[n+14]=_*N+e*L+o*d+x*C,y[n+3]=T*w+t*u+p*J+q*s,y[n+7]=T*v+t*j+p*F+q*R,y[n+11]=T*z+t*I+p*G+q*l,y[n+15]=T*N+t*L+p*d+q*C);return b.length=K.length,b.version=B?K.shadowVersion:K.msVersion,b.id=A._id,b.buffer=y,(r=(r=b.matrix)?r:b.matrix=new Z).fromArray(V.getElements()),y}function _c(r,K,B){B instanceof M.Node&&(q5.fromArray(wA(B,K.getMat(B))),K=B.getAnchor3d(),r.push((new e1).set(0-K.x,0-K.y,0-K.z).applyMatrix4(q5)),r.push((new e1).set(0-K.x,0-K.y,1-K.z).applyMatrix4(q5)),r.push((new e1).set(0-K.x,1-K.y,0-K.z).applyMatrix4(q5)),r.push((new e1).set(0-K.x,1-K.y,1-K.z).applyMatrix4(q5)),r.push((new e1).set(1-K.x,0-K.y,0-K.z).applyMatrix4(q5)),r.push((new e1).set(1-K.x,0-K.y,1-K.z).applyMatrix4(q5)),r.push((new e1).set(1-K.x,1-K.y,0-K.z).applyMatrix4(q5)),r.push((new e1).set(1-K.x,1-K.y,1-K.z).applyMatrix4(q5)))}function ec(r,K,B){var b=r[K];b&&b.releaseTexture(),B?r[K]=B:delete r[K]}function oc(r,K){return r.z!==K.z?K.z-r.z:r.id-K.id}function xc(){var r=new e1;return r.subVectors(aQ,UQ),SQ.subVectors(hQ,UQ),r.cross(SQ).normalize(),r}function Tc(r,K){K._reflecting=!1,r.getRenderState().useProgram(r._prg)}function tc(r,K){var B,b;K=D.roundFloat(K,3),r.speed=K,"once"===r.loop&&(B=r.duration,b=r.start,r.end=0===K?b:(K<0?Math.floor((b-1e-8)/B):Math.ceil((b+1e-8)/B))*B)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);